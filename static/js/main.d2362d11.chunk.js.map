{"version":3,"sources":["styles/styled.ts","actions/schemas.ts","actions/albums.ts","actions/browse.ts","actions/playlists.ts","actions/search.ts","reducers/createReducer.ts","reducers/fetching.ts","reducers/artists.ts","reducers/tracks.ts","reducers/albums.ts","actions/authorization.ts","utils/authorization.ts","reducers/authorization.ts","reducers/playlists.ts","reducers/browse.ts","actions/player.ts","reducers/player.ts","reducers/search.ts","actions/userProfile.ts","reducers/userProfile.ts","reducers/index.ts","styles/effects.ts","components/core/Button.tsx","components/core/Icon.tsx","components/core/Image.tsx","components/core/RoundButton.tsx","components/core/Text.tsx","components/layout/Title.tsx","components/layout/User.tsx","components/layout/Header.tsx","components/layout/Menu.tsx","components/player/Album.tsx","components/player/Audio.tsx","components/player/Controls.tsx","components/player/Slider.tsx","components/player/Playback.tsx","components/player/Volume.tsx","components/player/Player.tsx","components/DefaultRoute.tsx","components/Loader.tsx","components/Fader.tsx","components/withReloader.tsx","components/covers/Covers.tsx","components/covers/CategoryCovers.tsx","components/browse/Categories.tsx","utils/artist.ts","components/covers/AlbumCovers.tsx","components/covers/ArtistCovers.tsx","components/covers/PlaylistCovers.tsx","components/browse/NewReleases.tsx","components/browse/FeaturedPlaylists.tsx","components/browse/Browse.tsx","components/browse/CategoryPlaylists.tsx","components/withLoader.tsx","components/search/Results.tsx","utils/function.ts","components/search/Search.tsx","components/tracks/Cover.tsx","components/tracks/Tracks.tsx","components/tracks/PlaylistTracks.tsx","components/tracks/AlbumTracks.tsx","components/layout/Routes.tsx","components/layout/App.tsx","styles/theme.ts","styles/global.ts","index.tsx","middlewares/fetchMiddleware.ts"],"names":["styledComponents","styled","default","ThemeProvider","css","createGlobalStyle","keyframes","Category","schema","Entity","Categories","categories","items","Artist","Album","artistIds","processStrategy","_ref","artists","tracks","rest","Object","objectWithoutProperties","objectSpread","trackIds","Albums","albums","Track","albumId","_ref2","parent","album","define","ActionType","Playlist","_ref3","map","item","track","Schemas","Playlists","playlists","Results","_ref4","createReducer","initialState","handlers","state","arguments","length","undefined","action","hasOwnProperty","type","startFetching","isFetching","endFetching","mergeArtists","merge","byId","payload","_createReducer","defineProperty","AlbumActionType","AlbumSuccess","PlaylistActionType","PlaylistSuccess","BrowseActionType","NewReleasesSuccess","SearchActionType","SearchSuccess","selectArtists","id","artistId","selectArtist","mergeTracks","tracks_createReducer","selectTrack","trackId","selectAlbum","selectTracks","mergeAlbums","albums_createReducer","AlbumRequest","AlbumFailure","selectIsFetching","selectAlbums","albumIds","URL","concat","process","REGEX","ACCESS_TOKEN","TOKEN_TYPE","EXPIRES_AT","receiveAuthorization","ReceiveAuthorization","isAuthorized","authorization","mergePlaylists","playlists_createReducer","PlaylistRequest","PlaylistFailure","CategoryPlaylistsSuccess","FeaturedPlaylistsSuccess","selectPlaylist","playlistId","playlist","selectPlaylists","playlistIds","PlayerState","Command","categoriesById","categoryPlaylistIds","featuredPlaylistIds","newReleaseIds","browse_createReducer","CategoriesRequest","CategoriesSuccess","CategoriesFailure","CategoryRequest","CategorySuccess","CategoryFailure","CategoryPlaylistsRequest","keys","CategoryPlaylistsFailure","FeaturedPlaylistsRequest","FeaturedPlaylistsFailure","NewReleasesRequest","NewReleasesFailure","browse","selectCategories","values","selectCategory","categoryId","selectCategoryPlaylists","selectFeaturedPlaylists","selectNewReleases","loadCollection","collectionId","dispatch","getState","selectHasAlbum","filter","preview_url","selectAlbumTrackIds","selectHasPlaylist","selectPlaylistTrackIds","LoadCollection","_toggle","selectIsPlaying","isPlaying","Pause","Play","toggle","isLoaded","selectIsLoaded","LoadTrack","loadTrack","trackIndex","playerState","None","duration","currentTime","volume","isMuted","command","player_createReducer","_action$payload","indexOf","TrackLoaded","Playing","Update","Paused","isPaused","Seek","Seeked","Ended","Next","Previous","ChangeVolume","VolumeChanged","selectLoadedTrack","_state$player","player","_state$player2","selectCanToggle","selectCanSeek","selectCanNext","_state$player3","selectCanPrevious","_state$player4","selectTimes","selectVolumeLevels","_state$player5","selectCommand","search_createReducer","SearchRequest","results","_results$Object$keys$","SearchFailure","search","selectAlbumsById","selectArtistsById","sort","x","y","popularity","selectPlaylistsById","UserProfileSuccess","userProfile","selectUserProfile","combineReducers","click","props","theme","background","active","foreground","hover","IconType","Button","button","_templateObject","Icon","className","react_default","a","createElement","Img","img","Image_templateObject","Image","source","_useState","useState","_useState2","slicedToArray","setIsLoaded","src","onLoad","StyedButton","RoundButton_templateObject","dark","darker","StyledIcon","_templateObject2","RoundButton","iconType","Text","span","Text_templateObject","Wrapper","div","Title_templateObject","font","size","large","weight","bold","Title_templateObject2","Title","Title_StyledIcon","Wifi","Link","to","User_templateObject","User_templateObject2","User","display_name","User_Wrapper","User_StyledIcon","Person","header","Header_templateObject","primary","LoginButton","Header_templateObject2","mapDispatch","getAuthorization","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","RequestAuthorization","Promise","resolve","reject","addEventListener","handleStorage","event","key","removeEventListener","location","assign","stop","_x","apply","this","getUserProfile","types","UserProfileRequest","UserProfileFailure","path","connect","useEffect","Header_Wrapper","layout_Title","layout_User","onClick","ul","Menu_templateObject","StyledNavLink","NavLink","Menu_templateObject2","primaryLight","_templateObject3","Menu","Menu_Wrapper","Menu_StyledIcon","ViewModule","Search","Album_templateObject","StyedImage","Album_templateObject2","Infos","Album_templateObject3","_templateObject4","_templateObject5","light","image","name","artist","Album_Wrapper","Album_Title","Album_Artist","trackLoaded","playing","update","elapsed","paused","seeked","volumeChanged","ended","loadedTrack","times","volumeLevels","audio","useRef","currentAudio","current","play","pause","ref","onLoadedMetadata","target","onPlay","onTimeUpdate","onPause","onSeeked","onVolumeChange","onEnded","Controls_templateObject","MainButton","Controls_templateObject2","Controls","canPrevious","onPrevious","canToggle","onToggle","canNext","onNext","Controls_Wrapper","core_RoundButton","disabled","SkipPrevious","PlayArrow","SkipNext","Slider_templateObject","isDisabled","Left","Slider_templateObject2","width","Thumb","Slider_templateObject3","position","Right","Slider_templateObject4","Slider","isDown","setIsDown","_useState3","_useState4","value","setValue","wrapper","thumb","getValue","currentWrapper","currentTHunb","getBoundingClientRect","left","clientWidth","handleMouseMove","pageX","handleMouseUp","document","onChange","canChange","currentValue","Slider_Wrapper","onMouseDown","defaultProps","Playback_templateObject","ProgressTime","Playback_templateObject2","small","StyledSlider","Playback_templateObject3","Playback","canSeek","onSeek","renderTime","seconds","minutes","Math","floor","round","progress","Playback_Wrapper","Volume_templateObject","Volume_templateObject2","Volume","Volume_Wrapper","VolumeOff","VolumeUp","Volume_StyledSlider","Player_templateObject","ThirdWrapper","Player_templateObject2","LeftWrapper","Player_templateObject3","CenterWrapper","Player_templateObject4","RightWrapper","Player_templateObject5","seek","time","previous","changeVolume","Player_Wrapper","player_Album","images","url","player_Controls","player_Playback","player_Volume","player_Audio","DefaultRoute","from","Route","exact","render","Redirect","Loader","Loader_templateObject","isLoading","Fader","Fader_templateObject","withReloader","WrappedComponent","prevIsLoading","setPrevIsLoading","hasLoaded","setHasLoaded","Fragment","components_Loader","components_Fader","CoverType","StyledList","Covers_templateObject","StyledItem","li","Covers_templateObject2","StyledButton","Covers_templateObject3","Round","StyledImge","Covers_templateObject4","Covers_templateObject5","_templateObject6","SubTitle","_templateObject7","Cover","cover","Covers_StyledIcon","Covers_Title","title","subTitle","Covers","covers","Square","withRouter","history","category","icons","getCovers","covers_Covers","push","getCategories","covers_CategoryCovers","joinArtistNames","join","ArtistCovers","owner","getAlbums","covers_AlbumCovers","getPlaylists","PlaylistCovers","Browse_templateObject","Browse_templateObject2","medium","Browse_templateObject3","links","label","match","Browse_Wrapper","Browse_StyledList","link","Browse_StyledNavLink","components_DefaultRoute","component","NewReleases","FeaturedPlaylists","h1","CategoryPlaylists_templateObject","extraExtraLarge","getCategory","getCategoryPlaylists","params","CategoryPlaylists_Title","withLoader","Section","section","Results_templateObject","Header","h2","Results_templateObject2","Artists","Results_Header","covers_ArtistCovers","Results_Albums","Results_Playlists","milliseconds","debounce","callback","handle","arg","clearTimeout","setTimeout","debounced","StyledInput","input","Search_templateObject","extraLarge","query","encoded","encodeURIComponent","setQuery","placeholder","autoFocus","search_Results","Cover_templateObject","StyledImage","Cover_templateObject2","Cover_templateObject3","Cover_templateObject4","Cover_templateObject5","Cover_Wrapper","Cover_Title","Cover_SubTitle","Cover_StyledButton","Tracks_templateObject","Tracks_templateObject2","isHidden","Tracks_templateObject3","Tracks_templateObject4","Tracks_templateObject5","Duration","Tracks_templateObject6","Tracks_StyledButton","Tracks_StyledIcon","MusicNote","MusicOff","renderIcon","Tracks_Infos","Tracks_Title","Tracks_SubTitle","renderArtist","duration_ms","renderDuration","getPlaylist","ownProps","handleToggle","tracks_Cover","tracks_Tracks","getAlbum","Routes_templateObject","Routes","Routes_Wrapper","Browse","CategoryPlaylists","PlaylistTracks","AlbumTracks","App_templateObject","StyledHeader","App_templateObject2","Body","App_templateObject3","StyledPlayer","Player","App_templateObject4","App","BrowserRouter","App_Wrapper","layout_Menu","layout_Routes","normal","darken","global_templateObject","hash","localStorage","date","Date","setSeconds","getSeconds","parseInt","toString","checkRedirection","store","createStore","rootReducer","composeWithDevTools","applyMiddleware","thunkMiddleware","_types","requestType","successType","failureType","tokenType","accessToken","fetch","headers","Authorization","authorizedFetch","then","response","json","ok","normalize","entities","error","parse","now","ReactDOM","global","es","layout_App","getElementById"],"mappings":"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","file":"static/js/main.d2362d11.chunk.js","sourcesContent":["import * as styledComponents from \"styled-components\";\r\nimport { Theme } from \"./theme\";\r\n\r\nconst {\r\n  default: styled,\r\n  css,\r\n  createGlobalStyle,\r\n  keyframes,\r\n  ThemeProvider\r\n} = styledComponents as styledComponents.ThemedStyledComponentsModule<Theme>;\r\n\r\nexport { css, createGlobalStyle, keyframes, ThemeProvider };\r\nexport default styled;\r\n","import { schema } from \"normalizr\";\r\n\r\nconst Category = new schema.Entity(\"categories\");\r\n\r\nconst Categories = new schema.Entity(\"categoryItems\", {\r\n  categories: { items: [Category] }\r\n});\r\n\r\nconst Artist = new schema.Entity(\"artists\");\r\n\r\nconst Album = new schema.Entity(\r\n  \"albums\",\r\n  {\r\n    artistIds: [Artist]\r\n  },\r\n  {\r\n    processStrategy: ({ artists, tracks, ...rest }) => ({\r\n      ...rest,\r\n      artistIds: artists,\r\n      trackIds: tracks ? tracks.items : []\r\n    })\r\n  }\r\n);\r\n\r\nconst Albums = new schema.Entity(\"albumItems\", {\r\n  albums: { items: [Album] }\r\n});\r\n\r\nconst Track = new schema.Entity(\r\n  \"tracks\",\r\n  {\r\n    albumId: Album,\r\n    artistIds: [Artist]\r\n  },\r\n  {\r\n    processStrategy: ({ album, artists, ...rest }, parent) => ({\r\n      ...rest,\r\n      albumId: parent[\"type\"] === \"album\" ? parent : album,\r\n      artistIds: artists\r\n    })\r\n  }\r\n);\r\n\r\nAlbum.define({\r\n  trackIds: [Track]\r\n});\r\n\r\nconst Playlist = new schema.Entity(\r\n  \"playlists\",\r\n  {\r\n    trackIds: [Track]\r\n  },\r\n  {\r\n    processStrategy: ({ tracks, ...rest }) => ({\r\n      ...rest,\r\n      trackIds: tracks.items ? tracks.items.map((item: any) => item.track) : []\r\n    })\r\n  }\r\n);\r\n\r\nconst Playlists = new schema.Entity(\"playlistItems\", {\r\n  playlists: { items: [Playlist] }\r\n});\r\n\r\nconst Results = new schema.Entity(\r\n  \"results\",\r\n  {\r\n    albums: [Album],\r\n    artists: [Artist],\r\n    playlists: [Playlist],\r\n    tracks: [Track]\r\n  },\r\n  {\r\n    processStrategy: ({ albums, artists, playlists, tracks }) => ({\r\n      albums: albums.items,\r\n      artists: artists.items,\r\n      playlists: playlists.items,\r\n      tracks: tracks.items\r\n    })\r\n  }\r\n);\r\n\r\nexport const Schemas = {\r\n  Artist,\r\n  Album,\r\n  Albums,\r\n  Category,\r\n  Categories,\r\n  Track,\r\n  Playlist,\r\n  Playlists,\r\n  Results\r\n};\r\n","import { EntitiesAction, FetchDispatch } from \"./types\";\r\nimport { Schemas } from \"./schemas\";\r\n\r\nexport enum ActionType {\r\n  AlbumRequest = \"ALBUM_REQUEST\",\r\n  AlbumSuccess = \"ALBUM_SUCCESS\",\r\n  AlbumFailure = \"ALBUM_FAILURE\"\r\n}\r\n\r\nexport interface AlbumSuccessAction\r\n  extends EntitiesAction<ActionType.AlbumSuccess> {}\r\n\r\nexport function getAlbum(albumId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.AlbumRequest,\r\n        ActionType.AlbumSuccess,\r\n        ActionType.AlbumFailure\r\n      ],\r\n      path: `albums/${albumId}`,\r\n      schema: Schemas.Album\r\n    });\r\n  };\r\n}\r\n","import { EntitiesAction, FetchDispatch } from \"./types\";\r\nimport { Schemas } from \"./schemas\";\r\n\r\nexport enum ActionType {\r\n  CategoriesRequest = \"CATEGORIES_REQUEST\",\r\n  CategoriesSuccess = \"CATEGORIES_SUCCESS\",\r\n  CategoriesFailure = \"CATEGORIES_FAILURE\",\r\n  CategoryRequest = \"CATEGORY_REQUEST\",\r\n  CategorySuccess = \"CATEGORY_SUCCESS\",\r\n  CategoryFailure = \"CATEGORY_FAILURE\",\r\n  CategoryPlaylistsRequest = \"CATEGORY_PLAYLISTS_REQUEST\",\r\n  CategoryPlaylistsSuccess = \"CATEGORY_PLAYLISTS_SUCCESS\",\r\n  CategoryPlaylistsFailure = \"CATEGORY_PLAYLISTS_FAILURE\",\r\n  FeaturedPlaylistsRequest = \"FEATURED_PLAYLISTS_REQUEST\",\r\n  FeaturedPlaylistsSuccess = \"FEATURED_PLAYLISTS_SUCCESS\",\r\n  FeaturedPlaylistsFailure = \"FEATURED_PLAYLISTS_FAILURE\",\r\n  NewReleasesRequest = \"NEW_RELEASES_REQUEST\",\r\n  NewReleasesSuccess = \"NEW_RELEASES_SUCCESS\",\r\n  NewReleasesFailure = \"NEW_RELEASES_FAILURE\"\r\n}\r\n\r\nexport interface CategoriesSuccessAction\r\n  extends EntitiesAction<ActionType.CategoriesSuccess> {}\r\n\r\nexport function getCategories() {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.CategoriesRequest,\r\n        ActionType.CategoriesSuccess,\r\n        ActionType.CategoriesFailure\r\n      ],\r\n      path: \"browse/categories\",\r\n      schema: Schemas.Categories\r\n    });\r\n  };\r\n}\r\n\r\nexport interface CategorySuccessAction\r\n  extends EntitiesAction<ActionType.CategorySuccess> {}\r\n\r\nexport function getCategory(categoryId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.CategoryRequest,\r\n        ActionType.CategorySuccess,\r\n        ActionType.CategoryFailure\r\n      ],\r\n      path: `browse/categories/${categoryId}`,\r\n      schema: Schemas.Category\r\n    });\r\n  };\r\n}\r\n\r\nexport interface CategoryPlaylistsSuccessAction\r\n  extends EntitiesAction<ActionType.CategoryPlaylistsSuccess> {}\r\n\r\nexport function getCategoryPlaylists(categoryId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.CategoryPlaylistsRequest,\r\n        ActionType.CategoryPlaylistsSuccess,\r\n        ActionType.CategoryPlaylistsFailure\r\n      ],\r\n      path: `browse/categories/${categoryId}/playlists`,\r\n      schema: Schemas.Playlists\r\n    });\r\n  };\r\n}\r\n\r\nexport interface FeaturedPlaylistsSuccessAction\r\n  extends EntitiesAction<ActionType.FeaturedPlaylistsSuccess> {}\r\n\r\nexport function getFeaturedPlaylists() {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.FeaturedPlaylistsRequest,\r\n        ActionType.FeaturedPlaylistsSuccess,\r\n        ActionType.FeaturedPlaylistsFailure\r\n      ],\r\n      path: \"browse/featured-playlists\",\r\n      schema: Schemas.Playlists\r\n    });\r\n  };\r\n}\r\n\r\nexport interface NewReleasesSuccessAction\r\n  extends EntitiesAction<ActionType.NewReleasesSuccess> {}\r\n\r\nexport function getNewReleases() {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.NewReleasesRequest,\r\n        ActionType.NewReleasesSuccess,\r\n        ActionType.NewReleasesFailure\r\n      ],\r\n      path: \"browse/new-releases\",\r\n      schema: Schemas.Albums\r\n    });\r\n  };\r\n}\r\n","import { EntitiesAction, FetchDispatch } from \"./types\";\r\nimport { Schemas } from \"./schemas\";\r\n\r\nexport enum ActionType {\r\n  PlaylistRequest = \"PLAYLIST_REQUEST\",\r\n  PlaylistSuccess = \"PLAYLIST_SUCCESS\",\r\n  PlaylistFailure = \"PLAYLIST_FAILURE\"\r\n}\r\n\r\nexport interface PlaylistSuccessAction\r\n  extends EntitiesAction<ActionType.PlaylistSuccess> {}\r\n\r\nexport function getPlaylist(playlistId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.PlaylistRequest,\r\n        ActionType.PlaylistSuccess,\r\n        ActionType.PlaylistFailure\r\n      ],\r\n      path: `playlists/${playlistId}`,\r\n      schema: Schemas.Playlist\r\n    });\r\n  };\r\n}\r\n","import { EntitiesAction, FetchDispatch } from \"./types\";\r\nimport { Schemas } from \"./schemas\";\r\n\r\nexport enum ActionType {\r\n  SearchRequest = \"SEARCH_REQUEST\",\r\n  SearchSuccess = \"SEARCH_SUCCESS\",\r\n  SearchFailure = \"SEARCH+FAILURE\"\r\n}\r\n\r\nexport interface SearchSuccessAction\r\n  extends EntitiesAction<ActionType.SearchSuccess> {}\r\n\r\nexport function search(query: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    const encoded = encodeURIComponent(query);\r\n    dispatch({\r\n      types: [\r\n        ActionType.SearchRequest,\r\n        ActionType.SearchSuccess,\r\n        ActionType.SearchFailure\r\n      ],\r\n      path: `search?q=${encoded}*&type=album,artist,playlist,track`,\r\n      schema: Schemas.Results\r\n    });\r\n  };\r\n}\r\n","import { Action } from \"redux\";\r\n\r\nexport default function createReducer(initialState: object, handlers: any) {\r\n  return function reducer(state = initialState, action: Action) {\r\n    if (handlers.hasOwnProperty(action.type)) {\r\n      return handlers[action.type](state, action);\r\n    } else {\r\n      return state;\r\n    }\r\n  };\r\n}\r\n","export interface FetchableState {\r\n  isFetching: boolean;\r\n}\r\n\r\nexport const startFetching = <S extends FetchableState>(state: S): S => ({\r\n  ...state,\r\n  isFetching: true\r\n});\r\n\r\nexport const endFetching = <S extends FetchableState>(state: S): S => ({\r\n  ...state,\r\n  isFetching: false\r\n});\r\n\r\nexport const isFetching = <S extends FetchableState>(state: S): boolean =>\r\n  state.isFetching;\r\n","import merge from \"lodash/merge\";\r\nimport { Artist } from \"../types\";\r\nimport { EntitiesAction } from \"../actions/types\";\r\nimport { State as CombinedState } from \".\";\r\nimport createReducer from \"./createReducer\";\r\nimport { ActionType as AlbumActionType } from \"../actions/albums\";\r\nimport { ActionType as PlaylistActionType } from \"../actions/playlists\";\r\nimport { ActionType as BrowseActionType } from \"../actions/browse\";\r\nimport { ActionType as SearchActionType } from \"../actions/search\";\r\n\r\nexport interface State {\r\n  byId: { [id: string]: Artist };\r\n}\r\n\r\nconst initialState: State = {\r\n  byId: {}\r\n};\r\n\r\nfunction mergeArtists(state: State, action: EntitiesAction<any>): State {\r\n  return merge({}, state, { byId: action.payload.artists });\r\n}\r\n\r\nexport default createReducer(initialState, {\r\n  [AlbumActionType.AlbumSuccess]: mergeArtists,\r\n  [PlaylistActionType.PlaylistSuccess]: mergeArtists,\r\n  [BrowseActionType.NewReleasesSuccess]: mergeArtists,\r\n  [SearchActionType.SearchSuccess]: mergeArtists\r\n});\r\n\r\nexport function selectArtist(state: CombinedState, artistId: string): Artist {\r\n  return state.artists.byId[artistId];\r\n}\r\n\r\nexport function selectArtists(\r\n  state: CombinedState,\r\n  artistIds: string[]\r\n): Artist[] {\r\n  return artistIds ? artistIds.map(id => selectArtist(state, id)) : [];\r\n}\r\n","import merge from \"lodash/merge\";\r\nimport { Album, Track } from \"../types\";\r\nimport { EntitiesAction } from \"../actions/types\";\r\nimport { State as CombinedState } from \".\";\r\nimport createReducer from \"./createReducer\";\r\nimport { ActionType as AlbumActionType } from \"../actions/albums\";\r\nimport { ActionType as PlaylistActionType } from \"../actions/playlists\";\r\nimport { ActionType as SearchActionType } from \"../actions/search\";\r\nimport { selectAlbum } from \"./albums\";\r\nimport { selectArtists } from \"./artists\";\r\n\r\nexport interface State {\r\n  byId: { [id: string]: Track };\r\n}\r\n\r\nconst initialState: State = {\r\n  byId: {}\r\n};\r\n\r\nfunction mergeTracks(state: State, action: EntitiesAction<any>): State {\r\n  return merge({}, state, { byId: action.payload.tracks });\r\n}\r\n\r\nexport default createReducer(initialState, {\r\n  [AlbumActionType.AlbumSuccess]: mergeTracks,\r\n  [PlaylistActionType.PlaylistSuccess]: mergeTracks,\r\n  [SearchActionType.SearchSuccess]: mergeTracks\r\n});\r\n\r\nexport function selectTrack(\r\n  state: CombinedState,\r\n  trackId: string,\r\n  album: Album | undefined = undefined\r\n): Track {\r\n  let track = state.tracks.byId[trackId];\r\n\r\n  if (track) {\r\n    track = {\r\n      ...track,\r\n      album: album ? album : selectAlbum(state, track.albumId),\r\n      artists: selectArtists(state, track.artistIds)\r\n    };\r\n  }\r\n\r\n  return track;\r\n}\r\n\r\nexport function selectTracks(\r\n  state: CombinedState,\r\n  trackIds: string[],\r\n  album: Album | undefined = undefined\r\n): Track[] {\r\n  return trackIds ? trackIds.map(id => selectTrack(state, id, album)) : [];\r\n}\r\n","import merge from \"lodash/merge\";\r\nimport { Album } from \"../types\";\r\nimport { EntitiesAction } from \"../actions/types\";\r\nimport { ActionType, AlbumSuccessAction } from \"../actions/albums\";\r\nimport { ActionType as BrowseActionType } from \"../actions/browse\";\r\nimport { ActionType as PlaylistActionType } from \"../actions/playlists\";\r\nimport { ActionType as SearchActionType } from \"../actions/search\";\r\nimport { State as CombinedState } from \".\";\r\nimport createReducer from \"./createReducer\";\r\nimport {\r\n  FetchableState,\r\n  startFetching,\r\n  endFetching,\r\n  isFetching\r\n} from \"./fetching\";\r\nimport { selectArtists } from \"./artists\";\r\nimport { selectTracks } from \"./tracks\";\r\n\r\nexport interface State extends FetchableState {\r\n  byId: { [id: string]: Album };\r\n}\r\n\r\nconst initialState: State = {\r\n  isFetching: false,\r\n  byId: {}\r\n};\r\n\r\nfunction mergeAlbums(state: State, action: EntitiesAction<any>): State {\r\n  return merge({}, state, { byId: action.payload.albums });\r\n}\r\n\r\nexport default createReducer(initialState, {\r\n  [ActionType.AlbumRequest]: startFetching,\r\n  [ActionType.AlbumSuccess]: (\r\n    state: State,\r\n    action: AlbumSuccessAction\r\n  ): State => endFetching(mergeAlbums(state, action)),\r\n  [ActionType.AlbumFailure]: endFetching,\r\n\r\n  [BrowseActionType.NewReleasesSuccess]: mergeAlbums,\r\n  [PlaylistActionType.PlaylistSuccess]: mergeAlbums,\r\n  [SearchActionType.SearchSuccess]: mergeAlbums\r\n});\r\n\r\nexport function selectIsFetching(state: CombinedState): boolean {\r\n  return isFetching(state.albums);\r\n}\r\n\r\nexport function selectHasAlbum(state: CombinedState, albumId: string): boolean {\r\n  return !!state.albums.byId[albumId];\r\n}\r\n\r\nexport function selectAlbum(state: CombinedState, albumId: string): Album {\r\n  let album = state.albums.byId[albumId];\r\n\r\n  if (album) {\r\n    album = {\r\n      ...album,\r\n      artists: selectArtists(state, album.artistIds),\r\n      tracks: selectTracks(state, album.trackIds, album)\r\n    };\r\n  }\r\n\r\n  return album;\r\n}\r\n\r\nexport function selectAlbums(\r\n  state: CombinedState,\r\n  albumIds: string[]\r\n): Album[] {\r\n  return albumIds ? albumIds.map(id => selectAlbum(state, id)) : [];\r\n}\r\n\r\nexport function selectPlayableTrackIds(\r\n  state: CombinedState,\r\n  albumId: string\r\n): string[] {\r\n  const album = state.albums.byId[albumId];\r\n  const tracks = selectTracks(state, album.trackIds);\r\n  return tracks.filter(track => track.preview_url).map(track => track.id);\r\n}\r\n","import { Action, Dispatch } from \"redux\";\r\nimport { authorize } from \"../utils/authorization\";\r\n\r\nexport enum ActionType {\r\n  RequestAuthorization = \"REQUEST_AUTHORIZATION\",\r\n  ReceiveAuthorization = \"RECEIVE_AUTHORIZATION\"\r\n}\r\n\r\nexport interface RequestAuthorizationAction\r\n  extends Action<ActionType.RequestAuthorization> {}\r\n\r\nfunction requestAuthorization(): RequestAuthorizationAction {\r\n  return {\r\n    type: ActionType.RequestAuthorization\r\n  };\r\n}\r\n\r\nexport interface ReceiveAuthorizationAction\r\n  extends Action<ActionType.ReceiveAuthorization> {}\r\n\r\nexport function receiveAuthorization(): ReceiveAuthorizationAction {\r\n  return {\r\n    type: ActionType.ReceiveAuthorization\r\n  };\r\n}\r\n\r\nexport function getAuthorization() {\r\n  return async (\r\n    dispatch: Dispatch<RequestAuthorizationAction | ReceiveAuthorizationAction>\r\n  ) => {\r\n    dispatch(requestAuthorization());\r\n    await authorize();\r\n    dispatch(receiveAuthorization());\r\n  };\r\n}\r\n","import { Dispatch } from \"redux\";\r\nimport { receiveAuthorization } from \"../actions/authorization\";\r\n\r\nconst URL = `https://accounts.spotify.com/authorize?client_id=${\r\n  process.env.REACT_APP_CLIENT_ID\r\n}&response_type=token&redirect_uri=${process.env.REACT_APP_REDIRECT_URI}`;\r\nconst REGEX = /#access_token=(.*?)&token_type=(.*?)&expires_in=(.*)$/;\r\nconst ACCESS_TOKEN = \"token\";\r\nconst TOKEN_TYPE = \"tokenType\";\r\nconst EXPIRES_AT = \"expiresAt\";\r\n\r\nfunction authorize(): Promise<any> {\r\n  return new Promise((resolve, reject) => {\r\n    const handleStorage = (event: StorageEvent) => {\r\n      if (event.key === ACCESS_TOKEN) {\r\n        removeEventListener(\"storage\", handleStorage);\r\n        resolve();\r\n      }\r\n    };\r\n    addEventListener(\"storage\", handleStorage);\r\n    location.assign(URL);\r\n  });\r\n}\r\n\r\nfunction checkRedirection(): void {\r\n  const match = location.hash.match(REGEX);\r\n  if (match) {\r\n    localStorage[ACCESS_TOKEN] = match[1];\r\n    localStorage[TOKEN_TYPE] = match[2];\r\n    const date = new Date();\r\n    date.setSeconds(date.getSeconds() + parseInt(match[3]));\r\n    localStorage[EXPIRES_AT] = date.toString();\r\n  }\r\n}\r\n\r\nfunction initAuthorization(dispatch: Dispatch): void {\r\n  if (\r\n    !!localStorage[ACCESS_TOKEN] &&\r\n    Date.parse(localStorage[EXPIRES_AT]) > Date.now()\r\n  ) {\r\n    dispatch(receiveAuthorization());\r\n  }\r\n}\r\n\r\nfunction authorizedFetch(url: string): Promise<Response> {\r\n  const tokenType = localStorage[TOKEN_TYPE];\r\n  const accessToken = localStorage[ACCESS_TOKEN];\r\n\r\n  return fetch(url, {\r\n    headers: {\r\n      Authorization: `${tokenType} ${accessToken}`\r\n    }\r\n  });\r\n}\r\n\r\nexport { authorize, checkRedirection, initAuthorization, authorizedFetch };\r\n","import {\r\n  ActionType,\r\n  ReceiveAuthorizationAction\r\n} from \"../actions/authorization\";\r\nimport { State as CombinedState } from \".\";\r\nimport createReducer from \"./createReducer\";\r\n\r\nexport interface State {\r\n  isAuthorized: boolean;\r\n}\r\n\r\nconst initialState: State = {\r\n  isAuthorized: false\r\n};\r\n\r\nexport default createReducer(initialState, {\r\n  [ActionType.ReceiveAuthorization]: (\r\n    state: State,\r\n    action: ReceiveAuthorizationAction\r\n  ) => ({\r\n    ...state,\r\n    isAuthorized: true\r\n  })\r\n});\r\n\r\nexport function isAuthorized(state: CombinedState): boolean {\r\n  return !!state.authorization.isAuthorized;\r\n}\r\n","import merge from \"lodash/merge\";\r\nimport { Playlist } from \"../types\";\r\nimport { EntitiesAction } from \"../actions/types\";\r\nimport { ActionType, PlaylistSuccessAction } from \"../actions/playlists\";\r\nimport { ActionType as BrowseActionType } from \"../actions/browse\";\r\nimport { ActionType as SearchActionType } from \"../actions/search\";\r\nimport { State as CombinedState } from \".\";\r\nimport createReducer from \"./createReducer\";\r\nimport {\r\n  FetchableState,\r\n  startFetching,\r\n  endFetching,\r\n  isFetching\r\n} from \"./fetching\";\r\nimport { selectTracks } from \"./tracks\";\r\n\r\nexport interface State extends FetchableState {\r\n  byId: { [id: string]: Playlist };\r\n}\r\n\r\nconst initialState: State = {\r\n  isFetching: false,\r\n  byId: {}\r\n};\r\n\r\nfunction mergePlaylists(state: State, action: EntitiesAction<any>): State {\r\n  return merge({}, state, { byId: action.payload.playlists });\r\n}\r\n\r\nexport default createReducer(initialState, {\r\n  [ActionType.PlaylistRequest]: startFetching,\r\n  [ActionType.PlaylistSuccess]: (\r\n    state: State,\r\n    action: PlaylistSuccessAction\r\n  ): State => endFetching(mergePlaylists(state, action)),\r\n  [ActionType.PlaylistFailure]: endFetching,\r\n\r\n  [BrowseActionType.CategoryPlaylistsSuccess]: mergePlaylists,\r\n  [BrowseActionType.FeaturedPlaylistsSuccess]: mergePlaylists,\r\n  [SearchActionType.SearchSuccess]: mergePlaylists\r\n});\r\n\r\nexport function selectIsFetching(state: CombinedState): boolean {\r\n  return isFetching(state.playlists);\r\n}\r\n\r\nexport function selectHasPlaylist(\r\n  state: CombinedState,\r\n  playlistId: string\r\n): boolean {\r\n  return !!state.playlists.byId[playlistId];\r\n}\r\n\r\nexport function selectPlaylist(\r\n  state: CombinedState,\r\n  playlistId: string\r\n): Playlist {\r\n  let playlist = state.playlists.byId[playlistId];\r\n\r\n  if (playlist) {\r\n    playlist = { ...playlist, tracks: selectTracks(state, playlist.trackIds) };\r\n  }\r\n\r\n  return playlist;\r\n}\r\n\r\nexport function selectPlaylists(\r\n  state: CombinedState,\r\n  playlistIds: string[]\r\n): Playlist[] {\r\n  return playlistIds ? playlistIds.map(id => selectPlaylist(state, id)) : [];\r\n}\r\n\r\nexport function selectPlayableTrackIds(\r\n  state: CombinedState,\r\n  playlistId: string\r\n): string[] {\r\n  const playlist = state.playlists.byId[playlistId];\r\n  const tracks = selectTracks(state, playlist.trackIds);\r\n  return tracks.filter(track => track.preview_url).map(track => track.id);\r\n}\r\n","import { Album, Category, Playlist } from \"../types\";\r\nimport {\r\n  ActionType,\r\n  CategorySuccessAction,\r\n  CategoriesSuccessAction,\r\n  NewReleasesSuccessAction,\r\n  CategoryPlaylistsSuccessAction,\r\n  FeaturedPlaylistsSuccessAction\r\n} from \"../actions/browse\";\r\nimport { State as CombinedState } from \".\";\r\nimport createReducer from \"./createReducer\";\r\nimport {\r\n  FetchableState,\r\n  startFetching,\r\n  endFetching,\r\n  isFetching\r\n} from \"./fetching\";\r\nimport { selectPlaylists } from \"./playlists\";\r\nimport { selectAlbums } from \"./albums\";\r\n\r\nexport interface State extends FetchableState {\r\n  categoriesById: { [id: string]: Category };\r\n  categoryPlaylistIds: string[];\r\n  featuredPlaylistIds: string[];\r\n  newReleaseIds: string[];\r\n}\r\n\r\nconst initialState: State = {\r\n  isFetching: false,\r\n  categoriesById: {},\r\n  categoryPlaylistIds: [],\r\n  featuredPlaylistIds: [],\r\n  newReleaseIds: []\r\n};\r\n\r\nexport default createReducer(initialState, {\r\n  [ActionType.CategoriesRequest]: startFetching,\r\n  [ActionType.CategoriesSuccess]: (\r\n    state: State,\r\n    action: CategoriesSuccessAction\r\n  ): State =>\r\n    endFetching({\r\n      ...state,\r\n      categoriesById: action.payload.categories\r\n    }),\r\n  [ActionType.CategoriesFailure]: endFetching,\r\n\r\n  [ActionType.CategoryRequest]: startFetching,\r\n  [ActionType.CategorySuccess]: (\r\n    state: State,\r\n    action: CategorySuccessAction\r\n  ): State =>\r\n    endFetching({\r\n      ...state,\r\n      categoriesById: action.payload.categories\r\n    }),\r\n  [ActionType.CategoryFailure]: endFetching,\r\n\r\n  [ActionType.CategoryPlaylistsRequest]: startFetching,\r\n  [ActionType.CategoryPlaylistsSuccess]: (\r\n    state: State,\r\n    action: CategoryPlaylistsSuccessAction\r\n  ): State =>\r\n    endFetching({\r\n      ...state,\r\n      categoryPlaylistIds: Object.keys(action.payload.playlists)\r\n    }),\r\n  [ActionType.CategoryPlaylistsFailure]: endFetching,\r\n\r\n  [ActionType.FeaturedPlaylistsRequest]: startFetching,\r\n  [ActionType.FeaturedPlaylistsSuccess]: (\r\n    state: State,\r\n    action: FeaturedPlaylistsSuccessAction\r\n  ): State =>\r\n    endFetching({\r\n      ...state,\r\n      featuredPlaylistIds: Object.keys(action.payload.playlists)\r\n    }),\r\n  [ActionType.FeaturedPlaylistsFailure]: endFetching,\r\n\r\n  [ActionType.NewReleasesRequest]: startFetching,\r\n  [ActionType.NewReleasesSuccess]: (\r\n    state: State,\r\n    action: NewReleasesSuccessAction\r\n  ): State =>\r\n    endFetching({\r\n      ...state,\r\n      newReleaseIds: Object.keys(action.payload.albums)\r\n    }),\r\n  [ActionType.NewReleasesFailure]: endFetching\r\n});\r\n\r\nexport function selectIsFetching(state: CombinedState): boolean {\r\n  return isFetching(state.browse);\r\n}\r\n\r\nexport function selectCategories(state: CombinedState): Category[] {\r\n  return Object.values(state.browse.categoriesById);\r\n}\r\n\r\nexport function selectCategory(\r\n  state: CombinedState,\r\n  categoryId: string\r\n): Category | undefined {\r\n  return state.browse.categoriesById[categoryId];\r\n}\r\n\r\nexport function selectCategoryPlaylists(state: CombinedState): Playlist[] {\r\n  return selectPlaylists(state, state.browse.categoryPlaylistIds);\r\n}\r\n\r\nexport function selectFeaturedPlaylists(state: CombinedState): Playlist[] {\r\n  return selectPlaylists(state, state.browse.featuredPlaylistIds);\r\n}\r\n\r\nexport function selectNewReleases(state: CombinedState): Album[] {\r\n  return selectAlbums(state, state.browse.newReleaseIds);\r\n}\r\n","import { Dispatch } from \"redux\";\r\nimport { PayloadAction } from \"./types\";\r\nimport { State } from \"../reducers\";\r\nimport { selectIsPlaying, selectIsLoaded } from \"../reducers/player\";\r\nimport {\r\n  selectHasAlbum,\r\n  selectPlayableTrackIds as selectAlbumTrackIds\r\n} from \"../reducers/albums\";\r\nimport {\r\n  selectHasPlaylist,\r\n  selectPlayableTrackIds as selectPlaylistTrackIds\r\n} from \"../reducers/playlists\";\r\n\r\nexport enum ActionType {\r\n  LoadCollection = \"LOAD_COLLECTION\",\r\n  LoadTrack = \"LOAD_TRACK\",\r\n  TrackLoaded = \"TRACK_LOADED\",\r\n  Play = \"PLAY\",\r\n  Playing = \"PLAYING\",\r\n  Update = \"UPDATE\",\r\n  Pause = \"PAUSE\",\r\n  Paused = \"PAUSED\",\r\n  Seek = \"SEEK\",\r\n  Seeked = \"SEEKED\",\r\n  ChangeVolume = \"CHANGE_VOLUME\",\r\n  VolumeChanged = \"VOLUME_CHANGED\",\r\n  Ended = \"ENDED\",\r\n  Next = \"NEXT\",\r\n  Previous = \"PREVIOUS\"\r\n}\r\n\r\nexport interface LoadCollectionAction\r\n  extends PayloadAction<\r\n    ActionType.LoadCollection,\r\n    { collectionId: string; trackIds: string[]; trackId?: string }\r\n  > {}\r\n\r\nexport function loadCollection(collectionId: string, trackId?: string) {\r\n  return (dispatch: Dispatch<LoadCollectionAction>, getState: () => State) => {\r\n    const state = getState();\r\n    let trackIds = selectHasAlbum(state, collectionId)\r\n      ? selectAlbumTrackIds(state, collectionId)\r\n      : selectHasPlaylist(state, collectionId)\r\n      ? selectPlaylistTrackIds(state, collectionId)\r\n      : [];\r\n    if (trackIds.length) {\r\n      dispatch({\r\n        type: ActionType.LoadCollection,\r\n        payload: {\r\n          collectionId: collectionId,\r\n          trackIds,\r\n          trackId\r\n        }\r\n      });\r\n    }\r\n  };\r\n}\r\n\r\nexport interface LoadTrackAction\r\n  extends PayloadAction<ActionType.LoadTrack, { trackId: string }> {}\r\n\r\nexport function loadTrack(trackId: string) {\r\n  return (dispatch: Dispatch<LoadTrackAction>) => {\r\n    dispatch({\r\n      type: ActionType.LoadTrack,\r\n      payload: {\r\n        trackId\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\nexport interface TrackLoadedAction\r\n  extends PayloadAction<ActionType.TrackLoaded, number> {}\r\n\r\nexport function trackLoaded(duration: number) {\r\n  return (dispatch: Dispatch<TrackLoadedAction>) => {\r\n    dispatch({\r\n      type: ActionType.TrackLoaded,\r\n      payload: duration\r\n    });\r\n  };\r\n}\r\n\r\nfunction _toggle(dispatch: Dispatch, getState: () => State) {\r\n  const state = getState();\r\n  const isPlaying = selectIsPlaying(state);\r\n  dispatch({\r\n    type: isPlaying() ? ActionType.Pause : ActionType.Play\r\n  });\r\n}\r\n\r\nexport function toggle(collectionId?: string, trackId?: string) {\r\n  return (dispatch: Dispatch, getState: () => State) => {\r\n    const state = getState();\r\n    const isLoaded = selectIsLoaded(state);\r\n    if (collectionId) {\r\n      if (!isLoaded(collectionId)) {\r\n        loadCollection(collectionId, trackId)(dispatch, getState);\r\n      } else if (trackId && !isLoaded(trackId)) {\r\n        loadTrack(trackId)(dispatch);\r\n      } else {\r\n        _toggle(dispatch, getState);\r\n      }\r\n    } else {\r\n      _toggle(dispatch, getState);\r\n    }\r\n  };\r\n}\r\n\r\nexport function playing() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.Playing\r\n    });\r\n  };\r\n}\r\n\r\nexport interface UpdateAction\r\n  extends PayloadAction<ActionType.Update, number> {}\r\n\r\nexport function update(elapsed: number) {\r\n  return (dispatch: Dispatch<UpdateAction>) => {\r\n    dispatch({\r\n      type: ActionType.Update,\r\n      payload: elapsed\r\n    });\r\n  };\r\n}\r\n\r\nexport function paused() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.Paused\r\n    });\r\n  };\r\n}\r\n\r\nexport interface SeekAction extends PayloadAction<ActionType.Seek, number> {}\r\n\r\nexport function seek(time: number) {\r\n  return (dispatch: Dispatch<SeekAction>) => {\r\n    dispatch({\r\n      type: ActionType.Seek,\r\n      payload: time\r\n    });\r\n  };\r\n}\r\n\r\nexport function seeked() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.Seeked\r\n    });\r\n  };\r\n}\r\n\r\nexport function ended() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({ type: ActionType.Ended });\r\n  };\r\n}\r\n\r\nexport function next() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({ type: ActionType.Next });\r\n  };\r\n}\r\n\r\nexport function previous() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({ type: ActionType.Previous });\r\n  };\r\n}\r\n\r\nexport interface ChangeVolumeAction\r\n  extends PayloadAction<\r\n    ActionType.ChangeVolume,\r\n    { volume: number; isMuted: boolean }\r\n  > {}\r\n\r\nexport function changeVolume(volume: number, isMuted: boolean) {\r\n  return (dispatch: Dispatch<ChangeVolumeAction>) => {\r\n    dispatch({\r\n      type: ActionType.ChangeVolume,\r\n      payload: {\r\n        volume,\r\n        isMuted\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\nexport function volumeChanged() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.VolumeChanged\r\n    });\r\n  };\r\n}\r\n","import { Track } from \"../types\";\r\nimport {\r\n  ActionType,\r\n  LoadCollectionAction,\r\n  LoadTrackAction,\r\n  TrackLoadedAction,\r\n  UpdateAction,\r\n  SeekAction,\r\n  ChangeVolumeAction\r\n} from \"../actions/player\";\r\nimport { State as CombinedState } from \".\";\r\nimport createReducer from \"./createReducer\";\r\nimport { selectTrack } from \"./tracks\";\r\n\r\nenum PlayerState {\r\n  None = \"NONE\",\r\n  isPlaying = \"IS_PLAYING\",\r\n  isPaused = \"IS_PAUSED\"\r\n}\r\n\r\nexport enum Command {\r\n  None = \"NONE\",\r\n  Play = \"PLAY\",\r\n  Pause = \"PAUSE\",\r\n  Seek = \"SEEK\",\r\n  ChangeVolume = \"CHANGE_VOLUME\"\r\n}\r\n\r\nexport interface State {\r\n  collectionId?: string;\r\n  trackIds: string[];\r\n  trackIndex: number;\r\n  playerState: PlayerState;\r\n  duration: number;\r\n  currentTime: number;\r\n  volume: number;\r\n  isMuted: boolean;\r\n  command: Command;\r\n}\r\n\r\nconst initialState: State = {\r\n  trackIds: [],\r\n  trackIndex: 0,\r\n  playerState: PlayerState.None,\r\n  duration: 0,\r\n  currentTime: 0,\r\n  volume: 1,\r\n  isMuted: false,\r\n  command: Command.None\r\n};\r\n\r\nexport default createReducer(initialState, {\r\n  [ActionType.LoadCollection]: (\r\n    state: State,\r\n    action: LoadCollectionAction\r\n  ): State => {\r\n    const { collectionId, trackIds, trackId } = action.payload;\r\n    return {\r\n      ...state,\r\n      collectionId: collectionId,\r\n      trackIds: trackIds,\r\n      trackIndex: trackId ? trackIds.indexOf(trackId) : 0,\r\n      command: Command.Play\r\n    };\r\n  },\r\n  [ActionType.LoadTrack]: (state: State, action: LoadTrackAction) => ({\r\n    ...state,\r\n    trackIndex: state.trackIds.indexOf(action.payload.trackId),\r\n    command: Command.Play\r\n  }),\r\n  [ActionType.TrackLoaded]: (\r\n    state: State,\r\n    action: TrackLoadedAction\r\n  ): State => ({\r\n    ...state,\r\n    duration: action.payload\r\n  }),\r\n  [ActionType.Playing]: (state: State): State => ({\r\n    ...state,\r\n    playerState: PlayerState.isPlaying,\r\n    command: Command.None\r\n  }),\r\n  [ActionType.Update]: (state: State, action: UpdateAction): State => ({\r\n    ...state,\r\n    currentTime: action.payload,\r\n    command: Command.None\r\n  }),\r\n  [ActionType.Play]: (state: State): State => ({\r\n    ...state,\r\n    command: Command.Play\r\n  }),\r\n  [ActionType.Pause]: (state: State): State => ({\r\n    ...state,\r\n    command: Command.Pause\r\n  }),\r\n  [ActionType.Paused]: (state: State): State => ({\r\n    ...state,\r\n    playerState: PlayerState.isPaused,\r\n    command: Command.None\r\n  }),\r\n  [ActionType.Seek]: (state: State, action: SeekAction): State => ({\r\n    ...state,\r\n    currentTime: action.payload,\r\n    command: Command.Seek\r\n  }),\r\n  [ActionType.Seeked]: (state: State): State => ({\r\n    ...state,\r\n    command: Command.None\r\n  }),\r\n  [ActionType.Ended]: (state: State): State => {\r\n    const { trackIndex, trackIds } = state;\r\n    if (trackIndex === trackIds.length - 1) {\r\n      return { ...state };\r\n    }\r\n    return {\r\n      ...state,\r\n      trackIndex: trackIndex + 1,\r\n      command: Command.Play\r\n    };\r\n  },\r\n  [ActionType.Next]: (state: State): State => ({\r\n    ...state,\r\n    trackIndex: state.trackIndex + 1,\r\n    command: Command.Play\r\n  }),\r\n  [ActionType.Previous]: (state: State): State => ({\r\n    ...state,\r\n    trackIndex: state.trackIndex - 1,\r\n    command: Command.Play\r\n  }),\r\n  [ActionType.ChangeVolume]: (\r\n    state: State,\r\n    action: ChangeVolumeAction\r\n  ): State => ({\r\n    ...state,\r\n    ...action.payload,\r\n    command: Command.ChangeVolume\r\n  }),\r\n  [ActionType.VolumeChanged]: (state: State): State => ({\r\n    ...state,\r\n    command: Command.None\r\n  })\r\n});\r\n\r\nexport function selectLoadedTrack(state: CombinedState): Track | undefined {\r\n  const { trackIds, trackIndex } = state.player;\r\n\r\n  if (trackIds) {\r\n    return selectTrack(state, trackIds[trackIndex]);\r\n  }\r\n}\r\n\r\nexport function selectIsLoaded(state: CombinedState) {\r\n  const { collectionId, trackIds, trackIndex } = state.player;\r\n  return (id: string) =>\r\n    collectionId === id || (!!trackIds.length && trackIds[trackIndex] === id);\r\n}\r\n\r\nexport function selectIsPlaying(state: CombinedState) {\r\n  const { playerState } = state.player;\r\n  return (id?: string) =>\r\n    (!id || selectIsLoaded(state)(id)) && playerState === PlayerState.isPlaying;\r\n}\r\n\r\nexport function selectCanToggle(state: CombinedState) {\r\n  return state.player.playerState !== PlayerState.None;\r\n}\r\n\r\nexport function selectCanSeek(state: CombinedState) {\r\n  return state.player.playerState !== PlayerState.None;\r\n}\r\n\r\nexport function selectCanNext(state: CombinedState) {\r\n  const { trackIds, trackIndex } = state.player;\r\n  return trackIds.length > 1 && trackIndex < trackIds.length - 1;\r\n}\r\n\r\nexport function selectCanPrevious(state: CombinedState) {\r\n  const { trackIds, trackIndex } = state.player;\r\n  return trackIds.length > 1 && trackIndex > 0;\r\n}\r\n\r\nexport interface Times {\r\n  duration: number;\r\n  currentTime: number;\r\n}\r\n\r\nexport function selectTimes(state: CombinedState): Times {\r\n  const { player } = state;\r\n\r\n  return {\r\n    duration: player.duration,\r\n    currentTime: player.currentTime\r\n  };\r\n}\r\n\r\nexport interface VolumeLevels {\r\n  volume: number;\r\n  isMuted: boolean;\r\n}\r\n\r\nexport function selectVolumeLevels(state: CombinedState): VolumeLevels {\r\n  const {\r\n    player: { volume, isMuted }\r\n  } = state;\r\n\r\n  return {\r\n    volume,\r\n    isMuted\r\n  };\r\n}\r\n\r\nexport function selectCommand(state: CombinedState): Command {\r\n  return state.player.command;\r\n}\r\n","import { ActionType, SearchSuccessAction } from \"../actions/search\";\r\nimport { Album, Artist, Playlist } from \"../types\";\r\nimport { State as CombinedState } from \".\";\r\nimport createReducer from \"./createReducer\";\r\nimport {\r\n  FetchableState,\r\n  startFetching,\r\n  endFetching,\r\n  isFetching\r\n} from \"./fetching\";\r\nimport { selectAlbums as selectAlbumsById } from \"./albums\";\r\nimport { selectArtists as selectArtistsById } from \"./artists\";\r\nimport { selectPlaylists as selectPlaylistsById } from \"./playlists\";\r\n\r\nexport interface State extends FetchableState {\r\n  albumIds: string[];\r\n  artistIds: string[];\r\n  playlistIds: string[];\r\n  trackIds: string[];\r\n}\r\n\r\nconst initialState: State = {\r\n  isFetching: false,\r\n  albumIds: [],\r\n  artistIds: [],\r\n  playlistIds: [],\r\n  trackIds: []\r\n};\r\n\r\nexport default createReducer(initialState, {\r\n  [ActionType.SearchRequest]: startFetching,\r\n  [ActionType.SearchSuccess]: (state: State, action: SearchSuccessAction) => {\r\n    const { results } = action.payload;\r\n    const { albums, artists, playlists, tracks } = results[\r\n      Object.keys(results)[0]\r\n    ];\r\n    return endFetching({\r\n      ...state,\r\n      albumIds: albums,\r\n      artistIds: artists,\r\n      playlistIds: playlists,\r\n      trackIds: tracks\r\n    });\r\n  },\r\n  [ActionType.SearchFailure]: endFetching\r\n});\r\n\r\nexport function selectIsFetching(state: CombinedState): boolean {\r\n  return isFetching(state.search);\r\n}\r\n\r\nexport function selectAlbums(state: CombinedState): Album[] {\r\n  return selectAlbumsById(state, state.search.albumIds);\r\n}\r\n\r\nexport function selectArtists(state: CombinedState): Artist[] {\r\n  return selectArtistsById(state, state.search.artistIds).sort(\r\n    (x, y) => y.popularity - x.popularity\r\n  );\r\n}\r\n\r\nexport function selectPlaylists(state: CombinedState): Playlist[] {\r\n  return selectPlaylistsById(state, state.search.playlistIds);\r\n}\r\n","import { UserProfile } from \"../types\";\r\nimport { FetchDispatch, PayloadAction } from \"./types\";\r\n\r\nexport enum ActionType {\r\n  UserProfileRequest = \"USER_PROFILE_REQUEST\",\r\n  UserProfileSuccess = \"USER_PROFILE_SUCCESS\",\r\n  UserProfileFailure = \"USER_PROFILE_FAILURE\"\r\n}\r\n\r\nexport interface UserProfileSuccessAction\r\n  extends PayloadAction<ActionType.UserProfileSuccess, UserProfile> {}\r\n\r\nexport function getUserProfile() {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.UserProfileRequest,\r\n        ActionType.UserProfileSuccess,\r\n        ActionType.UserProfileFailure\r\n      ],\r\n      path: \"me\"\r\n    });\r\n  };\r\n}\r\n","import { UserProfile } from \"../types\";\r\nimport { ActionType, UserProfileSuccessAction } from \"../actions/userProfile\";\r\nimport { State as CombinedState } from \".\";\r\nimport createReducer from \"./createReducer\";\r\n\r\nexport interface State {\r\n  userProfile?: UserProfile;\r\n}\r\n\r\nconst initialState: State = {};\r\n\r\nexport default createReducer(initialState, {\r\n  [ActionType.UserProfileSuccess]: (\r\n    state: State,\r\n    action: UserProfileSuccessAction\r\n  ) => ({\r\n    ...state,\r\n    userProfile: action.payload\r\n  })\r\n});\r\n\r\nexport function selectUserProfile(\r\n  state: CombinedState\r\n): UserProfile | undefined {\r\n  return state.userProfile.userProfile;\r\n}\r\n","import { combineReducers } from \"redux\";\r\nimport albums, { State as AlbumsState } from \"./albums\";\r\nimport artists, { State as ArtistsState } from \"./artists\";\r\nimport authorization, { State as AuthorizationState } from \"./authorization\";\r\nimport browse, { State as BrowseState } from \"./browse\";\r\nimport player, { State as PlayerState } from \"./player\";\r\nimport playlists, { State as PlaylistsState } from \"./playlists\";\r\nimport tracks, { State as TracksState } from \"./tracks\";\r\nimport search, { State as SearchState } from \"./search\";\r\nimport userProfile, { State as UserProfileState } from \"./userProfile\";\r\n\r\nexport interface State {\r\n  albums: AlbumsState;\r\n  artists: ArtistsState;\r\n  authorization: AuthorizationState;\r\n  browse: BrowseState;\r\n  player: PlayerState;\r\n  playlists: PlaylistsState;\r\n  tracks: TracksState;\r\n  search: SearchState;\r\n  userProfile: UserProfileState;\r\n}\r\n\r\nexport default combineReducers<State>({\r\n  albums,\r\n  artists,\r\n  authorization,\r\n  browse,\r\n  player,\r\n  playlists,\r\n  tracks,\r\n  search,\r\n  userProfile\r\n});\r\n","const click = (props: any) => `\r\n  overflow: hidden;\r\n  position relative;\r\n  \r\n  &::before, &::after {\r\n    content: \"\";\r\n    height: 100%;\r\n    left: 0;\r\n    position: absolute;\r\n    top: 0;\r\n    width: 100%;\r\n  }\r\n\r\n  &::after {\r\n    background: ${props.theme.background.active};\r\n    opacity: 0;\r\n    transition: opacity .2s;\r\n  }\r\n  \r\n  &:not(:disabled):hover {\r\n    color: ${props.theme.foreground.default};\r\n  }\r\n\r\n  &:not(:disabled):hover::before {\r\n    background: ${props.theme.background.hover};\r\n  }\r\n\r\n  &:not(:disabled):active::after {\r\n    opacity: 1;\r\n    transition: 0s;\r\n  }\r\n`;\r\n\r\nexport { click };\r\n","import styled from \"styled-components\";\r\nimport { click } from \"../../styles/effects\";\r\n\r\nconst Button = styled.button`\r\n  ${click}\r\n`;\r\n\r\nexport default Button;\r\n","import React from \"react\";\r\n\r\nexport enum IconType {\r\n  MusicNote = \"music_note\",\r\n  MusicOff = \"music_off\",\r\n  Pause = \"pause\",\r\n  Person = \"person\",\r\n  PlayArrow = \"play_arrow\",\r\n  Refresh = \"refresh\",\r\n  Search = \"search\",\r\n  SkipNext = \"skip_next\",\r\n  SkipPrevious = \"skip_previous\",\r\n  ViewModule = \"view_module\",\r\n  VolumeOff = \"volume_off\",\r\n  VolumeUp = \"volume_up\",\r\n  Wifi = \"wifi\"\r\n}\r\n\r\ninterface Props {\r\n  className?: string;\r\n  type: IconType;\r\n}\r\n\r\nfunction Icon({ className, type }: Props) {\r\n  return <i className={`material-icons ${className}`}>{type}</i>;\r\n}\r\n\r\nexport default Icon;\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Img = styled.img<{ isLoaded: boolean }>`\r\n  height: 100%;\r\n  object-fit: cover;\r\n  opacity: ${props => (props.isLoaded ? \"1\" : \"0\")}\r\n  width: 100%;\r\n  transition: opacity .2s;\r\n`;\r\n\r\ninterface Props {\r\n  className?: string;\r\n  source: string;\r\n}\r\n\r\nfunction Image({ className, source }: Props) {\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n\r\n  function handleLoad() {\r\n    setIsLoaded(true);\r\n  }\r\n\r\n  return (\r\n    <Img\r\n      className={className}\r\n      src={source}\r\n      onLoad={handleLoad}\r\n      isLoaded={isLoaded}\r\n    />\r\n  );\r\n}\r\n\r\nexport default Image;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Button, Icon, IconType } from \".\";\r\n\r\nconst StyedButton = styled(Button)`\r\n  border-radius: 50%;\r\n  color: ${props => props.theme.foreground.dark};\r\n  display: flex;\r\n  margin: 5px 10px;\r\n  padding: 5px;\r\n\r\n  &:disabled {\r\n    color: ${props => props.theme.foreground.darker};\r\n  }\r\n`;\r\n\r\nconst StyledIcon = styled(Icon)`\r\n  font-size: 25px;\r\n`;\r\n\r\ninterface Props extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n  iconType: IconType;\r\n}\r\n\r\nfunction RoundButton({ iconType: iconType, ...rest }: Props) {\r\n  return (\r\n    <StyedButton {...rest}>\r\n      <StyledIcon type={iconType} />\r\n    </StyedButton>\r\n  );\r\n}\r\n\r\nexport default RoundButton;\r\n","import styled from \"styled-components\";\r\n\r\nconst Text = styled.span`\r\n  max-width: 100%;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n`;\r\n\r\nexport default Text;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Icon, IconType } from \"../core\";\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: ${props => props.theme.font.size.large};\r\n  font-weight: ${props => props.theme.font.weight.bold};\r\n`;\r\n\r\nconst StyledIcon = styled(Icon)`\r\n  margin-right: 15px;\r\n`;\r\n\r\nconst Title = () => {\r\n  return (\r\n    <Wrapper>\r\n      <StyledIcon type={IconType.Wifi} />\r\n      <Link to=\"/browse\">Spotify</Link>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Title;\r\n","import React from \"react\";\r\nimport styled from \"../../styles/styled\";\r\nimport { UserProfile } from \"../../types\";\r\nimport { Icon, IconType } from \"../core\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n`;\r\n\r\nconst StyledIcon = styled(Icon)`\r\n  margin-right: 10px;\r\n`;\r\n\r\nconst User = (props: UserProfile) => {\r\n  const { display_name } = props;\r\n\r\n  return (\r\n    <Wrapper>\r\n      <StyledIcon type={IconType.Person} />\r\n      <span>{display_name}</span>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default User;\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport styled from \"../../styles/styled\";\r\nimport { UserProfile } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport { isAuthorized } from \"../../reducers/authorization\";\r\nimport { selectUserProfile } from \"../../reducers/userProfile\";\r\nimport { getAuthorization } from \"../../actions/authorization\";\r\nimport { getUserProfile } from \"../../actions/userProfile\";\r\nimport { Button } from \"../core\";\r\nimport Title from \"./Title\";\r\nimport User from \"./User\";\r\n\r\nconst Wrapper = styled.header`\r\n  align-items: center;\r\n  display: flex;\r\n  background: ${props => props.theme.primary};\r\n  box-shadow: 0 2px 4px 2px rgba(0, 0, 0, 0.2);\r\n  flex-shrink: 0;\r\n  height: 50px;\r\n  justify-content: space-between;\r\n  padding: 0 50px;\r\n  z-index: 2;\r\n`;\r\n\r\nconst LoginButton = styled(Button)`\r\n  font-size: 15px;\r\n  height: 100%;\r\n  padding: 0 20px;\r\n`;\r\n\r\ninterface Props {\r\n  className?: string;\r\n  isAuthorized: boolean;\r\n  userProfile?: UserProfile;\r\n  getAuthorization: () => void;\r\n  getUserProfile: () => void;\r\n}\r\n\r\nfunction Header({\r\n  className,\r\n  isAuthorized,\r\n  userProfile,\r\n  getAuthorization,\r\n  getUserProfile\r\n}: Props) {\r\n  useEffect(() => {\r\n    if (isAuthorized) {\r\n      getUserProfile();\r\n    }\r\n  }, []);\r\n\r\n  function handleClick() {\r\n    getAuthorization();\r\n  }\r\n\r\n  return (\r\n    <Wrapper className={className}>\r\n      <Title />\r\n\r\n      {userProfile ? (\r\n        <User {...userProfile} />\r\n      ) : (\r\n        <LoginButton onClick={handleClick}>Log In</LoginButton>\r\n      )}\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  isAuthorized: isAuthorized(state),\r\n  userProfile: selectUserProfile(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  getAuthorization: getAuthorization,\r\n  getUserProfile: getUserProfile\r\n};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(Header);\r\n","import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport styled from \"../../styles/styled\";\r\nimport { click } from \"../../styles/effects\";\r\nimport { Icon, IconType } from \"../core\";\r\n\r\nconst Wrapper = styled.ul`\r\n  background: ${props => props.theme.background.dark};\r\n  flex-shrink: 0;\r\n  padding: 25px 0;\r\n  width: 200px;\r\n  z-index: 1;\r\n`;\r\n\r\nconst StyledNavLink = styled(NavLink)`\r\n  ${click}\r\n  align-items: center;\r\n  color: ${props => props.theme.foreground.dark};\r\n  display: flex;\r\n  height: 50px;\r\n  padding: 0 50px;\r\n\r\n  &:hover {\r\n    color: ${props => props.theme.foreground.default};\r\n  }\r\n\r\n  &.active {\r\n    border-right: 5px solid ${props => props.theme.primaryLight};\r\n    color: ${props => props.theme.foreground.default};\r\n    padding-right: 45px;\r\n  }\r\n`;\r\n\r\nconst StyledIcon = styled(Icon)`\r\n  margin-right: 15px;\r\n`;\r\n\r\nconst Menu = () => {\r\n  return (\r\n    <Wrapper>\r\n      <li>\r\n        <StyledNavLink to={`${process.env.PUBLIC_URL}/browse`}>\r\n          <StyledIcon type={IconType.ViewModule} />\r\n          <span>Browse</span>\r\n        </StyledNavLink>\r\n      </li>\r\n      <li>\r\n        <StyledNavLink to={`${process.env.PUBLIC_URL}/search`}>\r\n          <StyledIcon type={IconType.Search} />\r\n          <span>Search</span>\r\n        </StyledNavLink>\r\n      </li>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Menu;\r\n","import React, { HTMLAttributes } from \"react\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Image } from \"../core\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  height: 100%;\r\n`;\r\n\r\nconst StyedImage = styled(Image)`\r\n  box-shadow: 0 0 4px 2px rgba(0, 0, 0, 0.2);\r\n  height: 100%;\r\n  margin-right: 10px;\r\n  width: auto;\r\n`;\r\n\r\nconst Infos = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst Title = styled.span`\r\n  margin-bottom: 5px;\r\n`;\r\n\r\nconst Artist = styled.span`\r\n  color: ${props => props.theme.foreground.dark};\r\n  font-weight: ${props => props.theme.font.weight.light};\r\n`;\r\n\r\ninterface Props extends HTMLAttributes<any> {\r\n  image: string;\r\n  name: string;\r\n  artist: string;\r\n}\r\n\r\nfunction Album({ className, image, name, artist }: Props) {\r\n  return (\r\n    <Wrapper className={className}>\r\n      <StyedImage source={image} />\r\n      <Infos>\r\n        <Title>{name}</Title>\r\n        <Artist>{artist}</Artist>\r\n      </Infos>\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nexport default Album;\r\n","import React, { useEffect, useRef, SyntheticEvent } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Track } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport {\r\n  selectLoadedTrack,\r\n  Times,\r\n  selectTimes,\r\n  Command,\r\n  selectCommand,\r\n  VolumeLevels,\r\n  selectVolumeLevels\r\n} from \"../../reducers/player\";\r\nimport {\r\n  trackLoaded,\r\n  playing,\r\n  update,\r\n  paused,\r\n  seeked,\r\n  volumeChanged,\r\n  ended\r\n} from \"../../actions/player\";\r\n\r\ninterface Props {\r\n  loadedTrack?: Track;\r\n  times: Times;\r\n  command: Command;\r\n  volumeLevels: VolumeLevels;\r\n  trackLoaded: (duration: number) => void;\r\n  playing: () => void;\r\n  update: (elaped: number) => void;\r\n  paused: () => void;\r\n  seeked: () => void;\r\n  volumeChanged: () => void;\r\n  ended: () => void;\r\n}\r\n\r\nfunction Audio({\r\n  loadedTrack,\r\n  times,\r\n  volumeLevels,\r\n  command,\r\n  trackLoaded,\r\n  playing,\r\n  update,\r\n  paused,\r\n  seeked,\r\n  volumeChanged,\r\n  ended\r\n}: Props) {\r\n  const audio = useRef<HTMLAudioElement>(null);\r\n\r\n  useEffect(() => {\r\n    const currentAudio = audio.current;\r\n\r\n    if (currentAudio) {\r\n      const { currentTime } = times;\r\n      const { volume, isMuted } = volumeLevels;\r\n\r\n      switch (command) {\r\n        case Command.Play:\r\n          currentAudio.play();\r\n          break;\r\n        case Command.Pause:\r\n          currentAudio.pause();\r\n          break;\r\n        case Command.Seek:\r\n          currentAudio.currentTime = currentTime;\r\n          break;\r\n        case Command.ChangeVolume:\r\n          currentAudio.volume = isMuted ? 0 : volume;\r\n      }\r\n    }\r\n  });\r\n\r\n  function handleLoadedMetadata(event: SyntheticEvent<HTMLAudioElement>) {\r\n    const target = event.target as HTMLAudioElement;\r\n    trackLoaded(target.duration);\r\n  }\r\n\r\n  function handleTimeUpdate(event: SyntheticEvent<HTMLAudioElement>) {\r\n    const target = event.target as HTMLAudioElement;\r\n    update(target.currentTime);\r\n  }\r\n\r\n  function handlePause(event: SyntheticEvent<HTMLAudioElement>) {\r\n    const target = event.target as HTMLAudioElement;\r\n    if (target.currentTime !== target.duration) {\r\n      paused();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <audio\r\n      ref={audio}\r\n      src={loadedTrack && loadedTrack.preview_url}\r\n      onLoadedMetadata={handleLoadedMetadata}\r\n      onPlay={playing}\r\n      onTimeUpdate={handleTimeUpdate}\r\n      onPause={handlePause}\r\n      onSeeked={seeked}\r\n      onVolumeChange={volumeChanged}\r\n      onEnded={ended}\r\n    />\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  loadedTrack: selectLoadedTrack(state),\r\n  times: selectTimes(state),\r\n  command: selectCommand(state),\r\n  volumeLevels: selectVolumeLevels(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  trackLoaded,\r\n  playing,\r\n  update,\r\n  paused,\r\n  seeked,\r\n  volumeChanged,\r\n  ended\r\n};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(Audio);\r\n","import React from \"react\";\r\nimport styled from \"../../styles/styled\";\r\nimport { IconType, RoundButton } from \"../core\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n`;\r\n\r\nconst MainButton = styled(RoundButton)`\r\n  transform: scale(1.25);\r\n`;\r\n\r\ninterface Props {\r\n  isPlaying: boolean;\r\n  canToggle: boolean;\r\n  canNext: boolean;\r\n  canPrevious: boolean;\r\n  onToggle: () => void;\r\n  onNext: () => void;\r\n  onPrevious: () => void;\r\n}\r\n\r\nfunction Controls({\r\n  canPrevious,\r\n  onPrevious,\r\n  isPlaying,\r\n  canToggle,\r\n  onToggle,\r\n  canNext,\r\n  onNext\r\n}: Props) {\r\n  return (\r\n    <Wrapper>\r\n      <RoundButton\r\n        disabled={!canPrevious}\r\n        onClick={onPrevious}\r\n        iconType={IconType.SkipPrevious}\r\n      />\r\n\r\n      <MainButton\r\n        disabled={!canToggle}\r\n        onClick={onToggle}\r\n        iconType={isPlaying ? IconType.Pause : IconType.PlayArrow}\r\n      />\r\n\r\n      <RoundButton\r\n        disabled={!canNext}\r\n        onClick={onNext}\r\n        iconType={IconType.SkipNext}\r\n      />\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nexport default Controls;\r\n","import React, { useState, useRef } from \"react\";\r\nimport styled from \"../../styles/styled\";\r\n\r\nconst Wrapper = styled.div<{ isDisabled: boolean }>`\r\n  align-items: center;\r\n  border-radius: 2.5px;\r\n  display: flex;\r\n  cursor: ${props => (props.isDisabled ? \"default\" : \"pointer\")};\r\n  height: 20px;\r\n  position: relative;\r\n  width: 100%;\r\n`;\r\n\r\nconst Left = styled.div<{ width: number }>`\r\n  background: ${props => props.theme.primaryLight};\r\n  border-radius: 2.5px 0 0 2.5px;\r\n  height: 2.5px;\r\n  left: 0;\r\n  position: absolute;\r\n  width: calc(${props => props.width * 100}%);\r\n`;\r\n\r\nconst Thumb = styled.div<{ position: number; isDisabled: boolean }>`\r\n  background: transparent;\r\n  border-radius: 50%;\r\n  height: 20px;\r\n  left: calc(${props => props.position * 100}% - 10px);\r\n  position: absolute;\r\n  visibility: hidden;\r\n  width: 20px;\r\n  z-index: 1;\r\n\r\n  &::before {\r\n    background: ${props => props.theme.foreground.default};\r\n    border-radius: 50%;\r\n    box-shadow: 0 0 4px 2px rgba(0, 0, 0, 0.2);\r\n    content: \"\";\r\n    height: 50%;\r\n    left: 25%;\r\n    position: absolute;\r\n    top: 25%;\r\n    width: 50%;\r\n  }\r\n\r\n  ${Wrapper}:hover & {\r\n    visibility: visible;\r\n  }\r\n`;\r\n\r\nconst Right = styled.div<{ width: number }>`\r\n  background: ${props => props.theme.foreground.dark};\r\n  border-radius: 0 2.5px 2.5px 0;\r\n  height: 2.5px;\r\n  position: absolute;\r\n  right: 0;\r\n  width: calc(100% - ${props => props.width * 100}%);\r\n`;\r\n\r\ninterface Props {\r\n  className?: string;\r\n  value: number;\r\n  canChange: boolean;\r\n  onChange?: (value: number) => void;\r\n}\r\n\r\ninterface State {\r\n  isDown: boolean;\r\n  value: number;\r\n}\r\n\r\nfunction Slider(props: Props) {\r\n  const [isDown, setIsDown] = useState(false);\r\n  const [value, setValue] = useState(0);\r\n\r\n  const wrapper = useRef<HTMLDivElement>(null);\r\n  const thumb = useRef<HTMLDivElement>(null);\r\n\r\n  function getValue(x: number) {\r\n    const currentWrapper = wrapper.current;\r\n    const currentTHunb = thumb.current;\r\n    if (!currentWrapper || !currentTHunb) {\r\n      return 0;\r\n    }\r\n\r\n    const clientRect = currentWrapper.getBoundingClientRect();\r\n    let value = (x - clientRect.left) / currentWrapper.clientWidth;\r\n    if (value < 0) {\r\n      value = 0;\r\n    } else if (value > 1) {\r\n      value = 1;\r\n    }\r\n\r\n    return value;\r\n  }\r\n\r\n  function handleMouseDown(event: React.MouseEvent<HTMLElement>) {\r\n    const { canChange } = props;\r\n    if (!canChange) {\r\n      return;\r\n    }\r\n\r\n    setIsDown(true);\r\n    setValue(getValue(event.pageX));\r\n    document.addEventListener(\"mousemove\", handleMouseMove);\r\n    document.addEventListener(\"mouseup\", handleMouseUp);\r\n  }\r\n\r\n  function handleMouseMove(event: MouseEvent) {\r\n    setValue(getValue(event.pageX));\r\n  }\r\n\r\n  function handleMouseUp(event: MouseEvent) {\r\n    document.removeEventListener(\"mousemove\", handleMouseMove);\r\n    document.removeEventListener(\"mouseup\", handleMouseUp);\r\n    setIsDown(false);\r\n    const { onChange } = props;\r\n    if (onChange) {\r\n      const value = getValue(event.pageX);\r\n      onChange(value);\r\n    }\r\n  }\r\n\r\n  function getCurrentValue() {\r\n    return isDown ? value : props.value;\r\n  }\r\n\r\n  const { className, canChange } = props;\r\n  const currentValue = getCurrentValue();\r\n\r\n  return (\r\n    <Wrapper\r\n      ref={wrapper}\r\n      onMouseDown={handleMouseDown}\r\n      isDisabled={!canChange}\r\n      className={className}\r\n    >\r\n      <Left width={currentValue} />\r\n      {canChange && (\r\n        <Thumb ref={thumb} position={currentValue} isDisabled={!canChange} />\r\n      )}\r\n      <Right width={currentValue} />\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nSlider.defaultProps = {\r\n  value: 0,\r\n  canChange: true\r\n};\r\n\r\nexport default Slider;\r\n","import React from \"react\";\r\nimport styled from \"../../styles/styled\";\r\nimport Slider from \"./Slider\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-cotent: center;\r\n  width: 100%;\r\n`;\r\n\r\nconst ProgressTime = styled.div`\r\n  color: ${props => props.theme.foreground.dark};\r\n  font-size: ${props => props.theme.font.size.small};\r\n  font-weight: ${props => props.theme.font.weight.light};\r\n`;\r\n\r\nconst StyledSlider = styled(Slider)`\r\n  margin: 0 15px;\r\n`;\r\n\r\ninterface Props {\r\n  duration: number;\r\n  currentTime: number;\r\n  canSeek: boolean;\r\n  onSeek: (time: number) => void;\r\n}\r\n\r\nfunction Playback({ duration, currentTime, canSeek, onSeek }: Props) {\r\n  function renderTime(seconds: number) {\r\n    const minutes = Math.floor(seconds / 60);\r\n    seconds = Math.round(seconds);\r\n\r\n    return (\r\n      <ProgressTime>\r\n        {`${minutes}:${seconds < 10 ? \"0\" + seconds : seconds}`}\r\n      </ProgressTime>\r\n    );\r\n  }\r\n\r\n  function handleChange(value: number) {\r\n    onSeek(duration * value);\r\n  }\r\n\r\n  const progress = duration ? currentTime / duration : 0;\r\n\r\n  return (\r\n    <Wrapper>\r\n      {renderTime(currentTime)}\r\n      <StyledSlider\r\n        value={progress}\r\n        onChange={handleChange}\r\n        canChange={canSeek}\r\n      />\r\n      {renderTime(duration)}\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nexport default Playback;\r\n","import React from \"react\";\r\nimport styled from \"../../styles/styled\";\r\nimport { IconType, RoundButton } from \"../core\";\r\nimport Slider from \"./Slider\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  height: 100%;\r\n`;\r\n\r\nconst StyledSlider = styled(Slider)`\r\n  width: 100px;\r\n`;\r\n\r\ninterface Props {\r\n  volume: number;\r\n  isMuted: boolean;\r\n  onChange: (volume: number, isMuted: boolean) => void;\r\n}\r\n\r\nfunction Volume({ volume, isMuted, onChange }: Props) {\r\n  function handleClick() {\r\n    onChange(volume, !isMuted);\r\n  }\r\n\r\n  function handleChange(value: number) {\r\n    onChange(value, false);\r\n  }\r\n\r\n  return (\r\n    <Wrapper>\r\n      <RoundButton\r\n        onClick={handleClick}\r\n        iconType={isMuted ? IconType.VolumeOff : IconType.VolumeUp}\r\n      />\r\n      <StyledSlider value={isMuted ? 0 : volume} onChange={handleChange} />\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nexport default Volume;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Track } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport {\r\n  selectLoadedTrack,\r\n  selectIsPlaying,\r\n  selectCanToggle,\r\n  Times,\r\n  selectTimes,\r\n  selectCanSeek,\r\n  selectCanNext,\r\n  selectCanPrevious,\r\n  VolumeLevels,\r\n  selectVolumeLevels\r\n} from \"../../reducers/player\";\r\nimport {\r\n  toggle,\r\n  seek,\r\n  next,\r\n  previous,\r\n  changeVolume\r\n} from \"../../actions/player\";\r\nimport Album from \"./Album\";\r\nimport Audio from \"./Audio\";\r\nimport Controls from \"./Controls\";\r\nimport Playback from \"./Playback\";\r\nimport Volume from \"./Volume\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  background: ${props => props.theme.background.light};\r\n  box-sizing: border-box;\r\n  box-shadow: 0 -2px 4px 2px rgba(0, 0, 0, 0.2);\r\n  display: flex;\r\n  height: 100px;\r\n  padding: 15px;\r\n`;\r\n\r\nconst ThirdWrapper = styled.div`\r\n  height: 100%;\r\n  width: 33%;\r\n`;\r\n\r\nconst LeftWrapper = styled(ThirdWrapper)``;\r\n\r\nconst CenterWrapper = styled(ThirdWrapper)`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-grow: 1;\r\n  justify-content: space-evenly;\r\n`;\r\n\r\nconst RightWrapper = styled(ThirdWrapper)`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n`;\r\n\r\ninterface Props {\r\n  className?: string;\r\n  loadedTrack?: Track;\r\n  isPlaying: () => boolean;\r\n  times: Times;\r\n  canToggle: boolean;\r\n  canSeek: boolean;\r\n  canNext: boolean;\r\n  canPrevious: boolean;\r\n  volumeLevels: VolumeLevels;\r\n  toggle: () => void;\r\n  seek: (time: number) => void;\r\n  next: () => void;\r\n  previous: () => void;\r\n  changeVolume: (volume: number, isMuted: boolean) => void;\r\n}\r\n\r\nfunction Player({\r\n  className,\r\n  loadedTrack,\r\n  isPlaying,\r\n  times,\r\n  canToggle,\r\n  canSeek,\r\n  canNext,\r\n  canPrevious,\r\n  volumeLevels,\r\n  toggle,\r\n  seek,\r\n  next,\r\n  previous,\r\n  changeVolume\r\n}: Props) {\r\n  function handleToggle() {\r\n    toggle();\r\n  }\r\n\r\n  const album = loadedTrack && loadedTrack.album;\r\n\r\n  return (\r\n    <Wrapper className={className}>\r\n      <LeftWrapper>\r\n        {album && (\r\n          <Album\r\n            image={album.images[0].url}\r\n            name={album.name}\r\n            artist={album.artists[0].name}\r\n          />\r\n        )}\r\n      </LeftWrapper>\r\n\r\n      <CenterWrapper>\r\n        <Controls\r\n          isPlaying={isPlaying()}\r\n          canToggle={canToggle}\r\n          onToggle={handleToggle}\r\n          canNext={canNext}\r\n          onNext={next}\r\n          canPrevious={canPrevious}\r\n          onPrevious={previous}\r\n        />\r\n        <Playback\r\n          duration={times.duration}\r\n          currentTime={times.currentTime}\r\n          canSeek={canSeek}\r\n          onSeek={seek}\r\n        />\r\n      </CenterWrapper>\r\n\r\n      <RightWrapper>\r\n        <Volume\r\n          volume={volumeLevels.volume}\r\n          isMuted={volumeLevels.isMuted}\r\n          onChange={changeVolume}\r\n        />\r\n      </RightWrapper>\r\n\r\n      <Audio />\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  loadedTrack: selectLoadedTrack(state),\r\n  isPlaying: selectIsPlaying(state),\r\n  times: selectTimes(state),\r\n  canToggle: selectCanToggle(state),\r\n  canSeek: selectCanSeek(state),\r\n  canNext: selectCanNext(state),\r\n  canPrevious: selectCanPrevious(state),\r\n  volumeLevels: selectVolumeLevels(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  toggle,\r\n  seek,\r\n  next,\r\n  previous,\r\n  changeVolume\r\n};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(Player);\r\n","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\ninterface Props {\r\n  from: string;\r\n  to: string;\r\n}\r\n\r\nfunction DefaultRoute({ from, to }: Props) {\r\n  return <Route exact path={from} render={() => <Redirect to={to} />} />;\r\n}\r\n\r\nexport default DefaultRoute;\r\n","import styled from \"../styles/styled\";\r\n\r\nconst Loader = styled.div<{ isLoading: boolean }>`\r\n  height: 5px;\r\n  left: 0;\r\n  position: absolute;\r\n  opacity: ${props => (props.isLoading ? \"1\" : \"0\")};\r\n  top: 0;\r\n  transition: ${props => (props.isLoading ? \"all 0\" : \"all 0.2s\")};\r\n  width: 100%;\r\n\r\n  &::before {\r\n    background: ${props => props.theme.foreground.dark};\r\n    content: \"\";\r\n    height: 100%;\r\n    position: absolute;\r\n    width: 100%;\r\n  }\r\n\r\n  &::after {\r\n    animation: transform 2s linear infinite;\r\n    background: ${props => props.theme.foreground.default};\r\n    content: \"\";\r\n    height: 100%;\r\n    position: absolute;\r\n    transform-origin: 0;\r\n    width: 100%;\r\n\r\n    @keyframes transform {\r\n      0% {\r\n        left: 0;\r\n        width: 0;\r\n      }\r\n      50% {\r\n        left: 0;\r\n        width: 100%;d\r\n      }\r\n      100% {\r\n        left: 100%;\r\n        width: 0;\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport default Loader;\r\n","import styled from \"../styles/styled\";\r\n\r\nconst Fader = styled.div<{ isLoading: boolean }>`\r\n  opacity: ${props => (props.isLoading ? \"0\" : \"1\")};\r\n  transition: ${props => (props.isLoading ? \"all 0\" : \"all 0.2s\")};\r\n`;\r\n\r\nexport default Fader;\r\n","import React, { FunctionComponent, ComponentType, useState } from \"react\";\r\nimport Loader from \"./Loader\";\r\nimport Fader from \"./Fader\";\r\n\r\ninterface Props {\r\n  isLoading: boolean;\r\n}\r\n\r\nfunction withReloader<P extends Props>(\r\n  WrappedComponent: ComponentType<P>\r\n): FunctionComponent<P> {\r\n  return function({ isLoading, ...rest }: any) {\r\n    const [prevIsLoading, setPrevIsLoading] = useState(false);\r\n    const [hasLoaded, setHasLoaded] = useState(false);\r\n\r\n    if (prevIsLoading !== isLoading) {\r\n      if (!isLoading) {\r\n        setHasLoaded(true);\r\n      }\r\n      setPrevIsLoading(isLoading);\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <Loader isLoading={!hasLoaded} />\r\n        <Fader isLoading={!hasLoaded}>\r\n          <WrappedComponent {...rest} />\r\n        </Fader>\r\n      </>\r\n    );\r\n  };\r\n}\r\n\r\nexport default withReloader;\r\n","import React from \"react\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Button, Icon, IconType, Image, Text } from \"../core\";\r\n\r\nconst StyledList = styled.ul`\r\n  align-content: flex-start;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n  margin: -10px;\r\n`;\r\n\r\nconst StyledItem = styled.li`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin: 10px;\r\n`;\r\n\r\nconst length = 200;\r\nconst StyledButton = styled(Button)<{ type: CoverType }>`\r\n  background: ${props => props.theme.background.light};\r\n  ${props => props.type === CoverType.Round && \"border-radius: 100px\"};\r\n  box-shadow: 0 0 4px 2px rgba(0, 0, 0, 0.2);\r\n  display: flex;\r\n  height: ${length}px;\r\n  margin-bottom: 10px;\r\n  width: ${length}px;\r\n`;\r\n\r\nconst StyledImge = styled(Image)`\r\n  height: 100%;\r\n  width: 100%;\r\n`;\r\n\r\nconst StyledIcon = styled(Icon)`\r\n  background: ${props => props.theme.background.light}  \r\n  font-size: ${length / 2}px;\r\n  height: ${length}px;\r\n  line-height: ${length}px;\r\n  width: 100%;\r\n`;\r\n\r\nconst Title = styled(Text)`\r\n  margin-bottom: 5px;\r\n  text-align: center;\r\n  width: ${length}px;\r\n`;\r\n\r\nconst SubTitle = styled(Text)`\r\n  color: ${props => props.theme.foreground.dark};\r\n  font-weight: ${props => props.theme.font.weight.light};\r\n  text-align: center;\r\n  width: 200px;\r\n`;\r\n\r\nexport interface Cover {\r\n  id: string;\r\n  image?: string;\r\n  title: string;\r\n  subTitle?: string;\r\n}\r\n\r\nexport enum CoverType {\r\n  Square = \"SQUARE\",\r\n  Round = \"ROUND\"\r\n}\r\n\r\nfunction Cover({\r\n  cover,\r\n  type,\r\n  onClick\r\n}: {\r\n  cover: Cover;\r\n  type: CoverType;\r\n  onClick: (coverId: string) => void;\r\n}) {\r\n  function handleClick() {\r\n    onClick(cover.id);\r\n  }\r\n\r\n  return (\r\n    <StyledItem key={cover.id}>\r\n      <StyledButton onClick={handleClick} type={type}>\r\n        {cover.image ? (\r\n          <StyledImge source={cover.image} />\r\n        ) : (\r\n          <StyledIcon type={IconType.Person} />\r\n        )}\r\n      </StyledButton>\r\n      <Title>{cover.title}</Title>\r\n      {cover.subTitle && <SubTitle>{cover.subTitle}</SubTitle>}\r\n    </StyledItem>\r\n  );\r\n}\r\n\r\ninterface Props {\r\n  covers: Cover[];\r\n  type: CoverType;\r\n  onClick: (id: string) => void;\r\n}\r\n\r\nfunction Covers({ covers, type, onClick }: Props) {\r\n  return (\r\n    <StyledList>\r\n      {covers.map(cover => (\r\n        <Cover cover={cover} type={type} onClick={onClick} />\r\n      ))}\r\n    </StyledList>\r\n  );\r\n}\r\n\r\nCovers.defaultProps = {\r\n  type: CoverType.Square\r\n};\r\n\r\nexport default Covers;\r\n","import React from \"react\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\nimport { Category } from \"../../types\";\r\nimport Covers, { Cover } from \"./Covers\";\r\n\r\nfunction getCovers(categories: Category[]): Cover[] {\r\n  return categories.map(category => ({\r\n    id: category.id,\r\n    image:\r\n      category.icons && category.icons.length\r\n        ? category.icons[0].url\r\n        : undefined,\r\n    title: category.name\r\n  }));\r\n}\r\n\r\ninterface Props extends RouteComponentProps {\r\n  categories: Category[];\r\n}\r\n\r\nfunction CategoryCovers({ history, categories }: Props) {\r\n  function handleClick(categoryId: string) {\r\n    history.push(\r\n      `${process.env.PUBLIC_URL}/categories/${categoryId}/playlists`\r\n    );\r\n  }\r\n\r\n  const covers = getCovers(categories);\r\n  return <Covers covers={covers} onClick={handleClick} />;\r\n}\r\n\r\nexport default withRouter(CategoryCovers);\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Category } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectIsFetching, selectCategories } from \"../../reducers/browse\";\r\nimport { getCategories } from \"../../actions/browse\";\r\nimport withReloader from \"../withReloader\";\r\nimport CategoryCovers from \"../covers/CategoryCovers\";\r\n\r\ninterface Props {\r\n  isLoading: boolean;\r\n  categories: Category[];\r\n  getCategories: () => void;\r\n}\r\n\r\nfunction Categories({ categories, getCategories }: Props) {\r\n  useEffect(getCategories, []);\r\n\r\n  return <CategoryCovers categories={categories} />;\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  isLoading: selectIsFetching(state),\r\n  categories: selectCategories(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  getCategories: getCategories\r\n};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(withReloader(Categories));\r\n","import { Artist } from \"../types\";\r\n\r\nexport function joinArtistNames(artists: Artist[]): string {\r\n  return artists.map(artist => artist.name).join(\", \");\r\n}\r\n","import React from \"react\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\nimport { Album } from \"../../types\";\r\nimport { joinArtistNames } from \"../../utils/artist\";\r\nimport Covers, { Cover } from \"./Covers\";\r\n\r\nfunction getCovers(albums: Album[]): Cover[] {\r\n  return albums.map(album => ({\r\n    id: album.id,\r\n    image:\r\n      album.images && album.images.length ? album.images[0].url : undefined,\r\n    title: album.name,\r\n    subTitle: joinArtistNames(album.artists)\r\n  }));\r\n}\r\n\r\ninterface Props extends RouteComponentProps {\r\n  albums: Album[];\r\n}\r\n\r\nfunction AlbumCovers({ history, albums }: Props) {\r\n  function handleClick(albumId: string) {\r\n    history.push(`${process.env.PUBLIC_URL}/albums/${albumId}/tracks`);\r\n  }\r\n\r\n  const covers = getCovers(albums);\r\n  return <Covers covers={covers} onClick={handleClick} />;\r\n}\r\n\r\nexport default withRouter(AlbumCovers);\r\n","import React from \"react\";\r\nimport { Artist } from \"../../types\";\r\nimport Covers, { Cover, CoverType } from \"./Covers\";\r\n\r\nfunction getCovers(artists: Artist[]): Cover[] {\r\n  return artists.map(artist => ({\r\n    id: artist.id,\r\n    image:\r\n      artist.images && artist.images.length ? artist.images[0].url : undefined,\r\n    title: artist.name\r\n  }));\r\n}\r\n\r\ninterface Props {\r\n  artists: Artist[];\r\n}\r\n\r\nfunction ArtistCovers({ artists }: Props) {\r\n  function handleClick(artistId: string) {}\r\n\r\n  const covers = getCovers(artists);\r\n  return (\r\n    <Covers covers={covers} type={CoverType.Round} onClick={handleClick} />\r\n  );\r\n}\r\n\r\nexport default ArtistCovers;\r\n","import React from \"react\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\nimport { Playlist } from \"../../types\";\r\nimport Covers, { Cover } from \"./Covers\";\r\n\r\nfunction getCovers(playlists: Playlist[]): Cover[] {\r\n  return playlists.map(playlist => ({\r\n    id: playlist.id,\r\n    image:\r\n      playlist.images && playlist.images ? playlist.images[0].url : undefined,\r\n    title: playlist.name,\r\n    subTitle: playlist.owner.display_name\r\n  }));\r\n}\r\n\r\ninterface Props extends RouteComponentProps {\r\n  playlists: Playlist[];\r\n}\r\n\r\nfunction PlayistCovers({ history, playlists }: Props) {\r\n  function handleClick(playlistId: string) {\r\n    history.push(`${process.env.PUBLIC_URL}/playlists/${playlistId}/tracks`);\r\n  }\r\n\r\n  const covers = getCovers(playlists);\r\n  return <Covers covers={covers} onClick={handleClick} />;\r\n}\r\n\r\nexport default withRouter(PlayistCovers);\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Album } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectIsFetching, selectNewReleases } from \"../../reducers/browse\";\r\nimport { getNewReleases } from \"../../actions/browse\";\r\nimport { AlbumCovers } from \"../covers\";\r\nimport withReloader from \"../withReloader\";\r\n\r\ninterface Props {\r\n  isLoading: boolean;\r\n  albums: Album[];\r\n  getAlbums: () => void;\r\n}\r\n\r\nfunction NewReleases({ albums, getAlbums }: Props) {\r\n  useEffect(getAlbums, []);\r\n\r\n  return <AlbumCovers albums={albums} />;\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  isLoading: selectIsFetching(state),\r\n  albums: selectNewReleases(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  getAlbums: getNewReleases\r\n};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(withReloader(NewReleases));\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Playlist } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport {\r\n  selectIsFetching,\r\n  selectFeaturedPlaylists\r\n} from \"../../reducers/browse\";\r\nimport { getFeaturedPlaylists } from \"../../actions/browse\";\r\nimport { PlaylistCovers } from \"../covers\";\r\nimport withReloader from \"../withReloader\";\r\n\r\ninterface Props {\r\n  isLoading: boolean;\r\n  playlists: Playlist[];\r\n  getPlaylists: () => void;\r\n}\r\n\r\nfunction FeaturedPlaylists({ playlists, getPlaylists }: Props) {\r\n  useEffect(getPlaylists, []);\r\n\r\n  return <PlaylistCovers playlists={playlists} />;\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  isLoading: selectIsFetching(state),\r\n  playlists: selectFeaturedPlaylists(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  getPlaylists: getFeaturedPlaylists\r\n};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(withReloader(FeaturedPlaylists));\r\n","import React from \"react\";\r\nimport {\r\n  RouteComponentProps,\r\n  NavLink,\r\n  Route,\r\n  withRouter\r\n} from \"react-router-dom\";\r\nimport styled from \"../../styles/styled\";\r\nimport DefaultRoute from \"../DefaultRoute\";\r\nimport Categories from \"./Categories\";\r\nimport NewReleases from \"./NewReleases\";\r\nimport FeaturedPlaylists from \"./FeaturedPlaylists\";\r\n\r\nconst Wrapper = styled.div`\r\n  height: 100%;\r\n`;\r\n\r\nconst StyledList = styled.ul`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-flow: row;\r\n  font-size: ${props => props.theme.font.size.medium};\r\n  font-weight: ${props => props.theme.font.weight.light};\r\n  justify-content: center;\r\n  margin-bottom: 25px;\r\n`;\r\n\r\nconst StyledNavLink = styled(NavLink)`\r\n  align-items: center;\r\n  color: ${props => props.theme.foreground.dark};\r\n  display: flex;\r\n  height: 50px;\r\n  justify-content: center;\r\n  padding: 0 25px;\r\n  position: relative;\r\n\r\n  &:hover {\r\n    color: ${props => props.theme.foreground.default};\r\n  }\r\n\r\n  &.active {\r\n    color: ${props => props.theme.foreground.default};\r\n  }\r\n\r\n  &.active&::after {\r\n    background: ${props => props.theme.primaryLight};\r\n    bottom: 0;\r\n    content: \"\";\r\n    height: 2.5px;\r\n    left: 50%;\r\n    position: absolute;\r\n    transform: translate(-50%, 0);\r\n    width: 25px;\r\n  }\r\n`;\r\n\r\nconst links = [\r\n  {\r\n    url: \"categories\",\r\n    label: \"Categories\"\r\n  },\r\n  {\r\n    url: \"new-releases\",\r\n    label: \"New Releases\"\r\n  },\r\n  {\r\n    url: \"featured-playist\",\r\n    label: \"Featured Playlists\"\r\n  }\r\n];\r\n\r\nfunction Browse({ match }: RouteComponentProps) {\r\n  return (\r\n    <Wrapper>\r\n      <StyledList>\r\n        {links.map(link => (\r\n          <li key={link.url}>\r\n            <StyledNavLink to={`${match.url}/${link.url}`}>\r\n              {link.label}\r\n            </StyledNavLink>\r\n          </li>\r\n        ))}\r\n      </StyledList>\r\n\r\n      <DefaultRoute from={`${match.path}`} to={`${match.path}/categories`} />\r\n      <Route exact path={`${match.path}/categories`} component={Categories} />\r\n      <Route path={`${match.path}/new-releases`} component={NewReleases} />\r\n      <Route\r\n        path={`${match.path}/featured-playist`}\r\n        component={FeaturedPlaylists}\r\n      />\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nexport default withRouter(Browse);\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Category, Playlist } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport {\r\n  selectIsFetching,\r\n  selectCategory,\r\n  selectCategoryPlaylists\r\n} from \"../../reducers/browse\";\r\nimport { getCategory, getCategoryPlaylists } from \"../../actions/browse\";\r\nimport { PlaylistCovers } from \"../covers\";\r\nimport withReloader from \"../withReloader\";\r\n\r\nconst Title = styled.h1`\r\n  text-align: center;\r\n  font-size: ${props => props.theme.font.size.extraExtraLarge};\r\n  font-weight: ${props => props.theme.font.weight.bold};\r\n  margin: 0 0 25px 0;\r\n`;\r\n\r\ninterface Params {\r\n  categoryId: string;\r\n}\r\n\r\ninterface Props extends RouteComponentProps<Params> {\r\n  isLoading: boolean;\r\n  category?: Category;\r\n  playlists: Playlist[];\r\n  getCategory: (categoryId: string) => void;\r\n  getPlaylists: (categoryId: string) => void;\r\n}\r\n\r\nfunction CategoryPlaylists({\r\n  match,\r\n  category,\r\n  playlists,\r\n  getCategory,\r\n  getPlaylists\r\n}: Props) {\r\n  useEffect(() => {\r\n    const { categoryId } = match.params;\r\n    if (!category) {\r\n      getCategory(categoryId);\r\n    }\r\n    getPlaylists(categoryId);\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <Title>{category && category.name}</Title>\r\n      <PlaylistCovers playlists={playlists} />\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State, { match }: Props) => {\r\n  const categoryId = match.params.categoryId;\r\n\r\n  return {\r\n    isLoading: selectIsFetching(state),\r\n    category: selectCategory(state, categoryId),\r\n    playlists: selectCategoryPlaylists(state)\r\n  };\r\n};\r\n\r\nconst mapDispatch = {\r\n  getCategory: (categoryId: string) => getCategory(categoryId),\r\n  getPlaylists: (categoryId: string) => getCategoryPlaylists(categoryId)\r\n};\r\n\r\nexport default withRouter(\r\n  connect(\r\n    mapState,\r\n    mapDispatch\r\n  )(withReloader(CategoryPlaylists))\r\n);\r\n","import React, { FunctionComponent, ComponentType } from \"react\";\r\nimport Loader from \"./Loader\";\r\nimport Fader from \"./Fader\";\r\n\r\ninterface Props {\r\n  isLoading: boolean;\r\n}\r\n\r\nfunction withLoader<P extends Props>(\r\n  WrappedComponent: ComponentType<P>\r\n): FunctionComponent<P> {\r\n  return function({ isLoading, ...rest }: any) {\r\n    return (\r\n      <>\r\n        <Loader isLoading={isLoading} />\r\n        <Fader isLoading={isLoading}>\r\n          <WrappedComponent {...rest} />\r\n        </Fader>\r\n      </>\r\n    );\r\n  };\r\n}\r\n\r\nexport default withLoader;\r\n","import React from \"react\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Album, Artist, Playlist } from \"../../types\";\r\nimport { AlbumCovers, ArtistCovers, PlaylistCovers } from \"../covers\";\r\nimport withLoader from \"../withLoader\";\r\n\r\nconst Section = styled.section`\r\n  margin-bottom: 50px;\r\n`;\r\n\r\nconst Header = styled.h2`\r\n  font-size: ${props => props.theme.font.size.extraExtraLarge}\r\n  text-align: center;\r\n  margin-bottom: 25px;\r\n  width: 100%;\r\n`;\r\n\r\nfunction Artists({ artists }: { artists: Artist[] }) {\r\n  return (\r\n    <>\r\n      {artists.length > 0 && (\r\n        <Section>\r\n          <Header>Artists</Header>\r\n          <ArtistCovers artists={artists} />\r\n        </Section>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nfunction Albums({ albums }: { albums: Album[] }) {\r\n  return (\r\n    <>\r\n      {albums.length > 0 && (\r\n        <Section>\r\n          <Header>Albums & Singles</Header>\r\n          <AlbumCovers albums={albums} />\r\n        </Section>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nfunction Playlists({ playlists }: { playlists: Playlist[] }) {\r\n  return (\r\n    <>\r\n      {playlists.length > 0 && (\r\n        <Section>\r\n          <Header>Playlists</Header>\r\n          <PlaylistCovers playlists={playlists} />\r\n        </Section>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\ninterface Props {\r\n  isLoading: boolean;\r\n  artists: Artist[];\r\n  albums: Album[];\r\n  playlists: Playlist[];\r\n}\r\n\r\nfunction Results({ artists, albums, playlists }: Props) {\r\n  return (\r\n    <>\r\n      <Artists artists={artists} />\r\n      <Albums albums={albums} />\r\n      <Playlists playlists={playlists} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default withLoader(Results);\r\n","const milliseconds = 400;\r\n\r\nfunction debounce<T>(callback: (arg: T) => void) {\r\n  let handle: number;\r\n  return function(arg: T) {\r\n    if (handle) {\r\n      clearTimeout(handle);\r\n    }\r\n    handle = setTimeout(callback, milliseconds, arg);\r\n  };\r\n}\r\n\r\nexport default debounce;\r\n","import React, { useState, ChangeEvent, useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Album, Artist, Playlist } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport {\r\n  selectIsFetching,\r\n  selectAlbums,\r\n  selectArtists,\r\n  selectPlaylists\r\n} from \"../../reducers/search\";\r\nimport { search } from \"../../actions/search\";\r\nimport Results from \"./Results\";\r\nimport debounce from \"../../utils/function\";\r\n\r\nconst StyledInput = styled.input`\r\n  background: ${props => props.theme.background.light}\r\n  border: none;\r\n  border-radius: 25px;\r\n  caret-color: ${props => props.theme.primaryLight}\r\n  color: ${props => props.theme.foreground.default}\r\n  font-size: ${props => props.theme.font.size.extraLarge}\r\n  font-weight: ${props => props.theme.font.weight.light}\r\n  height: 50px;\r\n  margin: 0 0 50px 0;\r\n  padding: 0 25px;\r\n  width: calc(100% - 50px);\r\n`;\r\n\r\ninterface Props {\r\n  isLoading: boolean;\r\n  albums: Album[];\r\n  artists: Artist[];\r\n  playlists: Playlist[];\r\n  search: (query: string) => void;\r\n}\r\n\r\nlet debounced: (query: string) => void;\r\n\r\nfunction Search({ isLoading, albums, artists, playlists, search }: Props) {\r\n  const [query, setQuery] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    debounced = debounce((query: string) => {\r\n      if (query) {\r\n        search(query);\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  function handleChange(event: ChangeEvent<HTMLInputElement>) {\r\n    const { value: query } = event.target;\r\n    setQuery(query);\r\n    debounced(query);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <StyledInput\r\n        value={query}\r\n        onChange={handleChange}\r\n        placeholder=\"Search...\"\r\n        autoFocus\r\n      />\r\n      <Results\r\n        isLoading={isLoading}\r\n        artists={artists}\r\n        albums={albums}\r\n        playlists={playlists}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  isLoading: selectIsFetching(state),\r\n  albums: selectAlbums(state),\r\n  artists: selectArtists(state),\r\n  playlists: selectPlaylists(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  search\r\n};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(Search);\r\n","import React from \"react\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Button, Image, Text } from \"../core\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst StyledImage = styled(Image)`\r\n  box-shadow: 0 0 4px 2px rgba(0, 0, 0, 0.2);\r\n  height: 300px;\r\n  margin-bottom: 10px;\r\n  width: 300px;\r\n`;\r\n\r\nconst Title = styled(Text)`\r\n  font-size: ${props => props.theme.font.size.large}\r\n  margin-bottom: 5px;\r\n`;\r\n\r\nconst SubTitle = styled(Text)`\r\n  color: ${props => props.theme.foreground.dark};\r\n  font-weight: ${props => props.theme.font.weight.light};\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst StyledButton = styled(Button)`\r\n  background: ${props => props.theme.primary};\r\n  border-radius: 20px;\r\n  color: ${props => props.theme.foreground.default};\r\n  padding: 10px 40px;\r\n  width: 120px;\r\n`;\r\n\r\ninterface Props {\r\n  image: string;\r\n  title: string;\r\n  subTitle: string;\r\n  isPlaying: boolean;\r\n  onToggle: () => void;\r\n}\r\n\r\nfunction Cover({ image, title, subTitle, isPlaying, onToggle }: Props) {\r\n  function handleClick() {\r\n    onToggle();\r\n  }\r\n\r\n  return (\r\n    <Wrapper>\r\n      <StyledImage source={image} />\r\n      <Title>{title}</Title>\r\n      <SubTitle>{subTitle}</SubTitle>\r\n      <StyledButton onClick={handleClick}>\r\n        {isPlaying ? \"Pause\" : \"Play\"}\r\n      </StyledButton>\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nexport default Cover;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Track } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectIsLoaded, selectIsPlaying } from \"../../reducers/player\";\r\nimport { joinArtistNames } from \"../../utils/artist\";\r\nimport { Button, Icon, IconType, Text } from \"../core\";\r\n\r\nconst StyledButton = styled(Button)<{ isLoaded: boolean }>`\r\n  align-items: center;\r\n  border-radius: 40px;\r\n  color: ${props =>\r\n    props.isLoaded ? props.theme.primaryLight : props.theme.foreground.default};\r\n  display: flex;\r\n  margin-bottom: 5px;\r\n  padding: 10px 20px;\r\n  width: 100%;\r\n`;\r\n\r\nconst StyledIcon = styled(Icon)<{\r\n  isHidden?: boolean;\r\n}>`\r\n  display: ${props => (props.isHidden ? \"none\" : \"block\")};\r\n  margin-right: 15px;\r\n\r\n  ${StyledButton}:not(:disabled):hover & {\r\n    display: ${props => (props.isHidden ? \"block\" : \"none\")};\r\n  }\r\n`;\r\n\r\nconst Infos = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-grow: 1;\r\n  font-weight: ${props => props.theme.font.weight.light};\r\n  height: 100%;\r\n  margin-right: 15px;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst Title = styled(Text)`\r\n  margin-bottom: 5px;\r\n  text-align: left;\r\n`;\r\n\r\nconst SubTitle = styled(Text)`\r\n  color: ${props => props.theme.foreground.dark};\r\n  text-align: left;\r\n`;\r\n\r\nconst Duration = styled.span`\r\n  color: ${props => props.theme.foreground.dark};\r\n  flex-shrink: 0;\r\n`;\r\n\r\ninterface Props {\r\n  tracks: Track[];\r\n  isLoaded: (trackId: string) => boolean;\r\n  isPlaying: (trackId: string) => boolean;\r\n  onToggle: (trackId: string) => void;\r\n}\r\n\r\nfunction Tracks({ tracks, isLoaded, isPlaying, onToggle }: Props) {\r\n  function isDisabled(track: Track) {\r\n    return !!track.preview_url;\r\n  }\r\n\r\n  function renderIcon(track: Track) {\r\n    const hasPreview = track.preview_url;\r\n\r\n    return hasPreview ? (\r\n      <>\r\n        <StyledIcon\r\n          type={isPlaying(track.id) ? IconType.VolumeUp : IconType.MusicNote}\r\n        />\r\n        <StyledIcon\r\n          type={isPlaying(track.id) ? IconType.Pause : IconType.PlayArrow}\r\n          isHidden={true}\r\n        />\r\n      </>\r\n    ) : (\r\n      <StyledIcon type={IconType.MusicOff} />\r\n    );\r\n  }\r\n\r\n  function renderArtist(track: Track) {\r\n    return <SubTitle>{joinArtistNames(track.artists)}</SubTitle>;\r\n  }\r\n\r\n  function renderDuration(track: Track) {\r\n    let seconds = track.duration_ms / 1000;\r\n    const minutes = Math.floor(seconds / 60);\r\n    seconds = Math.floor(seconds % 60);\r\n\r\n    return (\r\n      <Duration>{`${minutes}:${\r\n        seconds < 10 ? \"0\" + seconds : seconds\r\n      }`}</Duration>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <ul>\r\n      {tracks.map(track => (\r\n        <li key={track.id}>\r\n          <StyledButton\r\n            onClick={() => onToggle(track.id)}\r\n            disabled={!isDisabled(track)}\r\n            isLoaded={isLoaded(track.id)}\r\n          >\r\n            {renderIcon(track)}\r\n\r\n            <Infos>\r\n              <Title>{track.name}</Title>\r\n              {renderArtist(track)}\r\n            </Infos>\r\n\r\n            {renderDuration(track)}\r\n          </StyledButton>\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  isLoaded: selectIsLoaded(state),\r\n  isPlaying: selectIsPlaying(state)\r\n});\r\n\r\nconst mapDispatch = {};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(Tracks);\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\nimport { Playlist } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectIsFetching, selectPlaylist } from \"../../reducers/playlists\";\r\nimport { selectIsPlaying } from \"../../reducers/player\";\r\nimport { getPlaylist } from \"../../actions/playlists\";\r\nimport { toggle } from \"../../actions/player\";\r\nimport Cover from \"./Cover\";\r\nimport Tracks from \"./Tracks\";\r\nimport withReloader from \"../withReloader\";\r\n\r\ninterface Params {\r\n  playlistId: string;\r\n}\r\n\r\ninterface Props extends RouteComponentProps<Params> {\r\n  isLoading: boolean;\r\n  playlist?: Playlist;\r\n  isPlaying: (playlistId: string) => boolean;\r\n  getPlaylist: (playlistId: string) => void;\r\n  toggle: (collectionId: string, trackId?: string) => void;\r\n}\r\n\r\nfunction PlaylistTracks({\r\n  match: {\r\n    params: { playlistId }\r\n  },\r\n  playlist,\r\n  isPlaying,\r\n  getPlaylist,\r\n  toggle\r\n}: Props) {\r\n  useEffect(() => {\r\n    getPlaylist(playlistId);\r\n  }, []);\r\n\r\n  function handleToggle(trackId?: string) {\r\n    toggle(playlistId, trackId);\r\n  }\r\n\r\n  return playlist ? (\r\n    <>\r\n      <Cover\r\n        image={playlist.images[0].url}\r\n        title={playlist.name}\r\n        subTitle={playlist.owner.display_name}\r\n        isPlaying={isPlaying(playlist.id)}\r\n        onToggle={handleToggle}\r\n      />\r\n      <Tracks tracks={playlist.tracks} onToggle={handleToggle} />\r\n    </>\r\n  ) : (\r\n    <></>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State, ownProps: Props) => {\r\n  const { match } = ownProps;\r\n  const { playlistId } = match.params;\r\n\r\n  return {\r\n    isLoading: selectIsFetching(state),\r\n    playlist: selectPlaylist(state, playlistId),\r\n    isPlaying: selectIsPlaying(state)\r\n  };\r\n};\r\n\r\nconst mapDispatch = {\r\n  getPlaylist,\r\n  toggle\r\n};\r\n\r\nexport default withRouter(\r\n  connect(\r\n    mapState,\r\n    mapDispatch\r\n  )(withReloader(PlaylistTracks))\r\n);\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\nimport { Album } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectIsFetching, selectAlbum } from \"../../reducers/albums\";\r\nimport { selectIsPlaying } from \"../../reducers/player\";\r\nimport { getAlbum } from \"../../actions/albums\";\r\nimport { toggle } from \"../../actions/player\";\r\nimport { joinArtistNames } from \"../../utils/artist\";\r\nimport Cover from \"./Cover\";\r\nimport Tracks from \"./Tracks\";\r\nimport withReloader from \"../withReloader\";\r\n\r\ninterface Params {\r\n  albumId: string;\r\n}\r\n\r\ninterface Props extends RouteComponentProps<Params> {\r\n  isLoading: boolean;\r\n  album?: Album;\r\n  isPlaying: (albumId: string) => boolean;\r\n  getAlbum: (albumId: string) => void;\r\n  toggle: (collectionId: string, trackId?: string) => void;\r\n}\r\n\r\nfunction AlbumTracks({\r\n  match: {\r\n    params: { albumId }\r\n  },\r\n  album,\r\n  isPlaying,\r\n  getAlbum,\r\n  toggle\r\n}: Props) {\r\n  useEffect(() => {\r\n    getAlbum(albumId);\r\n  }, []);\r\n\r\n  function handleToggle(trackId?: string) {\r\n    toggle(albumId, trackId);\r\n  }\r\n\r\n  return album ? (\r\n    <>\r\n      <Cover\r\n        image={album.images[0].url}\r\n        title={album.name}\r\n        subTitle={joinArtistNames(album.artists)}\r\n        isPlaying={isPlaying(album.id)}\r\n        onToggle={handleToggle}\r\n      />\r\n      <Tracks tracks={album.tracks} onToggle={handleToggle} />\r\n    </>\r\n  ) : (\r\n    <></>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State, ownProps: Props) => {\r\n  const { match } = ownProps;\r\n  const { albumId } = match.params;\r\n\r\n  return {\r\n    isLoading: selectIsFetching(state),\r\n    album: selectAlbum(state, albumId),\r\n    isPlaying: selectIsPlaying(state)\r\n  };\r\n};\r\n\r\nconst mapDispatch = {\r\n  getAlbum,\r\n  toggle\r\n};\r\n\r\nexport default withRouter(\r\n  connect(\r\n    mapState,\r\n    mapDispatch\r\n  )(withReloader(AlbumTracks))\r\n);\r\n","import React from \"react\";\r\nimport { Route } from \"react-router-dom\";\r\nimport styled from \"../../styles/styled\";\r\nimport DefaultRoute from \"../DefaultRoute\";\r\nimport Browse from \"../browse/Browse\";\r\nimport CategoryPlaylists from \"../browse/CategoryPlaylists\";\r\nimport Search from \"../search/Search\";\r\nimport PlaylistTracks from \"../tracks/PlaylistTracks\";\r\nimport AlbumTracks from \"../tracks/AlbumTracks\";\r\n\r\nconst Wrapper = styled.div`\r\n  box-sizing: border-box;\r\n  flex-grow: 1;\r\n  height: 100%;\r\n  overflow-y: auto;\r\n  padding: 25px;\r\n  position: relative;\r\n`;\r\n\r\nconst Routes = () => {\r\n  return (\r\n    <Wrapper>\r\n      <DefaultRoute\r\n        from={`${process.env.PUBLIC_URL}/`}\r\n        to={`${process.env.PUBLIC_URL}/browse`}\r\n      />\r\n      <Route path={`${process.env.PUBLIC_URL}/browse`} component={Browse} />\r\n      <Route path={`${process.env.PUBLIC_URL}/search`} component={Search} />\r\n      <Route\r\n        path={`${process.env.PUBLIC_URL}/categories/:categoryId/playlists`}\r\n        component={CategoryPlaylists}\r\n      />\r\n      <Route\r\n        path={`${process.env.PUBLIC_URL}/playlists/:playlistId/tracks`}\r\n        component={PlaylistTracks}\r\n      />\r\n      <Route\r\n        path={`${process.env.PUBLIC_URL}/albums/:albumId/tracks`}\r\n        component={AlbumTracks}\r\n      />\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Routes;\r\n","import React from \"react\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport styled from \"../../styles/styled\";\r\nimport Header from \"./Header\";\r\nimport Menu from \"./Menu\";\r\nimport Player from \"../player/Player\";\r\nimport Routes from \"./Routes\";\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n`;\r\n\r\nconst StyledHeader = styled(Header)`\r\n  flex-shrink: 0;\r\n`;\r\n\r\nconst Body = styled.div`\r\n  display: flex;\r\n  flex-grow: 1;\r\n  height: calc(100% - 50px - 100px);\r\n`;\r\n\r\nconst StyledPlayer = styled(Player)`\r\n  flex-shrink: 0;\r\n`;\r\n\r\nfunction App() {\r\n  return (\r\n    <Router>\r\n      <Wrapper>\r\n        <StyledHeader />\r\n\r\n        <Body>\r\n          <Menu />\r\n          <Routes />\r\n        </Body>\r\n\r\n        <StyledPlayer />\r\n      </Wrapper>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","export interface Theme {\r\n  background: {\r\n    light: string;\r\n    default: string;\r\n    dark: string;\r\n    hover: string;\r\n    active: string;\r\n  };\r\n  font: {\r\n    size: {\r\n      small: string;\r\n      medium: string;\r\n      large: string;\r\n      extraLarge: string;\r\n      extraExtraLarge: string;\r\n    };\r\n    weight: {\r\n      light: number;\r\n      normal: number;\r\n      bold: number;\r\n    };\r\n  };\r\n  foreground: {\r\n    default: string;\r\n    dark: string;\r\n    darker: string;\r\n  };\r\n  primaryLight: string;\r\n  primary: string;\r\n  filter: {\r\n    darken: string;\r\n  };\r\n}\r\n\r\nexport const theme: Theme = {\r\n  background: {\r\n    light: \"#303030\",\r\n    default: \"#202020\",\r\n    dark: \"#101010\",\r\n    hover: \"rgba(255, 255, 255, 0.1)\",\r\n    active: \"rgba(255, 255, 255, 0.2)\"\r\n  },\r\n  font: {\r\n    size: {\r\n      small: \"12px\",\r\n      medium: \"16px\",\r\n      large: \"20px\",\r\n      extraLarge: \"24px\",\r\n      extraExtraLarge: \"34px\"\r\n    },\r\n    weight: {\r\n      light: 300,\r\n      normal: 400,\r\n      bold: 500\r\n    }\r\n  },\r\n  foreground: {\r\n    default: \"#ffffff\",\r\n    dark: \"rgba(255, 255, 255, 0.6)\",\r\n    darker: \"rgba(255, 255, 255, 0.3)\"\r\n  },\r\n  primary: \"#1db954\",\r\n  primaryLight: \"#1ed760\",\r\n  filter: {\r\n    darken: \"brightness(0.5)\"\r\n  }\r\n};\r\n","import { createGlobalStyle } from \"styled-components\";\r\nimport { theme } from \"./theme\";\r\n\r\nexport default createGlobalStyle`\r\n  html, body, #root {\r\n    height: 100%;\r\n  }\r\n\r\n  body, h1, h2, button, ul {\r\n    margin: 0;\r\n    padding: 0;\r\n  }\r\n\r\n  body {\r\n    background: ${theme.background.default}; \r\n    color: ${theme.foreground.default};\r\n    font-family: \"Roboto\", sans-serif;\r\n    font-size: ${theme.font.size.medium};\r\n    font-weight: ${theme.font.weight.normal};\r\n    user-select: none;\r\n  }\r\n\r\n  a {\r\n    color: ${theme.foreground.default};\r\n    text-decoration: none;\r\n  }\r\n\r\n  button {\r\n    background: transparent;\r\n    border: 0;\r\n    color: ${theme.foreground.default};\r\n    font-family: \"Roboto\", sans-serif;\r\n    font-size: ${theme.font.size.medium};\r\n    font-weight: ${theme.font.weight.normal};\r\n\r\n    &:not(:disabled) {\r\n      cursor: pointer;\r\n    }\r\n  }\r\n\r\n  button, input {\r\n    &:focus {\r\n      outline: none;\r\n    }\r\n  }\r\n\r\n  ul {\r\n    list-style: none;\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport { createStore, applyMiddleware } from \"redux\";\r\nimport thunkMiddleware from \"redux-thunk\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport { ThemeProvider } from \"./styles/styled\";\r\nimport rootReducer from \"./reducers\";\r\nimport App from \"./components/layout/App\";\r\nimport { checkRedirection, initAuthorization } from \"./utils/authorization\";\r\nimport fetchMiddleware from \"./middlewares/fetchMiddleware\";\r\nimport { theme } from \"./styles/theme\";\r\nimport GlobalStyle from \"./styles/global\";\r\n\r\ncheckRedirection();\r\nconst store = createStore(\r\n  rootReducer,\r\n  composeWithDevTools(applyMiddleware(thunkMiddleware, fetchMiddleware))\r\n);\r\ninitAuthorization(store.dispatch);\r\n\r\nReactDOM.render(\r\n  <>\r\n    <GlobalStyle />\r\n    <ThemeProvider theme={theme}>\r\n      <Provider store={store}>\r\n        <App />\r\n      </Provider>\r\n    </ThemeProvider>\r\n  </>,\r\n  document.getElementById(\"root\")\r\n);\r\n","import { Dispatch } from \"redux\";\r\nimport { normalize } from \"normalizr\";\r\nimport { authorizedFetch } from \"../utils/authorization\";\r\n\r\nexport default () => (next: Dispatch) => (action: any) => {\r\n  const { types, path, schema } = action;\r\n\r\n  if (types) {\r\n    const [requestType, successType, failureType] = types;\r\n    next({ type: requestType });\r\n\r\n    return authorizedFetch(`${process.env.REACT_APP_BASE_URL}/${path}`).then(\r\n      response =>\r\n        response.json().then(json => {\r\n          if (response.ok) {\r\n            next({\r\n              type: successType,\r\n              payload: schema ? normalize(json, schema).entities : json\r\n            });\r\n          } else {\r\n            next({ type: failureType, payload: json.error });\r\n          }\r\n        })\r\n    );\r\n  } else {\r\n    next(action);\r\n  }\r\n};\r\n"],"sourceRoot":""}