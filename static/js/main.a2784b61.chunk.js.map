{"version":3,"sources":["styles/styled.ts","helpers/reducer.ts","actions/schemas.ts","actions/albums.ts","actions/browse.ts","actions/playlists.ts","reducers/fetching.ts","reducers/artists.ts","reducers/tracks.ts","reducers/albums.ts","actions/authorization.ts","helpers/authorization.ts","reducers/authorization.ts","reducers/playlists.ts","reducers/browse.ts","actions/player.ts","reducers/player.ts","actions/userProfile.ts","reducers/userProfile.ts","reducers/index.ts","styles/effects.ts","components/Button.tsx","components/Icon.tsx","components/layout/Title.tsx","components/layout/User.tsx","components/layout/Header.tsx","components/layout/Menu.tsx","components/player/Album.tsx","components/player/Audio.tsx","components/RoundButton.tsx","components/player/Controls.tsx","components/player/Slider.tsx","components/player/Playback.tsx","components/player/Volume.tsx","components/player/Player.tsx","components/DefaultRoute.tsx","components/browse/Covers.tsx","components/withLoader.tsx","components/browse/Categories.tsx","helpers/utils.ts","components/browse/NewReleases.tsx","components/browse/FeaturedPlaylists.tsx","components/browse/Browse.tsx","components/browse/CategoryPlaylists.tsx","components/search/Search.tsx","components/tracks/Cover.tsx","components/tracks/Tracks.tsx","components/tracks/PlaylistTracks.tsx","components/tracks/AlbumTracks.tsx","components/layout/Routes.tsx","components/layout/App.tsx","styles/theme.ts","styles/global.ts","index.tsx","middlewares/fetchMiddleware.ts"],"names":["styledComponents","styled","default","ThemeProvider","css","createGlobalStyle","keyframes","createReducer","initialState","handlers","state","arguments","length","undefined","action","hasOwnProperty","type","Category","schema","Entity","Categories","items","processStrategy","value","categories","Artist","Album","artistIds","artists","tracks","rest","Object","objectWithoutProperties","objectSpread","trackIds","Albums","albums","Track","albumId","parent","album","define","ActionType","Playlist","map","item","track","Schemas","Playlists","playlists","startFetching","isFetching","endFetching","mergeArtists","merge","byId","payload","_createReducer","defineProperty","AlbumActionType","AlbumSuccess","PlaylistActionType","PlaylistSuccess","BrowseActionType","NewReleasesSuccess","selectArtists","id","artistId","selectArtist","mergeTracks","tracks_createReducer","selectTrack","trackId","selectAlbum","selectTracks","mergeAlbums","albums_createReducer","AlbumRequest","AlbumFailure","selectIsFetching","URL","concat","process","REGEX","ACCESS_TOKEN","TOKEN_TYPE","EXPIRES_AT","receiveAuthorization","ReceiveAuthorization","isAuthorized","authorization","mergePlaylists","playlists_createReducer","PlaylistRequest","PlaylistFailure","CategoryPlaylistsSuccess","FeaturedPlaylistsSuccess","selectPlaylist","playlistId","playlist","selectPlaylists","playlistIds","TrackState","categoriesById","categoryPlaylistIds","featuredPlaylistIds","newReleaseIds","browse_createReducer","CategoriesRequest","CategoriesSuccess","CategoriesFailure","CategoryRequest","CategorySuccess","CategoryFailure","CategoryPlaylistsRequest","keys","CategoryPlaylistsFailure","FeaturedPlaylistsRequest","FeaturedPlaylistsFailure","NewReleasesRequest","NewReleasesFailure","browse","selectCategories","values","selectCategory","categoryId","selectCategoryPlaylists","selectFeaturedPlaylists","selectNewReleases","albumIds","selectAlbums","play","dispatch","Play","pause","Pause","None","duration","currentTime","shouldPlay","shouldPause","shouldSeek","volume","isMuted","shouldChange","player_createReducer","Load","isLoaded","Loaded","Playing","isPlaying","Update","Paused","isPaused","Seek","Action","Seeked","ChangeVolume","VolumeChanged","selectLoadedTrack","player","selectState","selectTimes","selectCommands","_state$player","selectLevels","_state$player2","userProfile","UserProfileSuccess","selectUserProfile","combineReducers","ripple","props","theme","foreground","dark","background","active","hover","IconType","Button","button","_templateObject","Icon","className","react_default","a","createElement","Wrapper","div","Title_templateObject","font","size","large","weight","bold","StyledIcon","_templateObject2","Title","Wifi","Link","to","User_templateObject","User_templateObject2","User","display_name","User_Wrapper","User_StyledIcon","Person","header","Header_templateObject","primary","LoginButton","Header_templateObject2","Header","handleClick","_callee","regenerator_default","wrap","_context","prev","next","_this","getAuthorization","stop","_this$props","this","getUserProfile","Header_Wrapper","layout_Title","layout_User","onClick","Component","mapDispatch","_ref","asyncToGenerator","mark","RequestAuthorization","Promise","resolve","reject","addEventListener","handleStorage","event","key","removeEventListener","location","assign","_x","apply","types","UserProfileRequest","UserProfileFailure","path","connect","ul","Menu_templateObject","StyledNavLink","NavLink","Menu_templateObject2","primaryLight","_templateObject3","Menu","Menu_Wrapper","Menu_StyledIcon","ViewModule","Search","Album_templateObject","Image","img","Album_templateObject2","Infos","Album_templateObject3","span","_templateObject4","_templateObject5","light","image","name","artist","Album_Wrapper","src","Album_Title","Album_Artist","Audio","audio","createRef","handleLoaded","target","loaded","handlePlay","playing","handleUpdate","update","handlePause","paused","handleSeeked","seeked","handleChange","volumeChanged","current","times","_this$props$levels","levels","_this$props$commands","commands","loadedTrack","ref","preview_url","onLoadedMetadata","onPlay","onTimeUpdate","onPause","onSeeked","onVolumeChange","elapsed","StyedButton","RoundButton_templateObject","RoundButton_templateObject2","RoundButton","iconType","RoundButton_StyledIcon","Controls_templateObject","MainButton","Controls_templateObject2","Controls","handleToggleClick","Controls_Wrapper","components_RoundButton","disabled","SkipPrevious","PlayArrow","SkipNext","Slider_templateObject","isDisabled","Left","Slider_templateObject2","width","Thumb","Slider_templateObject3","position","Right","Slider_templateObject4","Slider","wrapper","thumb","isDown","handleMouseDown","canChange","setState","getValue","pageX","document","handleMouseMove","handleMouseUp","onChange","x","getBoundingClientRect","left","clientWidth","getCurrentValue","Slider_Wrapper","onMouseDown","defaultProps","Playback_templateObject","ProgressTime","Playback_templateObject2","small","StyledSlider","Playback_templateObject3","Playback","onSeek","seconds","minutes","Math","floor","round","_this$props2","canSeek","progress","Playback_Wrapper","renderTime","Volume_templateObject","Volume_templateObject2","Volume","Volume_Wrapper","VolumeOff","VolumeUp","Volume_StyledSlider","Player_templateObject","ThirdWrapper","Player_templateObject2","LeftWrapper","Player_templateObject3","CenterWrapper","Player_templateObject4","RightWrapper","Player_templateObject5","Player","seek","changeVolume","Fragment","Player_Wrapper","player_Album","images","url","player_Controls","player_Playback","player_Volume","player_Audio","time","DefaultRoute","from","Route","exact","render","Redirect","StyledList","Covers_templateObject","StyledItem","li","Covers_templateObject2","StyledButton","Covers_templateObject3","Covers_templateObject4","Name","Covers_templateObject5","_templateObject6","Covers","Covers_Image","title","Covers_Artist","Fader","withLoader_templateObject","isLoading","Loader","withLoader_templateObject2","withLoader","WrappedComponent","history","push","getCategories","category","icons","browse_Covers","withRouter","joinArtistNames","join","NewReleases","getAlbums","author","FeaturedPlaylists","getPlaylists","Browse_templateObject","Browse_templateObject2","medium","Browse_templateObject3","Browse","match","Browse_Wrapper","Browse_StyledList","label","link","Browse_StyledNavLink","components_DefaultRoute","component","h1","CategoryPlaylists_templateObject","extraExtraLarge","CategoryPlaylists","getCategory","params","CategoryPlaylists_Title","getCategoryPlaylists","ownProps","Cover_templateObject","Cover_templateObject2","Cover_templateObject3","Cover_templateObject4","Cover_templateObject5","Cover","onToggle","Cover_Wrapper","Cover_Image","Cover_Title","Cover_Artist","Cover_StyledButton","Tracks_templateObject","Tracks_templateObject2","isHidden","Tracks_templateObject3","Tracks_templateObject4","Tracks_templateObject5","Duration","Tracks_templateObject6","Tracks","load","hasPreview","Tracks_StyledIcon","MusicNote","MusicOff","Tracks_Artist","duration_ms","_this2","Tracks_StyledButton","renderIcon","Tracks_Infos","Tracks_Title","renderArtist","renderDuration","PlaylistTracks","handleToggle","getPlaylist","tracks_Cover","owner","tracks_Tracks","AlbumTracks","getAlbum","Routes_templateObject","Routes","Routes_Wrapper","App_templateObject","Body","App_templateObject2","App","BrowserRouter","App_Wrapper","layout_Header","layout_Menu","layout_Routes","player_Player","extraLarge","normal","filter","darken","global_templateObject","hash","localStorage","date","Date","setSeconds","getSeconds","parseInt","toString","checkRedirection","store","createStore","rootReducer","composeWithDevTools","applyMiddleware","thunkMiddleware","_types","slicedToArray","requestType","successType","failureType","tokenType","accessToken","fetch","headers","Authorization","authorizedFetch","then","response","json","ok","normalize","entities","error","parse","now","ReactDOM","global","es","layout_App","getElementById"],"mappings":"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","file":"static/js/main.a2784b61.chunk.js","sourcesContent":["import * as styledComponents from \"styled-components\";\r\nimport { Theme } from \"./theme\";\r\n\r\nconst {\r\n  default: styled,\r\n  css,\r\n  createGlobalStyle,\r\n  keyframes,\r\n  ThemeProvider\r\n} = styledComponents as styledComponents.ThemedStyledComponentsModule<Theme>;\r\n\r\nexport { css, createGlobalStyle, keyframes, ThemeProvider };\r\nexport default styled;\r\n","import { Action } from \"redux\";\r\n\r\nexport default function createReducer(initialState: object, handlers: any) {\r\n  return function reducer(state = initialState, action: Action) {\r\n    if (handlers.hasOwnProperty(action.type)) {\r\n      return handlers[action.type](state, action);\r\n    } else {\r\n      return state;\r\n    }\r\n  };\r\n}\r\n","import { schema } from \"normalizr\";\r\n\r\nconst Category = new schema.Entity(\"categories\");\r\n\r\nconst Categories = new schema.Entity(\r\n  \"categoryItems\",\r\n  {\r\n    items: [Category]\r\n  },\r\n  {\r\n    processStrategy: value => {\r\n      const { items } = value.categories;\r\n      return {\r\n        items\r\n      };\r\n    }\r\n  }\r\n);\r\n\r\nconst Artist = new schema.Entity(\"artists\");\r\n\r\nconst Album = new schema.Entity(\r\n  \"albums\",\r\n  {\r\n    artistIds: [Artist]\r\n  },\r\n  {\r\n    processStrategy: value => {\r\n      const { artists, tracks, ...rest } = value;\r\n      return {\r\n        ...rest,\r\n        artistIds: artists,\r\n        trackIds: tracks ? tracks.items : []\r\n      };\r\n    }\r\n  }\r\n);\r\n\r\nconst Albums = new schema.Entity(\r\n  \"albumItems\",\r\n  {\r\n    items: [Album]\r\n  },\r\n  {\r\n    processStrategy: value => {\r\n      const { items } = value.albums;\r\n      return {\r\n        items\r\n      };\r\n    }\r\n  }\r\n);\r\n\r\nconst Track = new schema.Entity(\r\n  \"tracks\",\r\n  {\r\n    albumId: Album,\r\n    artistIds: [Artist]\r\n  },\r\n  {\r\n    processStrategy: (value, parent) => {\r\n      const { album, artists, ...rest } = value;\r\n      return {\r\n        ...rest,\r\n        albumId: parent[\"type\"] === \"album\" ? parent : album,\r\n        artistIds: artists\r\n      };\r\n    }\r\n  }\r\n);\r\n\r\nAlbum.define({\r\n  trackIds: [Track]\r\n});\r\n\r\nconst Playlist = new schema.Entity(\r\n  \"playlists\",\r\n  {\r\n    trackIds: [Track]\r\n  },\r\n  {\r\n    processStrategy: value => {\r\n      const { tracks, ...rest } = value;\r\n      return {\r\n        ...rest,\r\n        trackIds: tracks.items\r\n          ? tracks.items.map((item: any) => item.track)\r\n          : []\r\n      };\r\n    }\r\n  }\r\n);\r\n\r\nconst Playlists = new schema.Entity(\r\n  \"playlistItems\",\r\n  {\r\n    items: [Playlist]\r\n  },\r\n  {\r\n    processStrategy: value => {\r\n      const { items } = value.playlists;\r\n      return {\r\n        items\r\n      };\r\n    }\r\n  }\r\n);\r\n\r\nexport const Schemas = {\r\n  Artist,\r\n  Album,\r\n  Albums,\r\n  Category,\r\n  Categories,\r\n  Track,\r\n  Playlist,\r\n  Playlists\r\n};\r\n","import { EntitiesAction, FetchDispatch } from \"./types\";\r\nimport { Schemas } from \"./schemas\";\r\n\r\nexport enum ActionType {\r\n  AlbumRequest = \"ALBUM_REQUEST\",\r\n  AlbumSuccess = \"ALBUM_SUCCESS\",\r\n  AlbumFailure = \"ALBUM_FAILURE\"\r\n}\r\n\r\nexport interface AlbumSuccessAction\r\n  extends EntitiesAction<ActionType.AlbumSuccess> {}\r\n\r\nexport function getAlbum(albumId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.AlbumRequest,\r\n        ActionType.AlbumSuccess,\r\n        ActionType.AlbumFailure\r\n      ],\r\n      path: `albums/${albumId}`,\r\n      schema: Schemas.Album\r\n    });\r\n  };\r\n}\r\n","import { EntitiesAction, FetchDispatch } from \"./types\";\r\nimport { Schemas } from \"./schemas\";\r\n\r\nexport enum ActionType {\r\n  CategoriesRequest = \"CATEGORIES_REQUEST\",\r\n  CategoriesSuccess = \"CATEGORIES_SUCCESS\",\r\n  CategoriesFailure = \"CATEGORIES_FAILURE\",\r\n  CategoryRequest = \"CATEGORY_REQUEST\",\r\n  CategorySuccess = \"CATEGORY_SUCCESS\",\r\n  CategoryFailure = \"CATEGORY_FAILURE\",\r\n  CategoryPlaylistsRequest = \"CATEGORY_PLAYLISTS_REQUEST\",\r\n  CategoryPlaylistsSuccess = \"CATEGORY_PLAYLISTS_SUCCESS\",\r\n  CategoryPlaylistsFailure = \"CATEGORY_PLAYLISTS_FAILURE\",\r\n  FeaturedPlaylistsRequest = \"FEATURED_PLAYLISTS_REQUEST\",\r\n  FeaturedPlaylistsSuccess = \"FEATURED_PLAYLISTS_SUCCESS\",\r\n  FeaturedPlaylistsFailure = \"FEATURED_PLAYLISTS_FAILURE\",\r\n  NewReleasesRequest = \"NEW_RELEASES_REQUEST\",\r\n  NewReleasesSuccess = \"NEW_RELEASES_SUCCESS\",\r\n  NewReleasesFailure = \"NEW_RELEASES_FAILURE\"\r\n}\r\n\r\nexport interface CategoriesSuccessAction\r\n  extends EntitiesAction<ActionType.CategoriesSuccess> {}\r\n\r\nexport function getCategories() {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.CategoriesRequest,\r\n        ActionType.CategoriesSuccess,\r\n        ActionType.CategoriesFailure\r\n      ],\r\n      path: \"browse/categories\",\r\n      schema: Schemas.Categories\r\n    });\r\n  };\r\n}\r\n\r\nexport interface CategorySuccessAction\r\n  extends EntitiesAction<ActionType.CategorySuccess> {}\r\n\r\nexport function getCategory(categoryId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.CategoryRequest,\r\n        ActionType.CategorySuccess,\r\n        ActionType.CategoryFailure\r\n      ],\r\n      path: `browse/categories/${categoryId}`,\r\n      schema: Schemas.Category\r\n    });\r\n  };\r\n}\r\n\r\nexport interface CategoryPlaylistsSuccessAction\r\n  extends EntitiesAction<ActionType.CategoryPlaylistsSuccess> {}\r\n\r\nexport function getCategoryPlaylists(categoryId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.CategoryPlaylistsRequest,\r\n        ActionType.CategoryPlaylistsSuccess,\r\n        ActionType.CategoryPlaylistsFailure\r\n      ],\r\n      path: `browse/categories/${categoryId}/playlists`,\r\n      schema: Schemas.Playlists\r\n    });\r\n  };\r\n}\r\n\r\nexport interface FeaturedPlaylistsSuccessAction\r\n  extends EntitiesAction<ActionType.FeaturedPlaylistsSuccess> {}\r\n\r\nexport function getFeaturedPlaylists() {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.FeaturedPlaylistsRequest,\r\n        ActionType.FeaturedPlaylistsSuccess,\r\n        ActionType.FeaturedPlaylistsFailure\r\n      ],\r\n      path: \"browse/featured-playlists\",\r\n      schema: Schemas.Playlists\r\n    });\r\n  };\r\n}\r\n\r\nexport interface NewReleasesSuccessAction\r\n  extends EntitiesAction<ActionType.NewReleasesSuccess> {}\r\n\r\nexport function getNewReleases() {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.NewReleasesRequest,\r\n        ActionType.NewReleasesSuccess,\r\n        ActionType.NewReleasesFailure\r\n      ],\r\n      path: \"browse/new-releases\",\r\n      schema: Schemas.Albums\r\n    });\r\n  };\r\n}\r\n","import { EntitiesAction, FetchDispatch } from \"./types\";\r\nimport { Schemas } from \"./schemas\";\r\n\r\nexport enum ActionType {\r\n  PlaylistRequest = \"PLAYLIST_REQUEST\",\r\n  PlaylistSuccess = \"PLAYLIST_SUCCESS\",\r\n  PlaylistFailure = \"PLAYLIST_FAILURE\"\r\n}\r\n\r\nexport interface PlaylistSuccessAction\r\n  extends EntitiesAction<ActionType.PlaylistSuccess> {}\r\n\r\nexport function getPlaylist(playlistId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.PlaylistRequest,\r\n        ActionType.PlaylistSuccess,\r\n        ActionType.PlaylistFailure\r\n      ],\r\n      path: `playlists/${playlistId}`,\r\n      schema: Schemas.Playlist\r\n    });\r\n  };\r\n}\r\n","export interface FetchableState {\r\n  isFetching: boolean;\r\n}\r\n\r\nexport const startFetching = <S extends FetchableState>(state: S): S => ({\r\n  ...state,\r\n  isFetching: true\r\n});\r\n\r\nexport const endFetching = <S extends FetchableState>(state: S): S => ({\r\n  ...state,\r\n  isFetching: false\r\n});\r\n\r\nexport const isFetching = <S extends FetchableState>(state: S): boolean =>\r\n  state.isFetching;\r\n","import merge from \"lodash/merge\";\r\nimport createReducer from \"../helpers/reducer\";\r\nimport { Artist } from \"../types\";\r\nimport { EntitiesAction } from \"../actions/types\";\r\nimport { State as CombinedState } from \".\";\r\nimport { ActionType as AlbumActionType } from \"../actions/albums\";\r\nimport { ActionType as PlaylistActionType } from \"../actions/playlists\";\r\nimport { ActionType as BrowseActionType } from \"../actions/browse\";\r\n\r\nexport interface State {\r\n  byId: { [id: string]: Artist };\r\n}\r\n\r\nconst initialState: State = {\r\n  byId: {}\r\n};\r\n\r\nfunction mergeArtists(state: State, action: EntitiesAction<any>): State {\r\n  return merge({}, state, { byId: action.payload.artists });\r\n}\r\n\r\nexport default createReducer(initialState, {\r\n  [AlbumActionType.AlbumSuccess]: mergeArtists,\r\n  [PlaylistActionType.PlaylistSuccess]: mergeArtists,\r\n  [BrowseActionType.NewReleasesSuccess]: mergeArtists\r\n});\r\n\r\nexport function selectArtist(state: CombinedState, artistId: string): Artist {\r\n  return state.artists.byId[artistId];\r\n}\r\n\r\nexport function selectArtists(\r\n  state: CombinedState,\r\n  artistIds: string[]\r\n): Artist[] {\r\n  return artistIds ? artistIds.map(id => selectArtist(state, id)) : [];\r\n}\r\n","import merge from \"lodash/merge\";\r\nimport createReducer from \"../helpers/reducer\";\r\nimport { Album, Track } from \"../types\";\r\nimport { EntitiesAction } from \"../actions/types\";\r\nimport { State as CombinedState } from \".\";\r\nimport { ActionType as AlbumActionType } from \"../actions/albums\";\r\nimport { ActionType as PlaylistActionType } from \"../actions/playlists\";\r\nimport { selectAlbum } from \"./albums\";\r\nimport { selectArtists } from \"./artists\";\r\n\r\nexport interface State {\r\n  byId: { [id: string]: Track };\r\n}\r\n\r\nconst initialState: State = {\r\n  byId: {}\r\n};\r\n\r\nfunction mergeTracks(state: State, action: EntitiesAction<any>): State {\r\n  return merge({}, state, { byId: action.payload.tracks });\r\n}\r\n\r\nexport default createReducer(initialState, {\r\n  [AlbumActionType.AlbumSuccess]: mergeTracks,\r\n  [PlaylistActionType.PlaylistSuccess]: mergeTracks\r\n});\r\n\r\nexport function selectTrack(\r\n  state: CombinedState,\r\n  trackId: string,\r\n  album: Album | undefined = undefined\r\n): Track {\r\n  let track = state.tracks.byId[trackId];\r\n\r\n  if (track) {\r\n    track = {\r\n      ...track,\r\n      album: album ? album : selectAlbum(state, track.albumId),\r\n      artists: selectArtists(state, track.artistIds)\r\n    };\r\n  }\r\n\r\n  return track;\r\n}\r\n\r\nexport function selectTracks(\r\n  state: CombinedState,\r\n  trackIds: string[],\r\n  album: Album | undefined = undefined\r\n): Track[] {\r\n  return trackIds ? trackIds.map(id => selectTrack(state, id, album)) : [];\r\n}\r\n","import merge from \"lodash/merge\";\r\nimport createReducer from \"../helpers/reducer\";\r\nimport { Album } from \"../types\";\r\nimport { EntitiesAction } from \"../actions/types\";\r\nimport { ActionType, AlbumSuccessAction } from \"../actions/albums\";\r\nimport { ActionType as BrowseActionType } from \"../actions/browse\";\r\nimport { ActionType as PlaylistActionType } from \"../actions/playlists\";\r\nimport { State as CombinedState } from \".\";\r\nimport {\r\n  FetchableState,\r\n  startFetching,\r\n  endFetching,\r\n  isFetching\r\n} from \"./fetching\";\r\nimport { selectArtists } from \"./artists\";\r\nimport { selectTracks } from \"./tracks\";\r\n\r\nexport interface State extends FetchableState {\r\n  byId: { [id: string]: Album };\r\n}\r\n\r\nconst initialState: State = {\r\n  isFetching: false,\r\n  byId: {}\r\n};\r\n\r\nfunction mergeAlbums(state: State, action: EntitiesAction<any>): State {\r\n  return merge({}, state, { byId: action.payload.albums });\r\n}\r\n\r\nexport default createReducer(initialState, {\r\n  [ActionType.AlbumRequest]: startFetching,\r\n  [ActionType.AlbumSuccess]: (\r\n    state: State,\r\n    action: AlbumSuccessAction\r\n  ): State => endFetching(mergeAlbums(state, action)),\r\n  [ActionType.AlbumFailure]: endFetching,\r\n\r\n  [BrowseActionType.NewReleasesSuccess]: mergeAlbums,\r\n  [PlaylistActionType.PlaylistSuccess]: mergeAlbums\r\n});\r\n\r\nexport function selectIsFetching(state: CombinedState): boolean {\r\n  return isFetching(state.albums);\r\n}\r\n\r\nexport function selectAlbum(state: CombinedState, albumId: string): Album {\r\n  let album = state.albums.byId[albumId];\r\n\r\n  if (album) {\r\n    album = {\r\n      ...album,\r\n      artists: selectArtists(state, album.artistIds),\r\n      tracks: selectTracks(state, album.trackIds, album)\r\n    };\r\n  }\r\n\r\n  return album;\r\n}\r\n\r\nexport function selectAlbums(\r\n  state: CombinedState,\r\n  albumIds: string[]\r\n): Album[] {\r\n  return albumIds ? albumIds.map(id => selectAlbum(state, id)) : [];\r\n}\r\n","import { Action, Dispatch } from \"redux\";\r\nimport { authorize } from \"../helpers/authorization\";\r\n\r\nexport enum ActionType {\r\n  RequestAuthorization = \"REQUEST_AUTHORIZATION\",\r\n  ReceiveAuthorization = \"RECEIVE_AUTHORIZATION\"\r\n}\r\n\r\nexport interface RequestAuthorizationAction\r\n  extends Action<ActionType.RequestAuthorization> {}\r\n\r\nfunction requestAuthorization(): RequestAuthorizationAction {\r\n  return {\r\n    type: ActionType.RequestAuthorization\r\n  };\r\n}\r\n\r\nexport interface ReceiveAuthorizationAction\r\n  extends Action<ActionType.ReceiveAuthorization> {}\r\n\r\nexport function receiveAuthorization(): ReceiveAuthorizationAction {\r\n  return {\r\n    type: ActionType.ReceiveAuthorization\r\n  };\r\n}\r\n\r\nexport function getAuthorization() {\r\n  return async (\r\n    dispatch: Dispatch<RequestAuthorizationAction | ReceiveAuthorizationAction>\r\n  ) => {\r\n    dispatch(requestAuthorization());\r\n    await authorize();\r\n    dispatch(receiveAuthorization());\r\n  };\r\n}\r\n","import { Dispatch } from \"redux\";\r\nimport { receiveAuthorization } from \"../actions/authorization\";\r\n\r\nconst URL = `https://accounts.spotify.com/authorize?client_id=${\r\n  process.env.REACT_APP_CLIENT_ID\r\n}&response_type=token&redirect_uri=${process.env.REACT_APP_REDIRECT_URI}`;\r\nconst REGEX = /#access_token=(.*?)&token_type=(.*?)&expires_in=(.*)$/;\r\nconst ACCESS_TOKEN = \"token\";\r\nconst TOKEN_TYPE = \"tokenType\";\r\nconst EXPIRES_AT = \"expiresAt\";\r\n\r\nfunction authorize(): Promise<any> {\r\n  return new Promise((resolve, reject) => {\r\n    const handleStorage = (event: StorageEvent) => {\r\n      if (event.key === ACCESS_TOKEN) {\r\n        removeEventListener(\"storage\", handleStorage);\r\n        resolve();\r\n      }\r\n    };\r\n    addEventListener(\"storage\", handleStorage);\r\n    location.assign(URL);\r\n  });\r\n}\r\n\r\nfunction checkRedirection(): void {\r\n  const match = location.hash.match(REGEX);\r\n  if (match) {\r\n    localStorage[ACCESS_TOKEN] = match[1];\r\n    localStorage[TOKEN_TYPE] = match[2];\r\n    const date = new Date();\r\n    date.setSeconds(date.getSeconds() + parseInt(match[3]));\r\n    localStorage[EXPIRES_AT] = date.toString();\r\n  }\r\n}\r\n\r\nfunction initAuthorization(dispatch: Dispatch): void {\r\n  if (\r\n    !!localStorage[ACCESS_TOKEN] &&\r\n    Date.parse(localStorage[EXPIRES_AT]) > Date.now()\r\n  ) {\r\n    dispatch(receiveAuthorization());\r\n  }\r\n}\r\n\r\nfunction authorizedFetch(url: string): Promise<Response> {\r\n  const tokenType = localStorage[TOKEN_TYPE];\r\n  const accessToken = localStorage[ACCESS_TOKEN];\r\n\r\n  return fetch(url, {\r\n    headers: {\r\n      Authorization: `${tokenType} ${accessToken}`\r\n    }\r\n  });\r\n}\r\n\r\nexport { authorize, checkRedirection, initAuthorization, authorizedFetch };\r\n","import createReducer from \"../helpers/reducer\";\r\nimport {\r\n  ActionType,\r\n  ReceiveAuthorizationAction\r\n} from \"../actions/authorization\";\r\nimport { State as CombinedState } from \".\";\r\n\r\nexport interface State {\r\n  isAuthorized: boolean;\r\n}\r\n\r\nconst initialState: State = {\r\n  isAuthorized: false\r\n};\r\n\r\nexport default createReducer(initialState, {\r\n  [ActionType.ReceiveAuthorization]: (\r\n    state: State,\r\n    action: ReceiveAuthorizationAction\r\n  ) => ({\r\n    ...state,\r\n    isAuthorized: true\r\n  })\r\n});\r\n\r\nexport function isAuthorized(state: CombinedState): boolean {\r\n  return !!state.authorization.isAuthorized;\r\n}\r\n","import merge from \"lodash/merge\";\r\nimport createReducer from \"../helpers/reducer\";\r\nimport { Playlist } from \"../types\";\r\nimport { EntitiesAction } from \"../actions/types\";\r\nimport { ActionType, PlaylistSuccessAction } from \"../actions/playlists\";\r\nimport { ActionType as BrowseActionType } from \"../actions/browse\";\r\nimport { State as CombinedState } from \".\";\r\nimport {\r\n  FetchableState,\r\n  startFetching,\r\n  endFetching,\r\n  isFetching\r\n} from \"./fetching\";\r\nimport { selectTracks } from \"./tracks\";\r\n\r\nexport interface State extends FetchableState {\r\n  byId: { [id: string]: Playlist };\r\n}\r\n\r\nconst initialState: State = {\r\n  isFetching: false,\r\n  byId: {}\r\n};\r\n\r\nfunction mergePlaylists(state: State, action: EntitiesAction<any>): State {\r\n  return merge({}, state, { byId: action.payload.playlists });\r\n}\r\n\r\nexport default createReducer(initialState, {\r\n  [ActionType.PlaylistRequest]: startFetching,\r\n  [ActionType.PlaylistSuccess]: (\r\n    state: State,\r\n    action: PlaylistSuccessAction\r\n  ): State => endFetching(mergePlaylists(state, action)),\r\n  [ActionType.PlaylistFailure]: endFetching,\r\n\r\n  [BrowseActionType.CategoryPlaylistsSuccess]: mergePlaylists,\r\n  [BrowseActionType.FeaturedPlaylistsSuccess]: mergePlaylists\r\n});\r\n\r\nexport function selectIsFetching(state: CombinedState): boolean {\r\n  return isFetching(state.playlists);\r\n}\r\n\r\nexport function selectPlaylist(\r\n  state: CombinedState,\r\n  playlistId: string\r\n): Playlist {\r\n  let playlist = state.playlists.byId[playlistId];\r\n\r\n  if (playlist) {\r\n    playlist = { ...playlist, tracks: selectTracks(state, playlist.trackIds) };\r\n  }\r\n\r\n  return playlist;\r\n}\r\n\r\nexport function selectPlaylists(\r\n  state: CombinedState,\r\n  playlistIds: string[]\r\n): Playlist[] {\r\n  return playlistIds ? playlistIds.map(id => selectPlaylist(state, id)) : [];\r\n}\r\n","import { Album, Category, Playlist } from \"../types\";\r\nimport createReducer from \"../helpers/reducer\";\r\nimport {\r\n  ActionType,\r\n  CategorySuccessAction,\r\n  CategoriesSuccessAction,\r\n  NewReleasesSuccessAction,\r\n  CategoryPlaylistsSuccessAction,\r\n  FeaturedPlaylistsSuccessAction\r\n} from \"../actions/browse\";\r\nimport { State as CombinedState } from \".\";\r\nimport {\r\n  FetchableState,\r\n  startFetching,\r\n  endFetching,\r\n  isFetching\r\n} from \"./fetching\";\r\nimport { selectPlaylists } from \"./playlists\";\r\nimport { selectAlbums } from \"./albums\";\r\n\r\nexport interface State extends FetchableState {\r\n  categoriesById: { [id: string]: Category };\r\n  categoryPlaylistIds: string[];\r\n  featuredPlaylistIds: string[];\r\n  newReleaseIds: string[];\r\n}\r\n\r\nconst initialState: State = {\r\n  isFetching: false,\r\n  categoriesById: {},\r\n  categoryPlaylistIds: [],\r\n  featuredPlaylistIds: [],\r\n  newReleaseIds: []\r\n};\r\n\r\nexport default createReducer(initialState, {\r\n  [ActionType.CategoriesRequest]: startFetching,\r\n  [ActionType.CategoriesSuccess]: (\r\n    state: State,\r\n    action: CategoriesSuccessAction\r\n  ): State =>\r\n    endFetching({\r\n      ...state,\r\n      categoriesById: action.payload.categories\r\n    }),\r\n  [ActionType.CategoriesFailure]: endFetching,\r\n\r\n  [ActionType.CategoryRequest]: startFetching,\r\n  [ActionType.CategorySuccess]: (\r\n    state: State,\r\n    action: CategorySuccessAction\r\n  ): State =>\r\n    endFetching({\r\n      ...state,\r\n      categoriesById: action.payload.categories\r\n    }),\r\n  [ActionType.CategoryFailure]: endFetching,\r\n\r\n  [ActionType.CategoryPlaylistsRequest]: startFetching,\r\n  [ActionType.CategoryPlaylistsSuccess]: (\r\n    state: State,\r\n    action: CategoryPlaylistsSuccessAction\r\n  ): State =>\r\n    endFetching({\r\n      ...state,\r\n      categoryPlaylistIds: Object.keys(action.payload.playlists)\r\n    }),\r\n  [ActionType.CategoryPlaylistsFailure]: endFetching,\r\n\r\n  [ActionType.FeaturedPlaylistsRequest]: startFetching,\r\n  [ActionType.FeaturedPlaylistsSuccess]: (\r\n    state: State,\r\n    action: FeaturedPlaylistsSuccessAction\r\n  ): State =>\r\n    endFetching({\r\n      ...state,\r\n      featuredPlaylistIds: Object.keys(action.payload.playlists)\r\n    }),\r\n  [ActionType.FeaturedPlaylistsFailure]: endFetching,\r\n\r\n  [ActionType.NewReleasesRequest]: startFetching,\r\n  [ActionType.NewReleasesSuccess]: (\r\n    state: State,\r\n    action: NewReleasesSuccessAction\r\n  ): State =>\r\n    endFetching({\r\n      ...state,\r\n      newReleaseIds: Object.keys(action.payload.albums)\r\n    }),\r\n  [ActionType.NewReleasesFailure]: endFetching\r\n});\r\n\r\nexport function selectIsFetching(state: CombinedState): boolean {\r\n  return isFetching(state.browse);\r\n}\r\n\r\nexport function selectCategories(state: CombinedState): Category[] {\r\n  return Object.values(state.browse.categoriesById);\r\n}\r\n\r\nexport function selectCategory(\r\n  state: CombinedState,\r\n  categoryId: string\r\n): Category | undefined {\r\n  return state.browse.categoriesById[categoryId];\r\n}\r\n\r\nexport function selectCategoryPlaylists(state: CombinedState): Playlist[] {\r\n  return selectPlaylists(state, state.browse.categoryPlaylistIds);\r\n}\r\n\r\nexport function selectFeaturedPlaylists(state: CombinedState): Playlist[] {\r\n  return selectPlaylists(state, state.browse.featuredPlaylistIds);\r\n}\r\n\r\nexport function selectNewReleases(state: CombinedState): Album[] {\r\n  return selectAlbums(state, state.browse.newReleaseIds);\r\n}\r\n","import { Dispatch } from \"redux\";\r\nimport { PayloadAction } from \"./types\";\r\n\r\nexport enum ActionType {\r\n  Load = \"LOAD\",\r\n  Loaded = \"LOADED\",\r\n  Playing = \"PLAYING\",\r\n  Update = \"UPDATE\",\r\n  Play = \"PLAY\",\r\n  Pause = \"PAUSE\",\r\n  Paused = \"PAUSED\",\r\n  Seek = \"SEEK\",\r\n  Seeked = \"SEEKED\",\r\n  ChangeVolume = \"CHANGE_VOLUME\",\r\n  VolumeChanged = \"VOLUME_CHANGED\",\r\n  LoadAlbum = \"LOAD_ALBUM\",\r\n  LadPlaylist = \"LOAD_PLAYLIST\"\r\n}\r\n\r\nexport interface LoadAction extends PayloadAction<ActionType.Load, string> {}\r\n\r\nexport function load(trackId: string) {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.Load,\r\n      payload: trackId\r\n    });\r\n  };\r\n}\r\n\r\nexport interface LoadedAction\r\n  extends PayloadAction<ActionType.Loaded, number> {}\r\n\r\nexport function loaded(duration: number) {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.Loaded,\r\n      payload: duration\r\n    });\r\n  };\r\n}\r\n\r\nexport function playing() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.Playing\r\n    });\r\n  };\r\n}\r\n\r\nexport interface UpdateAction\r\n  extends PayloadAction<ActionType.Update, number> {}\r\n\r\nexport function update(elapsed: number) {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.Update,\r\n      payload: elapsed\r\n    });\r\n  };\r\n}\r\n\r\nexport function play() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.Play\r\n    });\r\n  };\r\n}\r\n\r\nexport function pause() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.Pause\r\n    });\r\n  };\r\n}\r\n\r\nexport function paused() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.Paused\r\n    });\r\n  };\r\n}\r\n\r\nexport interface SeekAction extends PayloadAction<ActionType.Seek, number> {}\r\n\r\nexport function seek(time: number) {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.Seek,\r\n      payload: time\r\n    });\r\n  };\r\n}\r\n\r\nexport function seeked() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.Seeked\r\n    });\r\n  };\r\n}\r\n\r\nexport interface ChangeVolumeAction\r\n  extends PayloadAction<\r\n    ActionType.ChangeVolume,\r\n    { volume: number; isMuted: boolean }\r\n  > {}\r\n\r\nexport function changeVolume(volume: number, isMuted: boolean) {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.ChangeVolume,\r\n      payload: {\r\n        volume,\r\n        isMuted\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\nexport function volumeChanged() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.VolumeChanged\r\n    });\r\n  };\r\n}\r\n","import createReducer from \"../helpers/reducer\";\r\nimport { Track } from \"../types\";\r\nimport {\r\n  ActionType,\r\n  LoadAction,\r\n  LoadedAction,\r\n  UpdateAction,\r\n  SeekAction,\r\n  ChangeVolumeAction\r\n} from \"../actions/player\";\r\nimport { State as CombinedState } from \".\";\r\nimport { selectTrack } from \"./tracks\";\r\n\r\nexport enum TrackState {\r\n  None,\r\n  isLoaded,\r\n  isPlaying,\r\n  isPaused\r\n}\r\n\r\nexport interface State {\r\n  trackId?: string;\r\n  state: TrackState;\r\n  duration: number;\r\n  currentTime: number;\r\n  shouldPlay: boolean;\r\n  shouldPause: boolean;\r\n  shouldSeek: boolean;\r\n  volume: number;\r\n  isMuted: boolean;\r\n  shouldChange: boolean;\r\n}\r\n\r\nconst initialState: State = {\r\n  state: TrackState.None,\r\n  duration: 0,\r\n  currentTime: 0,\r\n  shouldPlay: false,\r\n  shouldPause: false,\r\n  shouldSeek: false,\r\n  volume: 1,\r\n  isMuted: false,\r\n  shouldChange: false\r\n};\r\n\r\nexport default createReducer(initialState, {\r\n  [ActionType.Load]: (state: State, action: LoadAction): State => ({\r\n    ...state,\r\n    trackId: action.payload,\r\n    state: TrackState.isLoaded,\r\n    shouldPlay: true,\r\n    shouldPause: false\r\n  }),\r\n  [ActionType.Loaded]: (state: State, action: LoadedAction): State => ({\r\n    ...state,\r\n    duration: action.payload\r\n  }),\r\n  [ActionType.Playing]: (state: State): State => ({\r\n    ...state,\r\n    state: TrackState.isPlaying,\r\n    shouldPlay: false\r\n  }),\r\n  [ActionType.Update]: (state: State, action: UpdateAction): State => ({\r\n    ...state,\r\n    currentTime: action.payload,\r\n    shouldSeek: false\r\n  }),\r\n  [ActionType.Play]: (state: State): State => ({\r\n    ...state,\r\n    shouldPlay: true,\r\n    shouldPause: false\r\n  }),\r\n  [ActionType.Pause]: (state: State): State => ({\r\n    ...state,\r\n    shouldPlay: false,\r\n    shouldPause: true\r\n  }),\r\n  [ActionType.Paused]: (state: State): State => ({\r\n    ...state,\r\n    state: TrackState.isPaused,\r\n    shouldPause: false\r\n  }),\r\n  [ActionType.Seek]: (state: State, Action: SeekAction): State => ({\r\n    ...state,\r\n    currentTime: Action.payload,\r\n    shouldSeek: true\r\n  }),\r\n  [ActionType.Seeked]: (state: State): State => ({\r\n    ...state,\r\n    shouldSeek: false\r\n  }),\r\n  [ActionType.ChangeVolume]: (\r\n    state: State,\r\n    action: ChangeVolumeAction\r\n  ): State => ({\r\n    ...state,\r\n    ...action.payload,\r\n    shouldChange: true\r\n  }),\r\n  [ActionType.VolumeChanged]: (state: State): State => ({\r\n    ...state,\r\n    shouldChange: false\r\n  })\r\n});\r\n\r\nexport function selectLoadedTrack(state: CombinedState): Track | undefined {\r\n  const { trackId } = state.player;\r\n\r\n  if (trackId) {\r\n    return selectTrack(state, trackId);\r\n  }\r\n}\r\n\r\nexport function selectState(state: CombinedState): TrackState {\r\n  return state.player.state;\r\n}\r\n\r\nexport interface Times {\r\n  duration: number;\r\n  currentTime: number;\r\n}\r\n\r\nexport function selectTimes(state: CombinedState): Times {\r\n  const { player } = state;\r\n\r\n  return {\r\n    duration: player.duration,\r\n    currentTime: player.currentTime\r\n  };\r\n}\r\n\r\nexport interface Commands {\r\n  shouldPlay: boolean;\r\n  shouldPause: boolean;\r\n  shouldSeek: boolean;\r\n  shouldChange: boolean;\r\n}\r\n\r\nexport function selectCommands(state: CombinedState): Commands {\r\n  const {\r\n    player: { shouldPlay, shouldPause, shouldSeek, shouldChange }\r\n  } = state;\r\n\r\n  return {\r\n    shouldPlay,\r\n    shouldPause,\r\n    shouldSeek,\r\n    shouldChange\r\n  };\r\n}\r\n\r\nexport interface Levels {\r\n  volume: number;\r\n  isMuted: boolean;\r\n}\r\n\r\nexport function selectLevels(state: CombinedState): Levels {\r\n  const {\r\n    player: { volume, isMuted }\r\n  } = state;\r\n\r\n  return {\r\n    volume,\r\n    isMuted\r\n  };\r\n}\r\n","import { UserProfile } from \"../types\";\r\nimport { FetchDispatch, PayloadAction } from \"./types\";\r\n\r\nexport enum ActionType {\r\n  UserProfileRequest = \"USER_PROFILE_REQUEST\",\r\n  UserProfileSuccess = \"USER_PROFILE_SUCCESS\",\r\n  UserProfileFailure = \"USER_PROFILE_FAILURE\"\r\n}\r\n\r\nexport interface UserProfileSuccessAction\r\n  extends PayloadAction<ActionType.UserProfileSuccess, UserProfile> {}\r\n\r\nexport function getUserProfile() {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.UserProfileRequest,\r\n        ActionType.UserProfileSuccess,\r\n        ActionType.UserProfileFailure\r\n      ],\r\n      path: \"me\"\r\n    });\r\n  };\r\n}\r\n","import createReducer from \"../helpers/reducer\";\r\nimport { UserProfile } from \"../types\";\r\nimport { ActionType, UserProfileSuccessAction } from \"../actions/userProfile\";\r\nimport { State as CombinedState } from \".\";\r\n\r\nexport interface State {\r\n  userProfile?: UserProfile;\r\n}\r\n\r\nconst initialState: State = {\r\n  userProfile: undefined\r\n};\r\n\r\nexport default createReducer(initialState, {\r\n  [ActionType.UserProfileSuccess]: (\r\n    state: State,\r\n    action: UserProfileSuccessAction\r\n  ) => ({\r\n    ...state,\r\n    userProfile: action.payload\r\n  })\r\n});\r\n\r\nexport function selectUserProfile(\r\n  state: CombinedState\r\n): UserProfile | undefined {\r\n  return state.userProfile.userProfile;\r\n}\r\n","import { combineReducers } from \"redux\";\r\nimport albums, { State as AlbumsState } from \"./albums\";\r\nimport artists, { State as ArtistsState } from \"./artists\";\r\nimport authorization, { State as AuthorizationState } from \"./authorization\";\r\nimport browse, { State as BrowseState } from \"./browse\";\r\nimport player, { State as PlayerState } from \"./player\";\r\nimport playlists, { State as PlaylistsState } from \"./playlists\";\r\nimport tracks, { State as TracksState } from \"./tracks\";\r\nimport userProfile, { State as UserProfileState } from \"./userProfile\";\r\n\r\nexport interface State {\r\n  albums: AlbumsState;\r\n  artists: ArtistsState;\r\n  authorization: AuthorizationState;\r\n  browse: BrowseState;\r\n  player: PlayerState;\r\n  playlists: PlaylistsState;\r\n  tracks: TracksState;\r\n  userProfile: UserProfileState;\r\n}\r\n\r\nexport default combineReducers<State>({\r\n  albums,\r\n  artists,\r\n  authorization,\r\n  browse,\r\n  player,\r\n  playlists,\r\n  tracks,\r\n  userProfile\r\n});\r\n","const ripple = (props: any) => `\r\n  color: ${props.theme.foreground.dark};\r\n  overflow: hidden;\r\n  position relative;\r\n  \r\n  &::before, &::after {\r\n    content: \"\";\r\n    height: 100%;\r\n    left: 0;\r\n    position: absolute;\r\n    top: 0;\r\n    width: 100%;\r\n  }\r\n\r\n  &::after {\r\n    background: radial-gradient(circle, ${\r\n      props.theme.background.active\r\n    } 20%, transparent 20%);\r\n    opacity: 0;\r\n    transform: scale(5, 5);\r\n    transition: transform .2s, opacity 0s .2s;\r\n  }\r\n  \r\n  &:not(:disabled):hover {\r\n    color: ${props.theme.foreground.default};\r\n  }\r\n\r\n  &:not(:disabled):hover::before {\r\n    background: ${props.theme.background.hover};\r\n  }\r\n\r\n  &:not(:disabled):active::after {\r\n    transform: scale(0, 0);\r\n    opacity: 1;\r\n    transition: 0s;\r\n  }\r\n`;\r\n\r\nexport { ripple };\r\n","import styled from \"styled-components\";\r\nimport { ripple } from \"../styles/effects\";\r\n\r\nconst Button = styled.button`\r\n  ${ripple}\r\n`;\r\n\r\nexport default Button;\r\n","import React from \"react\";\r\n\r\nexport enum IconType {\r\n  MusicNote = \"music_note\",\r\n  MusicOff = \"music_off\",\r\n  Pause = \"pause\",\r\n  Person = \"person\",\r\n  PlayArrow = \"play_arrow\",\r\n  Refresh = \"refresh\",\r\n  Search = \"search\",\r\n  SkipNext = \"skip_next\",\r\n  SkipPrevious = \"skip_previous\",\r\n  ViewModule = \"view_module\",\r\n  VolumeOff = \"volume_off\",\r\n  VolumeUp = \"volume_up\",\r\n  Wifi = \"wifi\"\r\n}\r\n\r\ninterface Props {\r\n  type: IconType;\r\n  className?: string;\r\n}\r\n\r\nconst Icon = (props: Props) => {\r\n  const { type, className } = props;\r\n\r\n  return <i className={`material-icons ${className}`}>{type}</i>;\r\n};\r\n\r\nexport default Icon;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport styled from \"../../styles/styled\";\r\nimport Icon, { IconType } from \"../Icon\";\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: ${props => props.theme.font.size.large};\r\n  font-weight: ${props => props.theme.font.weight.bold};\r\n`;\r\n\r\nconst StyledIcon = styled(Icon)`\r\n  margin-right: 15px;\r\n`;\r\n\r\nconst Title = () => {\r\n  return (\r\n    <Wrapper>\r\n      <StyledIcon type={IconType.Wifi} />\r\n      <Link to=\"/browse\">Spotify</Link>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Title;\r\n","import React from \"react\";\r\nimport styled from \"../../styles/styled\";\r\nimport { UserProfile } from \"../../types\";\r\nimport Icon, { IconType } from \"../Icon\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n`;\r\n\r\nconst StyledIcon = styled(Icon)`\r\n  margin-right: 10px;\r\n`;\r\n\r\nconst User = (props: UserProfile) => {\r\n  const { display_name } = props;\r\n\r\n  return (\r\n    <Wrapper>\r\n      <StyledIcon type={IconType.Person} />\r\n      <span>{display_name}</span>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default User;\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport styled from \"../../styles/styled\";\r\nimport { UserProfile } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport { isAuthorized } from \"../../reducers/authorization\";\r\nimport { selectUserProfile } from \"../../reducers/userProfile\";\r\nimport { getAuthorization } from \"../../actions/authorization\";\r\nimport { getUserProfile } from \"../../actions/userProfile\";\r\nimport Button from \"../Button\";\r\nimport Title from \"./Title\";\r\nimport User from \"./User\";\r\n\r\nconst Wrapper = styled.header`\r\n  align-items: center;\r\n  display: flex;\r\n  background: ${props => props.theme.primary};\r\n  box-shadow: 0 2px 4px 2px rgba(0, 0, 0, 0.2);\r\n  flex-shrink: 0;\r\n  height: 50px;\r\n  justify-content: space-between;\r\n  padding: 0 50px;\r\n  z-index: 2;\r\n`;\r\n\r\nconst LoginButton = styled(Button)`\r\n  font-size: 15px;\r\n  height: 100%;\r\n  padding: 0 20px;\r\n`;\r\n\r\ninterface Props {\r\n  isAuthorized: boolean;\r\n  userProfile?: UserProfile;\r\n  getAuthorization: () => void;\r\n  getUserProfile: () => void;\r\n}\r\n\r\nclass Header extends Component<Props> {\r\n  componentDidMount() {\r\n    const { isAuthorized, getUserProfile } = this.props;\r\n    if (isAuthorized) {\r\n      getUserProfile();\r\n    }\r\n  }\r\n\r\n  handleClick = async () => {\r\n    await this.props.getAuthorization();\r\n  };\r\n\r\n  render() {\r\n    const { userProfile } = this.props;\r\n\r\n    return (\r\n      <Wrapper>\r\n        <Title />\r\n\r\n        {userProfile ? (\r\n          <User {...userProfile} />\r\n        ) : (\r\n          <LoginButton onClick={this.handleClick}>Log In</LoginButton>\r\n        )}\r\n      </Wrapper>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  isAuthorized: isAuthorized(state),\r\n  userProfile: selectUserProfile(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  getAuthorization: getAuthorization,\r\n  getUserProfile: getUserProfile\r\n};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(Header);\r\n","import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport styled from \"../../styles/styled\";\r\nimport { ripple } from \"../../styles/effects\";\r\nimport Icon, { IconType } from \"../Icon\";\r\n\r\nconst Wrapper = styled.ul`\r\n  background: ${props => props.theme.background.dark};\r\n  padding: 25px 0;\r\n  width: 250px;\r\n  z-index: 1;\r\n`;\r\n\r\nconst StyledNavLink = styled(NavLink)`\r\n  ${ripple}\r\n  align-items: center;\r\n  color: ${props => props.theme.foreground.dark};\r\n  display: flex;\r\n  height: 50px;\r\n  padding: 0 50px;\r\n\r\n  &:hover {\r\n    color: ${props => props.theme.foreground.default};\r\n  }\r\n\r\n  &.active {\r\n    border-right: 5px solid ${props => props.theme.primaryLight};\r\n    color: ${props => props.theme.foreground.default};\r\n    padding-right: 45px;\r\n  }\r\n`;\r\n\r\nconst StyledIcon = styled(Icon)`\r\n  margin-right: 15px;\r\n`;\r\n\r\nconst Menu = () => {\r\n  return (\r\n    <Wrapper>\r\n      <li>\r\n        <StyledNavLink to={`${process.env.PUBLIC_URL}/browse`}>\r\n          <StyledIcon type={IconType.ViewModule} />\r\n          <span>Browse</span>\r\n        </StyledNavLink>\r\n      </li>\r\n      <li>\r\n        <StyledNavLink to={`${process.env.PUBLIC_URL}/search`}>\r\n          <StyledIcon type={IconType.Search} />\r\n          <span>Search</span>\r\n        </StyledNavLink>\r\n      </li>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Menu;\r\n","import React, { Component, HTMLAttributes } from \"react\";\r\nimport styled from \"../../styles/styled\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  height: 100%;\r\n`;\r\n\r\nconst Image = styled.img`\r\n  border-radius: 5px;\r\n  box-shadow: 0 0 4px 2px rgba(0, 0, 0, 0.2);\r\n  height: 100%;\r\n  margin-right: 10px;\r\n`;\r\n\r\nconst Infos = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst Title = styled.span`\r\n  margin-bottom: 5px;\r\n`;\r\n\r\nconst Artist = styled.span`\r\n  color: ${props => props.theme.foreground.dark};\r\n  font-weight: ${props => props.theme.font.weight.light};\r\n`;\r\n\r\ninterface Props extends HTMLAttributes<any> {\r\n  image: string;\r\n  name: string;\r\n  artist: string;\r\n}\r\n\r\nclass Album extends Component<Props> {\r\n  render() {\r\n    const { className, image, name, artist } = this.props;\r\n\r\n    return (\r\n      <Wrapper className={className}>\r\n        <Image src={image} />\r\n        <Infos>\r\n          <Title>{name}</Title>\r\n          <Artist>{artist}</Artist>\r\n        </Infos>\r\n      </Wrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Album;\r\n","import React, { Component, createRef, SyntheticEvent } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Track } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport {\r\n  selectLoadedTrack,\r\n  Times,\r\n  selectTimes,\r\n  Commands,\r\n  selectCommands,\r\n  Levels,\r\n  selectLevels\r\n} from \"../../reducers/player\";\r\nimport {\r\n  loaded,\r\n  playing,\r\n  update,\r\n  paused,\r\n  seeked,\r\n  volumeChanged\r\n} from \"../../actions/player\";\r\n\r\ninterface Props {\r\n  loadedTrack?: Track;\r\n  times: Times;\r\n  commands: Commands;\r\n  levels: Levels;\r\n  loaded: (duration: number) => void;\r\n  playing: () => void;\r\n  update: (elaped: number) => void;\r\n  paused: () => void;\r\n  seeked: () => void;\r\n  volumeChanged: () => void;\r\n}\r\n\r\nclass Audio extends Component<Props> {\r\n  audio = createRef<HTMLAudioElement>();\r\n\r\n  componentDidUpdate() {\r\n    const audio = this.audio.current;\r\n\r\n    if (audio) {\r\n      const {\r\n        times: { currentTime },\r\n        levels: { volume, isMuted },\r\n        commands: { shouldPlay, shouldPause, shouldSeek, shouldChange }\r\n      } = this.props;\r\n\r\n      if (shouldPlay) {\r\n        audio.play();\r\n      } else if (shouldPause) {\r\n        audio.pause();\r\n      } else if (shouldSeek) {\r\n        audio.currentTime = currentTime;\r\n      } else if (shouldChange) {\r\n        audio.volume = isMuted ? 0 : volume;\r\n      }\r\n    }\r\n  }\r\n\r\n  handleLoaded = (event: SyntheticEvent<HTMLAudioElement>) => {\r\n    const target = event.target as HTMLAudioElement;\r\n    this.props.loaded(target.duration);\r\n  };\r\n\r\n  handlePlay = () => {\r\n    this.props.playing();\r\n  };\r\n\r\n  handleUpdate = (event: SyntheticEvent<HTMLAudioElement>) => {\r\n    const target = event.target as HTMLAudioElement;\r\n    this.props.update(target.currentTime);\r\n  };\r\n\r\n  handlePause = () => {\r\n    this.props.paused();\r\n  };\r\n\r\n  handleSeeked = () => {\r\n    this.props.seeked();\r\n  };\r\n\r\n  handleChange = () => {\r\n    this.props.volumeChanged();\r\n  };\r\n\r\n  render() {\r\n    const { loadedTrack } = this.props;\r\n\r\n    return (\r\n      <audio\r\n        ref={this.audio}\r\n        src={loadedTrack && loadedTrack.preview_url}\r\n        onLoadedMetadata={this.handleLoaded}\r\n        onPlay={this.handlePlay}\r\n        onTimeUpdate={this.handleUpdate}\r\n        onPause={this.handlePause}\r\n        onSeeked={this.handleSeeked}\r\n        onVolumeChange={this.handleChange}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  loadedTrack: selectLoadedTrack(state),\r\n  times: selectTimes(state),\r\n  commands: selectCommands(state),\r\n  levels: selectLevels(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  loaded,\r\n  playing,\r\n  update,\r\n  paused,\r\n  seeked,\r\n  volumeChanged\r\n};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(Audio);\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Button from \"./Button\";\r\nimport Icon, { IconType } from \"./Icon\";\r\n\r\nconst StyedButton = styled(Button)`\r\n  border-radius: 50%;\r\n  display: flex;\r\n  margin: 10px;\r\n  padding: 5px;\r\n`;\r\n\r\nconst StyledIcon = styled(Icon)`\r\n  font-size: 25px;\r\n`;\r\n\r\ninterface Props extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n  iconType: IconType;\r\n}\r\n\r\nfunction RoundButton({ iconType: iconType, ...rest }: Props) {\r\n  return (\r\n    <StyedButton {...rest}>\r\n      <StyledIcon type={iconType} />\r\n    </StyedButton>\r\n  );\r\n}\r\n\r\nexport default RoundButton;\r\n","import React, { Component } from \"react\";\r\nimport styled from \"../../styles/styled\";\r\nimport { TrackState, Times } from \"../../reducers/player\";\r\nimport { IconType } from \"../Icon\";\r\nimport RoundButton from \"../RoundButton\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n`;\r\n\r\nconst MainButton = styled(RoundButton)`\r\n  transform: scale(1.25);\r\n`;\r\n\r\ninterface Props {\r\n  state: TrackState;\r\n  times: Times;\r\n  onPlay: () => void;\r\n  onPause: () => void;\r\n}\r\n\r\nclass Controls extends Component<Props> {\r\n  handleToggleClick = () => {\r\n    const { state, onPlay, onPause } = this.props;\r\n\r\n    if (state === TrackState.isPlaying) {\r\n      onPause();\r\n    } else if (state === TrackState.isPaused) {\r\n      onPlay();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { state } = this.props;\r\n\r\n    return (\r\n      <Wrapper>\r\n        <RoundButton disabled={true} iconType={IconType.SkipPrevious} />\r\n\r\n        <MainButton\r\n          onClick={this.handleToggleClick}\r\n          disabled={state === TrackState.None}\r\n          iconType={\r\n            state === TrackState.isPlaying ? IconType.Pause : IconType.PlayArrow\r\n          }\r\n        />\r\n\r\n        <RoundButton disabled={true} iconType={IconType.SkipNext} />\r\n      </Wrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Controls;\r\n","import React, { Component, createRef } from \"react\";\r\nimport styled from \"../../styles/styled\";\r\n\r\nconst Wrapper = styled.div<{ isDisabled: boolean }>`\r\n  align-items: center;\r\n  border-radius: 2.5px;\r\n  display: flex;\r\n  cursor: ${props => (props.isDisabled ? \"default\" : \"pointer\")};\r\n  height: 20px;\r\n  position: relative;\r\n  width: 100%;\r\n`;\r\n\r\nconst Left = styled.div<{ width: number }>`\r\n  background: ${props => props.theme.primaryLight};\r\n  border-radius: 2.5px 0 0 2.5px;\r\n  height: 2.5px;\r\n  left: 0;\r\n  position: absolute;\r\n  width: calc(${props => props.width * 100}%);\r\n`;\r\n\r\nconst Thumb = styled.div<{ position: number; isDisabled: boolean }>`\r\n  background: transparent;\r\n  border-radius: 50%;\r\n  height: 20px;\r\n  left: calc(${props => props.position * 100}% - 10px);\r\n  position: absolute;\r\n  visibility: hidden;\r\n  width: 20px;\r\n  z-index: 1;\r\n\r\n  &::before {\r\n    background: ${props => props.theme.foreground.default};\r\n    border-radius: 50%;\r\n    box-shadow: 0 0 4px 2px rgba(0, 0, 0, 0.2);\r\n    content: \"\";\r\n    height: 50%;\r\n    left: 25%;\r\n    position: absolute;\r\n    top: 25%;\r\n    width: 50%;\r\n  }\r\n\r\n  ${Wrapper}:hover & {\r\n    visibility: visible;\r\n  }\r\n`;\r\n\r\nconst Right = styled.div<{ width: number }>`\r\n  background: ${props => props.theme.foreground.dark};\r\n  border-radius: 0 2.5px 2.5px 0;\r\n  height: 2.5px;\r\n  position: absolute;\r\n  right: 0;\r\n  width: calc(100% - ${props => props.width * 100}%);\r\n`;\r\n\r\ninterface Props {\r\n  className?: string;\r\n  value: number;\r\n  canChange: boolean;\r\n  onChange?: (value: number) => void;\r\n}\r\n\r\ninterface State {\r\n  isDown: boolean;\r\n  value: number;\r\n}\r\n\r\nclass Slider extends Component<Props, State> {\r\n  public static defaultProps = {\r\n    value: 0,\r\n    canChange: true\r\n  };\r\n\r\n  wrapper = createRef<HTMLDivElement>();\r\n  thumb = createRef<HTMLDivElement>();\r\n  state = {\r\n    isDown: false,\r\n    value: 0\r\n  };\r\n\r\n  getValue(x: number) {\r\n    const wrapper = this.wrapper.current;\r\n    const thumb = this.thumb.current;\r\n    if (!wrapper || !thumb) {\r\n      return 0;\r\n    }\r\n\r\n    const clientRect = wrapper.getBoundingClientRect();\r\n    let value = (x - clientRect.left) / wrapper.clientWidth;\r\n    if (value < 0) {\r\n      value = 0;\r\n    } else if (value > 1) {\r\n      value = 1;\r\n    }\r\n\r\n    return value;\r\n  }\r\n\r\n  handleMouseDown = (event: React.MouseEvent<HTMLElement>) => {\r\n    const { canChange } = this.props;\r\n    if (!canChange) {\r\n      return;\r\n    }\r\n\r\n    this.setState({\r\n      isDown: true,\r\n      value: this.getValue(event.pageX)\r\n    });\r\n    document.addEventListener(\"mousemove\", this.handleMouseMove);\r\n    document.addEventListener(\"mouseup\", this.handleMouseUp);\r\n  };\r\n\r\n  handleMouseMove = (event: MouseEvent) => {\r\n    this.setState({\r\n      value: this.getValue(event.pageX)\r\n    });\r\n  };\r\n\r\n  handleMouseUp = (event: MouseEvent) => {\r\n    document.removeEventListener(\"mousemove\", this.handleMouseMove);\r\n    document.removeEventListener(\"mouseup\", this.handleMouseUp);\r\n    this.setState({\r\n      isDown: false\r\n    });\r\n    const { onChange } = this.props;\r\n    if (onChange) {\r\n      const value = this.getValue(event.pageX);\r\n      onChange(value);\r\n    }\r\n  };\r\n\r\n  getCurrentValue() {\r\n    const { props, state } = this;\r\n    return state.isDown ? state.value : props.value;\r\n  }\r\n\r\n  render() {\r\n    const { className, canChange } = this.props;\r\n    const value = this.getCurrentValue();\r\n\r\n    return (\r\n      <Wrapper\r\n        ref={this.wrapper}\r\n        onMouseDown={this.handleMouseDown}\r\n        isDisabled={!canChange}\r\n        className={className}\r\n      >\r\n        <Left width={value} />\r\n        {canChange && (\r\n          <Thumb ref={this.thumb} position={value} isDisabled={!canChange} />\r\n        )}\r\n        <Right width={value} />\r\n      </Wrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Slider;\r\n","import React, { Component } from \"react\";\r\nimport styled from \"../../styles/styled\";\r\nimport Slider from \"./Slider\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-cotent: center;\r\n  width: 100%;\r\n`;\r\n\r\nconst ProgressTime = styled.div`\r\n  color: ${props => props.theme.foreground.dark};\r\n  font-size: ${props => props.theme.font.size.small};\r\n  font-weight: ${props => props.theme.font.weight.light};\r\n`;\r\n\r\nconst StyledSlider = styled(Slider)`\r\n  margin: 0 15px;\r\n`;\r\n\r\ninterface Props {\r\n  duration: number;\r\n  currentTime: number;\r\n  canSeek: boolean;\r\n  onSeek: (time: number) => void;\r\n}\r\n\r\nclass Playback extends Component<Props> {\r\n  renderTime(seconds: number) {\r\n    const minutes = Math.floor(seconds / 60);\r\n    seconds = Math.round(seconds);\r\n\r\n    return (\r\n      <ProgressTime>\r\n        {`${minutes}:${seconds < 10 ? \"0\" + seconds : seconds}`}\r\n      </ProgressTime>\r\n    );\r\n  }\r\n\r\n  handleChange = (value: number) => {\r\n    const { duration, onSeek } = this.props;\r\n    onSeek(duration * value);\r\n  };\r\n\r\n  render() {\r\n    const { duration, currentTime, canSeek } = this.props;\r\n    const progress = duration ? currentTime / duration : 0;\r\n\r\n    return (\r\n      <Wrapper>\r\n        {this.renderTime(currentTime)}\r\n        <StyledSlider\r\n          value={progress}\r\n          onChange={this.handleChange}\r\n          canChange={canSeek}\r\n        />\r\n        {this.renderTime(duration)}\r\n      </Wrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Playback;\r\n","import React, { Component } from \"react\";\r\nimport styled from \"../../styles/styled\";\r\nimport { IconType } from \"../Icon\";\r\nimport RoundButton from \"../RoundButton\";\r\nimport Slider from \"./Slider\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  height: 100%;\r\n`;\r\n\r\nconst StyledSlider = styled(Slider)`\r\n  width: 100px;\r\n`;\r\n\r\ninterface Props {\r\n  volume: number;\r\n  isMuted: boolean;\r\n  onChange: (volume: number, isMuted: boolean) => void;\r\n}\r\n\r\nclass Volume extends Component<Props> {\r\n  handleClick = () => {\r\n    const { volume, isMuted, onChange } = this.props;\r\n    onChange(volume, !isMuted);\r\n  };\r\n\r\n  handleChange = (value: number) => {\r\n    const { onChange } = this.props;\r\n    onChange(value, false);\r\n  };\r\n\r\n  render() {\r\n    const { volume, isMuted } = this.props;\r\n\r\n    return (\r\n      <Wrapper>\r\n        <RoundButton\r\n          onClick={this.handleClick}\r\n          iconType={isMuted ? IconType.VolumeOff : IconType.VolumeUp}\r\n        />\r\n        <StyledSlider\r\n          value={isMuted ? 0 : volume}\r\n          onChange={this.handleChange}\r\n        />\r\n      </Wrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Volume;\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Track } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport {\r\n  selectLoadedTrack,\r\n  TrackState,\r\n  selectState,\r\n  Times,\r\n  selectTimes,\r\n  Levels,\r\n  selectLevels\r\n} from \"../../reducers/player\";\r\nimport { play, pause, seek, changeVolume } from \"../../actions/player\";\r\nimport Album from \"./Album\";\r\nimport Audio from \"./Audio\";\r\nimport Controls from \"./Controls\";\r\nimport Playback from \"./Playback\";\r\nimport Volume from \"./Volume\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  background: ${props => props.theme.background.light};\r\n  box-sizing: border-box;\r\n  box-shadow: 0 -2px 4px 2px rgba(0, 0, 0, 0.2);\r\n  display: flex;\r\n  height: 100px;\r\n  padding: 15px;\r\n`;\r\n\r\nconst ThirdWrapper = styled.div`\r\n  height: 100%;\r\n  width: 33%;\r\n`;\r\n\r\nconst LeftWrapper = styled(ThirdWrapper)``;\r\n\r\nconst CenterWrapper = styled(ThirdWrapper)`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-grow: 1;\r\n  justify-content: space-evenly;\r\n`;\r\n\r\nconst RightWrapper = styled(ThirdWrapper)`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n`;\r\n\r\ninterface Props {\r\n  loadedTrack?: Track;\r\n  state: TrackState;\r\n  times: Times;\r\n  levels: Levels;\r\n  play: () => void;\r\n  pause: () => void;\r\n  seek: (time: number) => void;\r\n  changeVolume: (volume: number, isMuted: boolean) => void;\r\n}\r\n\r\nclass Player extends Component<Props> {\r\n  canSeek() {\r\n    const { state } = this.props;\r\n    return state !== TrackState.None;\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      loadedTrack,\r\n      state,\r\n      times,\r\n      levels,\r\n      play,\r\n      pause,\r\n      seek,\r\n      changeVolume\r\n    } = this.props;\r\n    const album = loadedTrack && loadedTrack.album;\r\n    const canSeek = this.canSeek();\r\n\r\n    return (\r\n      <>\r\n        <Wrapper>\r\n          <LeftWrapper>\r\n            {album && (\r\n              <Album\r\n                image={album.images[0].url}\r\n                name={album.name}\r\n                artist={album.artists[0].name}\r\n              />\r\n            )}\r\n          </LeftWrapper>\r\n\r\n          <CenterWrapper>\r\n            <Controls\r\n              state={state}\r\n              times={times}\r\n              onPlay={play}\r\n              onPause={pause}\r\n            />\r\n            <Playback\r\n              duration={times.duration}\r\n              currentTime={times.currentTime}\r\n              canSeek={canSeek}\r\n              onSeek={seek}\r\n            />\r\n          </CenterWrapper>\r\n\r\n          <RightWrapper>\r\n            <Volume\r\n              volume={levels.volume}\r\n              isMuted={levels.isMuted}\r\n              onChange={changeVolume}\r\n            />\r\n          </RightWrapper>\r\n        </Wrapper>\r\n\r\n        <Audio />\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  loadedTrack: selectLoadedTrack(state),\r\n  state: selectState(state),\r\n  times: selectTimes(state),\r\n  levels: selectLevels(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  play,\r\n  pause,\r\n  seek,\r\n  changeVolume\r\n};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(Player);\r\n","import React, { Component } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\ninterface Props {\r\n  from: string;\r\n  to: string;\r\n}\r\n\r\nclass DefaultRoute extends Component<Props> {\r\n  render() {\r\n    const { from, to } = this.props;\r\n\r\n    return <Route exact path={from} render={() => <Redirect to={to} />} />;\r\n  }\r\n}\r\n\r\nexport default DefaultRoute;\r\n","import React, { Component } from \"react\";\r\nimport styled from \"../../styles/styled\";\r\nimport Button from \"../Button\";\r\n\r\nconst StyledList = styled.ul`\r\n  align-content: flex-start;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n  margin: -10px;\r\n`;\r\n\r\nconst StyledItem = styled.li`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin: 10px;\r\n`;\r\n\r\nconst StyledButton = styled(Button)`\r\n  border-radius: 5px;\r\n  box-shadow: 0 0 4px 2px rgba(0, 0, 0, 0.2);\r\n  display: flex;\r\n  margin-bottom: 10px;\r\n`;\r\n\r\nconst Image = styled.img`\r\n  height: 200px;\r\n  width: 200px;\r\n`;\r\n\r\nconst Name = styled.span`\r\n  margin-bottom: 5px;\r\n  text-align: center;\r\n  width: 200px;\r\n`;\r\n\r\nconst Artist = styled.span`\r\n  color: ${props => props.theme.foreground.dark};\r\n  font-weight: ${props => props.theme.font.weight.light};\r\n`;\r\n\r\ninterface Props {\r\n  items: {\r\n    id: string;\r\n    image: string;\r\n    title: string;\r\n    artist?: string;\r\n  }[];\r\n  onClick: (id: string) => void;\r\n}\r\n\r\nclass Covers extends Component<Props> {\r\n  handleClick(id: string) {\r\n    const { onClick } = this.props;\r\n    onClick && onClick(id);\r\n  }\r\n\r\n  render() {\r\n    const { items } = this.props;\r\n\r\n    return (\r\n      <StyledList>\r\n        {items.map(item => (\r\n          <StyledItem key={item.id}>\r\n            <StyledButton onClick={() => this.handleClick(item.id)}>\r\n              <Image src={item.image} />\r\n            </StyledButton>\r\n            <Name>{item.title}</Name>\r\n            {item.artist && <Artist>{item.artist}</Artist>}\r\n          </StyledItem>\r\n        ))}\r\n      </StyledList>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Covers;\r\n","import React, { FunctionComponent, ComponentType } from \"react\";\r\nimport styled from \"../styles/styled\";\r\n\r\nconst Fader = styled.div<{ isLoading: number }>`\r\n  opacity: ${props => (props.isLoading ? \"0\" : \"1\")};\r\n  transition: ${props => (props.isLoading ? \"all 0\" : \"all 0.2s\")};\r\n`;\r\n\r\nconst Loader = styled.div<{ isLoading: number }>`\r\n  height: 5px;\r\n  left: 0;\r\n  position: absolute;\r\n  opacity: ${props => (props.isLoading ? \"1\" : \"0\")};\r\n  top: 0;\r\n  transition: ${props => (props.isLoading ? \"all 0\" : \"all 0.2s\")};\r\n  width: 100%;\r\n\r\n  &::before {\r\n    background: ${props => props.theme.foreground.dark};\r\n    content: \"\";\r\n    height: 100%;\r\n    position: absolute;\r\n    width: 100%;\r\n  }\r\n\r\n  &::after {\r\n    animation: transform 2s linear infinite;\r\n    background: ${props => props.theme.foreground.default};\r\n    content: \"\";\r\n    height: 100%;\r\n    position: absolute;\r\n    transform-origin: 0;\r\n    width: 100%;\r\n\r\n    @keyframes transform {\r\n      0% {\r\n        left: 0;\r\n        width: 0;\r\n      }\r\n      50% {\r\n        left: 0;\r\n        width: 100%;d\r\n      }\r\n      100% {\r\n        left: 100%;\r\n        width: 0;\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\ninterface Props {\r\n  isLoading: boolean;\r\n}\r\n\r\nconst withLoader = <P extends Props>(\r\n  WrappedComponent: ComponentType<P>\r\n): FunctionComponent<P> => {\r\n  return ({ isLoading, ...rest }: any) => {\r\n    return (\r\n      <>\r\n        <Fader isLoading={isLoading}>\r\n          <WrappedComponent {...rest} />\r\n        </Fader>\r\n        <Loader isLoading={isLoading} />\r\n      </>\r\n    );\r\n  };\r\n};\r\n\r\nexport default withLoader;\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\r\nimport { Category } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectIsFetching, selectCategories } from \"../../reducers/browse\";\r\nimport { getCategories } from \"../../actions/browse\";\r\nimport Covers from \"./Covers\";\r\nimport withLoader from \"../withLoader\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n  isLoading: boolean;\r\n  categories: Category[];\r\n  getCategories: () => void;\r\n}\r\n\r\nclass Categories extends Component<Props> {\r\n  componentDidMount() {\r\n    this.props.getCategories();\r\n  }\r\n\r\n  handleClick = (categoryId: string) => {\r\n    const { history } = this.props;\r\n    history.push(\r\n      `${process.env.PUBLIC_URL}/categories/${categoryId}/playlists`\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { categories } = this.props;\r\n    const items = categories.map(category => ({\r\n      id: category.id,\r\n      image: category.icons[0].url,\r\n      title: category.name\r\n    }));\r\n\r\n    return <Covers items={items} onClick={this.handleClick} />;\r\n  }\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  isLoading: selectIsFetching(state),\r\n  categories: selectCategories(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  getCategories: getCategories\r\n};\r\n\r\nexport default withRouter(\r\n  connect(\r\n    mapState,\r\n    mapDispatch\r\n  )(withLoader(Categories))\r\n);\r\n","import { Artist } from \"../types\";\r\n\r\nexport function joinArtistNames(artists: Artist[]) {\r\n  return artists.map(artist => artist.name).join(\", \");\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\r\nimport { Album } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectIsFetching, selectNewReleases } from \"../../reducers/browse\";\r\nimport { getNewReleases } from \"../../actions/browse\";\r\nimport { joinArtistNames } from \"../../helpers/utils\";\r\nimport Covers from \"./Covers\";\r\nimport withLoader from \"../withLoader\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n  isLoading: boolean;\r\n  albums: Album[];\r\n  getAlbums: () => void;\r\n}\r\n\r\nclass NewReleases extends Component<Props> {\r\n  componentDidMount() {\r\n    this.props.getAlbums();\r\n  }\r\n\r\n  handleClick = (albumId: string) => {\r\n    const { history } = this.props;\r\n    history.push(`${process.env.PUBLIC_URL}/albums/${albumId}/tracks`);\r\n  };\r\n\r\n  render() {\r\n    const { albums } = this.props;\r\n    const items = albums.map(album => ({\r\n      id: album.id,\r\n      image: album.images[0].url,\r\n      title: album.name,\r\n      author: joinArtistNames(album.artists)\r\n    }));\r\n\r\n    return <Covers items={items} onClick={this.handleClick} />;\r\n  }\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  isLoading: selectIsFetching(state),\r\n  albums: selectNewReleases(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  getAlbums: getNewReleases\r\n};\r\n\r\nexport default withRouter(\r\n  connect(\r\n    mapState,\r\n    mapDispatch\r\n  )(withLoader(NewReleases))\r\n);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\r\nimport { Playlist } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport {\r\n  selectIsFetching,\r\n  selectFeaturedPlaylists\r\n} from \"../../reducers/browse\";\r\nimport { getFeaturedPlaylists } from \"../../actions/browse\";\r\nimport Covers from \"./Covers\";\r\nimport withLoader from \"../withLoader\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n  isLoading: boolean;\r\n  playlists: Playlist[];\r\n  getPlaylists: () => void;\r\n}\r\n\r\nclass FeaturedPlaylists extends Component<Props> {\r\n  componentDidMount() {\r\n    this.props.getPlaylists();\r\n  }\r\n\r\n  handleClick = (playlistId: string) => {\r\n    const { history } = this.props;\r\n    history.push(`${process.env.PUBLIC_URL}/playlists/${playlistId}/tracks`);\r\n  };\r\n\r\n  render() {\r\n    const { playlists } = this.props;\r\n    const items = playlists.map(playlist => ({\r\n      id: playlist.id,\r\n      image: playlist.images[0].url,\r\n      title: playlist.name\r\n    }));\r\n\r\n    return <Covers items={items} onClick={this.handleClick} />;\r\n  }\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  isLoading: selectIsFetching(state),\r\n  playlists: selectFeaturedPlaylists(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  getPlaylists: getFeaturedPlaylists\r\n};\r\n\r\nexport default withRouter(\r\n  connect(\r\n    mapState,\r\n    mapDispatch\r\n  )(withLoader(FeaturedPlaylists))\r\n);\r\n","import React, { Component } from \"react\";\r\nimport {\r\n  RouteComponentProps,\r\n  NavLink,\r\n  Route,\r\n  withRouter\r\n} from \"react-router-dom\";\r\nimport styled from \"../../styles/styled\";\r\nimport DefaultRoute from \"../DefaultRoute\";\r\nimport Categories from \"./Categories\";\r\nimport NewReleases from \"./NewReleases\";\r\nimport FeaturedPlaylists from \"./FeaturedPlaylists\";\r\n\r\nconst Wrapper = styled.div`\r\n  height: 100%;\r\n`;\r\n\r\nconst StyledList = styled.ul`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-flow: row;\r\n  font-size: ${props => props.theme.font.size.medium};\r\n  font-weight: ${props => props.theme.font.weight.light};\r\n  justify-content: center;\r\n  margin-bottom: 25px;\r\n`;\r\n\r\nconst StyledNavLink = styled(NavLink)`\r\n  align-items: center;\r\n  color: ${props => props.theme.foreground.dark};\r\n  display: flex;\r\n  height: 50px;\r\n  justify-content: center;\r\n  padding: 0 25px;\r\n  position: relative;\r\n\r\n  &:hover {\r\n    color: ${props => props.theme.foreground.default};\r\n  }\r\n\r\n  &.active {\r\n    color: ${props => props.theme.foreground.default};\r\n  }\r\n\r\n  &.active&::after {\r\n    background: ${props => props.theme.primaryLight};\r\n    bottom: 0;\r\n    content: \"\";\r\n    height: 2.5px;\r\n    left: 50%;\r\n    position: absolute;\r\n    transform: translate(-50%, 0);\r\n    width: 25px;\r\n  }\r\n`;\r\n\r\nclass Browse extends Component<RouteComponentProps> {\r\n  render() {\r\n    const { match } = this.props;\r\n    const links = [\r\n      {\r\n        url: \"categories\",\r\n        label: \"Categories\"\r\n      },\r\n      {\r\n        url: \"new-releases\",\r\n        label: \"New Releases\"\r\n      },\r\n      {\r\n        url: \"featured-playist\",\r\n        label: \"Featured Playlists\"\r\n      }\r\n    ];\r\n\r\n    return (\r\n      <Wrapper>\r\n        <StyledList>\r\n          {links.map(link => (\r\n            <li key={link.url}>\r\n              <StyledNavLink to={`${match.url}/${link.url}`}>\r\n                {link.label}\r\n              </StyledNavLink>\r\n            </li>\r\n          ))}\r\n        </StyledList>\r\n\r\n        <DefaultRoute from={`${match.path}`} to={`${match.path}/categories`} />\r\n        <Route exact path={`${match.path}/categories`} component={Categories} />\r\n        <Route path={`${match.path}/new-releases`} component={NewReleases} />\r\n        <Route\r\n          path={`${match.path}/featured-playist`}\r\n          component={FeaturedPlaylists}\r\n        />\r\n      </Wrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(Browse);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Category, Playlist } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport {\r\n  selectIsFetching,\r\n  selectCategory,\r\n  selectCategoryPlaylists\r\n} from \"../../reducers/browse\";\r\nimport { getCategory, getCategoryPlaylists } from \"../../actions/browse\";\r\nimport Covers from \"./Covers\";\r\nimport withLoader from \"../withLoader\";\r\n\r\nconst Title = styled.h1`\r\n  text-align: center;\r\n  font-size: ${props => props.theme.font.size.extraExtraLarge};\r\n  font-weight: ${props => props.theme.font.weight.bold};\r\n  margin: 0 0 25px 0;\r\n`;\r\n\r\ninterface Params {\r\n  categoryId: string;\r\n}\r\n\r\ninterface Props extends RouteComponentProps<Params> {\r\n  isLoading: boolean;\r\n  category?: Category;\r\n  playlists: Playlist[];\r\n  getCategory: (categoryId: string) => void;\r\n  getPlaylists: (categoryId: string) => void;\r\n}\r\n\r\nclass CategoryPlaylists extends Component<Props> {\r\n  componentDidMount() {\r\n    const { category, getCategory, getPlaylists, match } = this.props;\r\n    const { categoryId } = match.params;\r\n    if (!category) {\r\n      getCategory(categoryId);\r\n    }\r\n    getPlaylists(categoryId);\r\n  }\r\n\r\n  handleClick = (playlistId: string) => {\r\n    const { history } = this.props;\r\n    history.push(`${process.env.PUBLIC_URL}/playlists/${playlistId}/tracks`);\r\n  };\r\n\r\n  render() {\r\n    const { category, playlists } = this.props;\r\n    const items = playlists.map(playlists => ({\r\n      id: playlists.id,\r\n      image: playlists.images[0].url,\r\n      title: playlists.name\r\n    }));\r\n\r\n    return (\r\n      <div>\r\n        <Title>{category && category.name}</Title>\r\n        <Covers items={items} onClick={this.handleClick} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapState = (state: State, ownProps: Props) => {\r\n  const { match } = ownProps;\r\n  const categoryId = match.params.categoryId;\r\n\r\n  return {\r\n    isLoading: selectIsFetching(state),\r\n    category: selectCategory(state, categoryId),\r\n    playlists: selectCategoryPlaylists(state)\r\n  };\r\n};\r\n\r\nconst mapDispatch = {\r\n  getCategory: (categoryId: string) => getCategory(categoryId),\r\n  getPlaylists: (categoryId: string) => getCategoryPlaylists(categoryId)\r\n};\r\n\r\nexport default withRouter(\r\n  connect(\r\n    mapState,\r\n    mapDispatch\r\n  )(withLoader(CategoryPlaylists))\r\n);\r\n","import React, { Component } from \"react\";\r\n\r\nclass Search extends Component {\r\n  render() {\r\n    return <div />;\r\n  }\r\n}\r\n\r\nexport default Search;\r\n","import React, { Component } from \"react\";\r\nimport styled from \"../../styles/styled\";\r\nimport Button from \"../Button\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst Image = styled.img`\r\n  border-radius: 5px;\r\n  box-shadow: 0 0 4px 2px rgba(0, 0, 0, 0.2);\r\n  height: 300px;\r\n  margin-bottom: 10px;\r\n  width: 300px;\r\n`;\r\n\r\nconst Title = styled.span`\r\n  font-size: ${props => props.theme.font.size.large}\r\n  margin-bottom: 5px;\r\n`;\r\n\r\nconst Artist = styled.span`\r\n  color: ${props => props.theme.foreground.dark};\r\n  font-weight: ${props => props.theme.font.weight.light};\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst StyledButton = styled(Button)`\r\n  background: ${props => props.theme.primary};\r\n  border-radius: 20px;\r\n  color: ${props => props.theme.foreground.default};\r\n  padding: 10px 40px;\r\n\r\n  &::before {\r\n    border-radius: 20px;\r\n  }\r\n`;\r\n\r\ninterface Props {\r\n  image: string;\r\n  name: string;\r\n  artist: string;\r\n  onToggle: () => void;\r\n}\r\n\r\nclass Cover extends Component<Props> {\r\n  render() {\r\n    const { image, name, artist, onToggle } = this.props;\r\n\r\n    return (\r\n      <Wrapper>\r\n        <Image src={image} />\r\n        <Title>{name}</Title>\r\n        <Artist>{artist}</Artist>\r\n        <StyledButton onClick={onToggle}>Play</StyledButton>\r\n      </Wrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Cover;\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Track } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport {\r\n  selectLoadedTrack,\r\n  TrackState,\r\n  selectState\r\n} from \"../../reducers/player\";\r\nimport { load, play, pause } from \"../../actions/player\";\r\nimport { joinArtistNames } from \"../../helpers/utils\";\r\nimport Button from \"../Button\";\r\nimport Icon, { IconType } from \"../Icon\";\r\n\r\nconst StyledButton = styled(Button)<{ isLoaded: boolean }>`\r\n  align-items: center;\r\n  border-radius: 5px;\r\n  color: ${props =>\r\n    props.isLoaded ? props.theme.primaryLight : props.theme.foreground.default};\r\n  display: flex;\r\n  margin-bottom: 5px;\r\n  padding: 10px;\r\n  width: 100%;\r\n`;\r\n\r\nconst StyledIcon = styled(Icon)<{\r\n  isHidden?: boolean;\r\n}>`\r\n  display: ${props => (props.isHidden ? \"none\" : \"block\")};\r\n  margin-right: 15px;\r\n\r\n  ${StyledButton}:not(:disabled):hover & {\r\n    display: ${props => (props.isHidden ? \"block\" : \"none\")};\r\n  }\r\n`;\r\n\r\nconst Infos = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-grow: 1;\r\n  font-weight: ${props => props.theme.font.weight.light};\r\n  height: 100%;\r\n`;\r\n\r\nconst Title = styled.span`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-grow: 1;\r\n  margin-bottom: 5px;\r\n`;\r\n\r\nconst Artist = styled.span`\r\n  align-items: center;\r\n  color: ${props => props.theme.foreground.dark};\r\n  display: flex;\r\n  flex-grow: 1;\r\n`;\r\n\r\nconst Duration = styled.span`\r\n  color: ${props => props.theme.foreground.dark};\r\n`;\r\n\r\ninterface Props {\r\n  tracks: Track[];\r\n  loadedTrack: Track | undefined;\r\n  state: TrackState;\r\n  load: (trackId: string) => void;\r\n  play: () => void;\r\n  pause: () => void;\r\n}\r\n\r\nclass Tracks extends Component<Props> {\r\n  handleClick = (trackId: string) => {\r\n    const { loadedTrack, state, load, play, pause } = this.props;\r\n\r\n    if (\r\n      state === TrackState.None ||\r\n      (loadedTrack && loadedTrack.id !== trackId)\r\n    ) {\r\n      load(trackId);\r\n    } else if (state === TrackState.isPlaying) {\r\n      pause();\r\n    } else if (state === TrackState.isPaused) {\r\n      play();\r\n    }\r\n  };\r\n\r\n  isLoaded(track: Track) {\r\n    const { loadedTrack } = this.props;\r\n\r\n    return !!loadedTrack && loadedTrack.id === track.id;\r\n  }\r\n\r\n  isDisabled(track: Track) {\r\n    return !!track.preview_url;\r\n  }\r\n\r\n  renderIcon(track: Track, isLoaded: boolean) {\r\n    const { state } = this.props;\r\n    const hasPreview = track.preview_url;\r\n    const isPlaying = isLoaded && state === TrackState.isPlaying;\r\n\r\n    return hasPreview ? (\r\n      <>\r\n        <StyledIcon type={isPlaying ? IconType.VolumeUp : IconType.MusicNote} />\r\n        <StyledIcon\r\n          type={isPlaying ? IconType.Pause : IconType.PlayArrow}\r\n          isHidden={true}\r\n        />\r\n      </>\r\n    ) : (\r\n      <StyledIcon type={IconType.MusicOff} />\r\n    );\r\n  }\r\n\r\n  renderArtist(track: Track) {\r\n    return <Artist>{joinArtistNames(track.artists)}</Artist>;\r\n  }\r\n\r\n  renderDuration(track: Track) {\r\n    let seconds = track.duration_ms / 1000;\r\n    const minutes = Math.floor(seconds / 60);\r\n    seconds = Math.floor(seconds % 60);\r\n\r\n    return (\r\n      <Duration>{`${minutes}:${\r\n        seconds < 10 ? \"0\" + seconds : seconds\r\n      }`}</Duration>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { tracks } = this.props;\r\n\r\n    return (\r\n      <ul>\r\n        {tracks.map(track => {\r\n          const isLoaded = this.isLoaded(track);\r\n\r\n          return (\r\n            <li key={track.id}>\r\n              <StyledButton\r\n                onClick={() => this.handleClick(track.id)}\r\n                disabled={!this.isDisabled(track)}\r\n                isLoaded={this.isLoaded(track)}\r\n              >\r\n                {this.renderIcon(track, isLoaded)}\r\n\r\n                <Infos>\r\n                  <Title>{track.name}</Title>\r\n                  {this.renderArtist(track)}\r\n                </Infos>\r\n\r\n                {this.renderDuration(track)}\r\n              </StyledButton>\r\n            </li>\r\n          );\r\n        })}\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  loadedTrack: selectLoadedTrack(state),\r\n  state: selectState(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  load: load,\r\n  play: play,\r\n  pause: pause\r\n};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(Tracks);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\nimport { Playlist, Track } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectIsFetching, selectPlaylist } from \"../../reducers/playlists\";\r\nimport { getPlaylist } from \"../../actions/playlists\";\r\nimport Cover from \"./Cover\";\r\nimport Tracks from \"./Tracks\";\r\nimport withLoader from \"../withLoader\";\r\n\r\ninterface Params {\r\n  playlistId: string;\r\n}\r\n\r\ninterface Props extends RouteComponentProps<Params> {\r\n  isLoading: boolean;\r\n  playlist?: Playlist;\r\n  getPlaylist: (playlistId: string) => void;\r\n}\r\n\r\nclass PlaylistTracks extends Component<Props> {\r\n  componentDidMount() {\r\n    const {\r\n      getPlaylist,\r\n      match: {\r\n        params: { playlistId }\r\n      }\r\n    } = this.props;\r\n    getPlaylist(playlistId);\r\n  }\r\n\r\n  handleToggle = () => {};\r\n\r\n  render() {\r\n    const { playlist } = this.props;\r\n\r\n    return playlist ? (\r\n      <>\r\n        <Cover\r\n          image={playlist.images[0].url}\r\n          name={playlist.name}\r\n          artist={playlist.owner.display_name}\r\n          onToggle={this.handleToggle}\r\n        />\r\n        <Tracks tracks={playlist.tracks} />\r\n      </>\r\n    ) : (\r\n      <></>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapState = (state: State, ownProps: Props) => {\r\n  const { match } = ownProps;\r\n  const { playlistId } = match.params;\r\n\r\n  return {\r\n    isLoading: selectIsFetching(state),\r\n    playlist: selectPlaylist(state, playlistId)\r\n  };\r\n};\r\n\r\nconst mapDispatch = {\r\n  getPlaylist: (playlistId: string) => getPlaylist(playlistId)\r\n};\r\n\r\nexport default withRouter(\r\n  connect(\r\n    mapState,\r\n    mapDispatch\r\n  )(withLoader(PlaylistTracks))\r\n);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\nimport { Album, Track } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectIsFetching, selectAlbum } from \"../../reducers/albums\";\r\nimport { getAlbum } from \"../../actions/albums\";\r\nimport { joinArtistNames } from \"../../helpers/utils\";\r\nimport Cover from \"./Cover\";\r\nimport Tracks from \"./Tracks\";\r\nimport withLoader from \"../withLoader\";\r\n\r\ninterface Params {\r\n  albumId: string;\r\n}\r\n\r\ninterface Props extends RouteComponentProps<Params> {\r\n  isLoading: boolean;\r\n  album?: Album;\r\n  getAlbum: (albumId: string) => void;\r\n}\r\n\r\nclass AlbumTracks extends Component<Props> {\r\n  componentDidMount() {\r\n    const {\r\n      getAlbum,\r\n      match: {\r\n        params: { albumId }\r\n      }\r\n    } = this.props;\r\n    getAlbum(albumId);\r\n  }\r\n\r\n  handleToggle = () => {};\r\n\r\n  render() {\r\n    const { album } = this.props;\r\n\r\n    return album ? (\r\n      <>\r\n        <Cover\r\n          image={album.images[0].url}\r\n          name={album.name}\r\n          artist={joinArtistNames(album.artists)}\r\n          onToggle={this.handleToggle}\r\n        />\r\n        <Tracks tracks={album.tracks} />\r\n      </>\r\n    ) : (\r\n      <></>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapState = (state: State, ownProps: Props) => {\r\n  const { match } = ownProps;\r\n  const { albumId } = match.params;\r\n\r\n  return {\r\n    isLoading: selectIsFetching(state),\r\n    album: selectAlbum(state, albumId)\r\n  };\r\n};\r\n\r\nconst mapDispatch = {\r\n  getAlbum: (albumId: string) => getAlbum(albumId)\r\n};\r\n\r\nexport default withRouter(\r\n  connect(\r\n    mapState,\r\n    mapDispatch\r\n  )(withLoader(AlbumTracks))\r\n);\r\n","import React from \"react\";\r\nimport { Route } from \"react-router-dom\";\r\nimport styled from \"../../styles/styled\";\r\nimport DefaultRoute from \"../DefaultRoute\";\r\nimport Browse from \"../browse/Browse\";\r\nimport CategoryPlaylists from \"../browse/CategoryPlaylists\";\r\nimport Search from \"../search/Search\";\r\nimport PlaylistTracks from \"../tracks/PlaylistTracks\";\r\nimport AlbumTracks from \"../tracks/AlbumTracks\";\r\n\r\nconst Wrapper = styled.div`\r\n  flex: 1;\r\n  height: calc(100% - 50px);\r\n  overflow-y: auto;\r\n  padding: 25px;\r\n  position: relative;\r\n`;\r\n\r\nconst Routes = () => {\r\n  return (\r\n    <Wrapper>\r\n      <DefaultRoute\r\n        from={`${process.env.PUBLIC_URL}/`}\r\n        to={`${process.env.PUBLIC_URL}/browse`}\r\n      />\r\n      <Route path={`${process.env.PUBLIC_URL}/browse`} component={Browse} />\r\n      <Route path={`${process.env.PUBLIC_URL}/search`} component={Search} />\r\n      <Route\r\n        path={`${process.env.PUBLIC_URL}/categories/:categoryId/playlists`}\r\n        component={CategoryPlaylists}\r\n      />\r\n      <Route\r\n        path={`${process.env.PUBLIC_URL}/playlists/:playlistId/tracks`}\r\n        component={PlaylistTracks}\r\n      />\r\n      <Route\r\n        path={`${process.env.PUBLIC_URL}/albums/:albumId/tracks`}\r\n        component={AlbumTracks}\r\n      />\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Routes;\r\n","import React, { Component } from \"react\";\r\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\r\nimport styled from \"../../styles/styled\";\r\nimport Header from \"./Header\";\r\nimport Menu from \"./Menu\";\r\nimport Player from \"../player/Player\";\r\nimport Routes from \"./Routes\";\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n`;\r\n\r\nconst Body = styled.div`\r\n  display: flex;\r\n  flex: 1;\r\n`;\r\n\r\nclass App extends Component {\r\n  render() {\r\n    return (\r\n      <Router>\r\n        <Wrapper>\r\n          <Header />\r\n          <Body>\r\n            <Menu />\r\n            <Routes />\r\n          </Body>\r\n\r\n          <Player />\r\n        </Wrapper>\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","export interface Theme {\r\n  background: {\r\n    light: string;\r\n    default: string;\r\n    dark: string;\r\n    hover: string;\r\n    active: string;\r\n  };\r\n  font: {\r\n    size: {\r\n      small: string;\r\n      medium: string;\r\n      large: string;\r\n      extraLarge: string;\r\n      extraExtraLarge: string;\r\n    };\r\n    weight: {\r\n      light: number;\r\n      normal: number;\r\n      bold: number;\r\n    };\r\n  };\r\n  foreground: {\r\n    default: string;\r\n    dark: string;\r\n  };\r\n  primaryLight: string;\r\n  primary: string;\r\n  filter: {\r\n    darken: string;\r\n  };\r\n}\r\n\r\nexport const theme: Theme = {\r\n  background: {\r\n    light: \"#303030\",\r\n    default: \"#202020\",\r\n    dark: \"#101010\",\r\n    hover: \"rgba(255, 255, 255, 0.1)\",\r\n    active: \"rgba(255, 255, 255, 0.2)\"\r\n  },\r\n  font: {\r\n    size: {\r\n      small: \"12px\",\r\n      medium: \"16px\",\r\n      large: \"20px\",\r\n      extraLarge: \"24px\",\r\n      extraExtraLarge: \"34px\"\r\n    },\r\n    weight: {\r\n      light: 300,\r\n      normal: 400,\r\n      bold: 500\r\n    }\r\n  },\r\n  foreground: {\r\n    default: \"#ffffff\",\r\n    dark: \"rgba(255, 255, 255, 0.4)\"\r\n  },\r\n  primary: \"#1db954\",\r\n  primaryLight: \"#1ed760\",\r\n  filter: {\r\n    darken: \"brightness(0.5)\"\r\n  }\r\n};\r\n","import { createGlobalStyle } from \"styled-components\";\r\nimport { theme } from \"./theme\";\r\n\r\nexport default createGlobalStyle`\r\n  html, body, #root {\r\n    height: 100%;\r\n  }\r\n\r\n  body, button, ul {\r\n    margin: 0;\r\n    padding: 0;\r\n  }\r\n\r\n  body {\r\n    background: ${theme.background.default}; \r\n    color: ${theme.foreground.default};\r\n    font-family: \"Roboto\", sans-serif;\r\n    font-size: ${theme.font.size.medium};\r\n    font-weight: ${theme.font.weight.normal};\r\n    user-select: none;\r\n  }\r\n\r\n  a {\r\n    color: ${theme.foreground.default};\r\n    text-decoration: none;\r\n  }\r\n\r\n  button {\r\n    background: transparent;\r\n    border: 0;\r\n    color: ${theme.foreground.default};\r\n    font-family: \"Roboto\", sans-serif;\r\n    font-size: ${theme.font.size.medium};\r\n    font-weight: ${theme.font.weight.normal};\r\n\r\n    &:not(:disabled) {\r\n      cursor: pointer;\r\n    }\r\n\r\n    &:focus {\r\n      outline: none;\r\n    }\r\n  }\r\n\r\n  ul {\r\n    list-style: none;\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport { createStore, applyMiddleware } from \"redux\";\r\nimport thunkMiddleware from \"redux-thunk\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport { ThemeProvider } from \"./styles/styled\";\r\nimport rootReducer from \"./reducers\";\r\nimport App from \"./components/layout/App\";\r\nimport { checkRedirection, initAuthorization } from \"./helpers/authorization\";\r\nimport fetchMiddleware from \"./middlewares/fetchMiddleware\";\r\nimport { theme } from \"./styles/theme\";\r\nimport GlobalStyle from \"./styles/global\";\r\n\r\ncheckRedirection();\r\nconst store = createStore(\r\n  rootReducer,\r\n  composeWithDevTools(applyMiddleware(thunkMiddleware, fetchMiddleware))\r\n);\r\ninitAuthorization(store.dispatch);\r\n\r\nReactDOM.render(\r\n  <>\r\n    <GlobalStyle />\r\n    <ThemeProvider theme={theme}>\r\n      <Provider store={store}>\r\n        <App />\r\n      </Provider>\r\n    </ThemeProvider>\r\n  </>,\r\n  document.getElementById(\"root\")\r\n);\r\n","import { Dispatch } from \"redux\";\r\nimport { normalize } from \"normalizr\";\r\nimport { authorizedFetch } from \"../helpers/authorization\";\r\n\r\nexport default () => (next: Dispatch) => (action: any) => {\r\n  const { types, path, schema } = action;\r\n\r\n  if (types) {\r\n    const [requestType, successType, failureType] = types;\r\n    next({ type: requestType });\r\n\r\n    return authorizedFetch(`${process.env.REACT_APP_BASE_URL}/${path}`).then(\r\n      response =>\r\n        response.json().then(json => {\r\n          if (response.ok) {\r\n            next({\r\n              type: successType,\r\n              payload: schema ? normalize(json, schema).entities : json\r\n            });\r\n          } else {\r\n            next({ type: failureType, payload: json.error });\r\n          }\r\n        })\r\n    );\r\n  } else {\r\n    next(action);\r\n  }\r\n};\r\n"],"sourceRoot":""}