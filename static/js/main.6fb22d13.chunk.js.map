{"version":3,"sources":["types/index.ts","types/Type.ts","styles/global.ts","styles/theme.ts","styles/styled.ts","actions/authorization.ts","utils/authorization.ts","styles/effects.ts","components/core/Button.tsx","components/core/Heading.tsx","components/core/Icon.tsx","components/core/Image.tsx","components/core/PrimaryButton.tsx","components/core/RoundButton.tsx","components/core/Text.tsx","components/core/ToggleButton.tsx","actions/index.ts","selectors/userProfile.ts","components/layout/Brand.tsx","components/layout/User.tsx","components/layout/Header.tsx","reducers/types.ts","actions/userProfile.ts","selectors/albums.ts","selectors/artists.ts","selectors/tracks.ts","selectors/player.ts","utils/index.ts","components/layout/RecentItem.tsx","components/layout/RecentList.tsx","components/layout/Menu.tsx","components/DefaultRoute.tsx","selectors/authorization.ts","components/PrivateRoute.tsx","components/layout/Login.tsx","components/layout/SubMenu.tsx","components/layout/SubRoutes.tsx","actions/schemas.ts","actions/browse.ts","selectors/playlists.ts","selectors/browse.ts","components/covers/CoverItem.tsx","components/covers/CoverList.tsx","components/covers/CategoryCovers.tsx","selectors/loading.ts","components/withLoader.tsx","components/browse/Categories.tsx","components/covers/AlbumCovers.tsx","components/browse/NewReleases.tsx","components/covers/PlaylistCovers.tsx","components/browse/FeaturedPlaylists.tsx","components/browse/Browse.tsx","components/browse/CategoryPlaylists.tsx","selectors/search.ts","components/search/Recents.tsx","actions/search.ts","components/layout/Empty.tsx","components/covers/ArtistCovers.tsx","components/search/Wrapper.tsx","components/search/Artists.tsx","components/search/Albums.tsx","components/search/Playlists.tsx","selectors/library.ts","actions/player.ts","actions/types.ts","actions/library.ts","components/details/ArtistNames.tsx","components/details/AlbumName.tsx","components/details/TrackItem.tsx","components/details/TrackList.tsx","components/search/Tracks.tsx","components/search/Results.tsx","components/search/Search.tsx","selectors/following.ts","components/library/FollowedArtists.tsx","actions/following.ts","components/library/SavedAlbums.tsx","components/library/FollowedPlaylists.tsx","components/library/SavedTracks.tsx","components/library/Library.tsx","components/details/Wrapper.tsx","components/details/Header.tsx","components/details/PlaylistDetails.tsx","actions/playlists.ts","components/details/AlbumDetails.tsx","actions/albums.ts","components/details/ArtistDetails.tsx","actions/artists.ts","components/player/PlayQueue.tsx","components/layout/Routes.tsx","actions/notifications.ts","components/layout/NotificationItem.tsx","components/layout/NotificationList.tsx","selectors/notifications.ts","components/player/TrackInfos.tsx","reducers/player.ts","reducers/createReducer.ts","components/player/Audio.tsx","components/player/Controls.tsx","components/player/Slider.tsx","components/player/Playback.tsx","components/player/Volume.tsx","components/player/Player.tsx","components/layout/App.tsx","reducers/albums.ts","reducers/artists.ts","reducers/authorization.ts","reducers/browse.ts","reducers/following.ts","reducers/library.ts","reducers/loading.ts","reducers/notifications.ts","reducers/playlists.ts","reducers/search.ts","reducers/tracks.ts","reducers/userProfile.ts","reducers/index.ts","utils/fetchMiddleware.ts","index.tsx","store.ts"],"names":["_Album__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","o","d","__webpack_exports__","_Artist__WEBPACK_IMPORTED_MODULE_1__","_Category__WEBPACK_IMPORTED_MODULE_2__","_Copyright__WEBPACK_IMPORTED_MODULE_3__","_Endpoint__WEBPACK_IMPORTED_MODULE_4__","_ExternalId__WEBPACK_IMPORTED_MODULE_5__","_ExternalUrl__WEBPACK_IMPORTED_MODULE_6__","_Followers__WEBPACK_IMPORTED_MODULE_7__","_Image__WEBPACK_IMPORTED_MODULE_8__","_Paging__WEBPACK_IMPORTED_MODULE_9__","_Playlist__WEBPACK_IMPORTED_MODULE_10__","_PlaylistTrack__WEBPACK_IMPORTED_MODULE_11__","_PublicUser__WEBPACK_IMPORTED_MODULE_12__","_Restriction__WEBPACK_IMPORTED_MODULE_13__","_Track__WEBPACK_IMPORTED_MODULE_14__","_TrackLink__WEBPACK_IMPORTED_MODULE_15__","_Type__WEBPACK_IMPORTED_MODULE_16__","Type","createGlobalStyle","ThemeMode","_templateObject","props","theme","background","secondary","onBackground","primary","fontSize","medium","fontWeight","normal","styledComponents","styled","default","ThemeProvider","css","keyframes","ActionType","breakpoint","height","small","width","extraSmall","color","large","extraLarge","extraExtraLarge","light","bold","onPrimary","tertiary","hover","active","shadow","low","middle","high","thickness","extraExtraSmall","extraExtraExtraLarge","darkTheme","Object","objectSpread","error","lightTheme","receiveLogIn","type","ReceiveLogIn","LOG_IN_URL","concat","process","encodeURIComponent","join","REGEX","ACCESS_TOKEN","TOKEN_TYPE","EXPIRES_AT","logInRedirect","Promise","resolve","reject","window","addEventListener","handleStorage","event","key","removeEventListener","location","assign","authorizedFetch","url","method","arguments","length","undefined","tokenType","localStorage","accessToken","fetch","headers","Authorization","clickable","isOnPrimary","_ref","Button","button","Button_templateObject","IconType","Heading","h2","Heading_templateObject","Icon","ImageShape","className","rest","objectWithoutProperties","react_default","a","createElement","Wrapper","div","Image_templateObject","shape","Round","ReWrapper","_templateObject2","Img","img","_templateObject3","isLoaded","Image","source","_useState","useState","_useState2","slicedToArray","setIsLoaded","src","onLoad","defaultProps","Square","PrimaryButton","attrs","PrimaryButton_templateObject","StyledButton","RoundButton_templateObject","StyledIcon","RoundButton_templateObject2","RoundButton","_ref2","iconType","Text","span","Text_templateObject","AlbumActionType","ArtistActionType","BrowseActionType","FollowingActionType","LibraryActionType","PlayerActionType","PlaylistActionType","SearchActionType","UserProfileActionType","ToggleButton","ToggleButton_templateObject","isToggled","selectUserProfile","state","userProfile","StyledLink","Link","Brand_templateObject","Brand_templateObject2","StyledText","Brand_templateObject3","Brand","to","Brand_StyledIcon","Wifi","User_templateObject","User_templateObject2","User_templateObject3","User","display_name","User_Wrapper","User_StyledIcon","Person","User_StyledText","header","Header_templateObject","Left","Header_templateObject2","Right","Header_templateObject3","PlayState","mapDispatch","getUserProfile","dispatch","types","UserProfileRequest","UserProfileSuccess","UserProfileFailure","path","connect","children","useEffect","Header_Wrapper","layout_Brand","layout_User","selectAlbum","albumId","albums","selectAlbumArtists","createSelector","_ref3","artists","memoize","album","map","artistId","selectAlbumTracks","tracks","selectTracks","selectAlbums","albumIds","selectPlayableTracks","filter","track","preview_url","selectIsPlayable","selectArtist","selectArtistAlbums","artist","selectArtistRelatedArtists","selectArtists","relatedArtists","selectArtistTopTracks","topTracks","artistIds","selectTrack","trackId","selectTrackAlbum","selectTrackArtists","trackIds","selectCollection","collections","player","selectLoadedTrack","_state$player","playQueue","currentTrack","selectLoadedTracks","selectLoadedAlbum","selectLoadedArtists","selectIsLoaded","_state$player2","id","selectIsPlaying","playState","Playing","selectCanPlayPause","None","currentTime","duration","selectCanSeek","selectCanPrevious","_state$player3","isLooped","selectCanNext","_state$player4","selectTimes","_ref4","_ref5","selectVolume","_ref6","volume","selectIsMuted","_ref7","isMuted","selectCommand","command","selectRecents","_ref8","_ref9","_ref10","_ref11","playlists","collection","Album","Artist","getArtistNames","name","getImageSource","object","images","getImageShape","RecentItem_templateObject","StyledImage","RecentItem_templateObject2","Container","RecentItem_templateObject3","Name","_templateObject4","_templateObject5","RecentItem","recent","RecentItem_StyledLink","capitalize","Title","h3","RecentList_templateObject","recents","layout_RecentItem","Menu_templateObject","List","ul","Menu_templateObject2","StyledNavLink","NavLink","Menu_templateObject3","Menu_templateObject4","StyledRecents","RecentList","Menu_templateObject5","items","icon","Home","text","Search","LibraryBooks","Menu","Menu_Wrapper","item","Menu_StyledIcon","DefaultRoute","from","Route","exact","render","Redirect","selectIsLoggedIn","authorization","isLoggedIn","withRouter","Component","component","Fragment","Login_templateObject","Login_templateObject2","LogIn","Login_Wrapper","core_Heading","Login_StyledButton","onClick","SubMenu_templateObject","SubMenu_templateObject2","match","SubMenu_List","SubMenu_StyledNavLink","defaultItem","find","components_DefaultRoute","components_PrivateRoute","schema","Entity","processStrategy","Artists","Category","PagedAlbums","PagedArtists","PagedCategories","categories","PagedPlaylists","PagedTracks","Playlist","Results","SavedAlbums","Track","parent","Tracks","define","Schemas","getCategory","categoryId","CategoryRequest","CategorySuccess","CategoryFailure","then","CategoryPlaylistsRequest","CategoryPlaylistsSuccess","CategoryPlaylistsFailure","getCategoryPlaylists","selectPlaylist","playlistId","selectPlaylistTracks","playlist","selectPlaylists","playlistIds","selectCategories","browse","values","selectCategory","selectCategoryPlaylists","categoryPlaylistIds","selectFeaturedPlaylists","featuredPlaylistIds","selectNewReleases","newReleaseIds","Item","li","CoverItem_templateObject","CoverItem_templateObject2","CoverItem_templateObject3","SubTitle","CoverItem_templateObject4","CoverItem","cover","CoverItem_StyledButton","imageShape","core_Image","imageSource","CoverItem_Title","title","subTitle","CoverList_templateObject","splitWidth","times","StyledCoverItem","CoverList_templateObject2","CoverList","covers","CoverList_List","history","category","icons","getCovers","covers_CoverList","push","selectIsLoading","loading","count","Fader","withLoader_templateObject","isLoading","Loader","withLoader_templateObject2","withLoader","WrappedComponent","hasLoaded","setHasLoaded","prevUrl","useRef","current","getCategories","CategoriesRequest","CategoriesSuccess","CategoriesFailure","covers_CategoryCovers","selectAbumArtists","onSelect","getAlbums","NewReleasesRequest","NewReleasesSuccess","NewReleasesFailure","covers_AlbumCovers","owner","getPlaylists","FeaturedPlaylistsRequest","FeaturedPlaylistsSuccess","FeaturedPlaylistsFailure","Categories","NewReleases","PlaylistCovers","Browse","layout_SubMenu","layout_SubRoutes","params","selectAlbumsById","search","selectArtistsById","sort","x","y","popularity","selectPlaylistsById","selectTracksById","selectHasResults","Recents_templateObject","StyledCoverList","Recents_templateObject2","ClearButton","Recents_templateObject3","clearRecents","ClearRecents","Recents_Wrapper","Empty_templateObject","SentimentVeryDissatisfied","Empty_templateObject2","Empty_templateObject3","Empty","Empty_Wrapper","Empty_StyledIcon","Empty_StyledText","Wrapper_templateObject","getState","selectArtistById","SelectArtist","payload","search_Wrapper","covers_ArtistCovers","selectAlbumById","SelectAlbum","selectPlaylistById","SelectPlaylist","selectSavedAlbums","library","userAlbumIds","selectSavedTracks","userTrackIds","FetchMethod","providers","_providers","defineProperty","selectArtistTracks","Library","loadCollection","collectionId","collectionType","getTrackIds","LoadCollection","playPause","Pause","Play","loadPlayPause","LoadTrack","loadTrack","checkSavedTracks","CheckSavedTracksRequest","CheckSavedTracksSuccess","CheckSavedTracksFailure","data","toggleSavedTrack","isSaved","UnsaveTrackRequest","UnsaveTrackSuccess","UnsaveTrackFailure","Delete","UnsaveTrack","SaveTrackRequest","SaveTrackSuccess","SaveTrackFailure","Put","saveTrack","ArtistNames_templateObject","ArtistNames_templateObject2","ArtistNames_templateObject3","ArtistNames","ArtistNames_List","ArtistNames_Item","ArtistNames_StyledLink","AlbumName_templateObject","AlbumName","AlbumName_StyledLink","TrackItem_templateObject","PlayButton","isPlaying","PlayArrow","TrackItem_templateObject2","MusicIcon","MusicNote","TrackItem_templateObject3","NoMusicIcon","MusicOff","TrackItem_templateObject4","Names","TrackItem_templateObject5","_templateObject6","Others","_templateObject7","Separator","_templateObject8","Duration","_templateObject9","FavoriteButton","Favorite","_templateObject10","isDisabled","onTogglePlay","TrackItem_Wrapper","TrackItem_Name","details_ArtistNames","details_AlbumName","seconds","duration_ms","minutes","Math","floor","renderDuration","StyledList","TrackList_templateObject","TrackList","details_TrackItem","CollectionId","details_TrackList","Results_templateObject","Albums","Playlists","hasResults","Results_Wrapper","layout_Empty","StyledInput","input","Search_templateObject","query","encoded","SearchRequest","SearchSuccess","SearchFailure","ClearResults","value","setValue","navigate","useCallback","_","debounce","pathname","last","split","onSubmit","preventDefault","onChange","target","placeholder","autoFocus","search_Results","search_Recents","selectFollowedArtists","following","userArtistIds","selectFollowedPlaylists","userPlaylistIds","getFollowedArtists","FollowedArtistsRequest","FollowedArtistsSuccess","FollowedArtistsFailure","getSavedAlbums","SavedAlbumsRequest","SavedAlbumsSuccess","SavedAlbumsFailure","getFollowedPlaylists","FollowedPlaylistsRequest","FollowedPlaylistsSuccess","FollowedPlaylistsFailure","getSavedTracks","SavedTracksRequest","SavedTracksSuccess","SavedTracksFailure","json","FollowedArtists","FollowedPlaylists","details_Wrapper_templateObject","details_Header_templateObject","details_Header_templateObject2","Vertical","details_Header_templateObject3","Header_templateObject4","Header_templateObject5","Horizontal","Header_templateObject6","Header_templateObject7","Header_templateObject8","Header","canPlay","isFavorite","onToggleFavorite","details_Header_Wrapper","Header_StyledImage","Header_Title","Header_SubTitle","Header_PlayButton","disabled","Header_FavoriteButton","getPlaylist","PlaylistRequest","PlaylistSuccess","PlaylistFailure","userId","CheckFollowedPlaylistRequest","CheckFollowedPlaylistSuccess","CheckFollowedPlaylistFailure","checkFollowedPlaylist","toggleFollowPlaylist","isFollowed","UnfollowPlaylistRequest","UnfollowPlaylistSuccess","UnfollowPlaylistFailure","unfollowPlaylist","FollowPlaylistRequest","FollowPlaylistSuccess","FollowPlaylistFailure","followPlaylist","ownProps","isPlayable","handleTogglePlay","handleToggleFavorite","details_Wrapper","details_Header","getAlbum","AlbumRequest","AlbumSuccess","AlbumFailure","CheckSavedAlbumRequest","CheckSavedAlbumSuccess","CheckSavedAlbumFailure","checkSavedAlbum","toggleSavedAlbum","UnsaveAlbumRequest","UnsaveAlbumSuccess","UnsaveAlbumFailure","UnsaveAlbum","SaveAlbumRequest","SaveAlbumSuccess","SaveAlbumFailure","saveAlbum","Section","section","ArtistDetails_templateObject","TopTracks","RelatedArtists","getArtist","ArtistRequest","ArtistSuccess","ArtistFailure","ArtistAlbumsRequest","ArtistAlbumsSuccess","ArtistAlbumsFailure","getArtistAlbums","ArtistRelatedArtistsRequest","ArtistRelatedArtistsSuccess","ArtistRelatedArtistsFailure","getArtistRelatedArtists","ArtistTopTracksRequest","ArtistTopTracksSuccess","ArtistTopTracksFailure","getArtistTopTracks","CheckFollowedArtistRequest","CheckFollowedArtistSuccess","CheckFollowedArtistFailure","checkFollowedArtist","toggleFollowArtist","UnfollowArtistRequest","UnfollowArtistSuccess","UnfollowArtistFailure","unfollowArtist","FollowArtistRequest","FollowArtistSuccess","FollowArtistFailure","followArtist","ArtistDetails_Albums","PlayQueue_templateObject","PlayQueue_Wrapper","Routes_templateObject","publicUrl","Routes","Routes_Wrapper","CategoryPlaylists","PlaylistDetails","AlbumDetails","ArtistDetails","PlayQueue","NotificationItem_templateObject","isExiting","DoneIcon","Done","NotificationItem_templateObject2","NotificationItem_templateObject3","Clear","NotificationItem_templateObject4","deleteNotification","notificationId","DeleteNotification","notification","setIsExiting","exit","setTimeout","handle","clearTimeout","NotificationItem_Wrapper","NotificationItem_Text","message","NotificationItem_ClearButton","NotificationList_templateObject","NotificationList_templateObject2","notifications","NotificationList_Wrapper","NotificationList_List","layout_NotificationItem","TrackInfos_templateObject","StyedImage","TrackInfos_templateObject2","TrackInfos_templateObject3","TrackInfos_templateObject4","TrackInfos_templateObject5","Command","toggleFavorite","TrackInfos_Wrapper","TrackInfos_Container","TrackInfos_Title","TrackInfos_FavoriteButton","createReducer","initialState","handlers","action","hasOwnProperty","isShuffled","_createReducer","shuffle","toConsumableArray","indexOf","TrackLoaded","Update","Paused","Seek","Seeked","Ended","Previous","Next","ToggleShuffle","ToggleLoop","ChangeVolume","VolumeChanged","trackLoaded","playing","update","elapsed","paused","seeked","volumeChanged","ended","loadedTrack","audio","currentAudio","play","pause","ref","onLoadedMetadata","onPlay","onTimeUpdate","onPause","onSeeked","onVolumeChange","onEnded","Controls_templateObject","StyledRoundButton","Controls_templateObject2","StyledToggleButton","Controls_templateObject3","ShuffleButton","Shuffle","Controls_templateObject4","PreviousButton","SkipPrevious","Controls_templateObject5","Controls_templateObject6","NextButton","SkipNext","Controls_templateObject7","LoopButton","Loop","Controls_templateObject8","toggleShuffle","previous","next","toggleLoop","canPrevious","canPlayPause","canNext","Controls_Wrapper","data-testid","Controls_PlayButton","Slider_templateObject","Slider_templateObject2","style","Slider_templateObject3","Thumb","position","left","Slider_templateObject4","Slider_templateObject5","Slider","canChange","isDown","setIsDown","_useState3","_useState4","localValue","setLocalValue","wrapper","thumb","getValue","currentWrapper","currentTHunb","getBoundingClientRect","clientWidth","handleMouseMove","pageX","handleMouseUp","document","currentValue","Slider_Wrapper","onMouseDown","Slider_Container","Slider_Left","Slider_Right","Playback_templateObject","ProgressTime","Playback_templateObject2","seek","time","canSeek","renderTime","round","progress","Playback_Wrapper","player_Slider","Volume_templateObject","VolumeButton","Volume_templateObject2","StyledSlider","Volume_templateObject3","changeVolume","Volume_Wrapper","VolumeOff","VolumeUp","Player_templateObject","ThirdWrapper","Player_templateObject2","LeftWrapper","Player_templateObject3","CenterWrapper","Player_templateObject4","RightWrapper","Player_templateObject5","StyledVolume","Volume","Player_templateObject6","QueueButton","QueueMusic","Player_templateObject7","Player_Wrapper","player_TrackInfos","player_Controls","player_Playback","player_Audio","App_templateObject","StyledHeader","App_templateObject2","Body","App_templateObject3","StyledMenu","App_templateObject4","StyledRoutes","App_templateObject5","StyledNotificationList","NotificationList","App_templateObject6","StyledPlayer","Player","App_templateObject7","App","BrowserRouter","App_Wrapper","mergeAlbums","merge","updateAlbum","albums_createReducer","mergeArtists","updateArtist","artists_createReducer","_action$payload","nexState","keys","_action$payload2","_action$payload3","browse_createReducer","following_createReducer","library_createReducer","increment","decrement","loading_createReducer","addNotification","v4","notifications_createReducer","NotificationActionType","mergePlaylists","updatePlaylist","playlists_createReducer","addRecent","search_createReducer","results","_results$Object$keys$","mergeTracks","updateTrack","tracks_createReducer","reduce","index","combineReducers","fetchMiddleware","_types","requestType","successType","failureType","asyncToGenerator","regenerator_default","mark","_callee","response","wrap","_context","prev","sent","JSON","parse","ok","normalize","entities","abrupt","stop","_x","apply","this","hash","date","Date","setSeconds","getSeconds","parseInt","toString","checkRedirection","store","_createStore","rootReducer","composeWithDevTools","applyMiddleware","thunkMiddleware","now","ThemeButton","mode","Dark","Brightness3","WbSunny","src_templateObject","ReactDOM","themeMode","setThemeMode","global","es","layout_App","Light","getElementById"],"mappings":"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","file":"static/js/main.6fb22d13.chunk.js","sourcesContent":["export * from \"./Album\";\r\nexport * from \"./Artist\";\r\nexport * from \"./Category\";\r\nexport * from \"./Copyright\";\r\nexport * from \"./Endpoint\";\r\nexport * from \"./ExternalId\";\r\nexport * from \"./ExternalUrl\";\r\nexport * from \"./Followers\";\r\nexport * from \"./Image\";\r\nexport * from \"./Paging\";\r\nexport * from \"./Playlist\";\r\nexport * from \"./PlaylistTrack\";\r\nexport * from \"./PublicUser\";\r\nexport * from \"./Restriction\";\r\nexport * from \"./Track\";\r\nexport * from \"./TrackLink\";\r\nexport * from \"./Type\";\r\nexport * from \"./User\";\r\nexport * from \"./UserProfile\";\r\n","export enum Type {\r\n  Album = \"album\",\r\n  Artist = \"artist\",\r\n  Playlist = \"playlist\",\r\n  Library = \"library\",\r\n  Search = \"search\"\r\n}\r\n","import { createGlobalStyle } from \"styled-components\";\r\nimport { Theme } from \"./theme\";\r\n\r\nexport default createGlobalStyle<{ theme: Theme }>`\r\n  html, body, #root {\r\n    height: 100%;\r\n  }\r\n\r\n  body, h1, h2, h3, button, ul {\r\n    margin: 0;\r\n    padding: 0;\r\n  }\r\n\r\n  body {\r\n    background: ${props => props.theme.background.secondary};\r\n    color: ${props => props.theme.onBackground.primary};\r\n    font-family: \"Roboto\", sans-serif;\r\n    font-size: ${props => props.theme.fontSize.medium}px;\r\n    font-weight: ${props => props.theme.fontWeight.normal};\r\n    user-select: none;\r\n  }\r\n\r\n  a {\r\n    color: ${props => props.theme.onBackground.primary};\r\n    text-decoration: none;\r\n  }\r\n\r\n  button {\r\n    background: transparent;\r\n    border: 0;\r\n    font-family: \"Roboto\", sans-serif;\r\n    font-size: ${props => props.theme.fontSize.medium}px;\r\n    font-weight: ${props => props.theme.fontWeight.normal};\r\n\r\n    &:not(:disabled) {\r\n      cursor: pointer;\r\n    }\r\n\r\n    &:disabled {\r\n      cursor: not-allowed; \r\n    }\r\n  }\r\n\r\n  a, button, input {\r\n    outline: none;\r\n\r\n    &:focus {\r\n      border: 0;\r\n    }\r\n  }\r\n\r\n  ul {\r\n    list-style: none;\r\n  }\r\n`;\r\n","export enum ThemeMode {\r\n  Dark = \"DARK\",\r\n  Light = \"LIGHT\"\r\n}\r\n\r\nexport interface Theme {\r\n  background: {\r\n    primary: string;\r\n    secondary: string;\r\n    tertiary: string;\r\n  };\r\n  breakpoint: {\r\n    height: {\r\n      small: number;\r\n    };\r\n    width: {\r\n      extraSmall: number;\r\n      small: number;\r\n    };\r\n  };\r\n  color: {\r\n    primary: string;\r\n    error: string;\r\n  };\r\n  fontSize: {\r\n    small: number;\r\n    medium: number;\r\n    large: number;\r\n    extraLarge: number;\r\n    extraExtraLarge: number;\r\n  };\r\n  fontWeight: {\r\n    light: number;\r\n    normal: number;\r\n    bold: number;\r\n  };\r\n  onBackground: {\r\n    primary: string;\r\n    secondary: string;\r\n    tertiary: string;\r\n    hover: string;\r\n    active: string;\r\n  };\r\n  onPrimary: {\r\n    primary: string;\r\n    secondary: string;\r\n    tertiary: string;\r\n    hover: string;\r\n    active: string;\r\n  };\r\n  shadow: {\r\n    low: string;\r\n    middle: string;\r\n    high: string;\r\n  };\r\n  thickness: {\r\n    extraExtraSmall: number;\r\n    extraSmall: number;\r\n    small: number;\r\n    medium: number;\r\n    large: number;\r\n    extraLarge: number;\r\n    extraExtraLarge: number;\r\n    extraExtraExtraLarge: number;\r\n  };\r\n}\r\n\r\nconst theme = {\r\n  breakpoint: {\r\n    height: {\r\n      small: 540\r\n    },\r\n    width: {\r\n      extraSmall: 480,\r\n      small: 960\r\n    }\r\n  },\r\n  color: {\r\n    primary: \"#1db954\"\r\n  },\r\n  fontSize: {\r\n    small: 12,\r\n    medium: 16,\r\n    large: 20,\r\n    extraLarge: 24,\r\n    extraExtraLarge: 32\r\n  },\r\n  fontWeight: {\r\n    light: 300,\r\n    normal: 400,\r\n    bold: 500\r\n  },\r\n  onPrimary: {\r\n    primary: \"rgba(255, 255, 255, 1)\",\r\n    secondary: \"rgba(255, 255, 255, 0.70)\",\r\n    tertiary: \"rgba(255, 255, 255, 0.50)\",\r\n    hover: \"rgba(255, 255, 255, 0.08)\",\r\n    active: \"rgba(255, 255, 255, 0.16)\"\r\n  },\r\n  shadow: {\r\n    low: \"0 1px 2px rgba(0, 0, 0, .5)\",\r\n    middle: \"0 2px 4px rgba(0, 0, 0, .5)\",\r\n    high: \"0 4px 8px rgba(0, 0, 0, .5)\"\r\n  },\r\n  thickness: {\r\n    extraExtraSmall: 3.125,\r\n    extraSmall: 6.25,\r\n    small: 12.5,\r\n    medium: 25,\r\n    large: 50,\r\n    extraLarge: 100,\r\n    extraExtraLarge: 200,\r\n    extraExtraExtraLarge: 400\r\n  }\r\n};\r\n\r\nexport const darkTheme: Theme = {\r\n  ...theme,\r\n  background: {\r\n    primary: \"#000000\",\r\n    secondary: \"#212121\",\r\n    tertiary: \"#303030\"\r\n  },\r\n  color: {\r\n    ...theme.color,\r\n    error: \"#e57373\"\r\n  },\r\n  onBackground: {\r\n    primary: \"rgba(255, 255, 255, 1)\",\r\n    secondary: \"rgba(255, 255, 255, 0.70)\",\r\n    tertiary: \"rgba(255, 255, 255, 0.50)\",\r\n    hover: \"rgba(255, 255, 255, 0.08)\",\r\n    active: \"rgba(255, 255, 255, 0.16)\"\r\n  }\r\n};\r\n\r\nexport const lightTheme: Theme = {\r\n  ...theme,\r\n  background: {\r\n    primary: \"#fafafa\",\r\n    secondary: \"#f5f5f5\",\r\n    tertiary: \"#e0e0e0\"\r\n  },\r\n  color: {\r\n    ...theme.color,\r\n    error: \"#d32f2f\"\r\n  },\r\n  onBackground: {\r\n    primary: \"rgba(0, 0, 0, 0.87)\",\r\n    secondary: \"rgba(0, 0, 0, 0.54)\",\r\n    tertiary: \"rgba(0, 0, 0, 0.38)\",\r\n    hover: \"rgba(0, 0, 0, 0.04)\",\r\n    active: \"rgba(0, 0, 0, 0.08)\"\r\n  }\r\n};\r\n","import * as styledComponents from \"styled-components\";\r\nimport { Theme } from \"./theme\";\r\n\r\nconst {\r\n  default: styled,\r\n  css,\r\n  createGlobalStyle,\r\n  keyframes,\r\n  ThemeProvider\r\n} = styledComponents as styledComponents.ThemedStyledComponentsModule<Theme>;\r\n\r\nexport { css, createGlobalStyle, keyframes, ThemeProvider };\r\nexport default styled;\r\n","import { Action, Dispatch } from \"redux\";\r\nimport { logInRedirect } from \"../utils/authorization\";\r\n\r\nexport enum ActionType {\r\n  RequestLogIn = \"REQUEST_LOG_IN\",\r\n  ReceiveLogIn = \"RECEIVE_LOG_IN\"\r\n}\r\n\r\nexport interface RequestLogInAction extends Action<ActionType.RequestLogIn> {}\r\n\r\nfunction requestLogIn(): RequestLogInAction {\r\n  return {\r\n    type: ActionType.RequestLogIn\r\n  };\r\n}\r\n\r\nexport interface ReceiveLogInAction extends Action<ActionType.ReceiveLogIn> {}\r\n\r\nexport function receiveLogIn(): ReceiveLogInAction {\r\n  return {\r\n    type: ActionType.ReceiveLogIn\r\n  };\r\n}\r\n\r\nexport function logIn() {\r\n  return async (\r\n    dispatch: Dispatch<RequestLogInAction | ReceiveLogInAction>\r\n  ) => {\r\n    dispatch(requestLogIn());\r\n    await logInRedirect();\r\n    dispatch(receiveLogIn());\r\n  };\r\n}\r\n","import { Dispatch } from \"redux\";\r\nimport { receiveLogIn } from \"../actions/authorization\";\r\n\r\nconst SCOPES = [\r\n  \"user-library-read\",\r\n  \"user-library-modify\",\r\n  \"user-follow-read\",\r\n  \"user-follow-modify\",\r\n  \"playlist-read-private\",\r\n  \"playlist-read-collaborative\",\r\n  \"playlist-modify-private\",\r\n  \"playlist-modify-public\"\r\n];\r\nconst LOG_IN_URL = `https://accounts.spotify.com/authorize?client_id=${\r\n  process.env.REACT_APP_CLIENT_ID\r\n}&scope=${encodeURIComponent(\r\n  SCOPES.join(\" \")\r\n)}&response_type=token&redirect_uri=${process.env.REACT_APP_REDIRECT_URI}`;\r\nconst REGEX = /#access_token=(.*?)&token_type=(.*?)&expires_in=(.*)$/;\r\nconst ACCESS_TOKEN = \"token\";\r\nconst TOKEN_TYPE = \"tokenType\";\r\nconst EXPIRES_AT = \"expiresAt\";\r\n\r\nfunction logInRedirect(): Promise<any> {\r\n  return new Promise((resolve, reject) => {\r\n    const handleStorage = (event: StorageEvent) => {\r\n      if (event.key === ACCESS_TOKEN) {\r\n        window.removeEventListener(\"storage\", handleStorage);\r\n        resolve();\r\n      }\r\n    };\r\n    window.addEventListener(\"storage\", handleStorage);\r\n    window.location.assign(LOG_IN_URL);\r\n  });\r\n}\r\n\r\nfunction checkRedirection(): void {\r\n  const match = window.location.hash.match(REGEX);\r\n  if (match) {\r\n    localStorage[ACCESS_TOKEN] = match[1];\r\n    localStorage[TOKEN_TYPE] = match[2];\r\n    const date = new Date();\r\n    date.setSeconds(date.getSeconds() + parseInt(match[3]));\r\n    localStorage[EXPIRES_AT] = date.toString();\r\n  }\r\n}\r\n\r\nfunction initAuthorization(dispatch: Dispatch): void {\r\n  if (\r\n    !!localStorage[ACCESS_TOKEN] &&\r\n    Date.parse(localStorage[EXPIRES_AT]) > Date.now()\r\n  ) {\r\n    dispatch(receiveLogIn());\r\n  }\r\n}\r\n\r\nfunction authorizedFetch(\r\n  url: string,\r\n  method: string = \"GET\"\r\n): Promise<Response> {\r\n  const tokenType = localStorage[TOKEN_TYPE];\r\n  const accessToken = localStorage[ACCESS_TOKEN];\r\n\r\n  return fetch(url, {\r\n    method,\r\n    headers: {\r\n      Authorization: `${tokenType} ${accessToken}`\r\n    }\r\n  });\r\n}\r\n\r\nasync function fetchJson(url: string): Promise<any> {\r\n  const response = await authorizedFetch(url);\r\n  return response.json();\r\n}\r\n\r\nexport {\r\n  logInRedirect,\r\n  checkRedirection,\r\n  initAuthorization,\r\n  authorizedFetch,\r\n  fetchJson\r\n};\r\n","import { Theme } from \"./theme\";\r\n\r\nconst clickable = (isOnPrimary?: boolean) => ({ theme }: { theme: Theme }) => `\r\n  color: ${\r\n    isOnPrimary ? theme.onPrimary.primary : theme.onBackground.secondary\r\n  };\r\n  overflow: hidden;\r\n  position relative;\r\n  \r\n  &:disabled {\r\n    color: ${\r\n      isOnPrimary ? theme.onPrimary.tertiary : theme.onBackground.tertiary\r\n    };\r\n  }\r\n\r\n  &:not(:disabled):hover {\r\n    color: ${\r\n      isOnPrimary ? theme.onPrimary.primary : theme.onBackground.primary\r\n    };\r\n  }\r\n\r\n  &::before, &::after {\r\n    content: \"\";\r\n    height: 100%;\r\n    left: 0;\r\n    opacity: 0;\r\n    position: absolute;\r\n    top: 0;\r\n    transition: opacity .2s;\r\n    width: 100%;\r\n    z-index: 1;\r\n  }\r\n\r\n  &::before {\r\n    background: ${\r\n      isOnPrimary ? theme.onPrimary.hover : theme.onBackground.hover\r\n    };\r\n  }\r\n\r\n  &::after {\r\n    background: ${\r\n      isOnPrimary ? theme.onPrimary.active : theme.onBackground.active\r\n    };\r\n  }\r\n\r\n  &:not(:disabled):hover::before,\r\n  &:not(:disabled):active::after {\r\n    opacity: 1;\r\n  }\r\n`;\r\n\r\nexport { clickable };\r\n","import styled from \"../../styles/styled\";\r\nimport { clickable } from \"../../styles/effects\";\r\n\r\ninterface Props {\r\n  isOnPrimary?: boolean;\r\n}\r\n\r\nconst Button = styled.button<Props>`\r\n  ${props => clickable(!!props.isOnPrimary)}\r\n`;\r\n\r\nexport default Button;\r\n","import styled from \"../../styles/styled\";\r\n\r\nconst Heading = styled.h2`\r\n  font-size: ${props => props.theme.fontSize.extraLarge}px;\r\n  font-weight: ${props => props.theme.fontWeight.bold};\r\n  margin-bottom: ${props => props.theme.thickness.medium}px;\r\n  text-align: center;\r\n  width: 100%;\r\n  word-break: break-word;\r\n`;\r\n\r\nexport default Heading;\r\n","import React, { HTMLAttributes } from \"react\";\r\n\r\nexport enum IconType {\r\n  Brightness3 = \"brightness_3\",\r\n  Clear = \"clear\",\r\n  Done = \"done\",\r\n  Favorite = \"favorite\",\r\n  Home = \"home\",\r\n  LibraryBooks = \"library_books\",\r\n  Loop = \"loop\",\r\n  MusicNote = \"music_note\",\r\n  MusicOff = \"music_off\",\r\n  Pause = \"pause\",\r\n  Person = \"person\",\r\n  PlayArrow = \"play_arrow\",\r\n  QueueMusic = \"queue_music\",\r\n  Search = \"search\",\r\n  SentimentVeryDissatisfied = \"sentiment_very_dissatisfied\",\r\n  Shuffle = \"shuffle\",\r\n  SkipNext = \"skip_next\",\r\n  SkipPrevious = \"skip_previous\",\r\n  VolumeOff = \"volume_off\",\r\n  VolumeUp = \"volume_up\",\r\n  Wifi = \"wifi\",\r\n  WbSunny = \"wb_sunny\"\r\n}\r\n\r\ninterface Props {\r\n  type: IconType;\r\n}\r\n\r\nfunction Icon({\r\n  className,\r\n  type,\r\n  ...rest\r\n}: Props & HTMLAttributes<HTMLElement>) {\r\n  return (\r\n    <i {...rest} className={`material-icons ${className}`}>\r\n      {type}\r\n    </i>\r\n  );\r\n}\r\n\r\nexport default Icon;\r\n","import React, { useState, HTMLAttributes } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nexport enum ImageShape {\r\n  Square = \"SQUARE\",\r\n  Round = \"ROUND\"\r\n}\r\n\r\nconst Wrapper = styled.div<{ shape: ImageShape }>`\r\n  background: ${props => props.theme.background.tertiary};\r\n  ${props => props.shape === ImageShape.Round && \"border-radius: 50%;\"}\r\n  overflow: hidden;\r\n  width: 100%;\r\n`;\r\n\r\nconst ReWrapper = styled.div`\r\n  padding-top: 100%;\r\n  position: relative;\r\n`;\r\n\r\nconst Img = styled.img<{ isLoaded: boolean }>`\r\n  height: 100%;\r\n  left: 0;\r\n  position: absolute;\r\n  object-fit: cover;\r\n  opacity: ${props => (props.isLoaded ? \"1\" : \"0\")}\r\n  top: 0;\r\n  width: 100%;\r\n  transition: opacity .2s;\r\n`;\r\n\r\ninterface Props {\r\n  source?: string;\r\n  shape: ImageShape;\r\n}\r\n\r\nfunction Image({\r\n  className,\r\n  source,\r\n  shape\r\n}: Props & HTMLAttributes<HTMLElement>) {\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n\r\n  function handleLoad() {\r\n    setIsLoaded(true);\r\n  }\r\n\r\n  return (\r\n    <Wrapper className={className} shape={shape}>\r\n      <ReWrapper>\r\n        {source && <Img src={source} onLoad={handleLoad} isLoaded={isLoaded} />}\r\n      </ReWrapper>\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nImage.defaultProps = {\r\n  shape: ImageShape.Square\r\n};\r\n\r\nexport default Image;\r\n","import styled from \"../../styles/styled\";\r\nimport Button from \"./Button\";\r\n\r\nconst PrimaryButton = styled(Button).attrs(() => ({\r\n  isOnPrimary: true\r\n}))`\r\n  background: ${props => props.theme.color.primary};\r\n  border-radius: ${props => props.theme.thickness.medium}px;\r\n  height: ${props => props.theme.thickness.large}px;\r\n  padding: ${props => props.theme.thickness.small}px\r\n    ${props => props.theme.thickness.medium}px;\r\n`;\r\n\r\nexport default PrimaryButton;\r\n","import React, { ButtonHTMLAttributes } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Button from \"./Button\";\r\nimport Icon, { IconType } from \"./Icon\";\r\n\r\nconst StyledButton = styled(Button).attrs<{\r\n  isOnPrimary: boolean;\r\n}>(({ isOnPrimary }) => ({\r\n  isOnPrimary\r\n}))`\r\n  border-radius: 50%;\r\n  height: ${props => props.theme.thickness.large}px;\r\n  padding: ${props => props.theme.thickness.small}px;\r\n  width: ${props => props.theme.thickness.large}px;\r\n`;\r\n\r\nconst StyledIcon = styled(Icon)`\r\n  font-size: ${props => props.theme.thickness.medium}px;\r\n`;\r\n\r\nexport interface Props {\r\n  isOnPrimary?: boolean;\r\n  iconType: IconType;\r\n}\r\n\r\nfunction RoundButton({\r\n  isOnPrimary,\r\n  iconType,\r\n  ...rest\r\n}: Props & ButtonHTMLAttributes<HTMLButtonElement>) {\r\n  return (\r\n    <StyledButton {...rest} isOnPrimary={!!isOnPrimary}>\r\n      <StyledIcon type={iconType} />\r\n    </StyledButton>\r\n  );\r\n}\r\n\r\nexport default RoundButton;\r\n","import styled from \"styled-components\";\r\n\r\nconst Text = styled.span`\r\n  max-width: 100%;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n`;\r\n\r\nexport default Text;\r\n","import styled from \"../../styles/styled\";\r\nimport RoundButton from \"./RoundButton\";\r\n\r\nconst ToggleButton = styled(RoundButton).attrs(({ iconType }) => ({\r\n  iconType\r\n}))<{ isToggled?: boolean }>`\r\n  ${props => props.isToggled && `color: ${props.theme.color.primary};`}\r\n\r\n  &:not(:disabled):hover {\r\n    ${props => props.isToggled && `color: ${props.theme.color.primary};`}\r\n  }\r\n`;\r\n\r\nexport default ToggleButton;\r\n","export enum AlbumActionType {\r\n  AlbumRequest = \"ALBUM_REQUEST\",\r\n  AlbumSuccess = \"ALBUM_SUCCESS\",\r\n  AlbumFailure = \"ALBUM_FAILURE\"\r\n}\r\n\r\nexport enum ArtistActionType {\r\n  ArtistRequest = \"ARTIST_REQUEST\",\r\n  ArtistSuccess = \"ARTIST_SUCCESS\",\r\n  ArtistFailure = \"ARTIST_FAILURE\",\r\n  ArtistAlbumsRequest = \"ARTIST_ALBUMS_REQUEST\",\r\n  ArtistAlbumsSuccess = \"ARTIST_ALBUMS_SUCCESS\",\r\n  ArtistAlbumsFailure = \"ARTIST_ALBUMS_FAILURE\",\r\n  ArtistRelatedArtistsRequest = \"ARTIST_RELATED_ARTISTS_REQUEST\",\r\n  ArtistRelatedArtistsSuccess = \"ARTIST_RELATED_ARTISTS_SUCCESS\",\r\n  ArtistRelatedArtistsFailure = \"ARTIST_RELATED_ARTISTS_FAILURE\",\r\n  ArtistTopTracksRequest = \"ARTIST_TOP_TRACKS_REQUEST\",\r\n  ArtistTopTracksSuccess = \"ARTIST_TOP_TRACKS_SUCCESS\",\r\n  ArtistTopTracksFailure = \"ARTIST_TOP_TRACKS_FAILURE\"\r\n}\r\n\r\nexport enum BrowseActionType {\r\n  CategoriesRequest = \"CATEGORIES_REQUEST\",\r\n  CategoriesSuccess = \"CATEGORIES_SUCCESS\",\r\n  CategoriesFailure = \"CATEGORIES_FAILURE\",\r\n  CategoryRequest = \"CATEGORY_REQUEST\",\r\n  CategorySuccess = \"CATEGORY_SUCCESS\",\r\n  CategoryFailure = \"CATEGORY_FAILURE\",\r\n  CategoryPlaylistsRequest = \"CATEGORY_PLAYLISTS_REQUEST\",\r\n  CategoryPlaylistsSuccess = \"CATEGORY_PLAYLISTS_SUCCESS\",\r\n  CategoryPlaylistsFailure = \"CATEGORY_PLAYLISTS_FAILURE\",\r\n  FeaturedPlaylistsRequest = \"FEATURED_PLAYLISTS_REQUEST\",\r\n  FeaturedPlaylistsSuccess = \"FEATURED_PLAYLISTS_SUCCESS\",\r\n  FeaturedPlaylistsFailure = \"FEATURED_PLAYLISTS_FAILURE\",\r\n  NewReleasesRequest = \"NEW_RELEASES_REQUEST\",\r\n  NewReleasesSuccess = \"NEW_RELEASES_SUCCESS\",\r\n  NewReleasesFailure = \"NEW_RELEASES_FAILURE\"\r\n}\r\n\r\nexport enum FollowingActionType {\r\n  FollowedArtistsRequest = \"FOLLOWED_ARTISTS_REQUEST\",\r\n  FollowedArtistsSuccess = \"FOLLOWED_ARTISTS_SUCCESS\",\r\n  FollowedArtistsFailure = \"FOLLOWED_ARTISTS_FAILURE\",\r\n  CheckFollowedArtistRequest = \"CHECK_FOLLOWED_ARTIST_REQUEST\",\r\n  CheckFollowedArtistSuccess = \"CHECK_FOLLOWED_ARTIST_SUCCESS\",\r\n  CheckFollowedArtistFailure = \"CHECK_FOLLOWED_ARTIST_FAILURE\",\r\n  FollowArtistRequest = \"FOLLOW_ARTIST_REQUEST\",\r\n  FollowArtistSuccess = \"FOLLOW_ARTIST_SUCCESS\",\r\n  FollowArtistFailure = \"FOLLOW_ARTIST_FAILURE\",\r\n  UnfollowArtistRequest = \"UNFOLLOW_ARTIST_REQUEST\",\r\n  UnfollowArtistSuccess = \"UNFOLLOW_ARTIST_SUCCESS\",\r\n  UnfollowArtistFailure = \"UNFOLLOW_ARTIST_FAILURE\",\r\n  FollowedPlaylistsRequest = \"FOLLOWED_PLAYLISTS_REQUEST\",\r\n  FollowedPlaylistsSuccess = \"FOLLOWED_PLAYLISTS_SUCCESS\",\r\n  FollowedPlaylistsFailure = \"FOLLOWED_PLAYLISTS_FAILURE\",\r\n  CheckFollowedPlaylistRequest = \"CHECK_FOLLOWED_PLAYLIST_REQUEST\",\r\n  CheckFollowedPlaylistSuccess = \"CHECK_FOLLOWED_PLAYLIST_SUCCESS\",\r\n  CheckFollowedPlaylistFailure = \"CHECK_FOLLOWED_PLAYLIST_FAILURE\",\r\n  FollowPlaylistRequest = \"FOLLOW_PLAYLIST_REQUEST\",\r\n  FollowPlaylistSuccess = \"FOLLOW_PLAYLIST_SUCCESS\",\r\n  FollowPlaylistFailure = \"FOLLOW_PLAYLIST_FAILURE\",\r\n  UnfollowPlaylistRequest = \"UNFOLLOW_PLAYLIST_REQUEST\",\r\n  UnfollowPlaylistSuccess = \"UNFOLLOW_PLAYLIST_SUCCESS\",\r\n  UnfollowPlaylistFailure = \"UNFOLLOW_PLAYLIST_FAILURE\"\r\n}\r\n\r\nexport enum LibraryActionType {\r\n  SavedAlbumsRequest = \"SAVED_ALBUMS_REQUEST\",\r\n  SavedAlbumsSuccess = \"SAVED_ALBUMS_SUCCESS\",\r\n  SavedAlbumsFailure = \"SAVED_ALBUMS_FAILURE\",\r\n  CheckSavedAlbumRequest = \"CHECK_SAVED_ALBUM_REQUEST\",\r\n  CheckSavedAlbumSuccess = \"CHECK_SAVED_ALBUM_SUCCESS\",\r\n  CheckSavedAlbumFailure = \"CHECK_SAVED_ALBUM_FAILURE\",\r\n  SaveAlbumRequest = \"SAVE_ALBUM_REQUEST\",\r\n  SaveAlbumSuccess = \"SAVE_ALBUM_SUCCESS\",\r\n  SaveAlbumFailure = \"SAVE_ALBUM_FAILURE\",\r\n  UnsaveAlbumRequest = \"UNSAVE_ALBUM_REQUEST\",\r\n  UnsaveAlbumSuccess = \"UNSAVE_ALBUM_SUCCESS\",\r\n  UnsaveAlbumFailure = \"UNSAVE_ALBUM_FAILURE\",\r\n  SavedTracksRequest = \"SAVED_TRACKS_REQUEST\",\r\n  SavedTracksSuccess = \"SAVED_TRACKS_SUCCESS\",\r\n  SavedTracksFailure = \"SAVED_TRACKS_FAILURE\",\r\n  CheckSavedTracksRequest = \"CHECK_SAVED_TRACKS_REQUEST\",\r\n  CheckSavedTracksSuccess = \"CHECK_SAVED_TRACKS_SUCCESS\",\r\n  CheckSavedTracksFailure = \"CHECK_SAVED_TRACKS_FAILURE\",\r\n  SaveTrackRequest = \"SAVE_TRACK_REQUEST\",\r\n  SaveTrackSuccess = \"SAVE_TRACK_SUCCESS\",\r\n  SaveTrackFailure = \"SAVE_TRACK_FAILURE\",\r\n  UnsaveTrackRequest = \"UNSAVE_TRACK_REQUEST\",\r\n  UnsaveTrackSuccess = \"UNSAVE_TRACK_SUCCESS\",\r\n  UnsaveTrackFailure = \"UNSAVE_TRACK_FAILURE\"\r\n}\r\n\r\nexport enum PlayerActionType {\r\n  LoadCollection = \"LOAD_COLLECTION\",\r\n  LoadTrack = \"LOAD_TRACK\",\r\n  TrackLoaded = \"TRACK_LOADED\",\r\n  Play = \"PLAY\",\r\n  Playing = \"PLAYING\",\r\n  Update = \"UPDATE\",\r\n  Pause = \"PAUSE\",\r\n  Paused = \"PAUSED\",\r\n  Seek = \"SEEK\",\r\n  Seeked = \"SEEKED\",\r\n  ChangeVolume = \"CHANGE_VOLUME\",\r\n  VolumeChanged = \"VOLUME_CHANGED\",\r\n  Ended = \"ENDED\",\r\n  Next = \"NEXT\",\r\n  Previous = \"PREVIOUS\",\r\n  ToggleShuffle = \"TOGGLE_SHUFFLE\",\r\n  ToggleLoop = \"TOGGLE_LOOP\"\r\n}\r\n\r\nexport enum PlaylistActionType {\r\n  PlaylistRequest = \"PLAYLIST_REQUEST\",\r\n  PlaylistSuccess = \"PLAYLIST_SUCCESS\",\r\n  PlaylistFailure = \"PLAYLIST_FAILURE\"\r\n}\r\n\r\nexport enum SearchActionType {\r\n  SearchRequest = \"SEARCH_REQUEST\",\r\n  SearchSuccess = \"SEARCH_SUCCESS\",\r\n  SearchFailure = \"SEARCH_FAILURE\",\r\n  ClearResults = \"CLEAR_RESULTS\",\r\n  SelectAlbum = \"SELECT_ALBUM\",\r\n  SelectArtist = \"SELECT_ARTIST\",\r\n  SelectPlaylist = \"SELECT_PLAYLIST\",\r\n  ClearRecents = \"CLEAR_RECENTS\"\r\n}\r\n\r\nexport enum UserProfileActionType {\r\n  UserProfileRequest = \"USER_PROFILE_REQUEST\",\r\n  UserProfileSuccess = \"USER_PROFILE_SUCCESS\",\r\n  UserProfileFailure = \"USER_PROFILE_FAILURE\"\r\n}\r\n","import { UserProfile } from \"../types\";\r\nimport { State } from \"../reducers\";\r\n\r\nexport function selectUserProfile(state: State): UserProfile | undefined {\r\n  return state.userProfile.userProfile;\r\n}\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Icon, IconType, Text } from \"../core\";\r\n\r\nconst StyledLink = styled(Link)`\r\n  align-items: center;\r\n  display: flex;\r\n  height: 100%;\r\n`;\r\n\r\nconst StyledIcon = styled(Icon)`\r\n  color: ${props => props.theme.onPrimary.primary};\r\n  margin-right: ${props => props.theme.thickness.small}px;\r\n`;\r\n\r\nconst StyledText = styled(Text)`\r\n  color: ${props => props.theme.onPrimary.primary};\r\n  font-size: ${props => props.theme.fontSize.extraLarge}px;\r\n  font-weight: ${props => props.theme.fontWeight.bold};\r\n`;\r\n\r\nconst Brand = () => {\r\n  return (\r\n    <StyledLink to={`${process.env.PUBLIC_URL}/browse`}>\r\n      <StyledIcon type={IconType.Wifi} />\r\n      <StyledText>Spotify</StyledText>\r\n    </StyledLink>\r\n  );\r\n};\r\n\r\nexport default Brand;\r\n","import React from \"react\";\r\nimport styled from \"../../styles/styled\";\r\nimport { UserProfile } from \"../../types\";\r\nimport { Icon, IconType, Text } from \"../core\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n`;\r\n\r\nconst StyledIcon = styled(Icon)`\r\n  color: ${props => props.theme.onPrimary.primary};\r\n  margin-right: ${props => props.theme.thickness.small}px;\r\n`;\r\n\r\nconst StyledText = styled(Text)`\r\n  color: ${props => props.theme.onPrimary.primary};\r\n`;\r\n\r\nconst User = (props: UserProfile) => {\r\n  const { display_name } = props;\r\n\r\n  return (\r\n    <Wrapper>\r\n      <StyledIcon type={IconType.Person} />\r\n      <StyledText>{display_name}</StyledText>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default User;\r\n","import React, { useEffect, HTMLAttributes, ReactNode } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport styled from \"../../styles/styled\";\r\nimport { UserProfile } from \"../../types\";\r\nimport { getUserProfile } from \"../../actions/userProfile\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectUserProfile } from \"../../selectors/userProfile\";\r\nimport Brand from \"./Brand\";\r\nimport User from \"./User\";\r\n\r\nconst Wrapper = styled.header`\r\n  align-items: center;\r\n  display: flex;\r\n  background: ${props => props.theme.color.primary};\r\n  box-shadow: ${props => props.theme.shadow.middle};\r\n  flex-shrink: 0;\r\n  justify-content: space-between;\r\n  z-index: 2;\r\n`;\r\n\r\nconst Left = styled.div`\r\n  height: 100%;\r\n`;\r\n\r\nconst Right = styled.div`\r\n  display: flex;\r\n  height: 100%;\r\n`;\r\n\r\ninterface Props {\r\n  children: ReactNode;\r\n  userProfile?: UserProfile;\r\n  getUserProfile: () => void;\r\n}\r\n\r\nfunction Header({\r\n  children,\r\n  className,\r\n  userProfile,\r\n  getUserProfile\r\n}: Props & HTMLAttributes<HTMLElement>) {\r\n  useEffect(() => {\r\n    getUserProfile();\r\n  }, [getUserProfile]);\r\n\r\n  return (\r\n    <Wrapper className={className}>\r\n      <Left>\r\n        <Brand />\r\n      </Left>\r\n\r\n      {userProfile && (\r\n        <Right>\r\n          {children}\r\n          <User {...userProfile} />\r\n        </Right>\r\n      )}\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  userProfile: selectUserProfile(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  getUserProfile\r\n};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(Header);\r\n","import { Dictionary } from \"lodash\";\r\nimport { Album, Artist, Category, Playlist, Track, Type } from \"../types\";\r\n\r\nexport interface AlbumDictionary extends Dictionary<Album> {}\r\nexport interface ArtistDictionary extends Dictionary<Artist> {}\r\nexport interface CategoryDictionary extends Dictionary<Category> {}\r\nexport interface PlaylistDictionary extends Dictionary<Playlist> {}\r\nexport interface TrackDictionary extends Dictionary<Track> {}\r\n\r\nexport interface Collection {\r\n  id: string;\r\n  type: Type;\r\n}\r\n\r\nexport enum PlayState {\r\n  None = \"NONE\",\r\n  Playing = \"IS_PLAYING\",\r\n  Paused = \"IS_PAUSED\"\r\n}\r\n","import { UserProfileActionType as ActionType } from \".\";\r\nimport { UserProfile } from \"../types\";\r\nimport { FetchDispatch, PayloadAction } from \"./types\";\r\n\r\nexport interface UserProfileSuccessAction\r\n  extends PayloadAction<ActionType.UserProfileSuccess, UserProfile> {}\r\n\r\nexport function getUserProfile() {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.UserProfileRequest,\r\n        ActionType.UserProfileSuccess,\r\n        ActionType.UserProfileFailure\r\n      ],\r\n      path: \"me\"\r\n    });\r\n  };\r\n}\r\n","import { createSelector } from \"reselect\";\r\nimport { memoize } from \"lodash\";\r\nimport { State } from \"../reducers\";\r\nimport { AlbumDictionary, ArtistDictionary } from \"../reducers/types\";\r\nimport { selectTracks } from \"./tracks\";\r\n\r\nexport function selectAlbum({ albums }: State, albumId: string) {\r\n  return albums[albumId];\r\n}\r\n\r\nexport const selectAlbumArtists = createSelector(\r\n  ({ albums }: State) => albums,\r\n  ({ artists }: State) => artists,\r\n  (albums: AlbumDictionary, artists: ArtistDictionary) =>\r\n    memoize((albumId: string) => {\r\n      const album = albums[albumId];\r\n      if (album) {\r\n        return album.artists.map(artistId => artists[artistId]);\r\n      }\r\n\r\n      return [];\r\n    })\r\n);\r\n\r\nexport function selectAlbumTracks(state: State, albumId: string) {\r\n  const album = selectAlbum(state, albumId);\r\n  if (album) {\r\n    const tracks = selectTracks(state)(album.tracks);\r\n    if (tracks) {\r\n      return tracks;\r\n    }\r\n  }\r\n\r\n  return [];\r\n}\r\n\r\nexport const selectAlbums = createSelector(\r\n  (state: State) => state.albums,\r\n  (albums: AlbumDictionary) =>\r\n    memoize((albumIds: string[]) =>\r\n      albumIds ? albumIds.map(albumId => albums[albumId]) : []\r\n    )\r\n);\r\n\r\nexport function selectPlayableTracks(state: State, albumId: string) {\r\n  const tracks = selectAlbumTracks(state, albumId);\r\n  return tracks ? tracks.filter(track => track && track.preview_url) : [];\r\n}\r\n\r\nexport function selectIsPlayable(state: State, albumId: string) {\r\n  return !!selectPlayableTracks(state, albumId).length;\r\n}\r\n","import { createSelector } from \"reselect\";\r\nimport { memoize } from \"lodash\";\r\nimport { Artist } from \"../types\";\r\nimport { State } from \"../reducers\";\r\nimport { ArtistDictionary } from \"../reducers/types\";\r\nimport { selectAlbums } from \"./albums\";\r\nimport { selectTracks } from \"./tracks\";\r\n\r\nexport function selectArtist({ artists }: State, artistId: string) {\r\n  return artists[artistId];\r\n}\r\n\r\nexport function selectArtistAlbums(state: State, artistId: string) {\r\n  const artist = selectArtist(state, artistId);\r\n  if (artist) {\r\n    const albums = selectAlbums(state)(artist.albums);\r\n    if (albums) {\r\n      return albums;\r\n    }\r\n  }\r\n\r\n  return [];\r\n}\r\n\r\nexport function selectArtistRelatedArtists(state: State, artistId: string) {\r\n  const artist = selectArtist(state, artistId);\r\n  if (artist) {\r\n    const artists = selectArtists(state)(artist.relatedArtists);\r\n    if (artists) {\r\n      return artists;\r\n    }\r\n  }\r\n\r\n  return [];\r\n}\r\n\r\nexport function selectArtistTopTracks(state: State, artistId: string) {\r\n  const artist = selectArtist(state, artistId);\r\n  if (artist) {\r\n    const tracks = selectTracks(state)(artist.topTracks);\r\n    if (tracks) {\r\n      return tracks;\r\n    }\r\n  }\r\n\r\n  return [];\r\n}\r\n\r\nexport const selectArtists = createSelector(\r\n  (state: State) => state.artists,\r\n  (artists: ArtistDictionary): ((artistIds: string[]) => Artist[]) =>\r\n    memoize((artistIds: string[]) =>\r\n      artistIds ? artistIds.map(artistId => artists[artistId]) : []\r\n    )\r\n);\r\n\r\nexport function selectPlayableTracks(state: State, artistId: string) {\r\n  const tracks = selectArtistTopTracks(state, artistId);\r\n  return tracks ? tracks.filter(track => track && track.preview_url) : [];\r\n}\r\n\r\nexport function selectIsPlayable(state: State, artistId: string) {\r\n  return !!selectPlayableTracks(state, artistId).length;\r\n}\r\n","import { createSelector } from \"reselect\";\r\nimport { memoize } from \"lodash\";\r\nimport { State } from \"../reducers\";\r\nimport { TrackDictionary } from \"../reducers/types\";\r\nimport { selectAlbum } from \"./albums\";\r\nimport { selectArtists } from \"./artists\";\r\n\r\nexport function selectTrack({ tracks }: State, trackId: string) {\r\n  return tracks[trackId];\r\n}\r\n\r\nexport function selectTrackAlbum(state: State, trackId: string) {\r\n  const track = selectTrack(state, trackId);\r\n  if (track) {\r\n    return selectAlbum(state, track.album);\r\n  }\r\n}\r\n\r\nexport function selectTrackArtists(state: State, trackId: string) {\r\n  const track = selectTrack(state, trackId);\r\n  return track ? selectArtists(state)(track.artists) : [];\r\n}\r\n\r\nexport const selectTracks = createSelector(\r\n  (state: State) => state.tracks,\r\n  (tracks: TrackDictionary) =>\r\n    memoize((trackIds: string[]) =>\r\n      trackIds\r\n        ? trackIds.map(trackId => tracks[trackId]).filter(track => !!track)\r\n        : []\r\n    )\r\n);\r\n","import { createSelector } from \"reselect\";\r\nimport { Type } from \"../types\";\r\nimport { State } from \"../reducers\";\r\nimport {\r\n  AlbumDictionary,\r\n  ArtistDictionary,\r\n  PlaylistDictionary,\r\n  PlayState,\r\n  Collection\r\n} from \"../reducers/types\";\r\nimport { Command } from \"../reducers/player\";\r\nimport { selectTrack, selectTracks } from \"./tracks\";\r\nimport { selectAlbum } from \"./albums\";\r\nimport { selectArtists } from \"./artists\";\r\n\r\nexport function selectCollection({ player }: State) {\r\n  const { collections } = player;\r\n  if (collections.length) {\r\n    return collections[0];\r\n  }\r\n}\r\n\r\nexport function selectLoadedTrack(state: State) {\r\n  const { playQueue, currentTrack } = state.player;\r\n  if (playQueue) {\r\n    return selectTrack(state, playQueue[currentTrack]);\r\n  }\r\n}\r\n\r\nexport function selectLoadedTracks(state: State) {\r\n  const { playQueue } = state.player;\r\n  return playQueue ? selectTracks(state)(playQueue) : [];\r\n}\r\n\r\nexport function selectLoadedAlbum(state: State) {\r\n  const track = selectLoadedTrack(state);\r\n  if (track) {\r\n    return selectAlbum(state, track.album);\r\n  }\r\n}\r\n\r\nexport function selectLoadedArtists(state: State) {\r\n  const track = selectLoadedTrack(state);\r\n  return track ? selectArtists(state)(track.artists) : [];\r\n}\r\n\r\nexport function selectIsLoaded(state: State) {\r\n  const { collections, playQueue, currentTrack } = state.player;\r\n  return (id: string) =>\r\n    (!!collections.length && collections[0].id === id) ||\r\n    (!!playQueue.length && playQueue[currentTrack] === id);\r\n}\r\n\r\nexport function selectIsPlaying(state: State, id?: string) {\r\n  const { playState } = state.player;\r\n  return (!id || selectIsLoaded(state)(id)) && playState === PlayState.Playing;\r\n}\r\n\r\nexport function selectCanPlayPause(state: State) {\r\n  const { player } = state;\r\n  return (\r\n    player.playState !== PlayState.None &&\r\n    player.currentTime !== player.duration\r\n  );\r\n}\r\n\r\nexport function selectCanSeek(state: State) {\r\n  return state.player.playState !== PlayState.None;\r\n}\r\n\r\nexport function selectCanPrevious(state: State) {\r\n  const { playQueue, currentTrack, isLooped } = state.player;\r\n  return playQueue.length > 1 && (currentTrack > 0 || isLooped);\r\n}\r\n\r\nexport function selectCanNext(state: State) {\r\n  const { playQueue, currentTrack, isLooped } = state.player;\r\n  return (\r\n    playQueue.length > 1 && (currentTrack < playQueue.length - 1 || isLooped)\r\n  );\r\n}\r\n\r\nexport function selectIsShuffled({ player }: State) {\r\n  return player.isShuffled;\r\n}\r\n\r\nexport function selectIsLooped({ player }: State) {\r\n  return player.isLooped;\r\n}\r\n\r\nexport interface Times {\r\n  duration: number;\r\n  currentTime: number;\r\n}\r\n\r\nexport const selectTimes = createSelector(\r\n  ({ player }: State) => player.duration,\r\n  ({ player }: State) => player.currentTime,\r\n  (duration: number, currentTime: number) => ({\r\n    duration,\r\n    currentTime\r\n  })\r\n);\r\n\r\nexport function selectVolume({ player }: State) {\r\n  return player.volume;\r\n}\r\n\r\nexport function selectIsMuted({ player }: State) {\r\n  return player.isMuted;\r\n}\r\n\r\nexport function selectCommand(state: State): Command {\r\n  return state.player.command;\r\n}\r\n\r\nexport const selectRecents = createSelector(\r\n  ({ player }: State) => player.collections,\r\n  ({ albums }: State) => albums,\r\n  ({ artists }: State) => artists,\r\n  ({ playlists }: State) => playlists,\r\n  (\r\n    collections: Collection[],\r\n    albums: AlbumDictionary,\r\n    artists: ArtistDictionary,\r\n    playlists: PlaylistDictionary\r\n  ) => {\r\n    return collections\r\n      .filter(collection => collection.id)\r\n      .map(collection => {\r\n        switch (collection.type) {\r\n          case Type.Album:\r\n            return albums[collection.id];\r\n          case Type.Artist:\r\n            return artists[collection.id];\r\n          default:\r\n            return playlists[collection.id];\r\n        }\r\n      });\r\n  }\r\n);\r\n","import { Artist, Image, Type } from \"../types\";\r\nimport { ImageShape } from \"../components/core/Image\";\r\n\r\nexport function getArtistNames(artists: Artist[]): string {\r\n  return artists.map(artist => artist.name).join(\", \");\r\n}\r\n\r\nexport function getImageSource(object: {\r\n  images: Image[];\r\n}): string | undefined {\r\n  return object && object.images && object.images.length\r\n    ? object.images[0].url\r\n    : undefined;\r\n}\r\n\r\nexport function getImageShape(object: { type: Type }): ImageShape {\r\n  return object.type === Type.Artist ? ImageShape.Round : ImageShape.Square;\r\n}\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { capitalize } from \"lodash\";\r\nimport styled from \"../../styles/styled\";\r\nimport { clickable } from \"../../styles/effects\";\r\nimport { Album, Artist, Playlist } from \"../../types\";\r\nimport { getImageSource, getImageShape } from \"../../utils\";\r\nimport { Image, Text } from \"../core\";\r\n\r\nconst StyledLink = styled(Link)`\r\n  ${clickable(false)}\r\n\r\n  align-items: center;\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  flex-direction: row;\r\n  padding: ${props => props.theme.thickness.small}px;\r\n  width 100%;\r\n`;\r\n\r\nconst StyledImage = styled(Image)`\r\n  flex-shrink: 0;\r\n  height: ${props => props.theme.thickness.large}px;\r\n  margin-right: ${props => props.theme.thickness.small}px;\r\n  width: ${props => props.theme.thickness.large}px;\r\n`;\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst Name = styled(Text)`\r\n  color: ${props => props.theme.onBackground.primary};\r\n  margin-bottom: ${props => props.theme.thickness.extraSmall}px;\r\n  text-align: left;\r\n`;\r\n\r\nconst Type = styled(Text)`\r\n  color: ${props => props.theme.onBackground.secondary};\r\n  text-align: left;\r\n`;\r\n\r\ninterface Props {\r\n  recent: Album | Artist | Playlist;\r\n}\r\n\r\nfunction RecentItem({ recent }: Props) {\r\n  return (\r\n    <li>\r\n      <StyledLink to={`${process.env.PUBLIC_URL}/${recent.type}/${recent.id}`}>\r\n        <StyledImage\r\n          source={getImageSource(recent)}\r\n          shape={getImageShape(recent)}\r\n        />\r\n        <Container>\r\n          <Name>{recent.name}</Name>\r\n          <Type>{capitalize(recent.type)}</Type>\r\n        </Container>\r\n      </StyledLink>\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default RecentItem;\r\n","import React, { HTMLAttributes } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Album, Artist, Playlist } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectRecents } from \"../../selectors/player\";\r\nimport RecentItem from \"./RecentItem\";\r\n\r\nconst Title = styled.h3`\r\n  font-size: ${props => props.theme.fontSize.medium}px;\r\n  font-weight: ${props => props.theme.fontWeight.normal};\r\n  text-align: center;\r\n  margin-bottom: ${props => props.theme.thickness.small}px;\r\n`;\r\n\r\ninterface Props {\r\n  recents: (Album | Artist | Playlist)[];\r\n}\r\n\r\nfunction RecentList({\r\n  className,\r\n  recents\r\n}: Props & HTMLAttributes<HTMLElement>) {\r\n  return (\r\n    <div className={className}>\r\n      {!!recents.length && <Title>Recently Played</Title>}\r\n      <ul>\r\n        {recents.map(recent => (\r\n          <RecentItem key={recent.id} recent={recent} />\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  recents: selectRecents(state)\r\n});\r\n\r\nexport default connect(\r\n  mapState,\r\n  null\r\n)(RecentList);\r\n","import React, { HTMLAttributes } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport styled from \"../../styles/styled\";\r\nimport { clickable } from \"../../styles/effects\";\r\nimport { Icon, IconType } from \"../core\";\r\nimport RecentList from \"./RecentList\";\r\n\r\nconst Wrapper = styled.div`\r\n  background: ${props => props.theme.background.primary};\r\n  box-shadow: ${props => props.theme.shadow.middle};\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n  padding: 0 ${props => props.theme.thickness.small}px;\r\n  z-index: 1;\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.width.extraSmall}px) {\r\n    padding: ${props => props.theme.thickness.medium}px 0;\r\n    width: ${props => props.theme.thickness.extraExtraLarge}px;\r\n  }\r\n`;\r\n\r\nconst List = styled.ul`\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.width.extraSmall}px) {\r\n    flex-direction: column;\r\n    justify-content: flex-start;\r\n    margin-bottom: ${props => props.theme.thickness.medium}px;\r\n  }\r\n`;\r\n\r\nconst StyledNavLink = styled(NavLink)`\r\n  ${clickable(false)}\r\n\r\n  align-items: center;\r\n  color: ${props => props.theme.onBackground.secondary};\r\n  display: flex;\r\n  height: ${props => props.theme.thickness.large}px;\r\n  padding: 0 ${props => props.theme.thickness.small}px;\r\n\r\n  &.active {\r\n    border-bottom: ${props => props.theme.thickness.extraExtraSmall}px solid\r\n      ${props => props.theme.color.primary};\r\n    color: ${props => props.theme.onBackground.primary};\r\n  }\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.width.extraSmall}px) {\r\n    padding: 0 ${props => props.theme.thickness.large}px;\r\n\r\n    &.active {\r\n      border: none;\r\n      border-right: ${props => props.theme.thickness.extraExtraSmall}px solid\r\n        ${props => props.theme.color.primary};\r\n    }\r\n  }\r\n`;\r\n\r\nconst StyledIcon = styled(Icon)`\r\n  margin-right: ${props => props.theme.thickness.small}px;\r\n`;\r\n\r\nconst StyledRecents = styled(RecentList)`\r\n  overflow: hidden;\r\n  display: none;\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.width.extraSmall}px) {\r\n    display: block;\r\n  }\r\n`;\r\n\r\nconst items = [\r\n  {\r\n    url: `${process.env.PUBLIC_URL}/browse`,\r\n    icon: IconType.Home,\r\n    text: \"Browse\"\r\n  },\r\n  {\r\n    url: `${process.env.PUBLIC_URL}/search`,\r\n    icon: IconType.Search,\r\n    text: \"Search\"\r\n  },\r\n  {\r\n    url: `${process.env.PUBLIC_URL}/library`,\r\n    icon: IconType.LibraryBooks,\r\n    text: \"Library\"\r\n  }\r\n];\r\n\r\nconst Menu = ({ className }: HTMLAttributes<HTMLElement>) => {\r\n  return (\r\n    <Wrapper className={className}>\r\n      <List>\r\n        {items.map(item => (\r\n          <li key={item.url}>\r\n            <StyledNavLink to={item.url}>\r\n              <StyledIcon type={item.icon} />\r\n              {item.text}\r\n            </StyledNavLink>\r\n          </li>\r\n        ))}\r\n      </List>\r\n\r\n      <StyledRecents />\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Menu;\r\n","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router\";\r\n\r\ninterface Props {\r\n  from: string;\r\n  to: string;\r\n}\r\n\r\nfunction DefaultRoute({ from, to }: Props) {\r\n  return <Route exact path={from} render={() => <Redirect to={to} />} />;\r\n}\r\n\r\nexport default DefaultRoute;\r\n","import { State } from \"../reducers\";\r\n\r\nexport function selectIsLoggedIn(state: State): boolean {\r\n  return !!state.authorization.isLoggedIn;\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  Route,\r\n  RouteProps,\r\n  RouteComponentProps,\r\n  Redirect,\r\n  withRouter\r\n} from \"react-router\";\r\nimport { connect } from \"react-redux\";\r\nimport { State } from \"../reducers\";\r\nimport { selectIsLoggedIn } from \"../selectors/authorization\";\r\nimport { selectUserProfile } from \"../selectors/userProfile\";\r\nimport { UserProfile } from \"../types\";\r\n\r\ninterface Props extends RouteProps {\r\n  isLoggedIn: boolean;\r\n  userProfile?: UserProfile;\r\n}\r\n\r\nfunction PrivateRoute({\r\n  component: Component,\r\n  isLoggedIn,\r\n  userProfile,\r\n  ...rest\r\n}: Props & RouteComponentProps) {\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={props =>\r\n        isLoggedIn ? (\r\n          userProfile ? (\r\n            Component && <Component {...props} />\r\n          ) : (\r\n            <></>\r\n          )\r\n        ) : (\r\n          <Redirect to={`${process.env.PUBLIC_URL}/login`} />\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  isLoggedIn: selectIsLoggedIn(state),\r\n  userProfile: selectUserProfile(state)\r\n});\r\n\r\nexport default withRouter(\r\n  connect(\r\n    mapState,\r\n    null\r\n  )(PrivateRoute)\r\n);\r\n","import React from \"react\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Heading, PrimaryButton } from \"../core\";\r\nimport { logInRedirect } from \"../../utils/authorization\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-grow: 1;\r\n  justify-content: center;\r\n`;\r\n\r\nconst StyledButton = styled(PrimaryButton)`\r\n  width: ${props => props.theme.thickness.extraLarge}px;\r\n`;\r\n\r\nfunction LogIn() {\r\n  function handleCLick() {\r\n    logInRedirect();\r\n  }\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Heading>You are not logged in.</Heading>\r\n      <StyledButton onClick={handleCLick}>Log In</StyledButton>\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nexport default LogIn;\r\n","import React from \"react\";\r\nimport { RouteComponentProps, NavLink, withRouter } from \"react-router-dom\";\r\nimport styled from \"../../styles/styled\";\r\n\r\nconst List = styled.ul`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-shrink: 0;\r\n  flex-wrap: wrap;\r\n  font-size: ${props => props.theme.fontSize.medium}px;\r\n  justify-content: center;\r\n  margin-bottom: ${props => props.theme.thickness.medium}px;\r\n`;\r\n\r\nconst StyledNavLink = styled(NavLink)`\r\n  align-items: center;\r\n  color: ${props => props.theme.onBackground.secondary};\r\n  display: flex;\r\n  height: ${props => props.theme.thickness.large}px;\r\n  justify-content: center;\r\n  padding: 0 ${props => props.theme.thickness.small}px;\r\n  position: relative;\r\n\r\n  &:hover {\r\n    color: ${props => props.theme.onBackground.primary};\r\n  }\r\n\r\n  &.active {\r\n    color: ${props => props.theme.onBackground.primary};\r\n  }\r\n\r\n  &.active::after {\r\n    background: ${props => props.theme.color.primary};\r\n    bottom: 0;\r\n    content: \"\";\r\n    height: ${props => props.theme.thickness.extraExtraSmall}px;\r\n    left: 50%;\r\n    position: absolute;\r\n    transform: translate(-50%, 0);\r\n    width: ${props => props.theme.thickness.large}px;\r\n  }\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.width.extraSmall}px) {\r\n    padding: 0 ${props => props.theme.thickness.medium}px;\r\n  }\r\n`;\r\n\r\ninterface Props extends RouteComponentProps {\r\n  items: { path: string; text: string }[];\r\n}\r\n\r\nfunction SubMenu({ match, items }: Props) {\r\n  return (\r\n    <List>\r\n      {items.map(item => (\r\n        <li key={item.path}>\r\n          <StyledNavLink to={`${match.url}/${item.path}`}>\r\n            {item.text}\r\n          </StyledNavLink>\r\n        </li>\r\n      ))}\r\n    </List>\r\n  );\r\n}\r\n\r\nexport default withRouter(SubMenu);\r\n","import React from \"react\";\r\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\r\nimport DefaultRoute from \"../DefaultRoute\";\r\nimport PrivateRoute from \"../PrivateRoute\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n  items: { default?: boolean; path: string; component: any }[];\r\n}\r\n\r\nfunction SubRoutes({ match, items }: Props) {\r\n  const defaultItem = items.find(item => !!item.default);\r\n  return (\r\n    <>\r\n      {!!defaultItem && (\r\n        <DefaultRoute\r\n          from={`${match.path}`}\r\n          to={`${match.url}/${defaultItem.path}`}\r\n        />\r\n      )}\r\n\r\n      {items.map(item => (\r\n        <PrivateRoute\r\n          key={item.path}\r\n          path={`${match.path}/${item.path}`}\r\n          component={item.component}\r\n        />\r\n      ))}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default withRouter(SubRoutes);\r\n","import { schema } from \"normalizr\";\r\n\r\nconst Album = new schema.Entity(\r\n  \"albums\",\r\n  {},\r\n  {\r\n    processStrategy: ({ tracks, ...rest }) => ({\r\n      ...rest,\r\n      tracks: tracks ? tracks.items : []\r\n    })\r\n  }\r\n);\r\n\r\nconst Artist = new schema.Entity(\"artists\");\r\n\r\nconst Artists = new schema.Object({\r\n  artists: [Artist]\r\n});\r\n\r\nconst Category = new schema.Entity(\"categories\");\r\n\r\nconst PagedAlbums = new schema.Object({\r\n  items: [Album],\r\n  albums: { items: [Album] }\r\n});\r\n\r\nconst PagedArtists = new schema.Object({\r\n  artists: { items: [Artist] }\r\n});\r\n\r\nconst PagedCategories = new schema.Object({\r\n  categories: { items: [Category] }\r\n});\r\n\r\nconst PagedPlaylists = new schema.Object({});\r\n\r\nconst PagedTracks = new schema.Object({});\r\n\r\nconst Playlist = new schema.Entity(\r\n  \"playlists\",\r\n  {},\r\n  {\r\n    processStrategy: ({ tracks, ...rest }) => ({\r\n      ...rest,\r\n      tracks: tracks.items ? tracks.items.map((item: any) => item.track) : []\r\n    })\r\n  }\r\n);\r\n\r\nconst Results = new schema.Entity(\r\n  \"results\",\r\n  {\r\n    albums: [Album],\r\n    artists: [Artist],\r\n    playlists: [Playlist]\r\n  },\r\n  {\r\n    processStrategy: ({ albums, artists, playlists, tracks }) => ({\r\n      albums: albums.items,\r\n      artists: artists.items,\r\n      playlists: playlists.items,\r\n      tracks: tracks.items\r\n    })\r\n  }\r\n);\r\n\r\nconst SavedAlbums = new schema.Object({\r\n  //@ts-ignore\r\n  items: [{ album: Album }]\r\n});\r\n\r\nconst Track = new schema.Entity(\r\n  \"tracks\",\r\n  {\r\n    album: Album,\r\n    artists: [Artist]\r\n  },\r\n  {\r\n    processStrategy: ({ album, artists, ...rest }, parent) => ({\r\n      ...rest,\r\n      album: parent[\"type\"] === \"album\" ? parent : album,\r\n      artists: artists\r\n    })\r\n  }\r\n);\r\n\r\nconst Tracks = new schema.Object({\r\n  tracks: [Track]\r\n});\r\n\r\nAlbum.define({\r\n  artists: [Artist],\r\n  tracks: [Track]\r\n});\r\n\r\nArtist.define({\r\n  albums: [Album],\r\n  relatedArtists: [Artist],\r\n  topTracks: [Track]\r\n});\r\n\r\nPagedPlaylists.define({\r\n  items: [Playlist],\r\n  playlists: { items: [Playlist] }\r\n});\r\n\r\nPagedTracks.define({\r\n  //@ts-ignore\r\n  items: [{ track: Track }]\r\n});\r\n\r\nPlaylist.define({\r\n  tracks: [Track]\r\n});\r\n\r\nResults.define({\r\n  tracks: [Track]\r\n});\r\n\r\nexport const Schemas = {\r\n  Album,\r\n  Artist,\r\n  Artists,\r\n  Category,\r\n  PagedAlbums,\r\n  PagedArtists,\r\n  PagedCategories,\r\n  PagedPlaylists,\r\n  PagedTracks,\r\n  Playlist,\r\n  Results,\r\n  SavedAlbums,\r\n  Track,\r\n  Tracks\r\n};\r\n","import { BrowseActionType as ActionType } from \".\";\r\nimport { EntitiesAction, FetchDispatch } from \"./types\";\r\nimport { Schemas } from \"./schemas\";\r\n\r\nexport interface CategoriesSuccessAction\r\n  extends EntitiesAction<ActionType.CategoriesSuccess> {}\r\n\r\nexport function getCategories() {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.CategoriesRequest,\r\n        ActionType.CategoriesSuccess,\r\n        ActionType.CategoriesFailure\r\n      ],\r\n      path: \"browse/categories\",\r\n      schema: Schemas.PagedCategories\r\n    });\r\n  };\r\n}\r\n\r\nexport interface CategorySuccessAction\r\n  extends EntitiesAction<ActionType.CategorySuccess> {}\r\n\r\nexport function getCategory(categoryId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.CategoryRequest,\r\n        ActionType.CategorySuccess,\r\n        ActionType.CategoryFailure\r\n      ],\r\n      path: `browse/categories/${categoryId}`,\r\n      schema: Schemas.Category\r\n    }).then(() => {\r\n      getCategoryPlaylists(categoryId)(dispatch);\r\n    });\r\n  };\r\n}\r\n\r\nexport interface CategoryPlaylistsSuccessAction\r\n  extends EntitiesAction<ActionType.CategoryPlaylistsSuccess> {}\r\n\r\nexport function getCategoryPlaylists(categoryId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.CategoryPlaylistsRequest,\r\n        ActionType.CategoryPlaylistsSuccess,\r\n        ActionType.CategoryPlaylistsFailure\r\n      ],\r\n      path: `browse/categories/${categoryId}/playlists`,\r\n      schema: Schemas.PagedPlaylists\r\n    });\r\n  };\r\n}\r\n\r\nexport interface FeaturedPlaylistsSuccessAction\r\n  extends EntitiesAction<ActionType.FeaturedPlaylistsSuccess> {}\r\n\r\nexport function getFeaturedPlaylists() {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.FeaturedPlaylistsRequest,\r\n        ActionType.FeaturedPlaylistsSuccess,\r\n        ActionType.FeaturedPlaylistsFailure\r\n      ],\r\n      path: \"browse/featured-playlists\",\r\n      schema: Schemas.PagedPlaylists\r\n    });\r\n  };\r\n}\r\n\r\nexport interface NewReleasesSuccessAction\r\n  extends EntitiesAction<ActionType.NewReleasesSuccess> {}\r\n\r\nexport function getNewReleases() {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.NewReleasesRequest,\r\n        ActionType.NewReleasesSuccess,\r\n        ActionType.NewReleasesFailure\r\n      ],\r\n      path: \"browse/new-releases\",\r\n      schema: Schemas.PagedAlbums\r\n    });\r\n  };\r\n}\r\n","import { createSelector } from \"reselect\";\r\nimport { memoize } from \"lodash\";\r\nimport { State } from \"../reducers\";\r\nimport { PlaylistDictionary } from \"../reducers/types\";\r\nimport { selectTracks } from \"./tracks\";\r\n\r\nexport function selectPlaylist({ playlists }: State, playlistId: string) {\r\n  return playlists[playlistId];\r\n}\r\n\r\nexport function selectPlaylistTracks(state: State, albumId: string) {\r\n  const playlist = selectPlaylist(state, albumId);\r\n  if (playlist) {\r\n    const tracks = selectTracks(state)(playlist.tracks);\r\n    if (tracks) {\r\n      return tracks;\r\n    }\r\n  }\r\n\r\n  return [];\r\n}\r\n\r\nexport const selectPlaylists = createSelector(\r\n  ({ playlists }: State) => playlists,\r\n  (playlists: PlaylistDictionary) =>\r\n    memoize((playlistIds: string[]) =>\r\n      playlistIds ? playlistIds.map(playlistId => playlists[playlistId]) : []\r\n    )\r\n);\r\n\r\nexport function selectPlayableTracks(state: State, playlistId: string) {\r\n  const tracks = selectPlaylistTracks(state, playlistId);\r\n  return tracks ? tracks.filter(track => track.preview_url) : [];\r\n}\r\n\r\nexport function selectIsPlayable(state: State, playlistId: string) {\r\n  return !!selectPlayableTracks(state, playlistId).length;\r\n}\r\n","import { createSelector } from \"reselect\";\r\nimport { Album, Category, Playlist } from \"../types\";\r\nimport { State } from \"../reducers\";\r\nimport { selectPlaylists } from \"./playlists\";\r\nimport { selectAlbums } from \"./albums\";\r\n\r\nexport const selectCategories = createSelector(\r\n  ({ browse }: State) => browse.categories,\r\n  (categories: { [categoryId: string]: Category }) => Object.values(categories)\r\n);\r\n\r\nexport function selectCategory(\r\n  state: State,\r\n  categoryId: string\r\n): Category | undefined {\r\n  return state.browse.categories[categoryId];\r\n}\r\n\r\nexport function selectCategoryPlaylists(state: State): Playlist[] {\r\n  return selectPlaylists(state)(state.browse.categoryPlaylistIds);\r\n}\r\n\r\nexport function selectFeaturedPlaylists(state: State): Playlist[] {\r\n  return selectPlaylists(state)(state.browse.featuredPlaylistIds);\r\n}\r\n\r\nexport function selectNewReleases(state: State): Album[] {\r\n  return selectAlbums(state)(state.browse.newReleaseIds);\r\n}\r\n","import React from \"react\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Button, Image, Text } from \"../core\";\r\nimport { ImageShape } from \"../core/Image\";\r\nimport { Cover } from \"./types\";\r\n\r\nconst Item = styled.li`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n`;\r\n\r\nconst StyledButton = styled(Button)<{ shape: ImageShape }>`\r\n  background: ${props => props.theme.background.tertiary};\r\n  ${props => props.shape === ImageShape.Round && \"border-radius: 50%;\"}\r\n  flex-shrink: 0;\r\n  box-shadow: ${props => props.theme.shadow.middle};\r\n  margin-bottom: ${props => props.theme.thickness.small}px;\r\n  width: 100%;\r\n`;\r\n\r\nconst Title = styled(Text)`\r\n  font-size: ${props => props.theme.fontSize.medium}px;\r\n  text-align: center;\r\n  width: 100%;\r\n`;\r\n\r\nconst SubTitle = styled(Text)`\r\n  color: ${props => props.theme.onBackground.secondary};\r\n  font-size: ${props => props.theme.fontSize.medium}px;\r\n  font-weight: ${props => props.theme.fontWeight.light};\r\n  margin-top: ${props => props.theme.thickness.extraSmall}px;\r\n  text-align: center;\r\n  width: 100%;\r\n`;\r\n\r\ninterface Props {\r\n  className?: string;\r\n  cover: Cover;\r\n  onClick: (coverId: string) => void;\r\n}\r\n\r\nfunction CoverItem({ className, cover, onClick }: Props) {\r\n  function handleClick() {\r\n    onClick(cover.id);\r\n  }\r\n\r\n  return (\r\n    <Item className={className}>\r\n      <StyledButton\r\n        onClick={handleClick}\r\n        shape={cover.imageShape || ImageShape.Square}\r\n      >\r\n        <Image source={cover.imageSource} />\r\n      </StyledButton>\r\n      <Title>{cover.title}</Title>\r\n      {cover.subTitle && <SubTitle>{cover.subTitle}</SubTitle>}\r\n    </Item>\r\n  );\r\n}\r\n\r\nCoverItem.defaultProps = {\r\n  onClick: () => {}\r\n};\r\n\r\nexport default CoverItem;\r\n","import React from \"react\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Cover } from \"./types\";\r\nimport CoverItem from \"./CoverItem\";\r\n\r\nconst List = styled.ul`\r\n  align-content: flex-start;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n  margin: -${props => props.theme.thickness.small}px;\r\n  width: calc(100% + 2 * ${props => props.theme.thickness.small}px);\r\n`;\r\n\r\nfunction splitWidth(times: number) {\r\n  return `calc((100% - ${times * 25}px) / ${times} - 4px)`;\r\n}\r\n\r\nconst StyledCoverItem = styled(CoverItem)`\r\n  margin: ${props => props.theme.thickness.small}px;\r\n  width: ${splitWidth(2)};\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.width.extraSmall}px) {\r\n    width: ${splitWidth(3)};\r\n  }\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.width.small}px) {\r\n    width: ${splitWidth(6)};\r\n  }\r\n`;\r\n\r\ninterface Props {\r\n  className?: string;\r\n  covers: Cover[];\r\n  onClick: (id: string) => void;\r\n}\r\n\r\nfunction CoverList({ className, covers, onClick }: Props) {\r\n  return (\r\n    <List className={className}>\r\n      {covers.map(cover => (\r\n        <StyledCoverItem key={cover.id} cover={cover} onClick={onClick} />\r\n      ))}\r\n    </List>\r\n  );\r\n}\r\n\r\nexport default CoverList;\r\n","import React from \"react\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\nimport { Category } from \"../../types\";\r\nimport { Cover } from \"./types\";\r\nimport CoverList from \"./CoverList\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n  categories: Category[];\r\n}\r\n\r\nfunction CategoryCovers({ history, categories }: Props) {\r\n  function handleClick(categoryId: string) {\r\n    history.push(`${process.env.PUBLIC_URL}/category/${categoryId}`);\r\n  }\r\n\r\n  const covers = getCovers(categories);\r\n  return <CoverList covers={covers} onClick={handleClick} />;\r\n}\r\n\r\nfunction getCovers(categories: Category[]): Cover[] {\r\n  return categories.map(category => ({\r\n    id: category.id,\r\n    imageSource:\r\n      category.icons && category.icons.length\r\n        ? category.icons[0].url\r\n        : undefined,\r\n    title: category.name\r\n  }));\r\n}\r\n\r\nexport default withRouter(CategoryCovers);\r\n","import { State } from \"../reducers\";\r\n\r\nexport function selectIsLoading(state: State): boolean {\r\n  return !!state.loading.count;\r\n}\r\n","import React, { ComponentType, useState, useEffect, useRef } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { withRouter } from \"react-router\";\r\nimport styled from \"../styles/styled\";\r\nimport { State } from \"../reducers\";\r\nimport { selectIsLoading } from \"../selectors/loading\";\r\n\r\nconst Fader = styled.div<{ isLoading: boolean }>`\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-grow: 1;\r\n  opacity: ${props => (props.isLoading ? \"0\" : \"1\")};\r\n  transition: ${props => (props.isLoading ? \"all 0\" : \"all 0.2s\")};\r\n`;\r\n\r\nconst Loader = styled.div<{ isLoading: boolean }>`\r\n  height: 5px;\r\n  left: 0;\r\n  position: absolute;\r\n  opacity: ${props => (props.isLoading ? \"1\" : \"0\")};\r\n  top: 0;\r\n  transition: ${props => (props.isLoading ? \"all 0\" : \"all 0.2s\")};\r\n  width: 100%;\r\n  z-index: 2;\r\n\r\n  &::before {\r\n    background: ${props => props.theme.onPrimary.secondary};\r\n    content: \"\";\r\n    height: 100%;\r\n    position: absolute;\r\n    width: 100%;\r\n  }\r\n\r\n  &::after {\r\n    animation: transform 2s linear infinite;\r\n    background: ${props => props.theme.onPrimary.primary};\r\n    content: \"\";\r\n    height: 100%;\r\n    position: absolute;\r\n    transform-origin: 0;\r\n    width: 100%;\r\n\r\n    @keyframes transform {\r\n      0% {\r\n        left: 0;\r\n        width: 0;\r\n      }\r\n      50% {\r\n        left: 0;\r\n        width: 100%;\r\n      }\r\n      100% {\r\n        left: 100%;\r\n        width: 0;\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst withLoader = (WrappedComponent: ComponentType<any>) => {\r\n  const WithLoader = ({ match, isLoading, ...rest }: any) => {\r\n    const [hasLoaded, setHasLoaded] = useState(false);\r\n    const prevUrl = useRef(match.url);\r\n\r\n    useEffect(() => {\r\n      setHasLoaded(!isLoading);\r\n    }, [isLoading]);\r\n\r\n    if (prevUrl.current !== match.url) {\r\n      setHasLoaded(false);\r\n      prevUrl.current = match.url;\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <Loader isLoading={!hasLoaded || isLoading} />\r\n        <Fader isLoading={!hasLoaded || isLoading}>\r\n          <WrappedComponent {...rest} />\r\n        </Fader>\r\n      </>\r\n    );\r\n  };\r\n\r\n  const mapState = (state: State) => ({\r\n    isLoading: selectIsLoading(state)\r\n  });\r\n\r\n  return withRouter(\r\n    //@ts-ignore\r\n    connect(\r\n      mapState,\r\n      null\r\n    )(WithLoader)\r\n  );\r\n};\r\n\r\nexport default withLoader;\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Category } from \"../../types\";\r\nimport { getCategories } from \"../../actions/browse\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectCategories } from \"../../selectors/browse\";\r\nimport CategoryCovers from \"../covers/CategoryCovers\";\r\nimport withLoader from \"../withLoader\";\r\n\r\ninterface Props {\r\n  categories: Category[];\r\n  getCategories: () => void;\r\n}\r\n\r\nfunction Categories({ categories, getCategories }: Props) {\r\n  useEffect(getCategories, []);\r\n\r\n  return <CategoryCovers categories={categories} />;\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  categories: selectCategories(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  getCategories: getCategories\r\n};\r\n\r\nexport default withLoader(\r\n  connect(\r\n    mapState,\r\n    mapDispatch\r\n  )(Categories)\r\n);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\nimport { Album, Artist } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectAlbumArtists } from \"../../selectors/albums\";\r\nimport { getArtistNames, getImageSource } from \"../../utils\";\r\nimport { Cover } from \"./types\";\r\nimport CoverList from \"./CoverList\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n  albums: Album[];\r\n  selectAbumArtists: (albumId: string) => Artist[];\r\n  onSelect?: (albumId: string) => void;\r\n}\r\n\r\nfunction AlbumCovers({ history, albums, selectAbumArtists, onSelect }: Props) {\r\n  function handleClick(albumId: string) {\r\n    history.push(`${process.env.PUBLIC_URL}/album/${albumId}`);\r\n    onSelect && onSelect(albumId);\r\n  }\r\n\r\n  const covers = getCovers(albums, selectAbumArtists);\r\n  return <CoverList covers={covers} onClick={handleClick} />;\r\n}\r\n\r\nfunction getCovers(\r\n  albums: Album[],\r\n  selectAlbumArtists: (albumId: string) => Artist[]\r\n): Cover[] {\r\n  return albums.map(album => {\r\n    const artists = selectAlbumArtists(album.id);\r\n    return {\r\n      id: album.id,\r\n      imageSource: getImageSource(album),\r\n      title: album.name,\r\n      subTitle: getArtistNames(artists)\r\n    };\r\n  });\r\n}\r\n\r\nconst mapDispatch = (state: State) => ({\r\n  selectAbumArtists: selectAlbumArtists(state)\r\n});\r\n\r\nexport default withRouter(\r\n  connect(\r\n    mapDispatch,\r\n    null\r\n  )(AlbumCovers)\r\n);\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Album } from \"../../types\";\r\nimport { getNewReleases } from \"../../actions/browse\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectNewReleases } from \"../../selectors/browse\";\r\nimport AlbumCovers from \"../covers/AlbumCovers\";\r\nimport withLoader from \"../withLoader\";\r\n\r\ninterface Props {\r\n  albums: Album[];\r\n  getAlbums: () => void;\r\n}\r\n\r\nfunction NewReleases({ albums, getAlbums }: Props) {\r\n  useEffect(getAlbums, []);\r\n\r\n  return <AlbumCovers albums={albums} />;\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  albums: selectNewReleases(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  getAlbums: getNewReleases\r\n};\r\n\r\nexport default withLoader(\r\n  connect(\r\n    mapState,\r\n    mapDispatch\r\n  )(NewReleases)\r\n);\r\n","import React from \"react\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\nimport { Playlist } from \"../../types\";\r\nimport { getImageSource } from \"../../utils\";\r\nimport { Cover } from \"./types\";\r\nimport CoverList from \"./CoverList\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n  playlists: Playlist[];\r\n  onSelect?: (playlistId: string) => void;\r\n}\r\n\r\nfunction PlayistCovers({ history, playlists, onSelect }: Props) {\r\n  function handleClick(playlistId: string) {\r\n    history.push(`${process.env.PUBLIC_URL}/playlist/${playlistId}`);\r\n    onSelect && onSelect(playlistId);\r\n  }\r\n\r\n  const covers = getCovers(playlists);\r\n  return <CoverList covers={covers} onClick={handleClick} />;\r\n}\r\n\r\nfunction getCovers(playlists: Playlist[]): Cover[] {\r\n  return playlists.map(playlist => ({\r\n    id: playlist.id,\r\n    imageSource: getImageSource(playlist),\r\n    title: playlist.name,\r\n    subTitle: playlist.owner.display_name\r\n  }));\r\n}\r\n\r\nexport default withRouter(PlayistCovers);\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Playlist } from \"../../types\";\r\nimport { getFeaturedPlaylists } from \"../../actions/browse\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectFeaturedPlaylists } from \"../../selectors/browse\";\r\nimport PlaylistCovers from \"../covers/PlaylistCovers\";\r\nimport withLoader from \"../withLoader\";\r\n\r\ninterface Props {\r\n  playlists: Playlist[];\r\n  getPlaylists: () => void;\r\n}\r\n\r\nfunction FeaturedPlaylists({ playlists, getPlaylists }: Props) {\r\n  useEffect(getPlaylists, []);\r\n\r\n  return <PlaylistCovers playlists={playlists} />;\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  playlists: selectFeaturedPlaylists(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  getPlaylists: getFeaturedPlaylists\r\n};\r\n\r\nexport default withLoader(\r\n  connect(\r\n    mapState,\r\n    mapDispatch\r\n  )(FeaturedPlaylists)\r\n);\r\n","import React from \"react\";\r\nimport SubMenu from \"../layout/SubMenu\";\r\nimport SubRoutes from \"../layout/SubRoutes\";\r\nimport Categories from \"./Categories\";\r\nimport NewReleases from \"./NewReleases\";\r\nimport FeaturedPlaylists from \"./FeaturedPlaylists\";\r\n\r\nconst items = [\r\n  {\r\n    path: \"categories\",\r\n    text: \"Categories\",\r\n    default: true,\r\n    component: Categories\r\n  },\r\n  {\r\n    path: \"new-releases\",\r\n    text: \"New Releases\",\r\n    component: NewReleases\r\n  },\r\n  {\r\n    path: \"featured-playists\",\r\n    text: \"Featured Playlists\",\r\n    component: FeaturedPlaylists\r\n  }\r\n];\r\n\r\nfunction Browse() {\r\n  return (\r\n    <>\r\n      <SubMenu items={items} />\r\n      <SubRoutes items={items} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Browse;\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\nimport { Category, Playlist } from \"../../types\";\r\nimport { getCategory } from \"../../actions/browse\";\r\nimport { State } from \"../../reducers\";\r\nimport {\r\n  selectCategory,\r\n  selectCategoryPlaylists\r\n} from \"../../selectors/browse\";\r\nimport { Heading } from \"../core\";\r\nimport PlaylistCovers from \"../covers/PlaylistCovers\";\r\nimport withLoader from \"../withLoader\";\r\n\r\ninterface Params {\r\n  categoryId: string;\r\n}\r\n\r\ninterface Props extends RouteComponentProps<Params> {\r\n  category?: Category;\r\n  playlists: Playlist[];\r\n  getCategory: (categoryId: string) => void;\r\n}\r\n\r\nfunction CategoryPlaylists({ match, category, playlists, getCategory }: Props) {\r\n  const { categoryId } = match.params;\r\n\r\n  useEffect(() => {\r\n    getCategory(categoryId);\r\n  }, [getCategory, categoryId]);\r\n\r\n  return (\r\n    <div>\r\n      <Heading>{category && category.name}</Heading>\r\n      <PlaylistCovers playlists={playlists} />\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State, { match }: Props) => {\r\n  const categoryId = match.params.categoryId;\r\n\r\n  return {\r\n    category: selectCategory(state, categoryId),\r\n    playlists: selectCategoryPlaylists(state)\r\n  };\r\n};\r\n\r\nconst mapDispatch = {\r\n  getCategory: (categoryId: string) => getCategory(categoryId)\r\n};\r\n\r\nexport default withLoader(\r\n  withRouter(\r\n    connect(\r\n      mapState,\r\n      mapDispatch\r\n    )(CategoryPlaylists)\r\n  )\r\n);\r\n","import { createSelector } from \"reselect\";\r\nimport { Type } from \"../types\";\r\nimport { State } from \"../reducers\";\r\nimport {\r\n  AlbumDictionary,\r\n  ArtistDictionary,\r\n  PlaylistDictionary,\r\n  Collection\r\n} from \"../reducers/types\";\r\nimport { selectAlbums as selectAlbumsById } from \"./albums\";\r\nimport { selectArtists as selectArtistsById } from \"./artists\";\r\nimport { selectPlaylists as selectPlaylistsById } from \"./playlists\";\r\nimport { selectTracks as selectTracksById } from \"./tracks\";\r\n\r\nexport function selectAlbums(state: State) {\r\n  return selectAlbumsById(state)(state.search.albumIds);\r\n}\r\n\r\nexport function selectArtists(state: State) {\r\n  return selectArtistsById(state)(state.search.artistIds).sort(\r\n    (x, y) => y.popularity - x.popularity\r\n  );\r\n}\r\n\r\nexport function selectPlaylists(state: State) {\r\n  return selectPlaylistsById(state)(state.search.playlistIds);\r\n}\r\n\r\nexport function selectTracks(state: State) {\r\n  return selectTracksById(state)(state.search.trackIds);\r\n}\r\n\r\nexport function selectPlayableTracks(state: State) {\r\n  const tracks = selectTracks(state);\r\n  return tracks ? tracks.filter(track => track.preview_url) : [];\r\n}\r\n\r\nexport function selectHasResults({ search }: State) {\r\n  return (\r\n    !!search.albumIds.length &&\r\n    !!search.artistIds.length &&\r\n    !!search.playlistIds.length &&\r\n    !!search.trackIds.length\r\n  );\r\n}\r\n\r\nexport const selectRecents = createSelector(\r\n  ({ search }: State) => search.recents,\r\n  ({ albums }: State) => albums,\r\n  ({ artists }: State) => artists,\r\n  ({ playlists }: State) => playlists,\r\n  (\r\n    recents: Collection[],\r\n    albums: AlbumDictionary,\r\n    artists: ArtistDictionary,\r\n    playlists: PlaylistDictionary\r\n  ) => {\r\n    return recents.map(recent => {\r\n      switch (recent.type) {\r\n        case Type.Album:\r\n          return albums[recent.id];\r\n        case Type.Artist:\r\n          return artists[recent.id];\r\n        default:\r\n          return playlists[recent.id];\r\n      }\r\n    });\r\n  }\r\n);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { withRouter, RouteComponentProps } from \"react-router\";\r\nimport { capitalize } from \"lodash\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Album, Artist, Playlist } from \"../../types\";\r\nimport { clearRecents } from \"../../actions/search\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectRecents } from \"../../selectors/search\";\r\nimport { getImageSource, getImageShape } from \"../../utils\";\r\nimport { Heading, PrimaryButton } from \"../core\";\r\nimport CoverList from \"../covers/CoverList\";\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-grow: 1;\r\n  flex-shrink: 0;\r\n`;\r\n\r\nconst StyledCoverList = styled(CoverList)`\r\n  margin-bottom: ${props => props.theme.thickness.medium}px;\r\n`;\r\n\r\nconst ClearButton = styled(PrimaryButton).attrs(() => ({\r\n  children: \"Clear\"\r\n}))`\r\n  align-self: center;\r\n`;\r\n\r\ninterface Props extends RouteComponentProps {\r\n  recents: (Album | Artist | Playlist)[];\r\n  clearRecents: () => void;\r\n}\r\n\r\nfunction Recents({ history, recents, clearRecents }: Props) {\r\n  function handleClick(id: string) {\r\n    const recent = recents.find(recent => recent.id === id);\r\n    if (recent) {\r\n      history.push(`${process.env.PUBLIC_URL}/${recent.type}/${recent.id}`);\r\n    }\r\n  }\r\n\r\n  const covers = getCovers(recents);\r\n  return (\r\n    <Wrapper>\r\n      {!!recents.length && (\r\n        <>\r\n          <Heading>Recent searches</Heading>\r\n          <StyledCoverList covers={covers} onClick={handleClick} />\r\n          <ClearButton onClick={clearRecents} />\r\n        </>\r\n      )}\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nfunction getCovers(recents: (Album | Artist | Playlist)[]) {\r\n  return recents.map(recent => ({\r\n    id: recent.id,\r\n    imageSource: getImageSource(recent),\r\n    imageShape: getImageShape(recent),\r\n    title: recent.name,\r\n    subTitle: capitalize(recent.type)\r\n  }));\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  recents: selectRecents(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  clearRecents\r\n};\r\n\r\nexport default withRouter(\r\n  connect(\r\n    mapState,\r\n    mapDispatch\r\n  )(Recents)\r\n);\r\n","import { Dispatch } from \"redux\";\r\nimport { Album, Artist, Playlist } from \"../types\";\r\nimport { State } from \"../reducers\";\r\nimport { selectAlbum as selectAlbumById } from \"../selectors/albums\";\r\nimport { selectArtist as selectArtistById } from \"../selectors/artists\";\r\nimport { selectPlaylist as selectPlaylistById } from \"../selectors/playlists\";\r\nimport { SearchActionType as ActionType } from \".\";\r\nimport { EntitiesAction, FetchDispatch, PayloadAction } from \"./types\";\r\nimport { Schemas } from \"./schemas\";\r\n\r\nexport interface SearchSuccessAction\r\n  extends EntitiesAction<ActionType.SearchSuccess> {}\r\n\r\nexport function search(query: string) {\r\n  if (query) {\r\n    return (dispatch: FetchDispatch) => {\r\n      const encoded = encodeURIComponent(query);\r\n      dispatch({\r\n        types: [\r\n          ActionType.SearchRequest,\r\n          ActionType.SearchSuccess,\r\n          ActionType.SearchFailure\r\n        ],\r\n        path: `search?q=${encoded}*&type=album,artist,playlist,track`,\r\n        schema: Schemas.Results\r\n      });\r\n    };\r\n  } else {\r\n    return (dispatch: Dispatch) => {\r\n      dispatch({\r\n        type: ActionType.ClearResults\r\n      });\r\n    };\r\n  }\r\n}\r\n\r\nexport interface SelectAlbumAction\r\n  extends PayloadAction<ActionType.SelectAlbum, Album> {}\r\n\r\nexport function selectAlbum(albumId: string) {\r\n  return (dispatch: Dispatch<SelectAlbumAction>, getState: () => State) => {\r\n    const state = getState();\r\n    const album = selectAlbumById(state, albumId);\r\n    dispatch({ type: ActionType.SelectAlbum, payload: album });\r\n  };\r\n}\r\n\r\nexport interface SelectArtistAction\r\n  extends PayloadAction<ActionType.SelectArtist, Artist> {}\r\n\r\nexport function selectArtist(artistId: string) {\r\n  return (dispatch: Dispatch<SelectArtistAction>, getState: () => State) => {\r\n    const state = getState();\r\n    const artist = selectArtistById(state, artistId);\r\n    dispatch({ type: ActionType.SelectArtist, payload: artist });\r\n  };\r\n}\r\n\r\nexport interface SelectPlaylistAction\r\n  extends PayloadAction<ActionType.SelectPlaylist, Playlist> {}\r\n\r\nexport function selectPlaylist(playlistId: string) {\r\n  return (dispatch: Dispatch<SelectPlaylistAction>, getState: () => State) => {\r\n    const state = getState();\r\n    const playlist = selectPlaylistById(state, playlistId);\r\n    dispatch({ type: ActionType.SelectPlaylist, payload: playlist });\r\n  };\r\n}\r\n\r\nexport function clearRecents() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({ type: ActionType.ClearRecents });\r\n  };\r\n}\r\n","import React, { ReactNode } from \"react\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Icon, Text, IconType } from \"../core\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  justify-content: center;\r\n  width: 100%;\r\n`;\r\n\r\nconst StyledIcon = styled(Icon).attrs(() => ({\r\n  type: IconType.SentimentVeryDissatisfied\r\n}))`\r\n  color: ${props => props.theme.onBackground.secondary};\r\n  font-size: ${props => 4 * props.theme.fontSize.extraExtraLarge}px;\r\n  margin-bottom: ${props => props.theme.thickness.medium}px;\r\n`;\r\n\r\nconst StyledText = styled(Text)`\r\n  font-size: ${props => props.theme.fontSize.extraExtraLarge}px;\r\n`;\r\n\r\ninterface Props {\r\n  children: ReactNode;\r\n}\r\n\r\nfunction Empty({ children }: Props) {\r\n  return (\r\n    <Wrapper>\r\n      <StyledIcon />\r\n      <StyledText>{children}</StyledText>\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nexport default Empty;\r\n","import React from \"react\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\nimport { Artist } from \"../../types\";\r\nimport { getImageSource, getImageShape } from \"../../utils\";\r\nimport { Cover } from \"./types\";\r\nimport CoverList from \"./CoverList\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n  artists: Artist[];\r\n  onSelect?: (artistId: string) => void;\r\n}\r\n\r\nfunction ArtistCovers({ history, artists, onSelect }: Props) {\r\n  function handleClick(artistId: string) {\r\n    history.push(`${process.env.PUBLIC_URL}/artist/${artistId}`);\r\n    onSelect && onSelect(artistId);\r\n  }\r\n\r\n  const covers = getCovers(artists);\r\n  return <CoverList covers={covers} onClick={handleClick} />;\r\n}\r\n\r\nfunction getCovers(artists: Artist[]): Cover[] {\r\n  return artists.map(artist => ({\r\n    id: artist.id,\r\n    imageSource: getImageSource(artist),\r\n    imageShape: getImageShape(artist),\r\n    title: artist.name\r\n  }));\r\n}\r\n\r\nexport default withRouter(ArtistCovers);\r\n","import styled from \"../../styles/styled\";\r\n\r\nconst Wrapper = styled.div`\r\n  margin-bottom: ${props => props.theme.thickness.large}px;\r\n\r\n  &:last-child {\r\n    margin-bottom: 0;\r\n  }\r\n`;\r\n\r\nexport default Wrapper;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Artist } from \"../../types\";\r\nimport { selectArtist } from \"../../actions/search\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectArtists } from \"../../selectors/search\";\r\nimport ArtistCovers from \"../covers/ArtistCovers\";\r\nimport Wrapper from \"./Wrapper\";\r\n\r\ninterface ArtistsProps {\r\n  artists: Artist[];\r\n  selectArtist: (artistId: string) => void;\r\n}\r\n\r\nfunction Artists({ artists, selectArtist }: ArtistsProps) {\r\n  return (\r\n    <Wrapper>\r\n      {artists.length > 0 && (\r\n        <ArtistCovers artists={artists} onSelect={selectArtist} />\r\n      )}\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  artists: selectArtists(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  selectArtist\r\n};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(Artists);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Album } from \"../../types\";\r\nimport { selectAlbum } from \"../../actions/search\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectAlbums } from \"../../selectors/search\";\r\nimport AlbumCovers from \"../covers/AlbumCovers\";\r\nimport Wrapper from \"./Wrapper\";\r\n\r\ninterface AlbumsProps {\r\n  albums: Album[];\r\n  selectAlbum: (albumId: string) => void;\r\n}\r\n\r\nfunction Albums({ albums, selectAlbum }: AlbumsProps) {\r\n  return (\r\n    <Wrapper>\r\n      {albums.length > 0 && (\r\n        <AlbumCovers albums={albums} onSelect={selectAlbum} />\r\n      )}\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  albums: selectAlbums(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  selectAlbum: selectAlbum\r\n};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(Albums);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Playlist } from \"../../types\";\r\nimport { selectPlaylist } from \"../../actions/search\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectPlaylists } from \"../../selectors/search\";\r\nimport PlaylistCovers from \"../covers/PlaylistCovers\";\r\nimport Wrapper from \"./Wrapper\";\r\n\r\ninterface PlaylistsProps {\r\n  playlists: Playlist[];\r\n  selectPlaylist: (playlistId: string) => void;\r\n}\r\n\r\nfunction Playlists({ playlists, selectPlaylist }: PlaylistsProps) {\r\n  return (\r\n    <Wrapper>\r\n      {playlists.length > 0 && (\r\n        <PlaylistCovers playlists={playlists} onSelect={selectPlaylist} />\r\n      )}\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  playlists: selectPlaylists(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  selectPlaylist\r\n};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(Playlists);\r\n","import { State } from \"../reducers\";\r\nimport { selectAlbums } from \"./albums\";\r\nimport { selectTracks } from \"./tracks\";\r\n\r\nexport function selectSavedAlbums(state: State) {\r\n  return selectAlbums(state)(state.library.userAlbumIds);\r\n}\r\n\r\nexport function selectSavedTracks(state: State) {\r\n  const tracks = selectTracks(state)(state.library.userTrackIds);\r\n  if (tracks) {\r\n    return tracks.filter(track => !!track);\r\n  }\r\n\r\n  return [];\r\n}\r\n\r\nexport function selectPlayableTracks(state: State) {\r\n  const tracks = selectSavedTracks(state);\r\n  return tracks ? tracks.filter(track => track.preview_url) : [];\r\n}\r\n","import { Dispatch } from \"redux\";\r\nimport { Type } from \"../types\";\r\nimport { State } from \"../reducers\";\r\nimport { selectIsPlaying, selectIsLoaded } from \"../selectors/player\";\r\nimport { selectPlayableTracks as selectAlbumTracks } from \"../selectors/albums\";\r\nimport { selectPlayableTracks as selectArtistTracks } from \"../selectors/artists\";\r\nimport { selectPlayableTracks as selectPlaylistTracks } from \"../selectors/playlists\";\r\nimport { selectPlayableTracks as selectLibraryTracks } from \"../selectors/library\";\r\nimport { selectPlayableTracks as selectSearchTracks } from \"../selectors/search\";\r\nimport { PlayerActionType as ActionType } from \".\";\r\nimport { PayloadAction } from \"./types\";\r\n\r\nexport interface LoadCollectionAction\r\n  extends PayloadAction<\r\n    ActionType.LoadCollection,\r\n    {\r\n      collectionId: string;\r\n      collectionType: Type;\r\n      trackIds: string[];\r\n      trackId?: string;\r\n    }\r\n  > {}\r\n\r\nconst providers = {\r\n  [Type.Album]: selectAlbumTracks,\r\n  [Type.Artist]: selectArtistTracks,\r\n  [Type.Playlist]: selectPlaylistTracks,\r\n  [Type.Library]: selectLibraryTracks,\r\n  [Type.Search]: selectSearchTracks\r\n};\r\n\r\nfunction getTrackIds(\r\n  state: State,\r\n  collectionId: string,\r\n  collectionType: Type\r\n): string[] {\r\n  return providers[collectionType](state, collectionId).map(track => track.id);\r\n}\r\n\r\nexport function loadCollection(\r\n  collectionId: string,\r\n  collectionType: Type,\r\n  trackId?: string\r\n) {\r\n  return (dispatch: Dispatch<LoadCollectionAction>, getState: () => State) => {\r\n    const state = getState();\r\n    const trackIds = getTrackIds(state, collectionId, collectionType);\r\n    if (trackIds.length) {\r\n      dispatch({\r\n        type: ActionType.LoadCollection,\r\n        payload: {\r\n          collectionId: collectionId,\r\n          collectionType: collectionType,\r\n          trackIds,\r\n          trackId\r\n        }\r\n      });\r\n    }\r\n  };\r\n}\r\n\r\nexport interface LoadTrackAction\r\n  extends PayloadAction<ActionType.LoadTrack, { trackId: string }> {}\r\n\r\nexport function loadTrack(trackId: string) {\r\n  return (dispatch: Dispatch<LoadTrackAction>) => {\r\n    dispatch({\r\n      type: ActionType.LoadTrack,\r\n      payload: {\r\n        trackId\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\nexport interface TrackLoadedAction\r\n  extends PayloadAction<ActionType.TrackLoaded, number> {}\r\n\r\nexport function trackLoaded(duration: number) {\r\n  return (dispatch: Dispatch<TrackLoadedAction>) => {\r\n    dispatch({\r\n      type: ActionType.TrackLoaded,\r\n      payload: duration\r\n    });\r\n  };\r\n}\r\n\r\nexport function playPause() {\r\n  return (dispatch: Dispatch, getState: () => State) => {\r\n    const state = getState();\r\n    const isPlaying = selectIsPlaying(state);\r\n    dispatch({\r\n      type: isPlaying ? ActionType.Pause : ActionType.Play\r\n    });\r\n  };\r\n}\r\n\r\nexport function loadPlayPause(\r\n  collectionId: string,\r\n  collectionType: Type,\r\n  trackId?: string\r\n) {\r\n  return (dispatch: Dispatch, getState: () => State) => {\r\n    const state = getState();\r\n    const isLoaded = selectIsLoaded(state);\r\n    if (!isLoaded(collectionId)) {\r\n      loadCollection(collectionId, collectionType, trackId)(dispatch, getState);\r\n    } else if (trackId && !isLoaded(trackId)) {\r\n      loadTrack(trackId)(dispatch);\r\n    } else {\r\n      playPause()(dispatch, getState);\r\n    }\r\n  };\r\n}\r\n\r\nexport function playing() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.Playing\r\n    });\r\n  };\r\n}\r\n\r\nexport interface UpdateAction\r\n  extends PayloadAction<ActionType.Update, number> {}\r\n\r\nexport function update(elapsed: number) {\r\n  return (dispatch: Dispatch<UpdateAction>) => {\r\n    dispatch({\r\n      type: ActionType.Update,\r\n      payload: elapsed\r\n    });\r\n  };\r\n}\r\n\r\nexport function paused() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.Paused\r\n    });\r\n  };\r\n}\r\n\r\nexport interface SeekAction extends PayloadAction<ActionType.Seek, number> {}\r\n\r\nexport function seek(time: number) {\r\n  return (dispatch: Dispatch<SeekAction>) => {\r\n    dispatch({\r\n      type: ActionType.Seek,\r\n      payload: time\r\n    });\r\n  };\r\n}\r\n\r\nexport function seeked() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.Seeked\r\n    });\r\n  };\r\n}\r\n\r\nexport function ended() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({ type: ActionType.Ended });\r\n  };\r\n}\r\n\r\nexport function next() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({ type: ActionType.Next });\r\n  };\r\n}\r\n\r\nexport function previous() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({ type: ActionType.Previous });\r\n  };\r\n}\r\n\r\nexport interface ChangeVolumeAction\r\n  extends PayloadAction<\r\n    ActionType.ChangeVolume,\r\n    { volume: number; isMuted: boolean }\r\n  > {}\r\n\r\nexport function changeVolume(volume: number, isMuted: boolean) {\r\n  return (dispatch: Dispatch<ChangeVolumeAction>) => {\r\n    dispatch({\r\n      type: ActionType.ChangeVolume,\r\n      payload: {\r\n        volume,\r\n        isMuted\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\nexport function volumeChanged() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.VolumeChanged\r\n    });\r\n  };\r\n}\r\n\r\nexport function toggleShuffle() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.ToggleShuffle\r\n    });\r\n  };\r\n}\r\n\r\nexport function toggleLoop() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.ToggleLoop\r\n    });\r\n  };\r\n}\r\n","import { Action } from \"redux\";\r\nimport { schema } from \"normalizr\";\r\nimport {\r\n  AlbumDictionary,\r\n  ArtistDictionary,\r\n  CategoryDictionary,\r\n  PlaylistDictionary,\r\n  TrackDictionary\r\n} from \"../reducers/types\";\r\n\r\nexport enum FetchMethod {\r\n  Get = \"GET\",\r\n  Post = \"POST\",\r\n  Put = \"PUT\",\r\n  Delete = \"DELETE\"\r\n}\r\n\r\nexport interface Entities {\r\n  albums: AlbumDictionary;\r\n  artists: ArtistDictionary;\r\n  categories: CategoryDictionary;\r\n  playlists: PlaylistDictionary;\r\n  tracks: TrackDictionary;\r\n  results: {\r\n    [key: string]: {\r\n      albums: string[];\r\n      artists: string[];\r\n      playlists: string[];\r\n      tracks: string[];\r\n    };\r\n  };\r\n}\r\n\r\nexport interface FetchAction<D = {}> {\r\n  types: string[];\r\n  path: string;\r\n  method?: FetchMethod;\r\n  schema?: schema.Entity | schema.Object;\r\n  data?: D;\r\n}\r\n\r\nexport interface FetchDispatch {\r\n  (action: FetchAction): Promise<any>;\r\n}\r\n\r\nexport interface PayloadAction<T = any, P = any> extends Action<T> {\r\n  payload: P;\r\n}\r\n\r\nexport interface EntitiesAction<T = any, D = {}>\r\n  extends PayloadAction<T, Entities & D> {}\r\n","import { State } from \"../reducers\";\r\nimport { selectAlbum } from \"../selectors/albums\";\r\nimport { selectTrack } from \"../selectors/tracks\";\r\nimport { LibraryActionType as ActionType } from \".\";\r\nimport {\r\n  PayloadAction,\r\n  EntitiesAction,\r\n  FetchDispatch,\r\n  FetchMethod\r\n} from \"./types\";\r\nimport { Schemas } from \"./schemas\";\r\n\r\nexport interface SavedAlbumsSuccessAction\r\n  extends EntitiesAction<ActionType.SavedAlbumsSuccess> {}\r\n\r\nexport function getSavedAlbums() {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.SavedAlbumsRequest,\r\n        ActionType.SavedAlbumsSuccess,\r\n        ActionType.SavedAlbumsFailure\r\n      ],\r\n      path: \"me/albums\",\r\n      schema: Schemas.SavedAlbums\r\n    });\r\n  };\r\n}\r\n\r\nexport interface CheckSavedAlbumSuccess\r\n  extends PayloadAction<\r\n    ActionType.CheckSavedAlbumSuccess,\r\n    { albumId: string; [key: number]: boolean }\r\n  > {}\r\n\r\nexport function checkSavedAlbum(albumId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.CheckSavedAlbumRequest,\r\n        ActionType.CheckSavedAlbumSuccess,\r\n        ActionType.CheckSavedAlbumFailure\r\n      ],\r\n      path: `me/albums/contains?ids=${albumId}`,\r\n      data: { albumId }\r\n    });\r\n  };\r\n}\r\n\r\nexport interface SaveAlbumSuccessAction\r\n  extends PayloadAction<ActionType.SaveAlbumSuccess, { albumId: string }> {}\r\n\r\nfunction saveAlbum(albumId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.SaveAlbumRequest,\r\n        ActionType.SaveAlbumSuccess,\r\n        ActionType.SaveAlbumFailure\r\n      ],\r\n      path: `me/albums?ids=${albumId}`,\r\n      method: FetchMethod.Put,\r\n      data: { albumId }\r\n    });\r\n  };\r\n}\r\n\r\nexport interface UnsaveAlbumSuccessAction\r\n  extends PayloadAction<ActionType.UnsaveAlbumSuccess, { albumId: string }> {}\r\n\r\nfunction UnsaveAlbum(albumId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.UnsaveAlbumRequest,\r\n        ActionType.UnsaveAlbumSuccess,\r\n        ActionType.UnsaveAlbumFailure\r\n      ],\r\n      path: `me/albums?ids=${albumId}`,\r\n      method: FetchMethod.Delete,\r\n      data: { albumId }\r\n    });\r\n  };\r\n}\r\n\r\nexport function toggleSavedAlbum(albumId: string) {\r\n  return (dispatch: FetchDispatch, getState: () => State) => {\r\n    const state = getState();\r\n    const album = selectAlbum(state, albumId);\r\n    if (album.isSaved) {\r\n      UnsaveAlbum(albumId)(dispatch);\r\n    } else {\r\n      saveAlbum(albumId)(dispatch);\r\n    }\r\n  };\r\n}\r\n\r\nexport interface SavedTracksSuccessAction\r\n  extends EntitiesAction<ActionType.SavedTracksSuccess> {}\r\n\r\nexport function getSavedTracks() {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.SavedTracksRequest,\r\n        ActionType.SavedTracksSuccess,\r\n        ActionType.SavedTracksFailure\r\n      ],\r\n      path: \"me/tracks\",\r\n      schema: Schemas.PagedTracks\r\n    }).then(json => {\r\n      const trackIds = json.items.map(({ track }: any) => track && track.id);\r\n      if (trackIds.length) {\r\n        checkSavedTracks(trackIds)(dispatch);\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\nexport interface CheckSavedTrackSuccess\r\n  extends PayloadAction<\r\n    ActionType.CheckSavedTracksSuccess,\r\n    { trackIds: string[]; [key: number]: boolean }\r\n  > {}\r\n\r\nexport function checkSavedTracks(trackIds: string[]) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.CheckSavedTracksRequest,\r\n        ActionType.CheckSavedTracksSuccess,\r\n        ActionType.CheckSavedTracksFailure\r\n      ],\r\n      path: `me/tracks/contains?ids=${encodeURIComponent(trackIds.join(\",\"))}`,\r\n      data: { trackIds }\r\n    });\r\n  };\r\n}\r\n\r\nexport interface SaveTrackSuccessAction\r\n  extends PayloadAction<ActionType.SaveTrackSuccess, { trackId: string }> {}\r\n\r\nfunction saveTrack(trackId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.SaveTrackRequest,\r\n        ActionType.SaveTrackSuccess,\r\n        ActionType.SaveTrackFailure\r\n      ],\r\n      path: `me/tracks?ids=${trackId}`,\r\n      method: FetchMethod.Put,\r\n      data: { trackId }\r\n    });\r\n  };\r\n}\r\n\r\nexport interface UnsaveTrackSuccessAction\r\n  extends PayloadAction<ActionType.UnsaveTrackSuccess, { trackId: string }> {}\r\n\r\nfunction UnsaveTrack(trackId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.UnsaveTrackRequest,\r\n        ActionType.UnsaveTrackSuccess,\r\n        ActionType.UnsaveTrackFailure\r\n      ],\r\n      path: `me/tracks?ids=${trackId}`,\r\n      method: FetchMethod.Delete,\r\n      data: { trackId }\r\n    });\r\n  };\r\n}\r\n\r\nexport function toggleSavedTrack(trackId: string) {\r\n  return (dispatch: FetchDispatch, getState: () => State) => {\r\n    const state = getState();\r\n    const track = selectTrack(state, trackId);\r\n    if (track.isSaved) {\r\n      UnsaveTrack(trackId)(dispatch);\r\n    } else {\r\n      saveTrack(trackId)(dispatch);\r\n    }\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Artist } from \"../../types\";\r\n\r\nconst List = styled.ul`\r\n  color: ${props => props.theme.onBackground.secondary};\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n`;\r\n\r\nconst Item = styled.span`\r\n  color: ${props => props.theme.onBackground.secondary};\r\n  font-weight: ${props => props.theme.fontWeight.light};\r\n\r\n  :not(:last-child)::after {\r\n    content: \",\";\r\n    margin-right: ${props => props.theme.thickness.extraSmall}px;\r\n  }\r\n`;\r\n\r\nconst StyledLink = styled(Link)`\r\n  color: ${props => props.theme.onBackground.secondary};\r\n\r\n  :hover {\r\n    text-decoration: underline;\r\n  }\r\n`;\r\n\r\nfunction ArtistNames({ artists }: { artists: Artist[] }) {\r\n  return (\r\n    <List>\r\n      {artists.map(artist => (\r\n        <Item key={artist.id}>\r\n          <StyledLink to={`${process.env.PUBLIC_URL}/artist/${artist.id}`}>\r\n            {artist.name}\r\n          </StyledLink>\r\n        </Item>\r\n      ))}\r\n    </List>\r\n  );\r\n}\r\n\r\nexport default ArtistNames;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Album } from \"../../types\";\r\n\r\nconst StyledLink = styled(Link)`\r\n  color: ${props => props.theme.onBackground.secondary};\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n\r\n  :hover {\r\n    text-decoration: underline;\r\n  }\r\n`;\r\n\r\ninterface Props {\r\n  album: Album;\r\n}\r\n\r\nfunction AlbumName({ album }: Props) {\r\n  return (\r\n    <StyledLink to={`${process.env.PUBLIC_URL}/album/${album.id}`}>\r\n      {album.name}\r\n    </StyledLink>\r\n  );\r\n}\r\n\r\nexport default AlbumName;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Album, Artist, Track } from \"../../types\";\r\nimport { toggleSavedTrack } from \"../../actions/library\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectIsLoaded, selectIsPlaying } from \"../../selectors/player\";\r\nimport { selectTrackArtists, selectTrackAlbum } from \"../../selectors/tracks\";\r\nimport { Icon, IconType, RoundButton, Text, ToggleButton } from \"../core\";\r\nimport ArtistNames from \"./ArtistNames\";\r\nimport AlbumName from \"./AlbumName\";\r\n\r\nconst Wrapper = styled.li<{ isLoaded: boolean }>`\r\n  align-items: center;\r\n  box-sizing: border-box;\r\n  ${props => props.isLoaded && \"color: \" + props.theme.color.primary};\r\n  display: flex;\r\n  padding: ${props => props.theme.thickness.extraSmall}px;\r\n  width: 100%;\r\n\r\n  &:last-child {\r\n    margin-bottom: 0;\r\n  }\r\n\r\n  &:hover {\r\n    background: ${props => props.theme.onBackground.hover};\r\n  }\r\n`;\r\n\r\ninterface PlayButtonProps {\r\n  isLoaded: boolean;\r\n  isPlaying: Boolean;\r\n}\r\n\r\nconst PlayButton = styled(RoundButton).attrs<\r\n  PlayButtonProps,\r\n  { iconType: IconType }\r\n>(({ isPlaying }) => ({\r\n  iconType: isPlaying ? IconType.Pause : IconType.PlayArrow\r\n}))<PlayButtonProps>`\r\n  ${props => props.isLoaded && `color: ${props.theme.color.primary}`}\r\n  flex-shrink: 0;\r\n  margin-right: ${props => props.theme.thickness.small}px;\r\n\r\n  &&:hover {\r\n    ${props => props.isLoaded && `color: ${props.theme.color.primary}`}\r\n  }\r\n`;\r\n\r\nconst MusicIcon = styled(Icon).attrs(() => ({\r\n  type: IconType.MusicNote\r\n}))`\r\n  flex-shrink: 0;\r\n  margin-right: ${props => props.theme.thickness.small}px;\r\n  text-align: center;\r\n  width: ${props => props.theme.thickness.large}px;\r\n`;\r\n\r\nconst NoMusicIcon = styled(MusicIcon).attrs(() => ({\r\n  type: IconType.MusicOff\r\n}))`\r\n  color: ${props => props.theme.color.error};\r\n`;\r\n\r\nconst Names = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-grow: 1;\r\n  font-weight: ${props => props.theme.fontWeight.light};\r\n  height: 100%;\r\n  margin-right: ${props => props.theme.thickness.small}px;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst Name = styled(Text)`\r\n  font-weight: ${props => props.theme.fontWeight.normal};\r\n  margin-bottom: ${props => props.theme.thickness.extraSmall}px;\r\n  text-align: left;\r\n`;\r\n\r\nconst Others = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n`;\r\n\r\nconst Separator = styled.span.attrs(() => ({\r\n  children: \"-\"\r\n}))`\r\n  color: ${props => props.theme.onBackground.secondary};\r\n  margin: 0 ${props => props.theme.thickness.extraSmall}px;\r\n`;\r\n\r\nconst Duration = styled.span`\r\n  color: ${props => props.theme.onBackground.secondary};\r\n  flex-shrink: 0;\r\n  margin-right: ${props => props.theme.thickness.small}px;\r\n`;\r\n\r\nconst FavoriteButton = styled(ToggleButton).attrs(() => ({\r\n  iconType: IconType.Favorite\r\n}))`\r\n  flex-shrink: 0;\r\n`;\r\n\r\ninterface OwnProps {\r\n  track: Track;\r\n  onTogglePlay?: (trackId: string) => void;\r\n}\r\n\r\ninterface Props extends OwnProps {\r\n  album?: Album;\r\n  artists: Artist[];\r\n  isDisabled: boolean;\r\n  isLoaded: boolean;\r\n  isPlaying: boolean;\r\n  toggleSavedTrack: (trackId: string) => void;\r\n}\r\n\r\nfunction TrackItem({\r\n  album,\r\n  track,\r\n  artists,\r\n  isDisabled,\r\n  isLoaded,\r\n  isPlaying,\r\n  onTogglePlay,\r\n  toggleSavedTrack\r\n}: Props) {\r\n  function renderDuration() {\r\n    let seconds = track.duration_ms / 1000;\r\n    const minutes = Math.floor(seconds / 60);\r\n    seconds = Math.floor(seconds % 60);\r\n\r\n    return (\r\n      <Duration>{`${minutes}:${\r\n        seconds < 10 ? \"0\" + seconds : seconds\r\n      }`}</Duration>\r\n    );\r\n  }\r\n\r\n  function handleClick() {\r\n    if (onTogglePlay) {\r\n      onTogglePlay(track.id);\r\n    }\r\n  }\r\n\r\n  function handleToggleFavorite() {\r\n    toggleSavedTrack(track.id);\r\n  }\r\n\r\n  return (\r\n    <Wrapper isLoaded={isLoaded}>\r\n      {onTogglePlay ? (\r\n        isDisabled ? (\r\n          <NoMusicIcon />\r\n        ) : (\r\n          <PlayButton\r\n            isLoaded={isLoaded}\r\n            isPlaying={isPlaying}\r\n            onClick={handleClick}\r\n          />\r\n        )\r\n      ) : (\r\n        <MusicIcon />\r\n      )}\r\n\r\n      <Names>\r\n        <Name>{track.name}</Name>\r\n        <Others>\r\n          <ArtistNames artists={artists} />\r\n          <Separator />\r\n          {album && <AlbumName album={album} />}\r\n        </Others>\r\n      </Names>\r\n\r\n      {renderDuration()}\r\n\r\n      <FavoriteButton\r\n        isToggled={track.isSaved}\r\n        onClick={handleToggleFavorite}\r\n      />\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nfunction isDisabled(track: Track) {\r\n  return !track.preview_url;\r\n}\r\n\r\nconst mapState = (state: State, { track }: OwnProps) => ({\r\n  album: selectTrackAlbum(state, track.id),\r\n  artists: selectTrackArtists(state, track.id),\r\n  isDisabled: isDisabled(track),\r\n  isLoaded: selectIsLoaded(state)(track.id),\r\n  isPlaying: selectIsPlaying(state, track.id)\r\n});\r\n\r\nconst mapDispatch = {\r\n  toggleSavedTrack\r\n};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(TrackItem);\r\n","import React from \"react\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Track } from \"../../types\";\r\nimport TrackItem from \"./TrackItem\";\r\n\r\nconst StyledList = styled.ul`\r\n  flex-grow: 1;\r\n  overflow: hidden;\r\n`;\r\n\r\ninterface Props {\r\n  tracks: Track[];\r\n  onTogglePlay?: (trackId: string) => void;\r\n}\r\n\r\nfunction TrackList({ tracks, onTogglePlay }: Props) {\r\n  return (\r\n    <StyledList>\r\n      {tracks.map(track => (\r\n        <TrackItem key={track.id} track={track} onTogglePlay={onTogglePlay} />\r\n      ))}\r\n    </StyledList>\r\n  );\r\n}\r\n\r\nexport default TrackList;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Track, Type } from \"../../types\";\r\nimport { loadPlayPause } from \"../../actions/player\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectTracks } from \"../../selectors/search\";\r\nimport TrackList from \"../details/TrackList\";\r\nimport Wrapper from \"./Wrapper\";\r\n\r\nconst CollectionId = \"\";\r\n\r\ninterface TracksProps {\r\n  tracks: Track[];\r\n  loadPlayPause: (\r\n    collectionId: string,\r\n    collectionType: Type,\r\n    trackId: string\r\n  ) => void;\r\n}\r\n\r\nfunction Tracks({ tracks, loadPlayPause }: TracksProps) {\r\n  function handleTogglePlay(trackId: string) {\r\n    loadPlayPause(CollectionId, Type.Search, trackId);\r\n  }\r\n\r\n  return (\r\n    <Wrapper>\r\n      {!!tracks.length && (\r\n        <TrackList tracks={tracks} onTogglePlay={handleTogglePlay} />\r\n      )}\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  tracks: selectTracks(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  loadPlayPause\r\n};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(Tracks);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport styled from \"../../styles/styled\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectHasResults } from \"../../selectors/search\";\r\nimport Empty from \"../layout/Empty\";\r\nimport SubMenu from \"../layout/SubMenu\";\r\nimport SubRoutes from \"../layout/SubRoutes\";\r\nimport withLoader from \"../withLoader\";\r\nimport Artists from \"./Artists\";\r\nimport Albums from \"./Albums\";\r\nimport Playlists from \"./Playlists\";\r\nimport Tracks from \"./Tracks\";\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n\r\ninterface Props {\r\n  hasResults: boolean;\r\n}\r\n\r\nconst items = [\r\n  {\r\n    path: \"artists\",\r\n    text: \"Artists\",\r\n    default: true,\r\n    component: Artists\r\n  },\r\n  {\r\n    path: \"albums\",\r\n    text: \"Albums\",\r\n    component: Albums\r\n  },\r\n  {\r\n    path: \"playlists\",\r\n    text: \"Playlists\",\r\n    component: Playlists\r\n  },\r\n  {\r\n    path: \"tracks\",\r\n    text: \"Tracks\",\r\n    component: Tracks\r\n  }\r\n];\r\n\r\nfunction Results({ hasResults }: Props) {\r\n  return hasResults ? (\r\n    <Wrapper>\r\n      <SubMenu items={items} />\r\n      <SubRoutes items={items} />\r\n    </Wrapper>\r\n  ) : (\r\n    <Empty>No Results</Empty>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  hasResults: selectHasResults(state)\r\n});\r\n\r\nexport default withLoader(\r\n  connect(\r\n    mapState,\r\n    null\r\n  )(Results)\r\n);\r\n","import React, {\r\n  useState,\r\n  useEffect,\r\n  useCallback,\r\n  ChangeEvent,\r\n  FormEvent\r\n} from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\nimport _ from \"lodash\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Album, Artist, Playlist } from \"../../types\";\r\nimport { search } from \"../../actions/search\";\r\nimport Recents from \"./Recents\";\r\nimport Results from \"./Results\";\r\n\r\nconst StyledInput = styled.input`\r\n  background: ${props => props.theme.background.tertiary};\r\n  border: none;\r\n  border-radius: ${props => props.theme.thickness.medium}px;\r\n  caret-color: ${props => props.theme.color.primary};\r\n  color: ${props => props.theme.onBackground.primary};\r\n  flex-shrink: 0;\r\n  font-size: ${props => props.theme.fontSize.extraLarge}px;\r\n  font-weight: ${props => props.theme.fontWeight.light};\r\n  height: ${props => props.theme.thickness.large}px;\r\n  margin: 0 0 ${props => props.theme.thickness.medium}px 0;\r\n  padding: 0 ${props => props.theme.thickness.medium}px;\r\n  width: calc(100% - ${props => props.theme.thickness.large}px);\r\n`;\r\n\r\ninterface Params {\r\n  query: string;\r\n}\r\n\r\ninterface Props extends RouteComponentProps<Params> {\r\n  isLoading: boolean;\r\n  albums: Album[];\r\n  artists: Artist[];\r\n  playlists: Playlist[];\r\n  search: (query: string) => void;\r\n}\r\n\r\nfunction Search({ history, match, location, search }: Props) {\r\n  const { query } = match.params;\r\n  const [value, setValue] = useState(query);\r\n\r\n  const navigate = useCallback(\r\n    _.debounce((query: string) => {\r\n      const path =\r\n        match.url !== location.pathname\r\n          ? _.last(location.pathname.split(\"/\"))\r\n          : \"\";\r\n      history.push(\r\n        `${process.env.PUBLIC_URL}/search${query && `/${query}`}${query &&\r\n          path &&\r\n          `/${path}`}`\r\n      );\r\n    }, 500),\r\n    [match, location]\r\n  );\r\n\r\n  useEffect(() => {\r\n    search(query);\r\n  }, [search, query]);\r\n\r\n  function handleSubmit(event: FormEvent<HTMLFormElement>) {\r\n    event.preventDefault();\r\n  }\r\n\r\n  function handleChange(event: ChangeEvent<HTMLInputElement>) {\r\n    const { value } = event.target;\r\n    setValue(value);\r\n    navigate(value);\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <StyledInput\r\n        type=\"text\"\r\n        value={value}\r\n        onChange={handleChange}\r\n        placeholder=\"Search...\"\r\n        autoFocus\r\n      />\r\n      {query ? <Results /> : <Recents />}\r\n    </form>\r\n  );\r\n}\r\n\r\nconst mapDispatch = {\r\n  search\r\n};\r\n\r\nexport default withRouter(\r\n  connect(\r\n    null,\r\n    mapDispatch\r\n  )(Search)\r\n);\r\n","import { State } from \"../reducers\";\r\nimport { selectArtists } from \"./artists\";\r\nimport { selectPlaylists } from \"./playlists\";\r\n\r\nexport function selectFollowedArtists(state: State) {\r\n  return selectArtists(state)(state.following.userArtistIds);\r\n}\r\n\r\nexport function selectFollowedPlaylists(state: State) {\r\n  return selectPlaylists(state)(state.following.userPlaylistIds);\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Artist } from \"../../types\";\r\nimport { getFollowedArtists } from \"../../actions/following\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectFollowedArtists } from \"../../selectors/following\";\r\nimport ArtistCovers from \"../covers/ArtistCovers\";\r\nimport Empty from \"../layout/Empty\";\r\nimport withLoader from \"../withLoader\";\r\n\r\ninterface Props {\r\n  artists: Artist[];\r\n  getFollowedArtists: () => void;\r\n}\r\n\r\nfunction FollowedArtists({ artists, getFollowedArtists }: Props) {\r\n  useEffect(getFollowedArtists, []);\r\n\r\n  return artists.length ? (\r\n    <ArtistCovers artists={artists} />\r\n  ) : (\r\n    <Empty>No followed artists</Empty>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  artists: selectFollowedArtists(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  getFollowedArtists\r\n};\r\n\r\nexport default withLoader(\r\n  connect(\r\n    mapState,\r\n    mapDispatch\r\n  )(FollowedArtists)\r\n);\r\n","import { State } from \"../reducers\";\r\nimport { selectArtist } from \"../selectors/artists\";\r\nimport { selectPlaylist } from \"../selectors/playlists\";\r\nimport { FollowingActionType as ActionType } from \".\";\r\nimport {\r\n  PayloadAction,\r\n  EntitiesAction,\r\n  FetchDispatch,\r\n  FetchMethod\r\n} from \"./types\";\r\nimport { Schemas } from \"./schemas\";\r\n\r\nexport interface FollowedArtistsSuccessAction\r\n  extends EntitiesAction<ActionType.FollowedArtistsSuccess> {}\r\n\r\nexport function getFollowedArtists() {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.FollowedArtistsRequest,\r\n        ActionType.FollowedArtistsSuccess,\r\n        ActionType.FollowedArtistsFailure\r\n      ],\r\n      path: \"me/following?type=artist\",\r\n      schema: Schemas.PagedArtists\r\n    });\r\n  };\r\n}\r\n\r\nexport interface CheckFollowedArtistSuccessAction\r\n  extends PayloadAction<\r\n    ActionType.CheckFollowedArtistSuccess,\r\n    { artistId: string; [key: number]: boolean }\r\n  > {}\r\n\r\nexport function checkFollowedArtist(artistId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.CheckFollowedArtistRequest,\r\n        ActionType.CheckFollowedArtistSuccess,\r\n        ActionType.CheckFollowedArtistFailure\r\n      ],\r\n      path: `me/following/contains?type=artist&ids=${artistId}`,\r\n      data: { artistId }\r\n    });\r\n  };\r\n}\r\n\r\nexport interface FollowArtistSuccessAction\r\n  extends PayloadAction<ActionType.FollowArtistSuccess, { artistId: string }> {}\r\n\r\nfunction followArtist(artistId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.FollowArtistRequest,\r\n        ActionType.FollowArtistSuccess,\r\n        ActionType.FollowArtistFailure\r\n      ],\r\n      path: `me/following?type=artist&ids=${artistId}`,\r\n      method: FetchMethod.Put,\r\n      data: { artistId }\r\n    });\r\n  };\r\n}\r\n\r\nexport interface UnfollowArtistSuccessAction\r\n  extends PayloadAction<\r\n    ActionType.UnfollowArtistSuccess,\r\n    { artistId: string }\r\n  > {}\r\n\r\nfunction unfollowArtist(artistId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.UnfollowArtistRequest,\r\n        ActionType.UnfollowArtistSuccess,\r\n        ActionType.UnfollowArtistFailure\r\n      ],\r\n      path: `me/following?type=artist&ids=${artistId}`,\r\n      method: FetchMethod.Delete,\r\n      data: { artistId }\r\n    });\r\n  };\r\n}\r\n\r\nexport function toggleFollowArtist(artistId: string) {\r\n  return (dispatch: FetchDispatch, getState: () => State) => {\r\n    const state = getState();\r\n    const artist = selectArtist(state, artistId);\r\n    if (artist.isFollowed) {\r\n      unfollowArtist(artistId)(dispatch);\r\n    } else {\r\n      followArtist(artistId)(dispatch);\r\n    }\r\n  };\r\n}\r\n\r\nexport interface FollowedPlaylistsSuccessAction\r\n  extends EntitiesAction<ActionType.FollowedPlaylistsSuccess> {}\r\n\r\nexport function getFollowedPlaylists() {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.FollowedPlaylistsRequest,\r\n        ActionType.FollowedPlaylistsSuccess,\r\n        ActionType.FollowedPlaylistsFailure\r\n      ],\r\n      path: \"me/playlists\",\r\n      schema: Schemas.PagedPlaylists\r\n    });\r\n  };\r\n}\r\n\r\nexport interface CheckFollowedPlaylistSuccessAction\r\n  extends PayloadAction<\r\n    ActionType.CheckFollowedPlaylistSuccess,\r\n    { playlistId: string; [key: number]: boolean }\r\n  > {}\r\n\r\nexport function checkFollowedPlaylist(playlistId: string, userId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.CheckFollowedPlaylistRequest,\r\n        ActionType.CheckFollowedPlaylistSuccess,\r\n        ActionType.CheckFollowedPlaylistFailure\r\n      ],\r\n      path: `playlists/${playlistId}/followers/contains?ids=${userId}`,\r\n      data: { playlistId }\r\n    });\r\n  };\r\n}\r\n\r\nexport interface FollowPlaylistSuccessAction\r\n  extends PayloadAction<\r\n    ActionType.FollowPlaylistSuccess,\r\n    { playlistId: string }\r\n  > {}\r\n\r\nfunction followPlaylist(playlistId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.FollowPlaylistRequest,\r\n        ActionType.FollowPlaylistSuccess,\r\n        ActionType.FollowPlaylistFailure\r\n      ],\r\n      path: `playlists/${playlistId}/followers`,\r\n      method: FetchMethod.Put,\r\n      data: { playlistId }\r\n    });\r\n  };\r\n}\r\n\r\nexport interface UnfollowPlaylistSuccessAction\r\n  extends PayloadAction<\r\n    ActionType.UnfollowPlaylistSuccess,\r\n    { playlistId: string }\r\n  > {}\r\n\r\nfunction unfollowPlaylist(playlistId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.UnfollowPlaylistRequest,\r\n        ActionType.UnfollowPlaylistSuccess,\r\n        ActionType.UnfollowPlaylistFailure\r\n      ],\r\n      path: `playlists/${playlistId}/followers`,\r\n      method: FetchMethod.Delete,\r\n      data: { playlistId }\r\n    });\r\n  };\r\n}\r\n\r\nexport function toggleFollowPlaylist(playlistId: string) {\r\n  return (dispatch: FetchDispatch, getState: () => State) => {\r\n    const state = getState();\r\n    const playlist = selectPlaylist(state, playlistId);\r\n    if (playlist.isFollowed) {\r\n      unfollowPlaylist(playlistId)(dispatch);\r\n    } else {\r\n      followPlaylist(playlistId)(dispatch);\r\n    }\r\n  };\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Album } from \"../../types\";\r\nimport { getSavedAlbums } from \"../../actions/library\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectSavedAlbums } from \"../../selectors/library\";\r\nimport AlbumCovers from \"../covers/AlbumCovers\";\r\nimport Empty from \"../layout/Empty\";\r\nimport withLoader from \"../withLoader\";\r\n\r\ninterface Props {\r\n  albums: Album[];\r\n  getSavedAlbums: () => void;\r\n}\r\n\r\nfunction SavedAlbums({ albums, getSavedAlbums }: Props) {\r\n  useEffect(getSavedAlbums, []);\r\n\r\n  return albums.length ? (\r\n    <AlbumCovers albums={albums} />\r\n  ) : (\r\n    <Empty>No saved albums</Empty>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  albums: selectSavedAlbums(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  getSavedAlbums\r\n};\r\n\r\nexport default withLoader(\r\n  connect(\r\n    mapState,\r\n    mapDispatch\r\n  )(SavedAlbums)\r\n);\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Playlist } from \"../../types\";\r\nimport { getFollowedPlaylists } from \"../../actions/following\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectFollowedPlaylists } from \"../../selectors/following\";\r\nimport PlaylistCovers from \"../covers/PlaylistCovers\";\r\nimport Empty from \"../layout/Empty\";\r\nimport withLoader from \"../withLoader\";\r\n\r\ninterface Props {\r\n  playlists: Playlist[];\r\n  getFollowedPlaylists: () => void;\r\n}\r\n\r\nfunction FollowedPlaylists({ playlists, getFollowedPlaylists }: Props) {\r\n  useEffect(getFollowedPlaylists, []);\r\n\r\n  return playlists.length ? (\r\n    <PlaylistCovers playlists={playlists} />\r\n  ) : (\r\n    <Empty>No followed playlists</Empty>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  playlists: selectFollowedPlaylists(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  getFollowedPlaylists\r\n};\r\n\r\nexport default withLoader(\r\n  connect(\r\n    mapState,\r\n    mapDispatch\r\n  )(FollowedPlaylists)\r\n);\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { getSavedTracks } from \"../../actions/library\";\r\nimport { loadPlayPause } from \"../../actions/player\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectSavedTracks } from \"../../selectors/library\";\r\nimport { Track, Type } from \"../../types\";\r\nimport TrackList from \"../details/TrackList\";\r\nimport Empty from \"../layout/Empty\";\r\nimport withLoader from \"../withLoader\";\r\n\r\nconst CollectionId = \"\";\r\n\r\ninterface Props {\r\n  tracks: Track[];\r\n  getSavedTracks: () => void;\r\n  loadPlayPause: (\r\n    collectionId: string,\r\n    collectionType: Type,\r\n    trackId: string\r\n  ) => void;\r\n}\r\n\r\nfunction SavedTracks({ tracks, getSavedTracks, loadPlayPause }: Props) {\r\n  useEffect(getSavedTracks, []);\r\n\r\n  function handleTogglePlay(trackId: string) {\r\n    loadPlayPause(CollectionId, Type.Library, trackId);\r\n  }\r\n\r\n  return tracks.length ? (\r\n    <TrackList tracks={tracks} onTogglePlay={handleTogglePlay} />\r\n  ) : (\r\n    <Empty>No saved tracks</Empty>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  tracks: selectSavedTracks(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  getSavedTracks,\r\n  loadPlayPause\r\n};\r\n\r\nexport default withLoader(\r\n  connect(\r\n    mapState,\r\n    mapDispatch\r\n  )(SavedTracks)\r\n);\r\n","import React from \"react\";\r\nimport SubMenu from \"../layout/SubMenu\";\r\nimport SubRoutes from \"../layout/SubRoutes\";\r\nimport FollowedArtists from \"./FollowedArtists\";\r\nimport SavedAlbums from \"./SavedAlbums\";\r\nimport FollowedPlaylists from \"./FollowedPlaylists\";\r\nimport SavedTracks from \"./SavedTracks\";\r\n\r\nconst items = [\r\n  {\r\n    path: \"artists\",\r\n    text: \"Artists\",\r\n    default: true,\r\n    component: FollowedArtists\r\n  },\r\n  {\r\n    path: \"albums\",\r\n    text: \"Albums\",\r\n    component: SavedAlbums\r\n  },\r\n  {\r\n    path: \"playlists\",\r\n    text: \"Playlists\",\r\n    component: FollowedPlaylists\r\n  },\r\n  {\r\n    path: \"tracks\",\r\n    text: \"Tracks\",\r\n    component: SavedTracks\r\n  }\r\n];\r\n\r\nfunction Library() {\r\n  return (\r\n    <>\r\n      <SubMenu items={items} />\r\n      <SubRoutes items={items} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Library;\r\n","import styled from \"../../styles/styled\";\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-grow: 1;\r\n  flex-shrink: 0;\r\n\r\n  :not(:last-child) {\r\n    margin-bottom: ${props => props.theme.thickness.medium}px;\r\n  }\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.width.small}px) {\r\n    flex-direction: row;\r\n  }\r\n`;\r\n\r\nexport default Wrapper;\r\n","import React from \"react\";\r\nimport styled from \"../../styles/styled\";\r\nimport { IconType, Image, PrimaryButton, Text, ToggleButton } from \"../core\";\r\nimport { ImageShape } from \"../core/Image\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-shrink: 0;\r\n  justify-content: center;\r\n  margin: 0 0 ${props => props.theme.thickness.small}px 0;\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.width.extraSmall}px) {\r\n    margin: 0 0 ${props => props.theme.thickness.medium}px 0;\r\n  }\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.width.small}px) {\r\n    flex-direction: column;\r\n    justify-content: flex-start;\r\n    margin: 0 ${props => props.theme.thickness.medium}px 0 0;\r\n  }\r\n`;\r\n\r\nconst StyledImage = styled(Image)`\r\n  box-shadow: ${props => props.theme.shadow.middle};\r\n  flex-shrink: 0;\r\n  margin: 0 ${props => props.theme.thickness.small}px 0 0;\r\n  width: calc(\r\n    100% -\r\n      ${props =>\r\n        props.theme.thickness.extraLarge +\r\n        props.theme.thickness.large +\r\n        props.theme.thickness.medium +\r\n        props.theme.thickness.small}px\r\n  );\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.width.extraSmall}px) {\r\n    margin: 0 ${props => props.theme.thickness.medium}px 0 0;\r\n    width: ${props => props.theme.thickness.extraExtraLarge}px;\r\n  }\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.width.small}px) {\r\n    margin: 0 0 ${props => props.theme.thickness.medium}px 0;\r\n    width: ${props => props.theme.thickness.extraExtraExtraLarge}px;\r\n  }\r\n`;\r\n\r\nconst Vertical = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst Title = styled(Text)`\r\n  font-size: ${props => props.theme.fontSize.extraLarge}px;\r\n  text-align: center;\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.width.small}px) {\r\n    font-size: ${props => props.theme.fontSize.extraLarge}px;\r\n    max-width: ${props => props.theme.thickness.extraExtraExtraLarge}px;\r\n  }\r\n`;\r\n\r\nconst SubTitle = styled(Text)`\r\n  color: ${props => props.theme.onBackground.secondary};\r\n  display: inline-block;\r\n  font-size: ${props => props.theme.fontSize.medium}px;\r\n  font-weight: ${props => props.theme.fontWeight.light};\r\n  margin-top: ${props => props.theme.thickness.extraSmall}px;\r\n  text-align: center;\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.width.small}px) {\r\n    font-size: ${props => props.theme.fontSize.large}px;\r\n    margin-top: ${props => props.theme.thickness.small}px;\r\n    max-width: ${props => props.theme.thickness.extraExtraExtraLarge}px;\r\n  }\r\n`;\r\n\r\nconst Horizontal = styled.div`\r\n  display: flex;\r\n  flex-orientation: row;\r\n  margin-top: ${props => props.theme.thickness.medium}px;\r\n`;\r\n\r\nconst FavoriteButton = styled(ToggleButton).attrs(() => ({\r\n  iconType: IconType.Favorite\r\n}))``;\r\n\r\nconst PlayButton = styled(PrimaryButton)`\r\n  margin-right: ${props => props.theme.thickness.small}px;\r\n  width: ${props => props.theme.thickness.extraLarge}px;\r\n`;\r\n\r\ninterface Props {\r\n  imageSource?: string;\r\n  imageShape: ImageShape;\r\n  title: string;\r\n  subTitle?: string;\r\n  canPlay: boolean;\r\n  isPlaying: boolean;\r\n  isFavorite: boolean;\r\n  onTogglePlay: () => void;\r\n  onToggleFavorite: () => void;\r\n}\r\n\r\nfunction Header({\r\n  imageSource,\r\n  imageShape,\r\n  title,\r\n  subTitle,\r\n  canPlay,\r\n  isPlaying,\r\n  isFavorite,\r\n  onTogglePlay,\r\n  onToggleFavorite\r\n}: Props) {\r\n  function handleTogglePlay() {\r\n    onTogglePlay();\r\n  }\r\n\r\n  return (\r\n    <Wrapper>\r\n      <StyledImage source={imageSource} shape={imageShape} />\r\n      <Vertical>\r\n        <Title>{title}</Title>\r\n        {subTitle && <SubTitle>{subTitle}</SubTitle>}\r\n        <Horizontal>\r\n          <PlayButton disabled={!canPlay} onClick={handleTogglePlay}>\r\n            {isPlaying ? \"Pause\" : \"Play\"}\r\n          </PlayButton>\r\n          <FavoriteButton isToggled={isFavorite} onClick={onToggleFavorite} />\r\n        </Horizontal>\r\n      </Vertical>\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nHeader.defaultProps = {\r\n  imageShape: ImageShape.Square,\r\n  onTogglePlay: () => {},\r\n  onToggleFavorite: () => {}\r\n};\r\n\r\nexport default Header;\r\n","import React, { useEffect, useCallback } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\nimport { Playlist, Track, Type } from \"../../types\";\r\nimport { getImageSource } from \"../../utils\";\r\nimport { getPlaylist } from \"../../actions/playlists\";\r\nimport { loadPlayPause } from \"../../actions/player\";\r\nimport { toggleFollowPlaylist } from \"../../actions/following\";\r\nimport { State } from \"../../reducers\";\r\nimport {\r\n  selectPlaylist,\r\n  selectPlaylistTracks,\r\n  selectIsPlayable\r\n} from \"../../selectors/playlists\";\r\nimport { selectIsPlaying } from \"../../selectors/player\";\r\nimport Wrapper from \"./Wrapper\";\r\nimport Header from \"./Header\";\r\nimport TrackList from \"./TrackList\";\r\nimport withLoader from \"../withLoader\";\r\n\r\ninterface Params {\r\n  playlistId: string;\r\n}\r\n\r\ninterface Props extends RouteComponentProps<Params> {\r\n  playlist?: Playlist;\r\n  tracks: Track[];\r\n  isPlayable: boolean;\r\n  isPlaying: boolean;\r\n  getPlaylist: (playlistId: string) => void;\r\n  loadPlayPause: (\r\n    collectionId: string,\r\n    collectionType: Type,\r\n    trackId?: string\r\n  ) => void;\r\n  toggleFollowPlaylist: (playlistId: string) => void;\r\n}\r\n\r\nfunction PlaylistDetails({\r\n  match,\r\n  playlist,\r\n  tracks,\r\n  isPlayable,\r\n  isPlaying,\r\n  getPlaylist,\r\n  loadPlayPause,\r\n  toggleFollowPlaylist\r\n}: Props) {\r\n  const { playlistId } = match.params;\r\n\r\n  useEffect(() => getPlaylist(playlistId), [getPlaylist, playlistId]);\r\n\r\n  const handleTogglePlay = useCallback(\r\n    (trackId?: string) => {\r\n      loadPlayPause(playlistId, Type.Playlist, trackId);\r\n    },\r\n    [loadPlayPause, playlistId]\r\n  );\r\n\r\n  const handleToggleFavorite = useCallback(() => {\r\n    toggleFollowPlaylist(playlistId);\r\n  }, [toggleFollowPlaylist, playlistId]);\r\n\r\n  return playlist ? (\r\n    <Wrapper>\r\n      <Header\r\n        imageSource={getImageSource(playlist)}\r\n        title={playlist.name}\r\n        subTitle={playlist.owner.display_name}\r\n        canPlay={isPlayable}\r\n        isPlaying={isPlaying}\r\n        isFavorite={playlist.isFollowed}\r\n        onTogglePlay={handleTogglePlay}\r\n        onToggleFavorite={handleToggleFavorite}\r\n      />\r\n      <TrackList tracks={tracks} onTogglePlay={handleTogglePlay} />\r\n    </Wrapper>\r\n  ) : (\r\n    <></>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State, ownProps: Props) => {\r\n  const { match } = ownProps;\r\n  const { playlistId } = match.params;\r\n  return {\r\n    playlist: selectPlaylist(state, playlistId),\r\n    tracks: selectPlaylistTracks(state, playlistId),\r\n    isPlayable: selectIsPlayable(state, playlistId),\r\n    isPlaying: selectIsPlaying(state, playlistId)\r\n  };\r\n};\r\n\r\nconst mapDispatch = {\r\n  getPlaylist,\r\n  loadPlayPause,\r\n  toggleFollowPlaylist\r\n};\r\n\r\nexport default withLoader(\r\n  withRouter(\r\n    connect(\r\n      mapState,\r\n      mapDispatch\r\n    )(PlaylistDetails)\r\n  )\r\n);\r\n","import { State } from \"../reducers\";\r\nimport { selectUserProfile } from \"../selectors/userProfile\";\r\nimport { PlaylistActionType as ActionType } from \".\";\r\nimport { EntitiesAction, FetchDispatch } from \"./types\";\r\nimport { Schemas } from \"./schemas\";\r\nimport { checkFollowedPlaylist } from \"./following\";\r\nimport { checkSavedTracks } from \"./library\";\r\n\r\nexport interface PlaylistSuccessAction\r\n  extends EntitiesAction<ActionType.PlaylistSuccess> {}\r\n\r\nexport function getPlaylist(playlistId: string) {\r\n  return (dispatch: FetchDispatch, getState: () => State) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.PlaylistRequest,\r\n        ActionType.PlaylistSuccess,\r\n        ActionType.PlaylistFailure\r\n      ],\r\n      path: `playlists/${playlistId}`,\r\n      schema: Schemas.Playlist\r\n    }).then(json => {\r\n      const state = getState();\r\n      const userProfile = selectUserProfile(state);\r\n      if (userProfile) {\r\n        checkFollowedPlaylist(playlistId, userProfile.id)(dispatch);\r\n      }\r\n      const trackIds = json.tracks.items.map(\r\n        ({ track }: any) => track && track.id\r\n      );\r\n      if (trackIds.length) {\r\n        checkSavedTracks(trackIds)(dispatch);\r\n      }\r\n    });\r\n  };\r\n}\r\n","import React, { useEffect, useCallback } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\nimport { Album, Artist, Track, Type } from \"../../types\";\r\nimport { getAlbum } from \"../../actions/albums\";\r\nimport { loadPlayPause } from \"../../actions/player\";\r\nimport { toggleSavedAlbum } from \"../../actions/library\";\r\nimport { State } from \"../../reducers\";\r\nimport {\r\n  selectAlbum,\r\n  selectAlbumArtists,\r\n  selectAlbumTracks,\r\n  selectIsPlayable\r\n} from \"../../selectors/albums\";\r\nimport { selectIsPlaying } from \"../../selectors/player\";\r\nimport { getArtistNames, getImageSource } from \"../../utils\";\r\nimport Wrapper from \"./Wrapper\";\r\nimport Header from \"./Header\";\r\nimport TrackList from \"./TrackList\";\r\nimport withLoader from \"../withLoader\";\r\n\r\ninterface Params {\r\n  albumId: string;\r\n}\r\n\r\ninterface Props extends RouteComponentProps<Params> {\r\n  album?: Album;\r\n  artists: Artist[];\r\n  tracks: Track[];\r\n  isPlayable: boolean;\r\n  isPlaying: boolean;\r\n  getAlbum: (albumId: string) => void;\r\n  loadPlayPause: (\r\n    collectionId: string,\r\n    collectionType: Type,\r\n    trackId?: string\r\n  ) => void;\r\n  toggleSavedAlbum: (albumId: string) => void;\r\n}\r\n\r\nfunction AlbumDetails({\r\n  match,\r\n  album,\r\n  artists,\r\n  tracks,\r\n  isPlayable,\r\n  isPlaying,\r\n  getAlbum,\r\n  loadPlayPause,\r\n  toggleSavedAlbum\r\n}: Props) {\r\n  const { albumId } = match.params;\r\n\r\n  useEffect(() => {\r\n    getAlbum(albumId);\r\n  }, [getAlbum, albumId]);\r\n\r\n  const handleTogglePlay = useCallback(\r\n    (trackId?: string) => {\r\n      loadPlayPause(albumId, Type.Album, trackId);\r\n    },\r\n    [loadPlayPause, albumId]\r\n  );\r\n\r\n  const handleToggleFavorite = useCallback(() => {\r\n    toggleSavedAlbum(albumId);\r\n  }, [toggleSavedAlbum, albumId]);\r\n\r\n  return album ? (\r\n    <Wrapper>\r\n      <Header\r\n        imageSource={getImageSource(album)}\r\n        title={album.name}\r\n        subTitle={getArtistNames(artists)}\r\n        canPlay={isPlayable}\r\n        isPlaying={isPlaying}\r\n        isFavorite={album.isSaved}\r\n        onTogglePlay={handleTogglePlay}\r\n        onToggleFavorite={handleToggleFavorite}\r\n      />\r\n      <TrackList tracks={tracks} onTogglePlay={handleTogglePlay} />\r\n    </Wrapper>\r\n  ) : (\r\n    <></>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State, ownProps: Props) => {\r\n  const { match } = ownProps;\r\n  const { albumId } = match.params;\r\n  return {\r\n    album: selectAlbum(state, albumId),\r\n    artists: selectAlbumArtists(state)(albumId),\r\n    tracks: selectAlbumTracks(state, albumId),\r\n    isPlayable: selectIsPlayable(state, albumId),\r\n    isPlaying: selectIsPlaying(state, albumId)\r\n  };\r\n};\r\n\r\nconst mapDispatch = {\r\n  getAlbum,\r\n  loadPlayPause,\r\n  toggleSavedAlbum\r\n};\r\n\r\nexport default withLoader(\r\n  withRouter(\r\n    connect(\r\n      mapState,\r\n      mapDispatch\r\n    )(AlbumDetails)\r\n  )\r\n);\r\n","import { AlbumActionType as ActionType } from \".\";\r\nimport { EntitiesAction, FetchDispatch } from \"./types\";\r\nimport { Schemas } from \"./schemas\";\r\nimport { checkSavedAlbum, checkSavedTracks } from \"./library\";\r\n\r\nexport interface AlbumSuccessAction\r\n  extends EntitiesAction<ActionType.AlbumSuccess> {}\r\n\r\nexport function getAlbum(albumId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.AlbumRequest,\r\n        ActionType.AlbumSuccess,\r\n        ActionType.AlbumFailure\r\n      ],\r\n      path: `albums/${albumId}`,\r\n      schema: Schemas.Album\r\n    }).then(json => {\r\n      checkSavedAlbum(albumId)(dispatch);\r\n      const trackIds = json.tracks.items.map(({ id }: any) => id);\r\n      if (trackIds.length) {\r\n        checkSavedTracks(trackIds)(dispatch);\r\n      }\r\n    });\r\n  };\r\n}\r\n","import React, { useEffect, useCallback } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Album, Artist, Track, Type } from \"../../types\";\r\nimport { getImageSource, getImageShape } from \"../../utils\";\r\nimport { getArtist } from \"../../actions/artists\";\r\nimport { loadPlayPause } from \"../../actions/player\";\r\nimport { toggleFollowArtist } from \"../../actions/following\";\r\nimport { State } from \"../../reducers\";\r\nimport {\r\n  selectArtist,\r\n  selectIsPlayable,\r\n  selectArtistAlbums,\r\n  selectArtistTopTracks,\r\n  selectArtistRelatedArtists\r\n} from \"../../selectors/artists\";\r\nimport { selectIsPlaying } from \"../../selectors/player\";\r\nimport TrackList from \"./TrackList\";\r\nimport AlbumCovers from \"../covers/AlbumCovers\";\r\nimport ArtistCovers from \"../covers/ArtistCovers\";\r\nimport { Heading } from \"../core\";\r\nimport Wrapper from \"./Wrapper\";\r\nimport Header from \"./Header\";\r\nimport withLoader from \"../withLoader\";\r\n\r\nconst Section = styled.section`\r\n  margin-bottom: ${props => props.theme.thickness.medium}px;\r\n`;\r\n\r\nfunction TopTracks({\r\n  tracks,\r\n  onTogglePlay\r\n}: {\r\n  tracks: Track[];\r\n  onTogglePlay: (trackId: string) => void;\r\n}) {\r\n  return (\r\n    <>{tracks && <TrackList tracks={tracks} onTogglePlay={onTogglePlay} />}</>\r\n  );\r\n}\r\n\r\nfunction Albums({ albums }: { albums: Album[] }) {\r\n  return (\r\n    <>\r\n      {albums && !!albums.length && (\r\n        <Section>\r\n          <Heading>Albums & Singles</Heading>\r\n          <AlbumCovers albums={albums} />\r\n        </Section>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nfunction RelatedArtists({ artists }: { artists: Artist[] }) {\r\n  return (\r\n    <>\r\n      {artists && !!artists.length && (\r\n        <Section>\r\n          <Heading>Related Artists</Heading>\r\n          <ArtistCovers artists={artists} />\r\n        </Section>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\ninterface Params {\r\n  artistId: string;\r\n}\r\n\r\ninterface Props extends RouteComponentProps<Params> {\r\n  artist?: Artist;\r\n  albums: Album[];\r\n  relatedArtists: Artist[];\r\n  topTracks: Track[];\r\n  isPlayable: boolean;\r\n  isPlaying: boolean;\r\n  getArtist: (artistId: string) => void;\r\n  loadPlayPause: (\r\n    artistId: string,\r\n    collectionType: Type,\r\n    trackId?: string\r\n  ) => void;\r\n  toggleFollowArtist: (artistId: string) => void;\r\n}\r\n\r\nfunction ArtistDetails({\r\n  match,\r\n  artist,\r\n  albums,\r\n  relatedArtists,\r\n  topTracks,\r\n  isPlayable,\r\n  isPlaying,\r\n  getArtist,\r\n  loadPlayPause,\r\n  toggleFollowArtist\r\n}: Props) {\r\n  const { artistId } = match.params;\r\n\r\n  useEffect(() => getArtist(artistId), [getArtist, artistId]);\r\n\r\n  const handleTogglePlay = useCallback(\r\n    (trackId?: string) => {\r\n      loadPlayPause(artistId, Type.Artist, trackId);\r\n    },\r\n    [loadPlayPause, artistId]\r\n  );\r\n\r\n  const handleToggleFavorite = useCallback(() => {\r\n    toggleFollowArtist(artistId);\r\n  }, [toggleFollowArtist, artistId]);\r\n\r\n  return artist ? (\r\n    <>\r\n      <Wrapper>\r\n        <Header\r\n          imageSource={getImageSource(artist)}\r\n          imageShape={getImageShape(artist)}\r\n          title={artist.name}\r\n          canPlay={isPlayable}\r\n          isPlaying={isPlaying}\r\n          isFavorite={artist.isFollowed}\r\n          onTogglePlay={handleTogglePlay}\r\n          onToggleFavorite={handleToggleFavorite}\r\n        />\r\n        <TopTracks tracks={topTracks} onTogglePlay={handleTogglePlay} />\r\n      </Wrapper>\r\n      <Albums albums={albums} />\r\n      <RelatedArtists artists={relatedArtists} />\r\n    </>\r\n  ) : (\r\n    <></>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State, ownProps: Props) => {\r\n  const { match } = ownProps;\r\n  const { artistId } = match.params;\r\n  return {\r\n    artist: selectArtist(state, artistId),\r\n    albums: selectArtistAlbums(state, artistId),\r\n    relatedArtists: selectArtistRelatedArtists(state, artistId),\r\n    topTracks: selectArtistTopTracks(state, artistId),\r\n    isPlayable: selectIsPlayable(state, artistId),\r\n    isPlaying: selectIsPlaying(state, artistId)\r\n  };\r\n};\r\n\r\nconst mapDispatch = {\r\n  getArtist,\r\n  loadPlayPause,\r\n  toggleFollowArtist\r\n};\r\n\r\nexport default withLoader(\r\n  withRouter(\r\n    connect(\r\n      mapState,\r\n      mapDispatch\r\n    )(ArtistDetails)\r\n  )\r\n);\r\n","import { ArtistActionType as ActionType } from \".\";\r\nimport { EntitiesAction, FetchDispatch } from \"./types\";\r\nimport { Schemas } from \"./schemas\";\r\nimport { checkFollowedArtist } from \"./following\";\r\nimport { checkSavedTracks } from \"./library\";\r\n\r\nexport interface ArtistSuccessAction\r\n  extends EntitiesAction<ActionType.ArtistSuccess> {}\r\n\r\nexport function getArtist(artistId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.ArtistRequest,\r\n        ActionType.ArtistSuccess,\r\n        ActionType.ArtistFailure\r\n      ],\r\n      path: `artists/${artistId}`,\r\n      schema: Schemas.Artist\r\n    }).then(() => {\r\n      getArtistAlbums(artistId)(dispatch);\r\n      getArtistRelatedArtists(artistId)(dispatch);\r\n      getArtistTopTracks(artistId)(dispatch);\r\n      checkFollowedArtist(artistId)(dispatch);\r\n    });\r\n  };\r\n}\r\n\r\nexport interface ArtistAlbumsSuccessAction\r\n  extends EntitiesAction<\r\n    ActionType.ArtistAlbumsSuccess,\r\n    { artistId: string }\r\n  > {}\r\n\r\nexport function getArtistAlbums(artistId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.ArtistAlbumsRequest,\r\n        ActionType.ArtistAlbumsSuccess,\r\n        ActionType.ArtistAlbumsFailure\r\n      ],\r\n      path: `artists/${artistId}/albums?country=us`,\r\n      schema: Schemas.PagedAlbums,\r\n      data: { artistId }\r\n    });\r\n  };\r\n}\r\n\r\nexport interface ArtistRelatedArtistsSuccessAction\r\n  extends EntitiesAction<\r\n    ActionType.ArtistRelatedArtistsSuccess,\r\n    { artistId: string }\r\n  > {}\r\n\r\nexport function getArtistRelatedArtists(artistId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.ArtistRelatedArtistsRequest,\r\n        ActionType.ArtistRelatedArtistsSuccess,\r\n        ActionType.ArtistRelatedArtistsFailure\r\n      ],\r\n      path: `artists/${artistId}/related-artists?country=us`,\r\n      schema: Schemas.Artists,\r\n      data: { artistId }\r\n    });\r\n  };\r\n}\r\n\r\nexport interface ArtistTopTracksSuccessAction\r\n  extends EntitiesAction<\r\n    ActionType.ArtistTopTracksSuccess,\r\n    { artistId: string }\r\n  > {}\r\n\r\nexport function getArtistTopTracks(artistId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.ArtistTopTracksRequest,\r\n        ActionType.ArtistTopTracksSuccess,\r\n        ActionType.ArtistTopTracksFailure\r\n      ],\r\n      path: `artists/${artistId}/top-tracks?country=us`,\r\n      schema: Schemas.Tracks,\r\n      data: { artistId }\r\n    }).then(json => {\r\n      const trackIds = json.tracks.map(({ id }: any) => id);\r\n      if (trackIds.length) {\r\n        checkSavedTracks(trackIds)(dispatch);\r\n      }\r\n    });\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Track, Type } from \"../../types\";\r\nimport { loadPlayPause } from \"../../actions/player\";\r\nimport { State } from \"../../reducers\";\r\nimport { Collection } from \"../../reducers/types\";\r\nimport { selectCollection, selectLoadedTracks } from \"../../selectors/player\";\r\nimport { Heading } from \"../core\";\r\nimport TrackList from \"../details/TrackList\";\r\nimport Empty from \"../layout/Empty\";\r\n\r\nconst Wrapper = styled.div``;\r\n\r\ninterface Props {\r\n  collection?: Collection;\r\n  tracks: Track[];\r\n  loadPlayPause: (\r\n    collectionId: string,\r\n    collectionType: Type,\r\n    trackId: string\r\n  ) => void;\r\n}\r\n\r\nfunction PlayQueue({ collection, tracks, loadPlayPause }: Props) {\r\n  function handleTogglePlay(trackId: string) {\r\n    collection && loadPlayPause(collection.id, collection.type, trackId);\r\n  }\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Heading>Play Queue</Heading>\r\n      {tracks && tracks.length ? (\r\n        <TrackList tracks={tracks} onTogglePlay={handleTogglePlay} />\r\n      ) : (\r\n        <Empty>No tracks</Empty>\r\n      )}\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  collection: selectCollection(state),\r\n  tracks: selectLoadedTracks(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  loadPlayPause\r\n};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(PlayQueue);\r\n","import React, { HTMLAttributes } from \"react\";\r\nimport { Route } from \"react-router\";\r\nimport styled from \"../../styles/styled\";\r\nimport DefaultRoute from \"../DefaultRoute\";\r\nimport PrivateRoute from \"../PrivateRoute\";\r\nimport LogIn from \"./Login\";\r\nimport Browse from \"../browse/Browse\";\r\nimport CategoryPlaylists from \"../browse/CategoryPlaylists\";\r\nimport Search from \"../search/Search\";\r\nimport Library from \"../library/Library\";\r\nimport PlaylistDetails from \"../details/PlaylistDetails\";\r\nimport AlbumDetails from \"../details/AlbumDetails\";\r\nimport ArtistDetails from \"../details/ArtistDetails\";\r\nimport PlayQueue from \"../player/PlayQueue\";\r\n\r\nconst Wrapper = styled.div`\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  overflow-y: auto;\r\n  padding: ${props => props.theme.thickness.small}px;\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.width.extraSmall}px) {\r\n    padding: ${props => props.theme.thickness.medium}px;\r\n  }\r\n`;\r\n\r\nconst publicUrl = process.env.PUBLIC_URL;\r\nconst Routes = ({ className }: HTMLAttributes<HTMLElement>) => {\r\n  return (\r\n    <Wrapper className={className}>\r\n      <DefaultRoute from={`${publicUrl}/`} to={`${publicUrl}/browse`} />\r\n      <Route path={`${publicUrl}/login`} component={LogIn} />\r\n      <PrivateRoute path={`${publicUrl}/browse`} component={Browse} />\r\n      <PrivateRoute path={`${publicUrl}/search/:query?`} component={Search} />\r\n      <PrivateRoute path={`${publicUrl}/library`} component={Library} />\r\n      <PrivateRoute\r\n        path={`${publicUrl}/category/:categoryId`}\r\n        component={CategoryPlaylists}\r\n      />\r\n      <PrivateRoute\r\n        path={`${publicUrl}/playlist/:playlistId`}\r\n        component={PlaylistDetails}\r\n      />\r\n      <PrivateRoute\r\n        path={`${publicUrl}/album/:albumId`}\r\n        component={AlbumDetails}\r\n      />\r\n      <PrivateRoute\r\n        path={`${publicUrl}/artist/:artistId`}\r\n        component={ArtistDetails}\r\n      />\r\n      <PrivateRoute path={`${publicUrl}/queue`} component={PlayQueue} />\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Routes;\r\n","import { Dispatch } from \"react\";\r\nimport { PayloadAction } from \"./types\";\r\n\r\nexport enum ActionType {\r\n  DeleteNotification = \"DELETE_NOTIFICATION\"\r\n}\r\n\r\nexport interface DeleteNotificationAction\r\n  extends PayloadAction<\r\n    ActionType.DeleteNotification,\r\n    { notificationId: string }\r\n  > {}\r\n\r\nexport function deleteNotification(notificationId: string) {\r\n  return (dispatch: Dispatch<DeleteNotificationAction>) => {\r\n    dispatch({\r\n      type: ActionType.DeleteNotification,\r\n      payload: { notificationId }\r\n    });\r\n  };\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport styled from \"../../styles/styled\";\r\nimport { deleteNotification } from \"../../actions/notifications\";\r\nimport { Notification } from \"../../reducers/notifications\";\r\nimport { Icon, IconType, RoundButton } from \"../core\";\r\n\r\nconst Wrapper = styled.li<{ isExiting: boolean }>`\r\n  align-items: center;\r\n  background: ${props => props.theme.color.primary};\r\n  box-shadow: ${props => props.theme.shadow.high};\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  overflow: hidden;\r\n  padding-left: ${props => props.theme.thickness.medium}px;\r\n  padding-right: ${props => props.theme.thickness.small}px;\r\n  position: relative;\r\n  width: ${props =>\r\n    props.theme.thickness.extraExtraLarge + props.theme.thickness.extraLarge}px;\r\n  animation: ${props =>\r\n    props.isExiting ? \"exit 0.4s forwards\" : \"enter 0.4s forwards\"};\r\n\r\n  @keyframes enter {\r\n    0% {\r\n      height: 0;\r\n      left: ${props => props.theme.thickness.small}px;\r\n      margin-bottom: 0;\r\n      padding-bottom: 0;\r\n      padding-top: 0;\r\n    }\r\n    50% {\r\n      height: ${props =>\r\n        props.theme.thickness.large + 2 * props.theme.thickness.extraSmall}px;\r\n      left: ${props => props.theme.thickness.small}px;\r\n      margin-bottom: ${props => props.theme.thickness.small}px;\r\n      padding-bottom: ${props => props.theme.thickness.extraSmall}px;\r\n      padding-top: ${props => props.theme.thickness.extraSmall}px;\r\n    }\r\n    100% {\r\n      height: ${props =>\r\n        props.theme.thickness.large + 2 * props.theme.thickness.extraSmall}px;\r\n      left: -${props => props.theme.thickness.extraExtraLarge + props.theme.thickness.extraLarge + props.theme.thickness.medium}px;\r\n      margin-bottom: ${props => props.theme.thickness.small}px;\r\n      padding-bottom: ${props => props.theme.thickness.extraSmall}px;\r\n      padding-top: ${props => props.theme.thickness.extraSmall}px;\r\n    }\r\n  }\r\n\r\n  @keyframes exit {\r\n    0% {\r\n      height: ${props =>\r\n        props.theme.thickness.large + 2 * props.theme.thickness.extraSmall}px;\r\n      left: -${props => props.theme.thickness.extraExtraLarge + props.theme.thickness.extraLarge + props.theme.thickness.medium}px;\r\n      margin-bottom: ${props => props.theme.thickness.small}px;\r\n      padding-bottom: ${props => props.theme.thickness.extraSmall}px;\r\n      padding-top: ${props => props.theme.thickness.extraSmall}px;\r\n    }\r\n    50% {\r\n      height: ${props =>\r\n        props.theme.thickness.large + 2 * props.theme.thickness.extraSmall}px;\r\n      left: ${props => props.theme.thickness.small}px;\r\n      margin-bottom: ${props => props.theme.thickness.small}px;\r\n      padding-bottom: ${props => props.theme.thickness.extraSmall}px;\r\n      padding-top: ${props => props.theme.thickness.extraSmall}px;\r\n    }\r\n    100% {\r\n      height: 0;\r\n      left: ${props => props.theme.thickness.small}px;\r\n      margin-bottom: 0;\r\n      padding-bottom: 0;\r\n      padding-top: 0;\r\n    }\r\n  }\r\n`;\r\n\r\nconst DoneIcon = styled(Icon).attrs(() => ({\r\n  type: IconType.Done\r\n}))`\r\n  color: ${props => props.theme.onPrimary.primary};\r\n  margin-right: ${props => props.theme.thickness.small}px;\r\n`;\r\n\r\nconst Text = styled.span`\r\n  color: ${props => props.theme.onPrimary.primary};\r\n  flex-grow: 1;\r\n`;\r\n\r\nconst ClearButton = styled(RoundButton).attrs(() => ({\r\n  isOnPrimary: true,\r\n  iconType: IconType.Clear\r\n}))`\r\n  justify-self: flex-end;\r\n`;\r\n\r\ninterface Props {\r\n  notification: Notification;\r\n  deleteNotification: (notificationId: string) => void;\r\n}\r\n\r\nfunction NotificationItem({ notification, deleteNotification }: Props) {\r\n  const [isExiting, setIsExiting] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const handle = setTimeout(() => {\r\n      exit();\r\n    }, 4000);\r\n\r\n    return () => {\r\n      clearTimeout(handle);\r\n    };\r\n  });\r\n\r\n  function exit() {\r\n    setIsExiting(true);\r\n    setTimeout(() => {\r\n      deleteNotification(notification.id);\r\n    }, 400);\r\n  }\r\n\r\n  return (\r\n    <Wrapper isExiting={isExiting}>\r\n      <DoneIcon />\r\n      <Text>{notification.message}</Text>\r\n      <ClearButton onClick={exit} />\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nconst mapDispatch = {\r\n  deleteNotification\r\n};\r\n\r\nexport default connect(\r\n  null,\r\n  mapDispatch\r\n)(NotificationItem);\r\n","import React, { HTMLAttributes } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport styled from \"../../styles/styled\";\r\nimport { State } from \"../../reducers\";\r\nimport { Notification } from \"../../reducers/notifications\";\r\nimport { selectNotifications } from \"../../selectors/notifications\";\r\nimport NotificationItem from \"./NotificationItem\";\r\n\r\nconst Wrapper = styled.div`\r\n  overflow: visible;\r\n  width: 0;\r\n  z-index: 3;\r\n`;\r\n\r\nconst List = styled.ul`\r\n  padding-top: ${props => props.theme.thickness.medium}px;\r\n  width: 0;\r\n`;\r\n\r\ninterface Props {\r\n  notifications: Notification[];\r\n}\r\n\r\nfunction NotificationList({\r\n  className,\r\n  notifications\r\n}: Props & HTMLAttributes<HTMLElement>) {\r\n  return (\r\n    <Wrapper className={className}>\r\n      <List>\r\n        {notifications.map(notification => (\r\n          <NotificationItem key={notification.id} notification={notification} />\r\n        ))}\r\n      </List>\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  notifications: selectNotifications(state)\r\n});\r\n\r\nconst mapDispatch = {};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(NotificationList);\r\n","import { State } from \"../reducers\";\r\n\r\nexport function selectNotifications({ notifications }: State) {\r\n  return notifications;\r\n}\r\n","import React, { HTMLAttributes } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Artist, Album, Track } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport { Image, Text, ToggleButton, IconType } from \"../core\";\r\nimport { getImageSource } from \"../../utils\";\r\nimport {\r\n  selectLoadedArtists,\r\n  selectLoadedAlbum,\r\n  selectLoadedTrack\r\n} from \"../../selectors/player\";\r\nimport ArtistNames from \"../details/ArtistNames\";\r\nimport { toggleSavedTrack } from \"../../actions/library\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  height: 100%;\r\n`;\r\n\r\nconst StyedImage = styled(Image)`\r\n  box-shadow: ${props => props.theme.shadow.middle};\r\n  height: 75px;\r\n  margin-right: ${props => props.theme.thickness.small}px;\r\n  width: 75px;\r\n`;\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-right: ${props => props.theme.thickness.small}px;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst Title = styled(Text)`\r\n  margin-bottom: ${props => props.theme.thickness.extraSmall}px;\r\n`;\r\n\r\nconst FavoriteButton = styled(ToggleButton).attrs(() => ({\r\n  iconType: IconType.Favorite\r\n}))`\r\n  flex-shrink: 0;\r\n`;\r\n\r\ninterface Props {\r\n  track?: Track;\r\n  album?: Album;\r\n  artists: Artist[];\r\n  toggleFavorite: (trackId: string) => void;\r\n}\r\n\r\nfunction TrackInfos({\r\n  className,\r\n  track,\r\n  album,\r\n  artists,\r\n  toggleFavorite\r\n}: Props & HTMLAttributes<HTMLElement>) {\r\n  function handleFavoriteClick() {\r\n    if (track) {\r\n      toggleFavorite(track.id);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Wrapper className={className}>\r\n      {album && (\r\n        <Link to={`${process.env.PUBLIC_URL}/album/${album.id}`}>\r\n          <StyedImage source={getImageSource(album)} />\r\n        </Link>\r\n      )}\r\n\r\n      {track && (\r\n        <>\r\n          <Container>\r\n            <Title>{track.name}</Title>\r\n            <ArtistNames artists={artists} />\r\n          </Container>\r\n\r\n          <FavoriteButton\r\n            isToggled={track.isSaved}\r\n            onClick={handleFavoriteClick}\r\n          />\r\n        </>\r\n      )}\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  track: selectLoadedTrack(state),\r\n  album: selectLoadedAlbum(state),\r\n  artists: selectLoadedArtists(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  toggleFavorite: toggleSavedTrack\r\n};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(TrackInfos);\r\n","import _ from \"lodash\";\r\nimport { PlayerActionType as ActionType } from \"../actions\";\r\nimport {\r\n  LoadCollectionAction,\r\n  LoadTrackAction,\r\n  TrackLoadedAction,\r\n  UpdateAction,\r\n  SeekAction,\r\n  ChangeVolumeAction\r\n} from \"../actions/player\";\r\nimport { Collection, PlayState } from \"./types\";\r\nimport createReducer from \"./createReducer\";\r\n\r\nexport enum Command {\r\n  None = \"NONE\",\r\n  Play = \"PLAY\",\r\n  Pause = \"PAUSE\",\r\n  Seek = \"SEEK\",\r\n  ChangeVolume = \"CHANGE_VOLUME\"\r\n}\r\n\r\nexport interface State {\r\n  collections: Collection[];\r\n  trackIds: string[];\r\n  playQueue: string[];\r\n  currentTrack: number;\r\n  playState: PlayState;\r\n  duration: number;\r\n  currentTime: number;\r\n  isShuffled: boolean;\r\n  isLooped: boolean;\r\n  volume: number;\r\n  isMuted: boolean;\r\n  command: Command;\r\n}\r\n\r\nexport const initialState: State = {\r\n  collections: [],\r\n  trackIds: [],\r\n  playQueue: [],\r\n  currentTrack: 0,\r\n  playState: PlayState.None,\r\n  duration: 0,\r\n  currentTime: 0,\r\n  isShuffled: false,\r\n  isLooped: false,\r\n  volume: 1,\r\n  isMuted: false,\r\n  command: Command.None\r\n};\r\n\r\nexport default createReducer(initialState, {\r\n  [ActionType.LoadCollection]: (\r\n    state: State,\r\n    { payload }: LoadCollectionAction\r\n  ) => {\r\n    const { collectionId, collectionType, trackIds, trackId } = payload;\r\n    const playQueue = state.isShuffled ? _.shuffle(trackIds) : trackIds;\r\n    return {\r\n      ...state,\r\n      collections: [\r\n        { id: collectionId, type: collectionType },\r\n        ...state.collections.filter(recent => recent.id !== collectionId)\r\n      ],\r\n      trackIds,\r\n      playQueue: playQueue,\r\n      currentTrack: trackId ? playQueue.indexOf(trackId) : 0,\r\n      command: Command.Play\r\n    };\r\n  },\r\n  [ActionType.LoadTrack]: (state: State, { payload }: LoadTrackAction) => ({\r\n    ...state,\r\n    currentTrack: state.trackIds.indexOf(payload.trackId),\r\n    command: Command.Play\r\n  }),\r\n  [ActionType.TrackLoaded]: (state: State, { payload }: TrackLoadedAction) => ({\r\n    ...state,\r\n    duration: payload\r\n  }),\r\n  [ActionType.Playing]: (state: State) => ({\r\n    ...state,\r\n    playState: PlayState.Playing,\r\n    command: Command.None\r\n  }),\r\n  [ActionType.Update]: (state: State, { payload }: UpdateAction) => ({\r\n    ...state,\r\n    currentTime: payload,\r\n    command: Command.None\r\n  }),\r\n  [ActionType.Play]: (state: State) => ({\r\n    ...state,\r\n    command: Command.Play\r\n  }),\r\n  [ActionType.Pause]: (state: State) => ({\r\n    ...state,\r\n    command: Command.Pause\r\n  }),\r\n  [ActionType.Paused]: (state: State) => ({\r\n    ...state,\r\n    playState: PlayState.Paused,\r\n    command: Command.None\r\n  }),\r\n  [ActionType.Seek]: (state: State, { payload }: SeekAction) => ({\r\n    ...state,\r\n    currentTime: payload,\r\n    command: Command.Seek\r\n  }),\r\n  [ActionType.Seeked]: (state: State) => ({\r\n    ...state\r\n  }),\r\n  [ActionType.Ended]: (state: State) => {\r\n    const { currentTrack, playQueue } = state;\r\n    return currentTrack === playQueue.length - 1\r\n      ? state.isLooped\r\n        ? { ...state, currentTrack: 0, command: Command.Play }\r\n        : { ...state, playState: PlayState.Paused }\r\n      : {\r\n          ...state,\r\n          currentTrack: currentTrack + 1,\r\n          command: Command.Play\r\n        };\r\n  },\r\n  [ActionType.Previous]: (state: State) => {\r\n    const { currentTrack, playQueue } = state;\r\n    return {\r\n      ...state,\r\n      currentTrack:\r\n        currentTrack === 0 ? playQueue.length - 1 : state.currentTrack - 1,\r\n      command: Command.Play\r\n    };\r\n  },\r\n  [ActionType.Next]: (state: State) => {\r\n    const { currentTrack, playQueue } = state;\r\n    return {\r\n      ...state,\r\n      currentTrack:\r\n        currentTrack === playQueue.length - 1 ? 0 : state.currentTrack + 1,\r\n      command: Command.Play\r\n    };\r\n  },\r\n  [ActionType.ToggleShuffle]: (state: State) => {\r\n    const playQueue = state.isShuffled\r\n      ? state.trackIds\r\n      : _.shuffle(state.trackIds);\r\n    const currentTrack = playQueue.indexOf(state.playQueue[state.currentTrack]);\r\n    return {\r\n      ...state,\r\n      playQueue,\r\n      currentTrack,\r\n      isShuffled: !state.isShuffled\r\n    };\r\n  },\r\n  [ActionType.ToggleLoop]: (state: State) => ({\r\n    ...state,\r\n    isLooped: !state.isLooped\r\n  }),\r\n  [ActionType.ChangeVolume]: (\r\n    state: State,\r\n    { payload }: ChangeVolumeAction\r\n  ) => ({\r\n    ...state,\r\n    ...payload,\r\n    command: Command.ChangeVolume\r\n  }),\r\n  [ActionType.VolumeChanged]: (state: State) => ({\r\n    ...state,\r\n    command: Command.None\r\n  })\r\n});\r\n","import { PayloadAction } from \"../actions/types\";\r\n\r\nexport default function createReducer<S>(\r\n  initialState: S,\r\n  handlers: { [key: string]: (state: S, action: PayloadAction) => S }\r\n) {\r\n  return function reducer(state = initialState, action: PayloadAction) {\r\n    if (handlers.hasOwnProperty(action.type)) {\r\n      return handlers[action.type](state, action);\r\n    } else {\r\n      return state;\r\n    }\r\n  };\r\n}\r\n","import React, { useEffect, useRef, SyntheticEvent } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Track } from \"../../types\";\r\nimport {\r\n  trackLoaded,\r\n  playing,\r\n  update,\r\n  paused,\r\n  seeked,\r\n  volumeChanged,\r\n  ended\r\n} from \"../../actions/player\";\r\nimport { State } from \"../../reducers\";\r\nimport { Command } from \"../../reducers/player\";\r\nimport {\r\n  selectLoadedTrack,\r\n  Times,\r\n  selectTimes,\r\n  selectVolume,\r\n  selectIsMuted,\r\n  selectCommand\r\n} from \"../../selectors/player\";\r\n\r\ninterface Props {\r\n  loadedTrack?: Track;\r\n  times: Times;\r\n  volume: number;\r\n  isMuted: boolean;\r\n  command: Command;\r\n  trackLoaded: (duration: number) => void;\r\n  playing: () => void;\r\n  update: (elaped: number) => void;\r\n  paused: () => void;\r\n  seeked: () => void;\r\n  volumeChanged: () => void;\r\n  ended: () => void;\r\n}\r\n\r\nfunction Audio({\r\n  loadedTrack,\r\n  times,\r\n  volume,\r\n  isMuted,\r\n  command,\r\n  trackLoaded,\r\n  playing,\r\n  update,\r\n  paused,\r\n  seeked,\r\n  volumeChanged,\r\n  ended\r\n}: Props) {\r\n  const audio = useRef<HTMLAudioElement>(null);\r\n\r\n  useEffect(() => {\r\n    const currentAudio = audio.current;\r\n\r\n    if (currentAudio) {\r\n      const { currentTime } = times;\r\n      switch (command) {\r\n        case Command.Play:\r\n          currentAudio.play();\r\n          break;\r\n        case Command.Pause:\r\n          currentAudio.pause();\r\n          break;\r\n        case Command.Seek:\r\n          currentAudio.currentTime = currentTime;\r\n          break;\r\n        case Command.ChangeVolume:\r\n          currentAudio.volume = isMuted ? 0 : volume;\r\n      }\r\n    }\r\n  });\r\n\r\n  function handleLoadedMetadata(event: SyntheticEvent<HTMLAudioElement>) {\r\n    const target = event.target as HTMLAudioElement;\r\n    trackLoaded(target.duration);\r\n  }\r\n\r\n  function handleTimeUpdate(event: SyntheticEvent<HTMLAudioElement>) {\r\n    const target = event.target as HTMLAudioElement;\r\n    update(target.currentTime);\r\n  }\r\n\r\n  function handlePause(event: SyntheticEvent<HTMLAudioElement>) {\r\n    const target = event.target as HTMLAudioElement;\r\n    if (target.currentTime !== target.duration) {\r\n      paused();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <audio\r\n      ref={audio}\r\n      src={loadedTrack && loadedTrack.preview_url}\r\n      onLoadedMetadata={handleLoadedMetadata}\r\n      onPlay={playing}\r\n      onTimeUpdate={handleTimeUpdate}\r\n      onPause={handlePause}\r\n      onSeeked={seeked}\r\n      onVolumeChange={volumeChanged}\r\n      onEnded={ended}\r\n    />\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  loadedTrack: selectLoadedTrack(state),\r\n  times: selectTimes(state),\r\n  volume: selectVolume(state),\r\n  isMuted: selectIsMuted(state),\r\n  command: selectCommand(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  trackLoaded,\r\n  playing,\r\n  update,\r\n  paused,\r\n  seeked,\r\n  volumeChanged,\r\n  ended\r\n};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(Audio);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport styled from \"../../styles/styled\";\r\nimport {\r\n  toggleShuffle,\r\n  previous,\r\n  playPause,\r\n  next,\r\n  toggleLoop\r\n} from \"../../actions/player\";\r\nimport { State } from \"../../reducers\";\r\nimport {\r\n  selectCanNext,\r\n  selectCanPrevious,\r\n  selectCanPlayPause,\r\n  selectIsLooped,\r\n  selectIsPlaying,\r\n  selectIsShuffled\r\n} from \"../../selectors/player\";\r\nimport { IconType, RoundButton, ToggleButton } from \"../core\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n`;\r\n\r\nconst StyledRoundButton = styled(RoundButton)`\r\n  margin: 0 ${props => props.theme.thickness.extraSmall}px;\r\n`;\r\n\r\nconst StyledToggleButton = styled(ToggleButton)`\r\n  margin: 0 ${props => props.theme.thickness.extraSmall}px;\r\n`;\r\n\r\nconst ShuffleButton = styled(StyledToggleButton).attrs(() => ({\r\n  iconType: IconType.Shuffle\r\n}))``;\r\n\r\nconst PreviousButton = styled(StyledRoundButton).attrs(() => ({\r\n  iconType: IconType.SkipPrevious\r\n}))``;\r\n\r\nconst PlayButton = styled(StyledRoundButton)``;\r\n\r\nconst NextButton = styled(StyledRoundButton).attrs(() => ({\r\n  iconType: IconType.SkipNext\r\n}))``;\r\n\r\nconst LoopButton = styled(StyledToggleButton).attrs(() => ({\r\n  iconType: IconType.Loop\r\n}))``;\r\n\r\ninterface Props {\r\n  isPlaying: boolean;\r\n  isShuffled: boolean;\r\n  canPrevious: boolean;\r\n  canPlayPause: boolean;\r\n  canNext: boolean;\r\n  isLooped: boolean;\r\n  toggleShuffle: () => void;\r\n  previous: () => void;\r\n  playPause: () => void;\r\n  next: () => void;\r\n  toggleLoop: () => void;\r\n}\r\n\r\nfunction Controls({\r\n  isPlaying,\r\n  isShuffled,\r\n  canPrevious,\r\n  canPlayPause,\r\n  canNext,\r\n  isLooped,\r\n  toggleShuffle,\r\n  previous,\r\n  playPause,\r\n  next,\r\n  toggleLoop\r\n}: Props) {\r\n  return (\r\n    <Wrapper>\r\n      <ShuffleButton\r\n        data-testid=\"shuffleButton\"\r\n        onClick={toggleShuffle}\r\n        isToggled={isShuffled}\r\n      />\r\n      <PreviousButton\r\n        data-testid=\"previousButton\"\r\n        disabled={!canPrevious}\r\n        onClick={previous}\r\n      />\r\n\r\n      <PlayButton\r\n        data-testid=\"playButton\"\r\n        disabled={!canPlayPause}\r\n        onClick={playPause}\r\n        iconType={isPlaying ? IconType.Pause : IconType.PlayArrow}\r\n      />\r\n\r\n      <NextButton data-testid=\"nextButton\" disabled={!canNext} onClick={next} />\r\n      <LoopButton\r\n        data-testid=\"loopButton\"\r\n        onClick={toggleLoop}\r\n        isToggled={isLooped}\r\n      />\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  isPlaying: selectIsPlaying(state),\r\n  isShuffled: selectIsShuffled(state),\r\n  canPrevious: selectCanPrevious(state),\r\n  canPlayPause: selectCanPlayPause(state),\r\n  canNext: selectCanNext(state),\r\n  isLooped: selectIsLooped(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  toggleShuffle,\r\n  previous,\r\n  playPause,\r\n  next,\r\n  toggleLoop\r\n};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(Controls);\r\n","import React, { useState, useRef } from \"react\";\r\nimport styled from \"../../styles/styled\";\r\n\r\nconst Wrapper = styled.div<{ isDisabled: boolean }>`\r\n  border-radius: ${props => props.theme.thickness.extraExtraSmall}px;\r\n  cursor: ${props => (props.isDisabled ? \"default\" : \"pointer\")};\r\n  padding: 0 ${props => props.theme.thickness.small}px\r\n  width: 100%;\r\n`;\r\n\r\nconst Container = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  height: ${props => props.theme.thickness.medium}px;\r\n  position: relative;\r\n  width: 100%;\r\n`;\r\n\r\nconst Left = styled.div.attrs<{ width: number }>(props => ({\r\n  style: { width: `${props.width * 100}%` }\r\n}))<{ width: number }>`\r\n  background: ${props => props.theme.color.primary};\r\n  border-radius: ${props => props.theme.thickness.extraExtraSmall}px 0 0\r\n    ${props => props.theme.thickness.extraExtraSmall}px;\r\n  height: ${props => props.theme.thickness.extraExtraSmall}px;\r\n`;\r\n\r\nconst Thumb = styled.div.attrs<{ position: number }>(({ position }) => ({\r\n  style: { left: `${position * 100}%` }\r\n}))<{ position: number }>`\r\n  background: transparent;\r\n  border-radius: 50%;\r\n  height: ${props => props.theme.thickness.medium}px;\r\n  margin-left: -12.5px;\r\n  position: absolute;\r\n  visibility: hidden;\r\n  width: ${props => props.theme.thickness.medium}px;\r\n  z-index: 1;\r\n  transition: left 0.2s;\r\n\r\n  &::before {\r\n    background: ${props => props.theme.onBackground.primary};\r\n    border-radius: 50%;\r\n    box-shadow: ${props => props.theme.shadow.middle};\r\n    content: \"\";\r\n    height: 50%;\r\n    left: 25%;\r\n    position: absolute;\r\n    top: 25%;\r\n    width: 50%;\r\n  }\r\n\r\n  ${Wrapper}:hover & {\r\n    visibility: visible;\r\n  }\r\n`;\r\n\r\nconst Right = styled.div.attrs<{ width: number }>(props => ({\r\n  style: { width: `${100 - props.width * 100}%` }\r\n}))<{ width: number }>`\r\n  background: ${props => props.theme.onBackground.secondary};\r\n  border-radius: 0 ${props => props.theme.thickness.extraExtraSmall}px\r\n    ${props => props.theme.thickness.extraExtraSmall}px 0;\r\n  height: ${props => props.theme.thickness.extraExtraSmall}px;\r\n`;\r\n\r\ninterface Props {\r\n  className?: string;\r\n  value: number;\r\n  canChange: boolean;\r\n  onChange: (value: number) => void;\r\n}\r\n\r\nfunction Slider({ className, value, canChange, onChange }: Props) {\r\n  const [isDown, setIsDown] = useState(false);\r\n  const [localValue, setLocalValue] = useState(0);\r\n\r\n  const wrapper = useRef<HTMLDivElement>(null);\r\n  const thumb = useRef<HTMLDivElement>(null);\r\n\r\n  function getValue(x: number) {\r\n    const currentWrapper = wrapper.current;\r\n    const currentTHunb = thumb.current;\r\n    if (!currentWrapper || !currentTHunb) {\r\n      return 0;\r\n    }\r\n\r\n    const clientRect = currentWrapper.getBoundingClientRect();\r\n    let value = (x - clientRect.left) / currentWrapper.clientWidth;\r\n    if (value < 0) {\r\n      value = 0;\r\n    } else if (value > 1) {\r\n      value = 1;\r\n    }\r\n\r\n    return value;\r\n  }\r\n\r\n  function handleMouseDown(event: React.MouseEvent<HTMLElement>) {\r\n    if (!canChange) {\r\n      return;\r\n    }\r\n\r\n    setIsDown(true);\r\n    setLocalValue(getValue(event.pageX));\r\n    document.addEventListener(\"mousemove\", handleMouseMove);\r\n    document.addEventListener(\"mouseup\", handleMouseUp);\r\n  }\r\n\r\n  function handleMouseMove(event: MouseEvent) {\r\n    setLocalValue(getValue(event.pageX));\r\n  }\r\n\r\n  function handleMouseUp(event: MouseEvent) {\r\n    document.removeEventListener(\"mousemove\", handleMouseMove);\r\n    document.removeEventListener(\"mouseup\", handleMouseUp);\r\n    setIsDown(false);\r\n    const value = getValue(event.pageX);\r\n    onChange(value);\r\n  }\r\n\r\n  function getCurrentValue() {\r\n    return isDown ? localValue : value;\r\n  }\r\n\r\n  const currentValue = getCurrentValue();\r\n\r\n  return (\r\n    <Wrapper\r\n      ref={wrapper}\r\n      onMouseDown={handleMouseDown}\r\n      isDisabled={!canChange}\r\n      className={className}\r\n    >\r\n      <Container>\r\n        <Left width={currentValue} />\r\n        {canChange && <Thumb ref={thumb} position={currentValue} />}\r\n        <Right width={currentValue} />\r\n      </Container>\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nSlider.defaultProps = {\r\n  value: 0,\r\n  canChange: true,\r\n  onChange: () => {}\r\n};\r\n\r\nexport default Slider;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport styled from \"../../styles/styled\";\r\nimport { seek } from \"../../actions/player\";\r\nimport { State } from \"../../reducers\";\r\nimport { Times, selectTimes, selectCanSeek } from \"../../selectors/player\";\r\nimport Slider from \"./Slider\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-cotent: center;\r\n  width: 100%;\r\n`;\r\n\r\nconst ProgressTime = styled.div`\r\n  color: ${props => props.theme.onBackground.secondary};\r\n  font-size: ${props => props.theme.fontSize.small}px;\r\n  font-weight: ${props => props.theme.fontWeight.light};\r\n`;\r\n\r\ninterface Props {\r\n  times: Times;\r\n  canSeek: boolean;\r\n  seek: (time: number) => void;\r\n}\r\n\r\nfunction Playback({ times, canSeek, seek }: Props) {\r\n  const { duration, currentTime } = times;\r\n  function renderTime(seconds: number) {\r\n    const minutes = Math.floor(seconds / 60);\r\n    seconds = Math.round(seconds);\r\n\r\n    return (\r\n      <ProgressTime>\r\n        {`${minutes}:${seconds < 10 ? \"0\" + seconds : seconds}`}\r\n      </ProgressTime>\r\n    );\r\n  }\r\n\r\n  function handleChange(value: number) {\r\n    seek(duration * value);\r\n  }\r\n\r\n  const progress = duration ? currentTime / duration : 0;\r\n\r\n  return (\r\n    <Wrapper>\r\n      {renderTime(currentTime)}\r\n      <Slider value={progress} onChange={handleChange} canChange={canSeek} />\r\n      {renderTime(duration)}\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  times: selectTimes(state),\r\n  canSeek: selectCanSeek(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  seek\r\n};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(Playback);\r\n","import React, { HTMLAttributes } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport styled from \"../../styles/styled\";\r\nimport { changeVolume } from \"../../actions/player\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectVolume, selectIsMuted } from \"../../selectors/player\";\r\nimport { IconType, RoundButton } from \"../core\";\r\nimport Slider from \"./Slider\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  height: 100%;\r\n`;\r\n\r\nconst VolumeButton = styled(RoundButton)`\r\n  flex-shrink: 0;\r\n`;\r\n\r\nconst StyledSlider = styled(Slider)`\r\n  flex-grow: 1;\r\n`;\r\n\r\ninterface Props {\r\n  volume: number;\r\n  isMuted: boolean;\r\n  changeVolume: (volume: number, isMuted: boolean) => void;\r\n}\r\n\r\nfunction Volume({\r\n  className,\r\n  volume,\r\n  isMuted,\r\n  changeVolume\r\n}: Props & HTMLAttributes<HTMLElement>) {\r\n  function handleClick() {\r\n    changeVolume(volume, !isMuted);\r\n  }\r\n\r\n  function handleChange(value: number) {\r\n    changeVolume(value, false);\r\n  }\r\n\r\n  return (\r\n    <Wrapper className={className}>\r\n      <VolumeButton\r\n        iconType={isMuted ? IconType.VolumeOff : IconType.VolumeUp}\r\n        onClick={handleClick}\r\n      />\r\n      <StyledSlider value={isMuted ? 0 : volume} onChange={handleChange} />\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  volume: selectVolume(state),\r\n  isMuted: selectIsMuted(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  changeVolume\r\n};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(Volume);\r\n","import React, { HTMLAttributes } from \"react\";\r\nimport { withRouter, RouteComponentProps } from \"react-router\";\r\nimport styled from \"../../styles/styled\";\r\nimport { IconType, RoundButton } from \"../core\";\r\nimport TrackInfos from \"./TrackInfos\";\r\nimport Audio from \"./Audio\";\r\nimport Controls from \"./Controls\";\r\nimport Playback from \"./Playback\";\r\nimport Volume from \"./Volume\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  background: ${props => props.theme.background.tertiary};\r\n  box-sizing: border-box;\r\n  box-shadow: ${props => props.theme.shadow.middle};\r\n  display: flex;\r\n  padding: ${props => props.theme.thickness.small}px;\r\n  z-index: 2;\r\n`;\r\n\r\nconst ThirdWrapper = styled.div`\r\n  box-sizing: border-box;\r\n  height: 100%;\r\n`;\r\n\r\nconst LeftWrapper = styled(ThirdWrapper)`\r\n  display: none;\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.width.extraSmall}px) {\r\n    display: block;\r\n    width: 25%;\r\n  }\r\n`;\r\n\r\nconst CenterWrapper = styled(ThirdWrapper)`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-evenly;\r\n  width: 100%;\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.width.extraSmall}px) {\r\n    padding: 0 ${props => props.theme.thickness.small}px;\r\n    width: 50%;\r\n  }\r\n`;\r\n\r\nconst RightWrapper = styled(ThirdWrapper)`\r\n  align-items: center;\r\n  display: none;\r\n  justify-content: flex-end;\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.width.extraSmall}px) {\r\n    display: flex;\r\n    width: 25%;\r\n  }\r\n`;\r\n\r\nconst StyledVolume = styled(Volume)`\r\n  flex-grow: 1;\r\n`;\r\n\r\nconst QueueButton = styled(RoundButton).attrs(() => ({\r\n  iconType: IconType.QueueMusic\r\n}))``;\r\n\r\nfunction Player({\r\n  className,\r\n  history\r\n}: RouteComponentProps & HTMLAttributes<HTMLElement>) {\r\n  function handleQueueClick() {\r\n    history.push(`${process.env.PUBLIC_URL}/queue`);\r\n  }\r\n\r\n  return (\r\n    <Wrapper className={className}>\r\n      <LeftWrapper>\r\n        <TrackInfos />\r\n      </LeftWrapper>\r\n\r\n      <CenterWrapper>\r\n        <Controls />\r\n        <Playback />\r\n      </CenterWrapper>\r\n\r\n      <RightWrapper>\r\n        <QueueButton onClick={handleQueueClick} />\r\n        <StyledVolume />\r\n      </RightWrapper>\r\n\r\n      <Audio />\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nexport default withRouter(Player);\r\n","import React, { ReactNode } from \"react\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport styled from \"../../styles/styled\";\r\nimport Header from \"./Header\";\r\nimport Menu from \"./Menu\";\r\nimport Routes from \"./Routes\";\r\nimport NotificationList from \"./NotificationList\";\r\nimport Player from \"../player/Player\";\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n`;\r\n\r\nconst StyledHeader = styled(Header)`\r\n  flex-shrink: 0;\r\n  height: ${props => props.theme.thickness.large}px;\r\n  padding: ${props => props.theme.thickness.extraSmall}px\r\n    ${props => props.theme.thickness.small}px;\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.width.extraSmall}px) {\r\n    padding: ${props => props.theme.thickness.extraSmall}px\r\n      ${props => props.theme.thickness.medium}px;\r\n  }\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.width.small}px) {\r\n    padding: ${props => props.theme.thickness.extraSmall}px\r\n      ${props => props.theme.thickness.large}px;\r\n  }\r\n`;\r\n\r\nconst Body = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-grow: 1;\r\n  min-height: 0;\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.width.extraSmall}px) {\r\n    flex-direction: row;\r\n  }\r\n`;\r\n\r\nconst StyledMenu = styled(Menu)`\r\n  flex-shrink: 0;\r\n`;\r\n\r\nconst StyledRoutes = styled(Routes)`\r\n  flex-grow: 1;\r\n`;\r\n\r\nconst StyledNotificationList = styled(NotificationList)`\r\n  height: 100%;\r\n  position: fixed;\r\n  top: ${props => 2 * props.theme.thickness.large}px;\r\n  right: 0;\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.width.extraSmall}px) {\r\n    top: ${props =>\r\n      props.theme.thickness.large + 2 * props.theme.thickness.extraSmall}px;\r\n  }\r\n`;\r\n\r\nconst StyledPlayer = styled(Player)`\r\n  flex-shrink: 0;\r\n  height: 0;\r\n  position: relative;\r\n  top: ${props => props.theme.thickness.extraLarge}px;\r\n\r\n  @media (min-height: ${({ theme }) => theme.breakpoint.height.small}px) {\r\n    height: ${props => props.theme.thickness.extraLarge}px;\r\n    top: 0;\r\n  }\r\n`;\r\n\r\ninterface Props {\r\n  children: ReactNode;\r\n}\r\n\r\nfunction App({ children }: Props) {\r\n  return (\r\n    <Router>\r\n      <Wrapper>\r\n        <StyledHeader>{children}</StyledHeader>\r\n\r\n        <Body>\r\n          <StyledMenu />\r\n          <StyledRoutes />\r\n          <StyledNotificationList />\r\n        </Body>\r\n\r\n        <StyledPlayer />\r\n      </Wrapper>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { merge } from \"lodash\";\r\nimport {\r\n  AlbumActionType,\r\n  ArtistActionType,\r\n  BrowseActionType,\r\n  LibraryActionType,\r\n  PlaylistActionType,\r\n  SearchActionType\r\n} from \"../actions\";\r\nimport { EntitiesAction } from \"../actions/types\";\r\nimport {\r\n  SaveAlbumSuccessAction,\r\n  UnsaveAlbumSuccessAction,\r\n  CheckSavedAlbumSuccess\r\n} from \"../actions/library\";\r\nimport { AlbumDictionary } from \"./types\";\r\nimport createReducer from \"./createReducer\";\r\n\r\nexport interface State extends AlbumDictionary {}\r\n\r\nexport const initialState: State = {};\r\n\r\nfunction mergeAlbums(state: State, { payload }: EntitiesAction) {\r\n  return merge({}, state, payload.albums);\r\n}\r\n\r\nfunction updateAlbum(state: State, albumId: string, props: any) {\r\n  return {\r\n    ...state,\r\n    [albumId]: {\r\n      ...state[albumId],\r\n      ...props\r\n    }\r\n  };\r\n}\r\n\r\nexport default createReducer(initialState, {\r\n  [AlbumActionType.AlbumSuccess]: mergeAlbums,\r\n  [PlaylistActionType.PlaylistSuccess]: mergeAlbums,\r\n  [ArtistActionType.ArtistAlbumsSuccess]: mergeAlbums,\r\n  [BrowseActionType.NewReleasesSuccess]: mergeAlbums,\r\n  [SearchActionType.SearchSuccess]: mergeAlbums,\r\n  [LibraryActionType.SavedAlbumsSuccess]: mergeAlbums,\r\n  [LibraryActionType.SavedTracksSuccess]: mergeAlbums,\r\n  [LibraryActionType.CheckSavedAlbumSuccess]: (\r\n    state: State,\r\n    { payload }: CheckSavedAlbumSuccess\r\n  ) => updateAlbum(state, payload.albumId, { isSaved: payload[0] }),\r\n  [LibraryActionType.SaveAlbumSuccess]: (\r\n    state: State,\r\n    { payload }: SaveAlbumSuccessAction\r\n  ) => updateAlbum(state, payload.albumId, { isSaved: true }),\r\n  [LibraryActionType.UnsaveAlbumSuccess]: (\r\n    state: State,\r\n    { payload }: UnsaveAlbumSuccessAction\r\n  ) => updateAlbum(state, payload.albumId, { isSaved: false })\r\n});\r\n","import { merge } from \"lodash\";\r\nimport {\r\n  AlbumActionType,\r\n  ArtistActionType,\r\n  BrowseActionType,\r\n  FollowingActionType,\r\n  LibraryActionType,\r\n  PlaylistActionType,\r\n  SearchActionType\r\n} from \"../actions\";\r\nimport { EntitiesAction } from \"../actions/types\";\r\nimport {\r\n  ArtistAlbumsSuccessAction,\r\n  ArtistRelatedArtistsSuccessAction,\r\n  ArtistTopTracksSuccessAction\r\n} from \"../actions/artists\";\r\nimport {\r\n  FollowArtistSuccessAction,\r\n  UnfollowArtistSuccessAction,\r\n  CheckFollowedArtistSuccessAction\r\n} from \"../actions/following\";\r\nimport { ArtistDictionary } from \"./types\";\r\nimport createReducer from \"./createReducer\";\r\n\r\nexport interface State extends ArtistDictionary {}\r\n\r\nexport const initialState: State = {};\r\n\r\nfunction mergeArtists(state: State, { payload }: EntitiesAction) {\r\n  return merge({}, state, payload.artists);\r\n}\r\n\r\nfunction updateArtist(state: State, artistId: string, props: any) {\r\n  return {\r\n    ...state,\r\n    [artistId]: {\r\n      ...state[artistId],\r\n      ...props\r\n    }\r\n  };\r\n}\r\n\r\nexport default createReducer(initialState, {\r\n  [ArtistActionType.ArtistSuccess]: mergeArtists,\r\n  [ArtistActionType.ArtistAlbumsSuccess]: (\r\n    state: State,\r\n    action: ArtistAlbumsSuccessAction\r\n  ) => {\r\n    const { artistId, albums } = action.payload;\r\n    const nexState = mergeArtists(state, action);\r\n    return {\r\n      ...nexState,\r\n      [artistId]: {\r\n        ...nexState[artistId],\r\n        albums: Object.keys(albums)\r\n      }\r\n    };\r\n  },\r\n  [ArtistActionType.ArtistRelatedArtistsSuccess]: (\r\n    state: State,\r\n    action: ArtistRelatedArtistsSuccessAction\r\n  ) => {\r\n    const { artistId, artists } = action.payload;\r\n    const nexState = mergeArtists(state, action);\r\n    return {\r\n      ...nexState,\r\n      [artistId]: {\r\n        ...nexState[artistId],\r\n        relatedArtists: Object.keys(artists)\r\n      }\r\n    };\r\n  },\r\n  [ArtistActionType.ArtistTopTracksSuccess]: (\r\n    state: State,\r\n    action: ArtistTopTracksSuccessAction\r\n  ) => {\r\n    const { artistId, tracks } = action.payload;\r\n    const nexState = mergeArtists(state, action);\r\n    return {\r\n      ...nexState,\r\n      [artistId]: {\r\n        ...nexState[artistId],\r\n        topTracks: Object.keys(tracks)\r\n      }\r\n    };\r\n  },\r\n  [AlbumActionType.AlbumSuccess]: mergeArtists,\r\n  [PlaylistActionType.PlaylistSuccess]: mergeArtists,\r\n  [BrowseActionType.NewReleasesSuccess]: mergeArtists,\r\n  [SearchActionType.SearchSuccess]: mergeArtists,\r\n  [LibraryActionType.SavedAlbumsSuccess]: mergeArtists,\r\n  [LibraryActionType.SavedTracksSuccess]: mergeArtists,\r\n  [FollowingActionType.FollowedArtistsSuccess]: mergeArtists,\r\n  [FollowingActionType.CheckFollowedArtistSuccess]: (\r\n    state: State,\r\n    { payload }: CheckFollowedArtistSuccessAction\r\n  ) => updateArtist(state, payload.artistId, { isFollowed: payload[0] }),\r\n  [FollowingActionType.FollowArtistSuccess]: (\r\n    state: State,\r\n    { payload }: FollowArtistSuccessAction\r\n  ) => updateArtist(state, payload.artistId, { isFollowed: true }),\r\n  [FollowingActionType.UnfollowArtistSuccess]: (\r\n    state: State,\r\n    { payload }: UnfollowArtistSuccessAction\r\n  ) => updateArtist(state, payload.artistId, { isFollowed: false })\r\n});\r\n","import { ActionType } from \"../actions/authorization\";\r\nimport createReducer from \"./createReducer\";\r\n\r\nexport interface State {\r\n  isLoggedIn: boolean;\r\n}\r\n\r\nexport const initialState: State = {\r\n  isLoggedIn: false\r\n};\r\n\r\nexport default createReducer(initialState, {\r\n  [ActionType.ReceiveLogIn]: (state: State) => ({\r\n    ...state,\r\n    isLoggedIn: true\r\n  })\r\n});\r\n","import { BrowseActionType as ActionType } from \"../actions\";\r\nimport {\r\n  CategorySuccessAction,\r\n  CategoriesSuccessAction,\r\n  NewReleasesSuccessAction,\r\n  CategoryPlaylistsSuccessAction,\r\n  FeaturedPlaylistsSuccessAction\r\n} from \"../actions/browse\";\r\nimport { CategoryDictionary } from \"./types\";\r\nimport createReducer from \"./createReducer\";\r\n\r\nexport interface State {\r\n  categories: CategoryDictionary;\r\n  categoryPlaylistIds: string[];\r\n  featuredPlaylistIds: string[];\r\n  newReleaseIds: string[];\r\n}\r\n\r\nexport const initialState: State = {\r\n  categories: {},\r\n  categoryPlaylistIds: [],\r\n  featuredPlaylistIds: [],\r\n  newReleaseIds: []\r\n};\r\n\r\nexport default createReducer(initialState, {\r\n  [ActionType.CategoriesSuccess]: (\r\n    state: State,\r\n    action: CategoriesSuccessAction\r\n  ) => ({\r\n    ...state,\r\n    categories: action.payload.categories\r\n  }),\r\n  [ActionType.CategorySuccess]: (\r\n    state: State,\r\n    action: CategorySuccessAction\r\n  ) => ({\r\n    ...state,\r\n    categories: action.payload.categories\r\n  }),\r\n  [ActionType.CategoryPlaylistsSuccess]: (\r\n    state: State,\r\n    action: CategoryPlaylistsSuccessAction\r\n  ) => ({\r\n    ...state,\r\n    categoryPlaylistIds: Object.keys(action.payload.playlists)\r\n  }),\r\n  [ActionType.FeaturedPlaylistsSuccess]: (\r\n    state: State,\r\n    action: FeaturedPlaylistsSuccessAction\r\n  ) => ({\r\n    ...state,\r\n    featuredPlaylistIds: Object.keys(action.payload.playlists)\r\n  }),\r\n  [ActionType.NewReleasesSuccess]: (\r\n    state: State,\r\n    action: NewReleasesSuccessAction\r\n  ) => ({\r\n    ...state,\r\n    newReleaseIds: Object.keys(action.payload.albums)\r\n  })\r\n});\r\n","import { FollowingActionType as ActionType } from \"../actions\";\r\nimport {\r\n  FollowedArtistsSuccessAction,\r\n  FollowedPlaylistsSuccessAction\r\n} from \"../actions/following\";\r\nimport createReducer from \"./createReducer\";\r\n\r\nexport interface State {\r\n  userArtistIds: string[];\r\n  userPlaylistIds: string[];\r\n}\r\n\r\nexport const initialState: State = {\r\n  userArtistIds: [],\r\n  userPlaylistIds: []\r\n};\r\n\r\nexport default createReducer(initialState, {\r\n  [ActionType.FollowedArtistsSuccess]: (\r\n    state: State,\r\n    { payload }: FollowedArtistsSuccessAction\r\n  ) => ({\r\n    ...state,\r\n    userArtistIds: Object.keys(payload.artists || {})\r\n  }),\r\n  [ActionType.FollowedPlaylistsSuccess]: (\r\n    state: State,\r\n    { payload }: FollowedPlaylistsSuccessAction\r\n  ) => ({ ...state, userPlaylistIds: Object.keys(payload.playlists || []) })\r\n});\r\n","import { LibraryActionType as ActionType } from \"../actions\";\r\nimport {\r\n  SavedAlbumsSuccessAction,\r\n  SavedTracksSuccessAction\r\n} from \"../actions/library\";\r\nimport createReducer from \"./createReducer\";\r\n\r\nexport interface State {\r\n  userAlbumIds: string[];\r\n  userTrackIds: string[];\r\n}\r\n\r\nexport const initialState: State = {\r\n  userAlbumIds: [],\r\n  userTrackIds: []\r\n};\r\n\r\nexport default createReducer(initialState, {\r\n  [ActionType.SavedAlbumsSuccess]: (\r\n    state: State,\r\n    { payload }: SavedAlbumsSuccessAction\r\n  ) => ({ ...state, userAlbumIds: Object.keys(payload.albums || {}) }),\r\n  [ActionType.SavedTracksSuccess]: (\r\n    state: State,\r\n    { payload }: SavedTracksSuccessAction\r\n  ) => ({ ...state, userTrackIds: Object.keys(payload.tracks || {}) })\r\n});\r\n","import {\r\n  AlbumActionType,\r\n  ArtistActionType,\r\n  BrowseActionType,\r\n  FollowingActionType,\r\n  LibraryActionType,\r\n  PlaylistActionType,\r\n  SearchActionType,\r\n  UserProfileActionType\r\n} from \"../actions\";\r\nimport createReducer from \"./createReducer\";\r\n\r\nexport interface State {\r\n  count: number;\r\n}\r\n\r\nexport const initialState: State = {\r\n  count: 0\r\n};\r\n\r\nfunction increment(state: State) {\r\n  return {\r\n    ...state,\r\n    count: state.count + 1\r\n  };\r\n}\r\n\r\nfunction decrement(state: State) {\r\n  return {\r\n    ...state,\r\n    count: state.count - 1\r\n  };\r\n}\r\n\r\nexport default createReducer(initialState, {\r\n  [AlbumActionType.AlbumRequest]: increment,\r\n  [AlbumActionType.AlbumSuccess]: decrement,\r\n  [AlbumActionType.AlbumFailure]: decrement,\r\n  [ArtistActionType.ArtistRequest]: increment,\r\n  [ArtistActionType.ArtistSuccess]: decrement,\r\n  [ArtistActionType.ArtistFailure]: decrement,\r\n  [ArtistActionType.ArtistAlbumsRequest]: increment,\r\n  [ArtistActionType.ArtistAlbumsSuccess]: decrement,\r\n  [ArtistActionType.ArtistAlbumsFailure]: decrement,\r\n  [ArtistActionType.ArtistRelatedArtistsRequest]: increment,\r\n  [ArtistActionType.ArtistRelatedArtistsSuccess]: decrement,\r\n  [ArtistActionType.ArtistRelatedArtistsFailure]: decrement,\r\n  [ArtistActionType.ArtistAlbumsRequest]: increment,\r\n  [ArtistActionType.ArtistAlbumsSuccess]: decrement,\r\n  [ArtistActionType.ArtistAlbumsFailure]: decrement,\r\n  [BrowseActionType.CategoriesRequest]: increment,\r\n  [BrowseActionType.CategoriesSuccess]: decrement,\r\n  [BrowseActionType.CategoriesFailure]: decrement,\r\n  [BrowseActionType.CategoryRequest]: increment,\r\n  [BrowseActionType.CategorySuccess]: decrement,\r\n  [BrowseActionType.CategoryFailure]: decrement,\r\n  [BrowseActionType.CategoryPlaylistsRequest]: increment,\r\n  [BrowseActionType.CategoryPlaylistsSuccess]: decrement,\r\n  [BrowseActionType.CategoryPlaylistsFailure]: decrement,\r\n  [BrowseActionType.FeaturedPlaylistsRequest]: increment,\r\n  [BrowseActionType.FeaturedPlaylistsSuccess]: decrement,\r\n  [BrowseActionType.FeaturedPlaylistsFailure]: decrement,\r\n  [BrowseActionType.NewReleasesRequest]: increment,\r\n  [BrowseActionType.NewReleasesSuccess]: decrement,\r\n  [BrowseActionType.NewReleasesFailure]: decrement,\r\n  [FollowingActionType.FollowedArtistsRequest]: increment,\r\n  [FollowingActionType.FollowedArtistsSuccess]: decrement,\r\n  [FollowingActionType.FollowedArtistsFailure]: decrement,\r\n  [FollowingActionType.FollowedPlaylistsRequest]: increment,\r\n  [FollowingActionType.FollowedPlaylistsSuccess]: decrement,\r\n  [FollowingActionType.FollowedPlaylistsFailure]: decrement,\r\n  [LibraryActionType.SavedAlbumsRequest]: increment,\r\n  [LibraryActionType.SavedAlbumsSuccess]: decrement,\r\n  [LibraryActionType.SavedAlbumsFailure]: decrement,\r\n  [LibraryActionType.SavedTracksRequest]: increment,\r\n  [LibraryActionType.SavedTracksSuccess]: decrement,\r\n  [LibraryActionType.SavedTracksFailure]: decrement,\r\n  [PlaylistActionType.PlaylistRequest]: increment,\r\n  [PlaylistActionType.PlaylistSuccess]: decrement,\r\n  [PlaylistActionType.PlaylistFailure]: decrement,\r\n  [SearchActionType.SearchRequest]: increment,\r\n  [SearchActionType.SearchSuccess]: decrement,\r\n  [SearchActionType.SearchFailure]: decrement,\r\n  [UserProfileActionType.UserProfileRequest]: increment,\r\n  [UserProfileActionType.UserProfileSuccess]: decrement,\r\n  [UserProfileActionType.UserProfileFailure]: decrement\r\n});\r\n","import { v4 } from \"uuid\";\r\nimport { FollowingActionType, LibraryActionType } from \"../actions\";\r\nimport {\r\n  ActionType as NotificationActionType,\r\n  DeleteNotificationAction\r\n} from \"../actions/notifications\";\r\nimport createReducer from \"./createReducer\";\r\n\r\nexport interface Notification {\r\n  id: string;\r\n  message: string;\r\n}\r\n\r\nexport interface State extends Array<Notification> {}\r\n\r\nexport const initialState: State = [];\r\n\r\nfunction addNotification(state: State, message: string) {\r\n  return [{ id: v4(), message }, ...state];\r\n}\r\n\r\nexport default createReducer(initialState, {\r\n  [FollowingActionType.FollowArtistSuccess]: (state: State) =>\r\n    addNotification(state, \"Artist followed\"),\r\n  [FollowingActionType.UnfollowArtistSuccess]: (state: State) =>\r\n    addNotification(state, \"Artist unfollowed\"),\r\n  [FollowingActionType.FollowPlaylistSuccess]: (state: State) =>\r\n    addNotification(state, \"Playlist followed\"),\r\n  [FollowingActionType.UnfollowPlaylistSuccess]: (state: State) =>\r\n    addNotification(state, \"Playlist unfollowed\"),\r\n  [LibraryActionType.SaveAlbumSuccess]: (state: State) =>\r\n    addNotification(state, \"Album saved\"),\r\n  [LibraryActionType.UnsaveAlbumSuccess]: (state: State) =>\r\n    addNotification(state, \"Album unsaved\"),\r\n  [LibraryActionType.SaveTrackSuccess]: (state: State) =>\r\n    addNotification(state, \"Track saved\"),\r\n  [LibraryActionType.UnsaveTrackSuccess]: (state: State) =>\r\n    addNotification(state, \"Track unsaved\"),\r\n  [NotificationActionType.DeleteNotification]: (\r\n    state: State,\r\n    { payload }: DeleteNotificationAction\r\n  ) => [\r\n    ...state.filter(notification => notification.id !== payload.notificationId)\r\n  ]\r\n});\r\n","import { merge } from \"lodash\";\r\nimport {\r\n  BrowseActionType,\r\n  FollowingActionType,\r\n  PlaylistActionType,\r\n  SearchActionType\r\n} from \"../actions\";\r\nimport { EntitiesAction } from \"../actions/types\";\r\nimport {\r\n  FollowPlaylistSuccessAction,\r\n  UnfollowPlaylistSuccessAction,\r\n  CheckFollowedPlaylistSuccessAction\r\n} from \"../actions/following\";\r\nimport { PlaylistDictionary } from \"./types\";\r\nimport createReducer from \"./createReducer\";\r\n\r\nexport interface State extends PlaylistDictionary {}\r\n\r\nexport const initialState: State = {};\r\n\r\nfunction mergePlaylists(state: State, { payload }: EntitiesAction) {\r\n  return merge({}, state, payload.playlists);\r\n}\r\n\r\nfunction updatePlaylist(state: State, playlistId: string, props: any) {\r\n  return {\r\n    ...state,\r\n    [playlistId]: {\r\n      ...state[playlistId],\r\n      ...props\r\n    }\r\n  };\r\n}\r\n\r\nexport default createReducer(initialState, {\r\n  [PlaylistActionType.PlaylistSuccess]: mergePlaylists,\r\n  [BrowseActionType.CategoryPlaylistsSuccess]: mergePlaylists,\r\n  [BrowseActionType.FeaturedPlaylistsSuccess]: mergePlaylists,\r\n  [SearchActionType.SearchSuccess]: mergePlaylists,\r\n  [FollowingActionType.FollowedPlaylistsSuccess]: mergePlaylists,\r\n  [FollowingActionType.CheckFollowedPlaylistSuccess]: (\r\n    state: State,\r\n    { payload }: CheckFollowedPlaylistSuccessAction\r\n  ) => updatePlaylist(state, payload.playlistId, { isFollowed: payload[0] }),\r\n  [FollowingActionType.FollowPlaylistSuccess]: (\r\n    state: State,\r\n    { payload }: FollowPlaylistSuccessAction\r\n  ) => updatePlaylist(state, payload.playlistId, { isFollowed: true }),\r\n  [FollowingActionType.UnfollowPlaylistSuccess]: (\r\n    state: State,\r\n    { payload }: UnfollowPlaylistSuccessAction\r\n  ) => updatePlaylist(state, payload.playlistId, { isFollowed: false })\r\n});\r\n","import { Image, Type } from \"../types\";\r\nimport { SearchActionType as ActionType } from \"../actions\";\r\nimport {\r\n  SearchSuccessAction,\r\n  SelectAlbumAction,\r\n  SelectArtistAction,\r\n  SelectPlaylistAction\r\n} from \"../actions/search\";\r\nimport { getImageSource } from \"../utils\";\r\nimport { Collection } from \"./types\";\r\nimport createReducer from \"./createReducer\";\r\n\r\nexport interface State {\r\n  albumIds: string[];\r\n  artistIds: string[];\r\n  playlistIds: string[];\r\n  trackIds: string[];\r\n  recents: Collection[];\r\n}\r\n\r\nexport const initialState: State = {\r\n  albumIds: [],\r\n  artistIds: [],\r\n  playlistIds: [],\r\n  trackIds: [],\r\n  recents: []\r\n};\r\n\r\nfunction addRecent(\r\n  state: State,\r\n  item: { id: string; name: string; images: Image[] },\r\n  type: Type\r\n) {\r\n  return {\r\n    ...state,\r\n    recents: [\r\n      { type, id: item.id, name: item.name, imageSource: getImageSource(item) },\r\n      ...state.recents.filter(recent => recent.id !== item.id)\r\n    ]\r\n  };\r\n}\r\n\r\nexport default createReducer(initialState, {\r\n  [ActionType.SearchSuccess]: (\r\n    state: State,\r\n    { payload }: SearchSuccessAction\r\n  ) => {\r\n    const { results } = payload;\r\n    const { albums, artists, playlists, tracks } = results[\r\n      Object.keys(results)[0]\r\n    ];\r\n    return {\r\n      ...state,\r\n      albumIds: albums,\r\n      artistIds: artists,\r\n      playlistIds: playlists,\r\n      trackIds: tracks\r\n    };\r\n  },\r\n  [ActionType.ClearResults]: (state: State) => ({\r\n    ...state,\r\n    albumIds: [],\r\n    artistIds: [],\r\n    playlistIds: []\r\n  }),\r\n  [ActionType.SelectAlbum]: (state: State, { payload }: SelectAlbumAction) =>\r\n    addRecent(state, payload, Type.Album),\r\n  [ActionType.SelectArtist]: (state: State, { payload }: SelectArtistAction) =>\r\n    addRecent(state, payload, Type.Artist),\r\n  [ActionType.SelectPlaylist]: (\r\n    state: State,\r\n    { payload }: SelectPlaylistAction\r\n  ) => addRecent(state, payload, Type.Playlist),\r\n  [ActionType.ClearRecents]: (state: State) => ({\r\n    ...state,\r\n    recents: []\r\n  })\r\n});\r\n","import { merge } from \"lodash\";\r\nimport {\r\n  AlbumActionType,\r\n  ArtistActionType,\r\n  LibraryActionType,\r\n  PlaylistActionType,\r\n  SearchActionType\r\n} from \"../actions\";\r\nimport { EntitiesAction } from \"../actions/types\";\r\nimport {\r\n  SaveTrackSuccessAction,\r\n  UnsaveTrackSuccessAction,\r\n  CheckSavedTrackSuccess\r\n} from \"../actions/library\";\r\nimport { TrackDictionary } from \"./types\";\r\nimport createReducer from \"./createReducer\";\r\n\r\nexport interface State extends TrackDictionary {}\r\n\r\nexport const initialState: State = {};\r\n\r\nfunction mergeTracks(state: State, { payload }: EntitiesAction) {\r\n  return merge({}, state, payload.tracks);\r\n}\r\n\r\nfunction updateTrack(state: State, trackId: string, props: any) {\r\n  return {\r\n    ...state,\r\n    [trackId]: {\r\n      ...state[trackId],\r\n      ...props\r\n    }\r\n  };\r\n}\r\n\r\nexport default createReducer(initialState, {\r\n  [AlbumActionType.AlbumSuccess]: mergeTracks,\r\n  [ArtistActionType.ArtistTopTracksSuccess]: mergeTracks,\r\n  [PlaylistActionType.PlaylistSuccess]: mergeTracks,\r\n  [SearchActionType.SearchSuccess]: mergeTracks,\r\n  [LibraryActionType.SavedAlbumsSuccess]: mergeTracks,\r\n  [LibraryActionType.SavedTracksSuccess]: mergeTracks,\r\n  [LibraryActionType.CheckSavedTracksSuccess]: (\r\n    state: State,\r\n    { payload }: CheckSavedTrackSuccess\r\n  ) =>\r\n    payload.trackIds.reduce(\r\n      (previous, current, index) =>\r\n        updateTrack(previous, current, { isSaved: payload[index] }),\r\n      state\r\n    ),\r\n  [LibraryActionType.SaveTrackSuccess]: (\r\n    state: State,\r\n    { payload }: SaveTrackSuccessAction\r\n  ) => updateTrack(state, payload.trackId, { isSaved: true }),\r\n  [LibraryActionType.UnsaveTrackSuccess]: (\r\n    state: State,\r\n    { payload }: UnsaveTrackSuccessAction\r\n  ) => updateTrack(state, payload.trackId, { isSaved: false })\r\n});\r\n","import { UserProfile } from \"../types\";\r\nimport { UserProfileActionType as ActionType } from \"../actions\";\r\nimport { UserProfileSuccessAction } from \"../actions/userProfile\";\r\nimport createReducer from \"./createReducer\";\r\n\r\nexport interface State {\r\n  userProfile?: UserProfile;\r\n}\r\n\r\nexport const initialState: State = {};\r\n\r\nexport default createReducer(initialState, {\r\n  [ActionType.UserProfileSuccess]: (\r\n    state: State,\r\n    action: UserProfileSuccessAction\r\n  ) => ({\r\n    ...state,\r\n    userProfile: action.payload\r\n  })\r\n});\r\n","import { combineReducers } from \"redux\";\r\nimport * as albums from \"./albums\";\r\nimport * as artists from \"./artists\";\r\nimport * as authorization from \"./authorization\";\r\nimport * as browse from \"./browse\";\r\nimport * as following from \"./following\";\r\nimport * as library from \"./library\";\r\nimport * as loading from \"./loading\";\r\nimport * as notifications from \"./notifications\";\r\nimport * as player from \"./player\";\r\nimport * as playlists from \"./playlists\";\r\nimport * as search from \"./search\";\r\nimport * as tracks from \"./tracks\";\r\nimport * as userProfile from \"./userProfile\";\r\n\r\nexport interface State {\r\n  albums: albums.State;\r\n  artists: artists.State;\r\n  authorization: authorization.State;\r\n  browse: browse.State;\r\n  following: following.State;\r\n  library: library.State;\r\n  loading: loading.State;\r\n  notifications: notifications.State;\r\n  player: player.State;\r\n  playlists: playlists.State;\r\n  search: search.State;\r\n  tracks: tracks.State;\r\n  userProfile: userProfile.State;\r\n}\r\n\r\nexport const initialState = {\r\n  albums: albums.initialState,\r\n  artists: artists.initialState,\r\n  authorization: authorization.initialState,\r\n  browse: browse.initialState,\r\n  following: following.initialState,\r\n  library: library.initialState,\r\n  loading: loading.initialState,\r\n  notifications: notifications.initialState,\r\n  player: player.initialState,\r\n  playlists: playlists.initialState,\r\n  search: search.initialState,\r\n  tracks: tracks.initialState,\r\n  userProfile: userProfile.initialState\r\n};\r\n\r\nexport default combineReducers<State>({\r\n  albums: albums.default,\r\n  artists: artists.default,\r\n  authorization: authorization.default,\r\n  browse: browse.default,\r\n  following: following.default,\r\n  library: library.default,\r\n  loading: loading.default,\r\n  notifications: notifications.default,\r\n  player: player.default,\r\n  playlists: playlists.default,\r\n  search: search.default,\r\n  tracks: tracks.default,\r\n  userProfile: userProfile.default\r\n});\r\n","import { Dispatch } from \"redux\";\r\nimport { normalize } from \"normalizr\";\r\nimport { authorizedFetch } from \"./authorization\";\r\n\r\nexport default () => (next: Dispatch) => (action: any) => {\r\n  const { types, path, method, schema, data } = action;\r\n\r\n  if (types) {\r\n    const [requestType, successType, failureType] = types;\r\n\r\n    next({ type: requestType });\r\n\r\n    return authorizedFetch(\r\n      `${process.env.REACT_APP_BASE_URL}/${path}`,\r\n      method\r\n    ).then(async response => {\r\n      const text = await response.text();\r\n      const json = text ? JSON.parse(text) : null;\r\n\r\n      if (response.ok) {\r\n        const payload =\r\n          json && schema ? normalize(json, schema).entities : json;\r\n\r\n        next({\r\n          type: successType,\r\n          payload: data ? { ...payload, ...data } : payload\r\n        });\r\n      } else {\r\n        next({ type: failureType, payload: json.error });\r\n      }\r\n\r\n      return json;\r\n    });\r\n  } else {\r\n    next(action);\r\n  }\r\n};\r\n","import React, { useState } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport GlobalStyle from \"./styles/global\";\r\nimport styled, { ThemeProvider } from \"./styles/styled\";\r\nimport { ThemeMode, darkTheme, lightTheme } from \"./styles/theme\";\r\nimport { checkRedirection, initAuthorization } from \"./utils/authorization\";\r\nimport { RoundButton, IconType } from \"./components/core\";\r\nimport App from \"./components/layout/App\";\r\nimport { createStore } from \"./store\";\r\n\r\ncheckRedirection();\r\nconst store = createStore();\r\ninitAuthorization(store.dispatch);\r\n\r\ninterface ThemeButtonProps {\r\n  mode: ThemeMode;\r\n}\r\n\r\nconst ThemeButton = styled(RoundButton).attrs<\r\n  ThemeButtonProps,\r\n  { iconType: IconType }\r\n>(({ mode }) => ({\r\n  isOnPrimary: true,\r\n  iconType: mode === ThemeMode.Dark ? IconType.Brightness3 : IconType.WbSunny\r\n}))<ThemeButtonProps>`\r\n  margin-right: ${props => props.theme.thickness.extraSmall}px;\r\n`;\r\n\r\nfunction Root() {\r\n  const [themeMode, setThemeMode] = useState(ThemeMode.Dark);\r\n\r\n  function handleClick() {\r\n    setThemeMode(\r\n      themeMode === ThemeMode.Dark ? ThemeMode.Light : ThemeMode.Dark\r\n    );\r\n  }\r\n\r\n  const theme = themeMode === ThemeMode.Dark ? darkTheme : lightTheme;\r\n  return (\r\n    <>\r\n      <GlobalStyle theme={theme} />\r\n      <ThemeProvider theme={theme}>\r\n        <Provider store={store}>\r\n          <App>\r\n            <ThemeButton mode={themeMode} onClick={handleClick} />\r\n          </App>\r\n        </Provider>\r\n      </ThemeProvider>\r\n    </>\r\n  );\r\n}\r\n\r\nReactDOM.render(<Root />, document.getElementById(\"root\"));\r\n","import { createStore as _createStore, applyMiddleware } from \"redux\";\r\nimport thunkMiddleware from \"redux-thunk\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport rootReducer from \"./reducers\";\r\nimport fetchMiddleware from \"./utils/fetchMiddleware\";\r\n\r\nexport const createStore = () =>\r\n  _createStore(\r\n    rootReducer,\r\n    composeWithDevTools(applyMiddleware(thunkMiddleware, fetchMiddleware))\r\n  );\r\n"],"sourceRoot":""}