{"version":3,"sources":["styles/global.ts","styles/theme.ts","styles/styled.ts","actions/index.ts","reducers/createReducer.ts","reducers/artists.ts","reducers/tracks.ts","reducers/albums.ts","actions/authorization.ts","utils/authorization.ts","reducers/authorization.ts","reducers/playlists.ts","reducers/browse.ts","reducers/following.ts","reducers/library.ts","reducers/loading.ts","actions/notifications.ts","reducers/notifications.ts","actions/player.ts","reducers/player.ts","components/core/Image.tsx","utils/index.ts","reducers/search.ts","reducers/userProfile.ts","reducers/index.ts","styles/effects.ts","components/core/Button.tsx","components/core/Heading.tsx","components/core/Icon.tsx","components/core/PrimaryButton.tsx","components/core/RoundButton.tsx","components/core/Text.tsx","components/core/ToggleButton.tsx","components/layout/Brand.tsx","components/layout/User.tsx","components/layout/Header.tsx","actions/userProfile.ts","components/layout/RecentItem.tsx","components/layout/RecentList.tsx","components/layout/Menu.tsx","components/DefaultRoute.tsx","components/PrivateRoute.tsx","components/layout/Login.tsx","components/layout/SubMenu.tsx","components/layout/SubRoutes.tsx","actions/schemas.ts","components/covers/CoverItem.tsx","components/covers/CoverList.tsx","components/covers/CategoryCovers.tsx","components/withLoader.tsx","components/browse/Categories.tsx","actions/browse.ts","components/covers/AlbumCovers.tsx","components/browse/NewReleases.tsx","components/covers/PlaylistCovers.tsx","components/browse/FeaturedPlaylists.tsx","components/browse/Browse.tsx","components/browse/CategoryPlaylists.tsx","components/search/Recents.tsx","actions/search.ts","components/covers/ArtistCovers.tsx","components/layout/Empty.tsx","components/search/Results.tsx","components/search/Search.tsx","actions/types.ts","components/library/FollowedArtists.tsx","actions/following.ts","actions/library.ts","components/library/SavedAlbums.tsx","components/library/FollowedPlaylists.tsx","components/details/ArtistNames.tsx","components/details/AlbumName.tsx","components/details/TrackItem.tsx","components/details/TrackList.tsx","components/library/SavedTracks.tsx","components/library/Library.tsx","components/details/Header.tsx","components/details/PlaylistDetails.tsx","actions/playlists.ts","components/details/AlbumDetails.tsx","actions/albums.ts","components/details/ArtistDetails.tsx","actions/artists.ts","components/player/Queue.tsx","components/layout/Routes.tsx","components/layout/NotificationItem.tsx","components/layout/NotificationList.tsx","components/player/TrackInfos.tsx","components/player/Audio.tsx","components/player/Controls.tsx","components/player/Slider.tsx","components/player/Playback.tsx","components/player/Volume.tsx","components/player/Player.tsx","components/layout/App.tsx","index.tsx","middlewares/fetchMiddleware.ts","types/index.ts","types/Type.ts"],"names":["createGlobalStyle","ThemeMode","_templateObject","props","theme","background","secondary","onBackground","primary","fontSize","medium","fontWeight","normal","styledComponents","styled","default","ThemeProvider","css","keyframes","AlbumActionType","ArtistActionType","BrowseActionType","FollowingActionType","LibraryActionType","PlaylistActionType","SearchActionType","UserProfileActionType","breakpoint","extraSmall","small","color","large","extraLarge","extraExtraLarge","light","bold","onPrimary","tertiary","hover","active","shadow","low","middle","high","thickness","extraExtraSmall","extraExtraExtraLarge","darkTheme","Object","objectSpread","error","lightTheme","createReducer","initialState","handlers","state","arguments","length","undefined","action","hasOwnProperty","type","mergeArtists","_ref","payload","merge","artists","updateArtist","artistId","defineProperty","_createReducer","ArtistSuccess","ArtistAlbumsSuccess","_action$payload","albums","nexState","keys","ArtistRelatedArtistsSuccess","_action$payload2","relatedArtists","ArtistTopTracksSuccess","_action$payload3","tracks","topTracks","AlbumSuccess","PlaylistSuccess","NewReleasesSuccess","SearchSuccess","SavedAlbumsSuccess","SavedTracksSuccess","FollowedArtistsSuccess","CheckFollowedArtistSuccess","_ref2","isFollowed","FollowArtistSuccess","_ref3","UnfollowArtistSuccess","_ref4","selectArtist","_ref5","selectArtistAlbums","artist","selectAlbums","selectArtistRelatedArtists","selectArtists","selectArtistTopTracks","selectTracks","filter","track","createSelector","memoize","artistIds","map","selectPlayableTracks","preview_url","selectIsPlayable","mergeTracks","updateTrack","trackId","tracks_createReducer","CheckSavedTracksSuccess","trackIds","reduce","previous","current","index","isSaved","SaveTrackSuccess","UnsaveTrackSuccess","selectTrack","selectTrackAlbum","selectAlbum","album","selectTrackArtists","mergeAlbums","updateAlbum","albumId","albums_createReducer","CheckSavedAlbumSuccess","SaveAlbumSuccess","UnsaveAlbumSuccess","selectAlbumArtists","_ref6","_ref7","selectAlbumTracks","albumIds","ActionType","LOG_IN_URL","concat","process","encodeURIComponent","join","REGEX","ACCESS_TOKEN","TOKEN_TYPE","EXPIRES_AT","logInRedirect","Promise","resolve","reject","window","addEventListener","handleStorage","event","key","removeEventListener","location","assign","authorizedFetch","url","method","tokenType","localStorage","accessToken","fetch","headers","Authorization","receiveLogIn","ReceiveLogIn","isLoggedIn","selectIsLoggedIn","authorization","mergePlaylists","playlists","updatePlaylist","playlistId","playlists_createReducer","CategoryPlaylistsSuccess","FeaturedPlaylistsSuccess","FollowedPlaylistsSuccess","CheckFollowedPlaylistSuccess","FollowPlaylistSuccess","UnfollowPlaylistSuccess","selectPlaylist","selectPlaylistTracks","playlist","selectPlaylists","playlistIds","categories","categoryPlaylistIds","featuredPlaylistIds","newReleaseIds","browse_createReducer","CategoriesSuccess","CategorySuccess","selectCategories","browse","values","selectCategory","categoryId","selectCategoryPlaylists","selectFeaturedPlaylists","selectNewReleases","userArtistIds","userPlaylistIds","following_createReducer","selectFollowedArtists","following","selectFollowedPlaylists","userAlbumIds","userTrackIds","library_createReducer","selectSavedAlbums","library","selectSavedTracks","increment","count","decrement","loading_createReducer","AlbumRequest","AlbumFailure","ArtistRequest","ArtistFailure","ArtistAlbumsRequest","ArtistAlbumsFailure","ArtistRelatedArtistsRequest","ArtistRelatedArtistsFailure","CategoriesRequest","CategoriesFailure","CategoryRequest","CategoryFailure","CategoryPlaylistsRequest","CategoryPlaylistsFailure","FeaturedPlaylistsRequest","FeaturedPlaylistsFailure","NewReleasesRequest","NewReleasesFailure","FollowedArtistsRequest","FollowedArtistsFailure","FollowedPlaylistsRequest","FollowedPlaylistsFailure","SavedAlbumsRequest","SavedAlbumsFailure","SavedTracksRequest","SavedTracksFailure","PlaylistRequest","PlaylistFailure","SearchRequest","SearchFailure","UserProfileRequest","UserProfileSuccess","UserProfileFailure","selectIsLoading","loading","addNotification","message","id","v4","toConsumableArray","notifications_createReducer","NotificationActionType","DeleteNotification","notification","notificationId","PlayerState","Command","providers","_providers","Type","Album","Artist","selectArtistTracks","Playlist","Library","loadCollection","collectionId","collectionType","dispatch","getState","getTrackIds","LoadCollection","playPause","selectIsPlaying","Pause","Play","loadPlayPause","isLoaded","selectIsLoaded","LoadTrack","loadTrack","collections","trackIndex","playerState","None","duration","currentTime","isShuffled","isLooped","volume","isMuted","command","player_createReducer","recent","indexOf","TrackLoaded","Playing","Update","Paused","Seek","Seeked","Ended","Next","Previous","ToggleShuffle","ToggleLoop","ChangeVolume","VolumeChanged","selectCollection","player","selectLoadedTrack","_state$player","selectLoadedTracks","selectLoadedAlbum","selectLoadedArtists","_state$player2","recents","selectCanPlayPause","selectCanSeek","selectCanNext","_state$player3","selectCanPrevious","_state$player4","selectTimes","_ref10","_ref11","selectVolume","_ref12","selectIsMuted","_ref13","selectCommand","ImageShape","selectRecents","_ref14","_ref15","_ref16","_ref17","collection","StyledImg","img","Image_templateObject","shape","Round","Container","div","_templateObject2","StyledText","span","_templateObject3","Image","className","source","_useState","useState","_useState2","slicedToArray","setIsLoaded","react_default","a","createElement","src","onLoad","defaultProps","Square","getArtistNames","name","getImageSource","object","images","getImageShape","addRecent","item","imageSource","search_createReducer","results","_results$Object$keys$","ClearResults","SelectAlbum","SelectArtist","SelectPlaylist","ClearRecents","selectAlbumsById","search","selectArtistsById","sort","x","y","popularity","selectPlaylistsById","userProfile","selectUserProfile","combineReducers","notifications","clickable","Button","button","Button_templateObject","IconType","Heading","h2","Heading_templateObject","Icon","rest","objectWithoutProperties","PrimaryButton","attrs","PrimaryButton_templateObject","StyledButton","RoundButton_templateObject","StyledIcon","RoundButton_templateObject2","RoundButton","iconType","Text","Text_templateObject","ToggleButton","ToggleButton_templateObject","isToggled","StyledLink","Link","Brand_templateObject","Brand_templateObject2","Brand_templateObject3","Brand","to","Brand_StyledIcon","Wifi","Brand_StyledText","Wrapper","User_templateObject","User_templateObject2","User_templateObject3","User","display_name","User_StyledIcon","Person","User_StyledText","header","Header_templateObject","Left","Header_templateObject2","Right","Header_templateObject3","mapDispatch","getUserProfile","types","path","connect","children","useEffect","Header_Wrapper","layout_Brand","layout_User","RecentItem_templateObject","StyledImage","RecentItem_templateObject2","RecentItem_templateObject3","Name","_templateObject4","_templateObject5","withRouter","history","RecentItem_StyledButton","onClick","push","RecentItem_Container","capitalize","Title","h3","RecentList_templateObject","layout_RecentItem","Menu_templateObject","List","ul","Menu_templateObject2","StyledNavLink","NavLink","Menu_templateObject3","Menu_templateObject4","StyledRecents","RecentList","Menu_templateObject5","items","icon","Home","text","Search","LibraryBooks","Menu","Menu_Wrapper","Menu_StyledIcon","DefaultRoute","from","Route","exact","render","Redirect","Component","component","Fragment","Login_templateObject","Login_templateObject2","LogIn","Login_Wrapper","core_Heading","Login_StyledButton","SubMenu_templateObject","SubMenu_templateObject2","match","SubMenu_List","SubMenu_StyledNavLink","defaultItem","find","components_DefaultRoute","components_PrivateRoute","schema","Entity","processStrategy","Artists","Category","PagedAlbums","PagedArtists","PagedCategories","PagedPlaylists","PagedTracks","Results","SavedAlbums","Track","parent","Tracks","define","Schemas","CoverItem_templateObject","StyledImge","CoverItem_templateObject2","CoverItem_templateObject3","SubTitle","CoverItem_templateObject4","CoverItem","cover","CoverItem_StyledButton","imageShape","CoverItem_Title","title","subTitle","StyledList","CoverList_templateObject","splitWidth","times","StyledItem","li","CoverList_templateObject2","CoverList","covers","covers_CoverItem","category","icons","getCovers","covers_CoverList","Fader","withLoader_templateObject","isLoading","Loader","withLoader_templateObject2","withLoader","WrappedComponent","prevUrl","setPrevUrl","_useState3","_useState4","hasLoaded","setHasLoaded","getCategories","covers_CategoryCovers","selectAbumArtists","onSelect","getAlbums","covers_AlbumCovers","owner","getPlaylists","Categories","NewReleases","PlaylistCovers","Browse","layout_SubMenu","layout_SubRoutes","getCategory","getCategoryPlaylists","params","Recents_templateObject","StyledCoverList","Recents_templateObject2","ClearButton","Recents_templateObject3","clearRecents","Recents_Wrapper","Empty_templateObject","SentimentVeryDissatisfied","Empty_templateObject2","Empty_templateObject3","Empty","Empty_Wrapper","Empty_StyledIcon","Empty_StyledText","Results_templateObject","Section","section","Results_templateObject2","covers_ArtistCovers","Albums","Playlists","selectAlbumById","selectArtistById","selectPlaylistById","Results_Wrapper","Results_Artists","layout_Empty","StyledInput","input","Search_templateObject","FetchMethod","query","encoded","value","setValue","debounced","useCallback","_","debounce","onChange","target","placeholder","autoFocus","search_Results","search_Recents","getFollowedArtists","checkSavedTracks","CheckSavedTracksRequest","CheckSavedTracksFailure","data","getSavedAlbums","getFollowedPlaylists","ArtistNames_templateObject","Item","ArtistNames_templateObject2","ArtistNames_templateObject3","ArtistNames","ArtistNames_List","ArtistNames_StyledLink","AlbumName_templateObject","AlbumName","AlbumName_StyledLink","TrackItem_templateObject","PlayButton","isPlaying","PlayArrow","TrackItem_templateObject2","MusicIcon","MusicNote","TrackItem_templateObject3","NoMusicIcon","MusicOff","TrackItem_templateObject4","Names","TrackItem_templateObject5","_templateObject6","Others","_templateObject7","Separator","_templateObject8","Duration","_templateObject9","FavoriteButton","Favorite","_templateObject10","isDisabled","toggleSavedTrack","UnsaveTrackRequest","UnsaveTrackFailure","Delete","UnsaveTrack","SaveTrackRequest","SaveTrackFailure","Put","saveTrack","onTogglePlay","TrackItem_Wrapper","TrackItem_Name","details_ArtistNames","details_AlbumName","seconds","duration_ms","minutes","Math","floor","renderDuration","TrackList_templateObject","TrackList","TrackList_StyledList","details_TrackItem","CollectionId","getSavedTracks","success","json","FollowedArtists","FollowedPlaylists","details_TrackList","details_Header_templateObject","details_Header_templateObject2","Vertical","details_Header_templateObject3","Header_templateObject4","Header_templateObject5","Horizontal","Header_templateObject6","Header_templateObject7","Header_templateObject8","Header","canPlay","isFavorite","onToggleFavorite","details_Header_Wrapper","Header_StyledImage","Header_Title","Header_SubTitle","Header_PlayButton","disabled","Header_FavoriteButton","PlaylistDetails_templateObject","getPlaylist","userId","CheckFollowedPlaylistRequest","CheckFollowedPlaylistFailure","checkFollowedPlaylist","toggleFollowPlaylist","UnfollowPlaylistRequest","UnfollowPlaylistFailure","unfollowPlaylist","FollowPlaylistRequest","FollowPlaylistFailure","followPlaylist","ownProps","isPlayable","handleTogglePlay","handleToggleFavorite","PlaylistDetails_Wrapper","details_Header","AlbumDetails_templateObject","getAlbum","CheckSavedAlbumRequest","CheckSavedAlbumFailure","checkSavedAlbum","toggleSavedAlbum","UnsaveAlbumRequest","UnsaveAlbumFailure","UnsaveAlbum","SaveAlbumRequest","SaveAlbumFailure","saveAlbum","AlbumDetails_Wrapper","ArtistDetails_templateObject","ArtistDetails_templateObject2","TopTracks","ArtistDetails_Section","RelatedArtists","getArtist","getArtistAlbums","getArtistRelatedArtists","ArtistTopTracksRequest","ArtistTopTracksFailure","getArtistTopTracks","CheckFollowedArtistRequest","CheckFollowedArtistFailure","checkFollowedArtist","toggleFollowArtist","UnfollowArtistRequest","UnfollowArtistFailure","unfollowArtist","FollowArtistRequest","FollowArtistFailure","followArtist","ArtistDetails_Wrapper","ArtistDetails_Albums","Queue_templateObject","Queue_Wrapper","Routes_templateObject","publicUrl","Routes","Routes_Wrapper","CategoryPlaylists","PlaylistDetails","AlbumDetails","ArtistDetails","Queue","NotificationItem_templateObject","isExiting","DoneIcon","Done","NotificationItem_templateObject2","NotificationItem_templateObject3","Clear","NotificationItem_templateObject4","deleteNotification","setIsExiting","exit","setTimeout","NotificationItem_Wrapper","NotificationItem_Text","NotificationItem_ClearButton","NotificationList_templateObject","NotificationList_templateObject2","NotificationList_Wrapper","NotificationList_List","layout_NotificationItem","TrackInfos_templateObject","StyedImage","TrackInfos_templateObject2","TrackInfos_templateObject3","TrackInfos_templateObject4","TrackInfos_templateObject5","TrackInfos_Wrapper","TrackInfos_Container","TrackInfos_Title","TrackInfos_FavoriteButton","trackLoaded","playing","update","elapsed","paused","seeked","volumeChanged","ended","loadedTrack","audio","useRef","currentAudio","play","pause","ref","onLoadedMetadata","onPlay","onTimeUpdate","onPause","onSeeked","onVolumeChange","onEnded","Controls_templateObject","StyledRoundButton","Controls_templateObject2","StyledToggleButton","Controls_templateObject3","ShuffleButton","Shuffle","Controls_templateObject4","PreviousButton","SkipPrevious","Controls_templateObject5","Controls_templateObject6","NextButton","SkipNext","Controls_templateObject7","LoopButton","Loop","Controls_templateObject8","toggleShuffle","next","toggleLoop","_ref8","canPrevious","canPlayPause","canNext","_ref9","Controls_Wrapper","Controls_PlayButton","Slider_templateObject","Slider_templateObject2","style","width","Slider_templateObject3","Thumb","position","left","Slider_templateObject4","Slider_templateObject5","Slider","canChange","isDown","setIsDown","localValue","setLocalValue","wrapper","thumb","getValue","currentWrapper","currentTHunb","getBoundingClientRect","clientWidth","handleMouseMove","pageX","handleMouseUp","document","currentValue","Slider_Wrapper","onMouseDown","Slider_Container","Slider_Left","Slider_Right","Playback_templateObject","ProgressTime","Playback_templateObject2","Playback","canSeek","onSeek","renderTime","round","progress","Playback_Wrapper","player_Slider","Volume_templateObject","VolumeButton","Volume_templateObject2","StyledSlider","Volume_templateObject3","changeVolume","Volume_Wrapper","VolumeOff","VolumeUp","Player_templateObject","ThirdWrapper","Player_templateObject2","LeftWrapper","Player_templateObject3","CenterWrapper","Player_templateObject4","RightWrapper","Player_templateObject5","StyledVolume","Volume","Player_templateObject6","QueueButton","QueueMusic","Player_templateObject7","seek","time","Player_Wrapper","player_TrackInfos","player_Controls","player_Playback","player_Audio","App_templateObject","StyledHeader","App_templateObject2","Body","App_templateObject3","StyledMenu","App_templateObject4","StyledRoutes","App_templateObject5","StyledNotificationList","NotificationList","App_templateObject6","StyledPlayer","Player","App_templateObject7","App","BrowserRouter","App_Wrapper","hash","date","Date","setSeconds","getSeconds","parseInt","toString","checkRedirection","store","createStore","rootReducer","composeWithDevTools","applyMiddleware","thunkMiddleware","_types","requestType","successType","failureType","then","asyncToGenerator","regenerator_default","mark","_callee","response","wrap","_context","prev","sent","JSON","parse","ok","normalize","entities","stop","_x","apply","this","now","ThemeButton","mode","Dark","Brightness3","WbSunny","src_templateObject","ReactDOM","themeMode","setThemeMode","global","es","layout_App","Light","getElementById","_Album__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","o","d","__webpack_exports__","_Artist__WEBPACK_IMPORTED_MODULE_1__","_Category__WEBPACK_IMPORTED_MODULE_2__","_Copyright__WEBPACK_IMPORTED_MODULE_3__","_Endpoint__WEBPACK_IMPORTED_MODULE_4__","_ExternalId__WEBPACK_IMPORTED_MODULE_5__","_ExternalUrl__WEBPACK_IMPORTED_MODULE_6__","_Followers__WEBPACK_IMPORTED_MODULE_7__","_Image__WEBPACK_IMPORTED_MODULE_8__","_Paging__WEBPACK_IMPORTED_MODULE_9__","_Playlist__WEBPACK_IMPORTED_MODULE_10__","_PlaylistTrack__WEBPACK_IMPORTED_MODULE_11__","_PublicUser__WEBPACK_IMPORTED_MODULE_12__","_Restriction__WEBPACK_IMPORTED_MODULE_13__","_Track__WEBPACK_IMPORTED_MODULE_14__","_TrackLink__WEBPACK_IMPORTED_MODULE_15__","_Type__WEBPACK_IMPORTED_MODULE_16__"],"mappings":"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","file":"static/js/main.3033369e.chunk.js","sourcesContent":["import { createGlobalStyle } from \"styled-components\";\r\nimport { Theme } from \"./theme\";\r\n\r\nexport default createGlobalStyle<{ theme: Theme }>`\r\n  html, body, #root {\r\n    height: 100%;\r\n  }\r\n\r\n  body, h1, h2, h3, button, ul {\r\n    margin: 0;\r\n    padding: 0;\r\n  }\r\n\r\n  body {\r\n    background: ${props => props.theme.background.secondary};\r\n    color: ${props => props.theme.onBackground.primary};\r\n    font-family: \"Roboto\", sans-serif;\r\n    font-size: ${props => props.theme.fontSize.medium}px;\r\n    font-weight: ${props => props.theme.fontWeight.normal};\r\n    user-select: none;\r\n  }\r\n\r\n  a {\r\n    color: ${props => props.theme.onBackground.primary};\r\n    text-decoration: none;\r\n  }\r\n\r\n  button {\r\n    background: transparent;\r\n    border: 0;\r\n    font-family: \"Roboto\", sans-serif;\r\n    font-size: ${props => props.theme.fontSize.medium}px;\r\n    font-weight: ${props => props.theme.fontWeight.normal};\r\n\r\n    &:not(:disabled) {\r\n      cursor: pointer;\r\n    }\r\n\r\n    &:disabled {\r\n      cursor: not-allowed; \r\n    }\r\n  }\r\n\r\n  a, button, input {\r\n    outline: none;\r\n\r\n    &:focus {\r\n      border: 0;\r\n    }\r\n  }\r\n\r\n  ul {\r\n    list-style: none;\r\n  }\r\n`;\r\n","export enum ThemeMode {\r\n  Dark = \"DARK\",\r\n  Light = \"LIGHT\"\r\n}\r\n\r\nexport interface Theme {\r\n  background: {\r\n    primary: string;\r\n    secondary: string;\r\n    tertiary: string;\r\n  };\r\n  breakpoint: {\r\n    extraSmall: number;\r\n    small: number;\r\n  };\r\n  color: {\r\n    primary: string;\r\n    error: string;\r\n  };\r\n  fontSize: {\r\n    small: number;\r\n    medium: number;\r\n    large: number;\r\n    extraLarge: number;\r\n    extraExtraLarge: number;\r\n  };\r\n  fontWeight: {\r\n    light: number;\r\n    normal: number;\r\n    bold: number;\r\n  };\r\n  onBackground: {\r\n    primary: string;\r\n    secondary: string;\r\n    tertiary: string;\r\n    hover: string;\r\n    active: string;\r\n  };\r\n  onPrimary: {\r\n    primary: string;\r\n    secondary: string;\r\n    tertiary: string;\r\n    hover: string;\r\n    active: string;\r\n  };\r\n  shadow: {\r\n    low: string;\r\n    middle: string;\r\n    high: string;\r\n  };\r\n  thickness: {\r\n    extraExtraSmall: number;\r\n    extraSmall: number;\r\n    small: number;\r\n    medium: number;\r\n    large: number;\r\n    extraLarge: number;\r\n    extraExtraLarge: number;\r\n    extraExtraExtraLarge: number;\r\n  };\r\n}\r\n\r\nconst theme = {\r\n  breakpoint: {\r\n    extraSmall: 480,\r\n    small: 960\r\n  },\r\n  color: {\r\n    primary: \"#1db954\"\r\n  },\r\n  fontSize: {\r\n    small: 12,\r\n    medium: 16,\r\n    large: 20,\r\n    extraLarge: 24,\r\n    extraExtraLarge: 32\r\n  },\r\n  fontWeight: {\r\n    light: 300,\r\n    normal: 400,\r\n    bold: 500\r\n  },\r\n  onPrimary: {\r\n    primary: \"rgba(255, 255, 255, 1)\",\r\n    secondary: \"rgba(255, 255, 255, 0.70)\",\r\n    tertiary: \"rgba(255, 255, 255, 0.50)\",\r\n    hover: \"rgba(255, 255, 255, 0.08)\",\r\n    active: \"rgba(255, 255, 255, 0.16)\"\r\n  },\r\n  shadow: {\r\n    low: \"0 1px 2px rgba(0, 0, 0, .5)\",\r\n    middle: \"0 2px 4px rgba(0, 0, 0, .5)\",\r\n    high: \"0 4px 8px rgba(0, 0, 0, .5)\"\r\n  },\r\n  thickness: {\r\n    extraExtraSmall: 3.125,\r\n    extraSmall: 6.25,\r\n    small: 12.5,\r\n    medium: 25,\r\n    large: 50,\r\n    extraLarge: 100,\r\n    extraExtraLarge: 200,\r\n    extraExtraExtraLarge: 400\r\n  }\r\n};\r\n\r\nexport const darkTheme: Theme = {\r\n  ...theme,\r\n  background: {\r\n    primary: \"#000000\",\r\n    secondary: \"#212121\",\r\n    tertiary: \"#303030\"\r\n  },\r\n  color: {\r\n    ...theme.color,\r\n    error: \"#e57373\"\r\n  },\r\n  onBackground: {\r\n    primary: \"rgba(255, 255, 255, 1)\",\r\n    secondary: \"rgba(255, 255, 255, 0.70)\",\r\n    tertiary: \"rgba(255, 255, 255, 0.50)\",\r\n    hover: \"rgba(255, 255, 255, 0.08)\",\r\n    active: \"rgba(255, 255, 255, 0.16)\"\r\n  }\r\n};\r\n\r\nexport const lightTheme: Theme = {\r\n  ...theme,\r\n  background: {\r\n    primary: \"#fafafa\",\r\n    secondary: \"#f5f5f5\",\r\n    tertiary: \"#e0e0e0\"\r\n  },\r\n  color: {\r\n    ...theme.color,\r\n    error: \"#d32f2f\"\r\n  },\r\n  onBackground: {\r\n    primary: \"rgba(0, 0, 0, 0.87)\",\r\n    secondary: \"rgba(0, 0, 0, 0.54)\",\r\n    tertiary: \"rgba(0, 0, 0, 0.38)\",\r\n    hover: \"rgba(0, 0, 0, 0.04)\",\r\n    active: \"rgba(0, 0, 0, 0.08)\"\r\n  }\r\n};\r\n","import * as styledComponents from \"styled-components\";\r\nimport { Theme } from \"./theme\";\r\n\r\nconst {\r\n  default: styled,\r\n  css,\r\n  createGlobalStyle,\r\n  keyframes,\r\n  ThemeProvider\r\n} = styledComponents as styledComponents.ThemedStyledComponentsModule<Theme>;\r\n\r\nexport { css, createGlobalStyle, keyframes, ThemeProvider };\r\nexport default styled;\r\n","export enum AlbumActionType {\r\n  AlbumRequest = \"ALBUM_REQUEST\",\r\n  AlbumSuccess = \"ALBUM_SUCCESS\",\r\n  AlbumFailure = \"ALBUM_FAILURE\"\r\n}\r\n\r\nexport enum ArtistActionType {\r\n  ArtistRequest = \"ARTIST_REQUEST\",\r\n  ArtistSuccess = \"ARTIST_SUCCESS\",\r\n  ArtistFailure = \"ARTIST_FAILURE\",\r\n  ArtistAlbumsRequest = \"ARTIST_ALBUMS_REQUEST\",\r\n  ArtistAlbumsSuccess = \"ARTIST_ALBUMS_SUCCESS\",\r\n  ArtistAlbumsFailure = \"ARTIST_ALBUMS_FAILURE\",\r\n  ArtistRelatedArtistsRequest = \"ARTIST_RELATED_ARTISTS_REQUEST\",\r\n  ArtistRelatedArtistsSuccess = \"ARTIST_RELATED_ARTISTS_SUCCESS\",\r\n  ArtistRelatedArtistsFailure = \"ARTIST_RELATED_ARTISTS_FAILURE\",\r\n  ArtistTopTracksRequest = \"ARTIST_TOP_TRACKS_REQUEST\",\r\n  ArtistTopTracksSuccess = \"ARTIST_TOP_TRACKS_SUCCESS\",\r\n  ArtistTopTracksFailure = \"ARTIST_TOP_TRACKS_FAILURE\"\r\n}\r\n\r\nexport enum BrowseActionType {\r\n  CategoriesRequest = \"CATEGORIES_REQUEST\",\r\n  CategoriesSuccess = \"CATEGORIES_SUCCESS\",\r\n  CategoriesFailure = \"CATEGORIES_FAILURE\",\r\n  CategoryRequest = \"CATEGORY_REQUEST\",\r\n  CategorySuccess = \"CATEGORY_SUCCESS\",\r\n  CategoryFailure = \"CATEGORY_FAILURE\",\r\n  CategoryPlaylistsRequest = \"CATEGORY_PLAYLISTS_REQUEST\",\r\n  CategoryPlaylistsSuccess = \"CATEGORY_PLAYLISTS_SUCCESS\",\r\n  CategoryPlaylistsFailure = \"CATEGORY_PLAYLISTS_FAILURE\",\r\n  FeaturedPlaylistsRequest = \"FEATURED_PLAYLISTS_REQUEST\",\r\n  FeaturedPlaylistsSuccess = \"FEATURED_PLAYLISTS_SUCCESS\",\r\n  FeaturedPlaylistsFailure = \"FEATURED_PLAYLISTS_FAILURE\",\r\n  NewReleasesRequest = \"NEW_RELEASES_REQUEST\",\r\n  NewReleasesSuccess = \"NEW_RELEASES_SUCCESS\",\r\n  NewReleasesFailure = \"NEW_RELEASES_FAILURE\"\r\n}\r\n\r\nexport enum FollowingActionType {\r\n  FollowedArtistsRequest = \"FOLLOWED_ARTISTS_REQUEST\",\r\n  FollowedArtistsSuccess = \"FOLLOWED_ARTISTS_SUCCESS\",\r\n  FollowedArtistsFailure = \"FOLLOWED_ARTISTS_FAILURE\",\r\n  CheckFollowedArtistRequest = \"CHECK_FOLLOWED_ARTIST_REQUEST\",\r\n  CheckFollowedArtistSuccess = \"CHECK_FOLLOWED_ARTIST_SUCCESS\",\r\n  CheckFollowedArtistFailure = \"CHECK_FOLLOWED_ARTIST_FAILURE\",\r\n  FollowArtistRequest = \"FOLLOW_ARTIST_REQUEST\",\r\n  FollowArtistSuccess = \"FOLLOW_ARTIST_SUCCESS\",\r\n  FollowArtistFailure = \"FOLLOW_ARTIST_FAILURE\",\r\n  UnfollowArtistRequest = \"UNFOLLOW_ARTIST_REQUEST\",\r\n  UnfollowArtistSuccess = \"UNFOLLOW_ARTIST_SUCCESS\",\r\n  UnfollowArtistFailure = \"UNFOLLOW_ARTIST_FAILURE\",\r\n  FollowedPlaylistsRequest = \"FOLLOWED_PLAYLISTS_REQUEST\",\r\n  FollowedPlaylistsSuccess = \"FOLLOWED_PLAYLISTS_SUCCESS\",\r\n  FollowedPlaylistsFailure = \"FOLLOWED_PLAYLISTS_FAILURE\",\r\n  CheckFollowedPlaylistRequest = \"CHECK_FOLLOWED_PLAYLIST_REQUEST\",\r\n  CheckFollowedPlaylistSuccess = \"CHECK_FOLLOWED_PLAYLIST_SUCCESS\",\r\n  CheckFollowedPlaylistFailure = \"CHECK_FOLLOWED_PLAYLIST_FAILURE\",\r\n  FollowPlaylistRequest = \"FOLLOW_PLAYLIST_REQUEST\",\r\n  FollowPlaylistSuccess = \"FOLLOW_PLAYLIST_SUCCESS\",\r\n  FollowPlaylistFailure = \"FOLLOW_PLAYLIST_FAILURE\",\r\n  UnfollowPlaylistRequest = \"UNFOLLOW_PLAYLIST_REQUEST\",\r\n  UnfollowPlaylistSuccess = \"UNFOLLOW_PLAYLIST_SUCCESS\",\r\n  UnfollowPlaylistFailure = \"UNFOLLOW_PLAYLIST_FAILURE\"\r\n}\r\n\r\nexport enum LibraryActionType {\r\n  SavedAlbumsRequest = \"SAVED_ALBUMS_REQUEST\",\r\n  SavedAlbumsSuccess = \"SAVED_ALBUMS_SUCCESS\",\r\n  SavedAlbumsFailure = \"SAVED_ALBUMS_FAILURE\",\r\n  CheckSavedAlbumRequest = \"CHECK_SAVED_ALBUM_REQUEST\",\r\n  CheckSavedAlbumSuccess = \"CHECK_SAVED_ALBUM_SUCCESS\",\r\n  CheckSavedAlbumFailure = \"CHECK_SAVED_ALBUM_FAILURE\",\r\n  SaveAlbumRequest = \"SAVE_ALBUM_REQUEST\",\r\n  SaveAlbumSuccess = \"SAVE_ALBUM_SUCCESS\",\r\n  SaveAlbumFailure = \"SAVE_ALBUM_FAILURE\",\r\n  UnsaveAlbumRequest = \"UNSAVE_ALBUM_REQUEST\",\r\n  UnsaveAlbumSuccess = \"UNSAVE_ALBUM_SUCCESS\",\r\n  UnsaveAlbumFailure = \"UNSAVE_ALBUM_FAILURE\",\r\n  SavedTracksRequest = \"SAVED_TRACKS_REQUEST\",\r\n  SavedTracksSuccess = \"SAVED_TRACKS_SUCCESS\",\r\n  SavedTracksFailure = \"SAVED_TRACKS_FAILURE\",\r\n  CheckSavedTracksRequest = \"CHECK_SAVED_TRACKS_REQUEST\",\r\n  CheckSavedTracksSuccess = \"CHECK_SAVED_TRACKS_SUCCESS\",\r\n  CheckSavedTracksFailure = \"CHECK_SAVED_TRACKS_FAILURE\",\r\n  SaveTrackRequest = \"SAVE_TRACK_REQUEST\",\r\n  SaveTrackSuccess = \"SAVE_TRACK_SUCCESS\",\r\n  SaveTrackFailure = \"SAVE_TRACK_FAILURE\",\r\n  UnsaveTrackRequest = \"UNSAVE_TRACK_REQUEST\",\r\n  UnsaveTrackSuccess = \"UNSAVE_TRACK_SUCCESS\",\r\n  UnsaveTrackFailure = \"UNSAVE_TRACK_FAILURE\"\r\n}\r\n\r\nexport enum PlaylistActionType {\r\n  PlaylistRequest = \"PLAYLIST_REQUEST\",\r\n  PlaylistSuccess = \"PLAYLIST_SUCCESS\",\r\n  PlaylistFailure = \"PLAYLIST_FAILURE\"\r\n}\r\n\r\nexport enum SearchActionType {\r\n  SearchRequest = \"SEARCH_REQUEST\",\r\n  SearchSuccess = \"SEARCH_SUCCESS\",\r\n  SearchFailure = \"SEARCH_FAILURE\",\r\n  ClearResults = \"CLEAR_RESULTS\",\r\n  SelectAlbum = \"SELECT_ALBUM\",\r\n  SelectArtist = \"SELECT_ARTIST\",\r\n  SelectPlaylist = \"SELECT_PLAYLIST\",\r\n  ClearRecents = \"CLEAR_RECENTS\"\r\n}\r\n\r\nexport enum UserProfileActionType {\r\n  UserProfileRequest = \"USER_PROFILE_REQUEST\",\r\n  UserProfileSuccess = \"USER_PROFILE_SUCCESS\",\r\n  UserProfileFailure = \"USER_PROFILE_FAILURE\"\r\n}\r\n","import { PayloadAction } from \"../actions/types\";\r\n\r\nexport default function createReducer<S>(\r\n  initialState: S,\r\n  handlers: { [key: string]: (state: S, action: PayloadAction) => S }\r\n) {\r\n  return function reducer(state = initialState, action: PayloadAction) {\r\n    if (handlers.hasOwnProperty(action.type)) {\r\n      return handlers[action.type](state, action);\r\n    } else {\r\n      return state;\r\n    }\r\n  };\r\n}\r\n","import merge from \"lodash/merge\";\r\nimport { createSelector } from \"reselect\";\r\nimport memoize from \"lodash/memoize\";\r\nimport { Artist } from \"../types\";\r\nimport {\r\n  AlbumActionType,\r\n  ArtistActionType,\r\n  BrowseActionType,\r\n  FollowingActionType,\r\n  LibraryActionType,\r\n  PlaylistActionType,\r\n  SearchActionType\r\n} from \"../actions\";\r\nimport { EntitiesAction } from \"../actions/types\";\r\nimport {\r\n  ArtistAlbumsSuccessAction,\r\n  ArtistRelatedArtistsSuccessAction,\r\n  ArtistTopTracksSuccessAction\r\n} from \"../actions/artists\";\r\nimport { State as CombinedState } from \".\";\r\nimport { ArtistDictionary } from \"./types\";\r\nimport createReducer from \"./createReducer\";\r\nimport { selectAlbums } from \"./albums\";\r\nimport { selectTracks } from \"./tracks\";\r\nimport {\r\n  FollowArtistSuccessAction,\r\n  UnfollowArtistSuccessAction,\r\n  CheckFollowedArtistSuccessAction\r\n} from \"../actions/following\";\r\n\r\nexport interface State extends ArtistDictionary {}\r\n\r\nconst initialState: State = {};\r\n\r\nfunction mergeArtists(state: State, { payload }: EntitiesAction) {\r\n  return merge({}, state, payload.artists);\r\n}\r\n\r\nfunction updateArtist(state: State, artistId: string, props: any) {\r\n  return {\r\n    ...state,\r\n    [artistId]: {\r\n      ...state[artistId],\r\n      ...props\r\n    }\r\n  };\r\n}\r\n\r\nexport default createReducer(initialState, {\r\n  [ArtistActionType.ArtistSuccess]: mergeArtists,\r\n  [ArtistActionType.ArtistAlbumsSuccess]: (\r\n    state: State,\r\n    action: ArtistAlbumsSuccessAction\r\n  ) => {\r\n    const { artistId, albums } = action.payload;\r\n    const nexState = mergeArtists(state, action);\r\n    return {\r\n      ...nexState,\r\n      [artistId]: {\r\n        ...nexState[artistId],\r\n        albums: Object.keys(albums)\r\n      }\r\n    };\r\n  },\r\n  [ArtistActionType.ArtistRelatedArtistsSuccess]: (\r\n    state: State,\r\n    action: ArtistRelatedArtistsSuccessAction\r\n  ) => {\r\n    const { artistId, artists } = action.payload;\r\n    const nexState = mergeArtists(state, action);\r\n    return {\r\n      ...nexState,\r\n      [artistId]: {\r\n        ...nexState[artistId],\r\n        relatedArtists: Object.keys(artists)\r\n      }\r\n    };\r\n  },\r\n  [ArtistActionType.ArtistTopTracksSuccess]: (\r\n    state: State,\r\n    action: ArtistTopTracksSuccessAction\r\n  ) => {\r\n    const { artistId, tracks } = action.payload;\r\n    const nexState = mergeArtists(state, action);\r\n    return {\r\n      ...nexState,\r\n      [artistId]: {\r\n        ...nexState[artistId],\r\n        topTracks: Object.keys(tracks)\r\n      }\r\n    };\r\n  },\r\n  [AlbumActionType.AlbumSuccess]: mergeArtists,\r\n  [PlaylistActionType.PlaylistSuccess]: mergeArtists,\r\n  [BrowseActionType.NewReleasesSuccess]: mergeArtists,\r\n  [SearchActionType.SearchSuccess]: mergeArtists,\r\n  [LibraryActionType.SavedAlbumsSuccess]: mergeArtists,\r\n  [LibraryActionType.SavedTracksSuccess]: mergeArtists,\r\n  [FollowingActionType.FollowedArtistsSuccess]: mergeArtists,\r\n  [FollowingActionType.CheckFollowedArtistSuccess]: (\r\n    state: State,\r\n    { payload }: CheckFollowedArtistSuccessAction\r\n  ) => updateArtist(state, payload.artistId, { isFollowed: payload[0] }),\r\n  [FollowingActionType.FollowArtistSuccess]: (\r\n    state: State,\r\n    { payload }: FollowArtistSuccessAction\r\n  ) => updateArtist(state, payload.artistId, { isFollowed: true }),\r\n  [FollowingActionType.UnfollowArtistSuccess]: (\r\n    state: State,\r\n    { payload }: UnfollowArtistSuccessAction\r\n  ) => updateArtist(state, payload.artistId, { isFollowed: false })\r\n});\r\n\r\nexport function selectArtist({ artists }: CombinedState, artistId: string) {\r\n  return artists[artistId];\r\n}\r\n\r\nexport function selectArtistAlbums(state: CombinedState, artistId: string) {\r\n  const artist = selectArtist(state, artistId);\r\n  if (artist) {\r\n    const albums = selectAlbums(state)(artist.albums);\r\n    if (albums) {\r\n      return albums;\r\n    }\r\n  }\r\n\r\n  return [];\r\n}\r\n\r\nexport function selectArtistRelatedArtists(\r\n  state: CombinedState,\r\n  artistId: string\r\n) {\r\n  const artist = selectArtist(state, artistId);\r\n  if (artist) {\r\n    const artists = selectArtists(state)(artist.relatedArtists);\r\n    if (artists) {\r\n      return artists;\r\n    }\r\n  }\r\n\r\n  return [];\r\n}\r\n\r\nexport function selectArtistTopTracks(state: CombinedState, artistId: string) {\r\n  const artist = selectArtist(state, artistId);\r\n  if (artist) {\r\n    const tracks = selectTracks(state)(artist.topTracks);\r\n    if (tracks) {\r\n      return tracks.filter(track => !!track);\r\n    }\r\n  }\r\n\r\n  return [];\r\n}\r\n\r\nexport const selectArtists = createSelector(\r\n  (state: CombinedState) => state.artists,\r\n  (artists: ArtistDictionary): ((artistIds: string[]) => Artist[]) =>\r\n    memoize((artistIds: string[]) =>\r\n      artistIds ? artistIds.map(artistId => artists[artistId]) : []\r\n    )\r\n);\r\n\r\nexport function selectPlayableTracks(state: CombinedState, artistId: string) {\r\n  const tracks = selectArtistTopTracks(state, artistId);\r\n  return tracks ? tracks.filter(track => track && track.preview_url) : [];\r\n}\r\n\r\nexport function selectIsPlayable(state: CombinedState, artistId: string) {\r\n  return !!selectPlayableTracks(state, artistId).length;\r\n}\r\n","import { createSelector } from \"reselect\";\r\nimport merge from \"lodash/merge\";\r\nimport memoize from \"lodash/memoize\";\r\nimport {\r\n  AlbumActionType,\r\n  ArtistActionType,\r\n  LibraryActionType,\r\n  PlaylistActionType,\r\n  SearchActionType\r\n} from \"../actions\";\r\nimport { EntitiesAction } from \"../actions/types\";\r\nimport {\r\n  SaveTrackSuccessAction,\r\n  UnsaveTrackSuccessAction,\r\n  CheckSavedTrackSuccess\r\n} from \"../actions/library\";\r\nimport { State as CombinedState } from \".\";\r\nimport { TrackDictionary } from \"./types\";\r\nimport createReducer from \"./createReducer\";\r\nimport { selectAlbum } from \"./albums\";\r\nimport { selectArtists } from \"./artists\";\r\n\r\nexport interface State extends TrackDictionary {}\r\n\r\nconst initialState: State = {};\r\n\r\nfunction mergeTracks(state: State, { payload }: EntitiesAction) {\r\n  return merge({}, state, payload.tracks);\r\n}\r\n\r\nfunction updateTrack(state: State, trackId: string, props: any) {\r\n  return {\r\n    ...state,\r\n    [trackId]: {\r\n      ...state[trackId],\r\n      ...props\r\n    }\r\n  };\r\n}\r\n\r\nexport default createReducer(initialState, {\r\n  [AlbumActionType.AlbumSuccess]: mergeTracks,\r\n  [ArtistActionType.ArtistTopTracksSuccess]: mergeTracks,\r\n  [PlaylistActionType.PlaylistSuccess]: mergeTracks,\r\n  [SearchActionType.SearchSuccess]: mergeTracks,\r\n  [LibraryActionType.SavedAlbumsSuccess]: mergeTracks,\r\n  [LibraryActionType.SavedTracksSuccess]: mergeTracks,\r\n  [LibraryActionType.CheckSavedTracksSuccess]: (\r\n    state: State,\r\n    { payload }: CheckSavedTrackSuccess\r\n  ) =>\r\n    payload.trackIds.reduce(\r\n      (previous, current, index) =>\r\n        updateTrack(previous, current, { isSaved: payload[index] }),\r\n      state\r\n    ),\r\n  [LibraryActionType.SaveTrackSuccess]: (\r\n    state: State,\r\n    { payload }: SaveTrackSuccessAction\r\n  ) => updateTrack(state, payload.trackId, { isSaved: true }),\r\n  [LibraryActionType.UnsaveTrackSuccess]: (\r\n    state: State,\r\n    { payload }: UnsaveTrackSuccessAction\r\n  ) => updateTrack(state, payload.trackId, { isSaved: false })\r\n});\r\n\r\nexport function selectTrack({ tracks }: CombinedState, trackId: string) {\r\n  return tracks[trackId];\r\n}\r\n\r\nexport function selectTrackAlbum(state: CombinedState, trackId: string) {\r\n  const track = selectTrack(state, trackId);\r\n  if (track) {\r\n    return selectAlbum(state, track.album);\r\n  }\r\n}\r\n\r\nexport function selectTrackArtists(state: CombinedState, trackId: string) {\r\n  const track = selectTrack(state, trackId);\r\n  return track ? selectArtists(state)(track.artists) : [];\r\n}\r\n\r\nexport const selectTracks = createSelector(\r\n  (state: CombinedState) => state.tracks,\r\n  (tracks: TrackDictionary) =>\r\n    memoize((trackIds: string[]) =>\r\n      trackIds ? trackIds.map(trackId => tracks[trackId]) : []\r\n    )\r\n);\r\n","import merge from \"lodash/merge\";\r\nimport { createSelector } from \"reselect\";\r\nimport memoize from \"lodash/memoize\";\r\nimport {\r\n  AlbumActionType,\r\n  ArtistActionType,\r\n  BrowseActionType,\r\n  LibraryActionType,\r\n  PlaylistActionType,\r\n  SearchActionType\r\n} from \"../actions\";\r\nimport { EntitiesAction } from \"../actions/types\";\r\nimport {\r\n  SaveAlbumSuccessAction,\r\n  UnsaveAlbumSuccessAction,\r\n  CheckSavedAlbumSuccess\r\n} from \"../actions/library\";\r\nimport { State as CombinedState } from \".\";\r\nimport { AlbumDictionary, ArtistDictionary } from \"./types\";\r\nimport createReducer from \"./createReducer\";\r\nimport { selectTracks } from \"./tracks\";\r\n\r\nexport interface State extends AlbumDictionary {}\r\n\r\nconst initialState: State = {};\r\n\r\nfunction mergeAlbums(state: State, { payload }: EntitiesAction) {\r\n  return merge({}, state, payload.albums);\r\n}\r\n\r\nfunction updateAlbum(state: State, albumId: string, props: any) {\r\n  return {\r\n    ...state,\r\n    [albumId]: {\r\n      ...state[albumId],\r\n      ...props\r\n    }\r\n  };\r\n}\r\n\r\nexport default createReducer(initialState, {\r\n  [AlbumActionType.AlbumSuccess]: mergeAlbums,\r\n  [PlaylistActionType.PlaylistSuccess]: mergeAlbums,\r\n  [ArtistActionType.ArtistAlbumsSuccess]: mergeAlbums,\r\n  [BrowseActionType.NewReleasesSuccess]: mergeAlbums,\r\n  [SearchActionType.SearchSuccess]: mergeAlbums,\r\n  [LibraryActionType.SavedAlbumsSuccess]: mergeAlbums,\r\n  [LibraryActionType.SavedTracksSuccess]: mergeAlbums,\r\n  [LibraryActionType.CheckSavedAlbumSuccess]: (\r\n    state: State,\r\n    { payload }: CheckSavedAlbumSuccess\r\n  ) => updateAlbum(state, payload.albumId, { isSaved: payload[0] }),\r\n  [LibraryActionType.SaveAlbumSuccess]: (\r\n    state: State,\r\n    { payload }: SaveAlbumSuccessAction\r\n  ) => updateAlbum(state, payload.albumId, { isSaved: true }),\r\n  [LibraryActionType.UnsaveAlbumSuccess]: (\r\n    state: State,\r\n    { payload }: UnsaveAlbumSuccessAction\r\n  ) => updateAlbum(state, payload.albumId, { isSaved: false })\r\n});\r\n\r\nexport function selectAlbum({ albums }: CombinedState, albumId: string) {\r\n  return albums[albumId];\r\n}\r\n\r\nexport const selectAlbumArtists = createSelector(\r\n  ({ albums }: CombinedState) => albums,\r\n  ({ artists }: CombinedState) => artists,\r\n  (albums: AlbumDictionary, artists: ArtistDictionary) =>\r\n    memoize((albumId: string) => {\r\n      const album = albums[albumId];\r\n      if (album) {\r\n        return album.artists.map(artistId => artists[artistId]);\r\n      }\r\n\r\n      return [];\r\n    })\r\n);\r\n\r\nexport function selectAlbumTracks(state: CombinedState, albumId: string) {\r\n  const album = selectAlbum(state, albumId);\r\n  if (album) {\r\n    const tracks = selectTracks(state)(album.tracks);\r\n    if (tracks) {\r\n      return tracks.filter(track => !!track);\r\n    }\r\n  }\r\n\r\n  return [];\r\n}\r\n\r\nexport const selectAlbums = createSelector(\r\n  (state: CombinedState) => state.albums,\r\n  (albums: AlbumDictionary) =>\r\n    memoize((albumIds: string[]) =>\r\n      albumIds ? albumIds.map(albumId => albums[albumId]) : []\r\n    )\r\n);\r\n\r\nexport function selectPlayableTracks(state: CombinedState, albumId: string) {\r\n  const tracks = selectAlbumTracks(state, albumId);\r\n  return tracks ? tracks.filter(track => track && track.preview_url) : [];\r\n}\r\n\r\nexport function selectIsPlayable(state: CombinedState, albumId: string) {\r\n  return !!selectPlayableTracks(state, albumId).length;\r\n}\r\n","import { Action, Dispatch } from \"redux\";\r\nimport { logInRedirect } from \"../utils/authorization\";\r\n\r\nexport enum ActionType {\r\n  RequestLogIn = \"REQUEST_LOG_IN\",\r\n  ReceiveLogIn = \"RECEIVE_LOG_IN\"\r\n}\r\n\r\nexport interface RequestLogInAction extends Action<ActionType.RequestLogIn> {}\r\n\r\nfunction requestLogIn(): RequestLogInAction {\r\n  return {\r\n    type: ActionType.RequestLogIn\r\n  };\r\n}\r\n\r\nexport interface ReceiveLogInAction extends Action<ActionType.ReceiveLogIn> {}\r\n\r\nexport function receiveLogIn(): ReceiveLogInAction {\r\n  return {\r\n    type: ActionType.ReceiveLogIn\r\n  };\r\n}\r\n\r\nexport function logIn() {\r\n  return async (\r\n    dispatch: Dispatch<RequestLogInAction | ReceiveLogInAction>\r\n  ) => {\r\n    dispatch(requestLogIn());\r\n    await logInRedirect();\r\n    dispatch(receiveLogIn());\r\n  };\r\n}\r\n","import { Dispatch } from \"redux\";\r\nimport { receiveLogIn } from \"../actions/authorization\";\r\n\r\nconst SCOPES = [\r\n  \"user-library-read\",\r\n  \"user-library-modify\",\r\n  \"user-follow-read\",\r\n  \"user-follow-modify\",\r\n  \"playlist-read-private\",\r\n  \"playlist-read-collaborative\",\r\n  \"playlist-modify-private\",\r\n  \"playlist-modify-public\"\r\n];\r\nconst LOG_IN_URL = `https://accounts.spotify.com/authorize?client_id=${\r\n  process.env.REACT_APP_CLIENT_ID\r\n}&scope=${encodeURIComponent(\r\n  SCOPES.join(\" \")\r\n)}&response_type=token&redirect_uri=${process.env.REACT_APP_REDIRECT_URI}`;\r\nconst REGEX = /#access_token=(.*?)&token_type=(.*?)&expires_in=(.*)$/;\r\nconst ACCESS_TOKEN = \"token\";\r\nconst TOKEN_TYPE = \"tokenType\";\r\nconst EXPIRES_AT = \"expiresAt\";\r\n\r\nfunction logInRedirect(): Promise<any> {\r\n  return new Promise((resolve, reject) => {\r\n    const handleStorage = (event: StorageEvent) => {\r\n      if (event.key === ACCESS_TOKEN) {\r\n        window.removeEventListener(\"storage\", handleStorage);\r\n        resolve();\r\n      }\r\n    };\r\n    window.addEventListener(\"storage\", handleStorage);\r\n    window.location.assign(LOG_IN_URL);\r\n  });\r\n}\r\n\r\nfunction checkRedirection(): void {\r\n  const match = window.location.hash.match(REGEX);\r\n  if (match) {\r\n    localStorage[ACCESS_TOKEN] = match[1];\r\n    localStorage[TOKEN_TYPE] = match[2];\r\n    const date = new Date();\r\n    date.setSeconds(date.getSeconds() + parseInt(match[3]));\r\n    localStorage[EXPIRES_AT] = date.toString();\r\n  }\r\n}\r\n\r\nfunction initAuthorization(dispatch: Dispatch): void {\r\n  if (\r\n    !!localStorage[ACCESS_TOKEN] &&\r\n    Date.parse(localStorage[EXPIRES_AT]) > Date.now()\r\n  ) {\r\n    dispatch(receiveLogIn());\r\n  }\r\n}\r\n\r\nfunction authorizedFetch(\r\n  url: string,\r\n  method: string = \"GET\"\r\n): Promise<Response> {\r\n  const tokenType = localStorage[TOKEN_TYPE];\r\n  const accessToken = localStorage[ACCESS_TOKEN];\r\n\r\n  return fetch(url, {\r\n    method,\r\n    headers: {\r\n      Authorization: `${tokenType} ${accessToken}`\r\n    }\r\n  });\r\n}\r\n\r\nasync function fetchJson(url: string): Promise<any> {\r\n  const response = await authorizedFetch(url);\r\n  return response.json();\r\n}\r\n\r\nexport {\r\n  logInRedirect,\r\n  checkRedirection,\r\n  initAuthorization,\r\n  authorizedFetch,\r\n  fetchJson\r\n};\r\n","import { ActionType } from \"../actions/authorization\";\r\nimport { State as CombinedState } from \".\";\r\nimport createReducer from \"./createReducer\";\r\n\r\nexport interface State {\r\n  isLoggedIn: boolean;\r\n}\r\n\r\nconst initialState: State = {\r\n  isLoggedIn: false\r\n};\r\n\r\nexport default createReducer(initialState, {\r\n  [ActionType.ReceiveLogIn]: (state: State) => ({\r\n    ...state,\r\n    isLoggedIn: true\r\n  })\r\n});\r\n\r\nexport function selectIsLoggedIn(state: CombinedState): boolean {\r\n  return !!state.authorization.isLoggedIn;\r\n}\r\n","import merge from \"lodash/merge\";\r\nimport { createSelector } from \"reselect\";\r\nimport memoize from \"lodash/memoize\";\r\nimport {\r\n  BrowseActionType,\r\n  FollowingActionType,\r\n  PlaylistActionType,\r\n  SearchActionType\r\n} from \"../actions\";\r\nimport { EntitiesAction } from \"../actions/types\";\r\nimport { State as CombinedState } from \".\";\r\nimport { PlaylistDictionary } from \"./types\";\r\nimport createReducer from \"./createReducer\";\r\nimport { selectTracks } from \"./tracks\";\r\nimport {\r\n  FollowPlaylistSuccessAction,\r\n  UnfollowPlaylistSuccessAction,\r\n  CheckFollowedPlaylistSuccessAction\r\n} from \"../actions/following\";\r\n\r\nexport interface State extends PlaylistDictionary {}\r\n\r\nconst initialState: State = {};\r\n\r\nfunction mergePlaylists(state: State, { payload }: EntitiesAction) {\r\n  return merge({}, state, payload.playlists);\r\n}\r\n\r\nfunction updatePlaylist(state: State, playlistId: string, props: any) {\r\n  return {\r\n    ...state,\r\n    [playlistId]: {\r\n      ...state[playlistId],\r\n      ...props\r\n    }\r\n  };\r\n}\r\n\r\nexport default createReducer(initialState, {\r\n  [PlaylistActionType.PlaylistSuccess]: mergePlaylists,\r\n  [BrowseActionType.CategoryPlaylistsSuccess]: mergePlaylists,\r\n  [BrowseActionType.FeaturedPlaylistsSuccess]: mergePlaylists,\r\n  [SearchActionType.SearchSuccess]: mergePlaylists,\r\n  [FollowingActionType.FollowedPlaylistsSuccess]: mergePlaylists,\r\n  [FollowingActionType.CheckFollowedPlaylistSuccess]: (\r\n    state: State,\r\n    { payload }: CheckFollowedPlaylistSuccessAction\r\n  ) => updatePlaylist(state, payload.playlistId, { isFollowed: payload[0] }),\r\n  [FollowingActionType.FollowPlaylistSuccess]: (\r\n    state: State,\r\n    { payload }: FollowPlaylistSuccessAction\r\n  ) => updatePlaylist(state, payload.playlistId, { isFollowed: true }),\r\n  [FollowingActionType.UnfollowPlaylistSuccess]: (\r\n    state: State,\r\n    { payload }: UnfollowPlaylistSuccessAction\r\n  ) => updatePlaylist(state, payload.playlistId, { isFollowed: false })\r\n});\r\n\r\nexport function selectPlaylist(\r\n  { playlists }: CombinedState,\r\n  playlistId: string\r\n) {\r\n  return playlists[playlistId];\r\n}\r\n\r\nexport function selectPlaylistTracks(state: CombinedState, albumId: string) {\r\n  const playlist = selectPlaylist(state, albumId);\r\n  if (playlist) {\r\n    const tracks = selectTracks(state)(playlist.tracks);\r\n    if (tracks) {\r\n      return tracks.filter(track => !!track);\r\n    }\r\n  }\r\n\r\n  return [];\r\n}\r\n\r\nexport const selectPlaylists = createSelector(\r\n  ({ playlists }: CombinedState) => playlists,\r\n  (playlists: PlaylistDictionary) =>\r\n    memoize((playlistIds: string[]) =>\r\n      playlistIds ? playlistIds.map(playlistId => playlists[playlistId]) : []\r\n    )\r\n);\r\n\r\nexport function selectPlayableTracks(state: CombinedState, playlistId: string) {\r\n  const tracks = selectPlaylistTracks(state, playlistId);\r\n  return tracks ? tracks.filter(track => track.preview_url) : [];\r\n}\r\n\r\nexport function selectIsPlayable(state: CombinedState, playlistId: string) {\r\n  return !!selectPlayableTracks(state, playlistId).length;\r\n}\r\n","import { createSelector } from \"reselect\";\r\nimport { Album, Category, Playlist } from \"../types\";\r\nimport { BrowseActionType as ActionType } from \"../actions\";\r\nimport {\r\n  CategorySuccessAction,\r\n  CategoriesSuccessAction,\r\n  NewReleasesSuccessAction,\r\n  CategoryPlaylistsSuccessAction,\r\n  FeaturedPlaylistsSuccessAction\r\n} from \"../actions/browse\";\r\nimport { State as CombinedState } from \".\";\r\nimport createReducer from \"./createReducer\";\r\nimport { selectPlaylists } from \"./playlists\";\r\nimport { selectAlbums } from \"./albums\";\r\n\r\nexport interface State {\r\n  categories: { [id: string]: Category };\r\n  categoryPlaylistIds: string[];\r\n  featuredPlaylistIds: string[];\r\n  newReleaseIds: string[];\r\n}\r\n\r\nconst initialState: State = {\r\n  categories: {},\r\n  categoryPlaylistIds: [],\r\n  featuredPlaylistIds: [],\r\n  newReleaseIds: []\r\n};\r\n\r\nexport default createReducer(initialState, {\r\n  [ActionType.CategoriesSuccess]: (\r\n    state: State,\r\n    action: CategoriesSuccessAction\r\n  ) => ({\r\n    ...state,\r\n    categories: action.payload.categories\r\n  }),\r\n  [ActionType.CategorySuccess]: (\r\n    state: State,\r\n    action: CategorySuccessAction\r\n  ) => ({\r\n    ...state,\r\n    categories: action.payload.categories\r\n  }),\r\n  [ActionType.CategoryPlaylistsSuccess]: (\r\n    state: State,\r\n    action: CategoryPlaylistsSuccessAction\r\n  ) => ({\r\n    ...state,\r\n    categoryPlaylistIds: Object.keys(action.payload.playlists)\r\n  }),\r\n  [ActionType.FeaturedPlaylistsSuccess]: (\r\n    state: State,\r\n    action: FeaturedPlaylistsSuccessAction\r\n  ) => ({\r\n    ...state,\r\n    featuredPlaylistIds: Object.keys(action.payload.playlists)\r\n  }),\r\n  [ActionType.NewReleasesSuccess]: (\r\n    state: State,\r\n    action: NewReleasesSuccessAction\r\n  ) => ({\r\n    ...state,\r\n    newReleaseIds: Object.keys(action.payload.albums)\r\n  })\r\n});\r\n\r\nexport const selectCategories = createSelector(\r\n  ({ browse }: CombinedState) => browse.categories,\r\n  (categories: { [categoryId: string]: Category }) => Object.values(categories)\r\n);\r\n\r\nexport function selectCategory(\r\n  state: CombinedState,\r\n  categoryId: string\r\n): Category | undefined {\r\n  return state.browse.categories[categoryId];\r\n}\r\n\r\nexport function selectCategoryPlaylists(state: CombinedState): Playlist[] {\r\n  return selectPlaylists(state)(state.browse.categoryPlaylistIds);\r\n}\r\n\r\nexport function selectFeaturedPlaylists(state: CombinedState): Playlist[] {\r\n  return selectPlaylists(state)(state.browse.featuredPlaylistIds);\r\n}\r\n\r\nexport function selectNewReleases(state: CombinedState): Album[] {\r\n  return selectAlbums(state)(state.browse.newReleaseIds);\r\n}\r\n","import { FollowingActionType as ActionType } from \"../actions\";\r\nimport {\r\n  FollowedArtistsSuccessAction,\r\n  FollowedPlaylistsSuccessAction\r\n} from \"../actions/following\";\r\nimport { State as CombinedState } from \".\";\r\nimport createReducer from \"./createReducer\";\r\nimport { selectArtists } from \"./artists\";\r\nimport { selectPlaylists } from \"./playlists\";\r\n\r\nexport interface State {\r\n  userArtistIds: string[];\r\n  userPlaylistIds: string[];\r\n}\r\n\r\nconst initialState: State = {\r\n  userArtistIds: [],\r\n  userPlaylistIds: []\r\n};\r\n\r\nexport default createReducer(initialState, {\r\n  [ActionType.FollowedArtistsSuccess]: (\r\n    state: State,\r\n    { payload }: FollowedArtistsSuccessAction\r\n  ) => ({\r\n    ...state,\r\n    userArtistIds: Object.keys(payload.artists || {})\r\n  }),\r\n  [ActionType.FollowedPlaylistsSuccess]: (\r\n    state: State,\r\n    { payload }: FollowedPlaylistsSuccessAction\r\n  ) => ({ ...state, userPlaylistIds: Object.keys(payload.playlists || []) })\r\n});\r\n\r\nexport function selectFollowedArtists(state: CombinedState) {\r\n  return selectArtists(state)(state.following.userArtistIds);\r\n}\r\n\r\nexport function selectFollowedPlaylists(state: CombinedState) {\r\n  return selectPlaylists(state)(state.following.userPlaylistIds);\r\n}\r\n","import { LibraryActionType as ActionType } from \"../actions\";\r\nimport {\r\n  SavedAlbumsSuccessAction,\r\n  SavedTracksSuccessAction\r\n} from \"../actions/library\";\r\nimport { State as CombinedState } from \".\";\r\nimport createReducer from \"./createReducer\";\r\nimport { selectAlbums } from \"./albums\";\r\nimport { selectTracks } from \"./tracks\";\r\n\r\nexport interface State {\r\n  userAlbumIds: string[];\r\n  userTrackIds: string[];\r\n}\r\n\r\nconst initialState: State = {\r\n  userAlbumIds: [],\r\n  userTrackIds: []\r\n};\r\n\r\nexport default createReducer(initialState, {\r\n  [ActionType.SavedAlbumsSuccess]: (\r\n    state: State,\r\n    { payload }: SavedAlbumsSuccessAction\r\n  ) => ({ ...state, userAlbumIds: Object.keys(payload.albums || {}) }),\r\n  [ActionType.SavedTracksSuccess]: (\r\n    state: State,\r\n    { payload }: SavedTracksSuccessAction\r\n  ) => ({ ...state, userTrackIds: Object.keys(payload.tracks || {}) })\r\n});\r\n\r\nexport function selectSavedAlbums(state: CombinedState) {\r\n  return selectAlbums(state)(state.library.userAlbumIds);\r\n}\r\n\r\nexport function selectSavedTracks(state: CombinedState) {\r\n  const tracks = selectTracks(state)(state.library.userTrackIds);\r\n  if (tracks) {\r\n    return tracks.filter(track => !!track);\r\n  }\r\n\r\n  return [];\r\n}\r\n\r\nexport function selectPlayableTracks(state: CombinedState) {\r\n  const tracks = selectSavedTracks(state);\r\n  return tracks ? tracks.filter(track => track.preview_url) : [];\r\n}\r\n","import {\r\n  AlbumActionType,\r\n  ArtistActionType,\r\n  BrowseActionType,\r\n  FollowingActionType,\r\n  LibraryActionType,\r\n  PlaylistActionType,\r\n  SearchActionType,\r\n  UserProfileActionType\r\n} from \"../actions\";\r\nimport { State as CombinedState } from \".\";\r\nimport createReducer from \"./createReducer\";\r\n\r\nexport interface State {\r\n  count: number;\r\n}\r\n\r\nconst initialState: State = {\r\n  count: 0\r\n};\r\n\r\nfunction increment(state: State) {\r\n  return {\r\n    ...state,\r\n    count: state.count + 1\r\n  };\r\n}\r\n\r\nfunction decrement(state: State) {\r\n  return {\r\n    ...state,\r\n    count: state.count - 1\r\n  };\r\n}\r\n\r\nexport default createReducer(initialState, {\r\n  [AlbumActionType.AlbumRequest]: increment,\r\n  [AlbumActionType.AlbumSuccess]: decrement,\r\n  [AlbumActionType.AlbumFailure]: decrement,\r\n  [ArtistActionType.ArtistRequest]: increment,\r\n  [ArtistActionType.ArtistSuccess]: decrement,\r\n  [ArtistActionType.ArtistFailure]: decrement,\r\n  [ArtistActionType.ArtistAlbumsRequest]: increment,\r\n  [ArtistActionType.ArtistAlbumsSuccess]: decrement,\r\n  [ArtistActionType.ArtistAlbumsFailure]: decrement,\r\n  [ArtistActionType.ArtistRelatedArtistsRequest]: increment,\r\n  [ArtistActionType.ArtistRelatedArtistsSuccess]: decrement,\r\n  [ArtistActionType.ArtistRelatedArtistsFailure]: decrement,\r\n  [ArtistActionType.ArtistAlbumsRequest]: increment,\r\n  [ArtistActionType.ArtistAlbumsSuccess]: decrement,\r\n  [ArtistActionType.ArtistAlbumsFailure]: decrement,\r\n  [BrowseActionType.CategoriesRequest]: increment,\r\n  [BrowseActionType.CategoriesSuccess]: decrement,\r\n  [BrowseActionType.CategoriesFailure]: decrement,\r\n  [BrowseActionType.CategoryRequest]: increment,\r\n  [BrowseActionType.CategorySuccess]: decrement,\r\n  [BrowseActionType.CategoryFailure]: decrement,\r\n  [BrowseActionType.CategoryPlaylistsRequest]: increment,\r\n  [BrowseActionType.CategoryPlaylistsSuccess]: decrement,\r\n  [BrowseActionType.CategoryPlaylistsFailure]: decrement,\r\n  [BrowseActionType.FeaturedPlaylistsRequest]: increment,\r\n  [BrowseActionType.FeaturedPlaylistsSuccess]: decrement,\r\n  [BrowseActionType.FeaturedPlaylistsFailure]: decrement,\r\n  [BrowseActionType.NewReleasesRequest]: increment,\r\n  [BrowseActionType.NewReleasesSuccess]: decrement,\r\n  [BrowseActionType.NewReleasesFailure]: decrement,\r\n  [FollowingActionType.FollowedArtistsRequest]: increment,\r\n  [FollowingActionType.FollowedArtistsSuccess]: decrement,\r\n  [FollowingActionType.FollowedArtistsFailure]: decrement,\r\n  [FollowingActionType.FollowedPlaylistsRequest]: increment,\r\n  [FollowingActionType.FollowedPlaylistsSuccess]: decrement,\r\n  [FollowingActionType.FollowedPlaylistsFailure]: decrement,\r\n  [LibraryActionType.SavedAlbumsRequest]: increment,\r\n  [LibraryActionType.SavedAlbumsSuccess]: decrement,\r\n  [LibraryActionType.SavedAlbumsFailure]: decrement,\r\n  [LibraryActionType.SavedTracksRequest]: increment,\r\n  [LibraryActionType.SavedTracksSuccess]: decrement,\r\n  [LibraryActionType.SavedTracksFailure]: decrement,\r\n  [PlaylistActionType.PlaylistRequest]: increment,\r\n  [PlaylistActionType.PlaylistSuccess]: decrement,\r\n  [PlaylistActionType.PlaylistFailure]: decrement,\r\n  [SearchActionType.SearchRequest]: increment,\r\n  [SearchActionType.SearchSuccess]: decrement,\r\n  [SearchActionType.SearchFailure]: decrement,\r\n  [UserProfileActionType.UserProfileRequest]: increment,\r\n  [UserProfileActionType.UserProfileSuccess]: decrement,\r\n  [UserProfileActionType.UserProfileFailure]: decrement\r\n});\r\n\r\nexport function selectIsLoading(state: CombinedState): boolean {\r\n  return !!state.loading.count;\r\n}\r\n","import { Dispatch } from \"react\";\r\nimport { PayloadAction } from \"./types\";\r\n\r\nexport enum ActionType {\r\n  DeleteNotification = \"DELETE_NOTIFICATION\"\r\n}\r\n\r\nexport interface DeleteNotificationAction\r\n  extends PayloadAction<\r\n    ActionType.DeleteNotification,\r\n    { notificationId: string }\r\n  > {}\r\n\r\nexport function deleteNotification(notificationId: string) {\r\n  return (dispatch: Dispatch<DeleteNotificationAction>) => {\r\n    dispatch({\r\n      type: ActionType.DeleteNotification,\r\n      payload: { notificationId }\r\n    });\r\n  };\r\n}\r\n","import { v4 } from \"uuid\";\r\nimport { FollowingActionType, LibraryActionType } from \"../actions\";\r\nimport {\r\n  ActionType as NotificationActionType,\r\n  DeleteNotificationAction\r\n} from \"../actions/notifications\";\r\nimport { State as CombinedState } from \"../reducers\";\r\nimport createReducer from \"./createReducer\";\r\n\r\nexport interface Notification {\r\n  id: string;\r\n  message: string;\r\n}\r\n\r\nexport interface State extends Array<Notification> {}\r\n\r\nconst initialState: State = [];\r\n\r\nfunction addNotification(state: State, message: string) {\r\n  return [{ id: v4(), message }, ...state];\r\n}\r\n\r\nexport default createReducer(initialState, {\r\n  [FollowingActionType.FollowArtistSuccess]: (state: State) =>\r\n    addNotification(state, \"Artist followed\"),\r\n  [FollowingActionType.UnfollowArtistSuccess]: (state: State) =>\r\n    addNotification(state, \"Artist unfollowed\"),\r\n  [FollowingActionType.FollowPlaylistSuccess]: (state: State) =>\r\n    addNotification(state, \"Playlist followed\"),\r\n  [FollowingActionType.UnfollowPlaylistSuccess]: (state: State) =>\r\n    addNotification(state, \"Playlist unfollowed\"),\r\n  [LibraryActionType.SaveAlbumSuccess]: (state: State) =>\r\n    addNotification(state, \"Album saved\"),\r\n  [LibraryActionType.UnsaveAlbumSuccess]: (state: State) =>\r\n    addNotification(state, \"Album unsaved\"),\r\n  [LibraryActionType.SaveTrackSuccess]: (state: State) =>\r\n    addNotification(state, \"Track saved\"),\r\n  [LibraryActionType.UnsaveTrackSuccess]: (state: State) =>\r\n    addNotification(state, \"Track unsaved\"),\r\n  [NotificationActionType.DeleteNotification]: (\r\n    state: State,\r\n    { payload }: DeleteNotificationAction\r\n  ) => [\r\n    ...state.filter(notification => notification.id !== payload.notificationId)\r\n  ]\r\n});\r\n\r\nexport function selectNotifications({ notifications }: CombinedState) {\r\n  return notifications;\r\n}\r\n","import { Dispatch } from \"redux\";\r\nimport { Type } from \"../types\";\r\nimport { PayloadAction } from \"./types\";\r\nimport { State } from \"../reducers\";\r\nimport { selectIsPlaying, selectIsLoaded } from \"../reducers/player\";\r\nimport { selectPlayableTracks as selectAlbumTracks } from \"../reducers/albums\";\r\nimport { selectPlayableTracks as selectArtistTracks } from \"../reducers/artists\";\r\nimport { selectPlayableTracks as selectPlaylistTracks } from \"../reducers/playlists\";\r\nimport { selectPlayableTracks as selectLibraryTracks } from \"../reducers/library\";\r\n\r\nexport enum ActionType {\r\n  LoadCollection = \"LOAD_COLLECTION\",\r\n  LoadTrack = \"LOAD_TRACK\",\r\n  TrackLoaded = \"TRACK_LOADED\",\r\n  Play = \"PLAY\",\r\n  Playing = \"PLAYING\",\r\n  Update = \"UPDATE\",\r\n  Pause = \"PAUSE\",\r\n  Paused = \"PAUSED\",\r\n  Seek = \"SEEK\",\r\n  Seeked = \"SEEKED\",\r\n  ChangeVolume = \"CHANGE_VOLUME\",\r\n  VolumeChanged = \"VOLUME_CHANGED\",\r\n  Ended = \"ENDED\",\r\n  Next = \"NEXT\",\r\n  Previous = \"PREVIOUS\",\r\n  ToggleShuffle = \"TOGGLE_SHUFFLE\",\r\n  ToggleLoop = \"TOGGLE_LOOP\"\r\n}\r\n\r\nexport interface LoadCollectionAction\r\n  extends PayloadAction<\r\n    ActionType.LoadCollection,\r\n    {\r\n      collectionId: string;\r\n      collectionType: Type;\r\n      trackIds: string[];\r\n      trackId?: string;\r\n    }\r\n  > {}\r\n\r\nconst providers = {\r\n  [Type.Album]: selectAlbumTracks,\r\n  [Type.Artist]: selectArtistTracks,\r\n  [Type.Playlist]: selectPlaylistTracks,\r\n  [Type.Library]: selectLibraryTracks\r\n};\r\n\r\nfunction getTrackIds(\r\n  state: State,\r\n  collectionId: string,\r\n  collectionType: Type\r\n): string[] {\r\n  return providers[collectionType](state, collectionId).map(track => track.id);\r\n}\r\n\r\nexport function loadCollection(\r\n  collectionId: string,\r\n  collectionType: Type,\r\n  trackId?: string\r\n) {\r\n  return (dispatch: Dispatch<LoadCollectionAction>, getState: () => State) => {\r\n    const state = getState();\r\n    const trackIds = getTrackIds(state, collectionId, collectionType);\r\n    if (trackIds.length) {\r\n      dispatch({\r\n        type: ActionType.LoadCollection,\r\n        payload: {\r\n          collectionId: collectionId,\r\n          collectionType: collectionType,\r\n          trackIds,\r\n          trackId\r\n        }\r\n      });\r\n    }\r\n  };\r\n}\r\n\r\nexport interface LoadTrackAction\r\n  extends PayloadAction<ActionType.LoadTrack, { trackId: string }> {}\r\n\r\nexport function loadTrack(trackId: string) {\r\n  return (dispatch: Dispatch<LoadTrackAction>) => {\r\n    dispatch({\r\n      type: ActionType.LoadTrack,\r\n      payload: {\r\n        trackId\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\nexport interface TrackLoadedAction\r\n  extends PayloadAction<ActionType.TrackLoaded, number> {}\r\n\r\nexport function trackLoaded(duration: number) {\r\n  return (dispatch: Dispatch<TrackLoadedAction>) => {\r\n    dispatch({\r\n      type: ActionType.TrackLoaded,\r\n      payload: duration\r\n    });\r\n  };\r\n}\r\n\r\nexport function playPause() {\r\n  return (dispatch: Dispatch, getState: () => State) => {\r\n    const state = getState();\r\n    const isPlaying = selectIsPlaying(state);\r\n    dispatch({\r\n      type: isPlaying ? ActionType.Pause : ActionType.Play\r\n    });\r\n  };\r\n}\r\n\r\nexport function loadPlayPause(\r\n  collectionId: string,\r\n  collectionType: Type,\r\n  trackId?: string\r\n) {\r\n  return (dispatch: Dispatch, getState: () => State) => {\r\n    const state = getState();\r\n    const isLoaded = selectIsLoaded(state);\r\n    if (!isLoaded(collectionId)) {\r\n      loadCollection(collectionId, collectionType, trackId)(dispatch, getState);\r\n    } else if (trackId && !isLoaded(trackId)) {\r\n      loadTrack(trackId)(dispatch);\r\n    } else {\r\n      playPause()(dispatch, getState);\r\n    }\r\n  };\r\n}\r\n\r\nexport function playing() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.Playing\r\n    });\r\n  };\r\n}\r\n\r\nexport interface UpdateAction\r\n  extends PayloadAction<ActionType.Update, number> {}\r\n\r\nexport function update(elapsed: number) {\r\n  return (dispatch: Dispatch<UpdateAction>) => {\r\n    dispatch({\r\n      type: ActionType.Update,\r\n      payload: elapsed\r\n    });\r\n  };\r\n}\r\n\r\nexport function paused() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.Paused\r\n    });\r\n  };\r\n}\r\n\r\nexport interface SeekAction extends PayloadAction<ActionType.Seek, number> {}\r\n\r\nexport function seek(time: number) {\r\n  return (dispatch: Dispatch<SeekAction>) => {\r\n    dispatch({\r\n      type: ActionType.Seek,\r\n      payload: time\r\n    });\r\n  };\r\n}\r\n\r\nexport function seeked() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.Seeked\r\n    });\r\n  };\r\n}\r\n\r\nexport function ended() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({ type: ActionType.Ended });\r\n  };\r\n}\r\n\r\nexport function next() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({ type: ActionType.Next });\r\n  };\r\n}\r\n\r\nexport function previous() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({ type: ActionType.Previous });\r\n  };\r\n}\r\n\r\nexport interface ChangeVolumeAction\r\n  extends PayloadAction<\r\n    ActionType.ChangeVolume,\r\n    { volume: number; isMuted: boolean }\r\n  > {}\r\n\r\nexport function changeVolume(volume: number, isMuted: boolean) {\r\n  return (dispatch: Dispatch<ChangeVolumeAction>) => {\r\n    dispatch({\r\n      type: ActionType.ChangeVolume,\r\n      payload: {\r\n        volume,\r\n        isMuted\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\nexport function volumeChanged() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.VolumeChanged\r\n    });\r\n  };\r\n}\r\n\r\nexport function toggleShuffle() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.ToggleShuffle\r\n    });\r\n  };\r\n}\r\n\r\nexport function toggleLoop() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.ToggleLoop\r\n    });\r\n  };\r\n}\r\n","import { createSelector } from \"reselect\";\r\nimport { Type } from \"../types\";\r\nimport {\r\n  ActionType,\r\n  LoadCollectionAction,\r\n  LoadTrackAction,\r\n  TrackLoadedAction,\r\n  UpdateAction,\r\n  SeekAction,\r\n  ChangeVolumeAction\r\n} from \"../actions/player\";\r\nimport { State as CombinedState } from \".\";\r\nimport {\r\n  AlbumDictionary,\r\n  ArtistDictionary,\r\n  PlaylistDictionary,\r\n  Collection\r\n} from \"./types\";\r\nimport createReducer from \"./createReducer\";\r\nimport { selectTrack, selectTracks } from \"./tracks\";\r\nimport { selectAlbum } from \"./albums\";\r\nimport { selectArtists } from \"./artists\";\r\n\r\nenum PlayerState {\r\n  None = \"NONE\",\r\n  Playing = \"IS_PLAYING\",\r\n  Paused = \"IS_PAUSED\"\r\n}\r\n\r\nexport enum Command {\r\n  None = \"NONE\",\r\n  Play = \"PLAY\",\r\n  Pause = \"PAUSE\",\r\n  Seek = \"SEEK\",\r\n  ChangeVolume = \"CHANGE_VOLUME\"\r\n}\r\n\r\nexport interface State {\r\n  collections: Collection[];\r\n  trackIds: string[];\r\n  trackIndex: number;\r\n  playerState: PlayerState;\r\n  duration: number;\r\n  currentTime: number;\r\n  isShuffled: boolean;\r\n  isLooped: boolean;\r\n  volume: number;\r\n  isMuted: boolean;\r\n  command: Command;\r\n}\r\n\r\nconst initialState: State = {\r\n  collections: [],\r\n  trackIds: [],\r\n  trackIndex: 0,\r\n  playerState: PlayerState.None,\r\n  duration: 0,\r\n  currentTime: 0,\r\n  isShuffled: false,\r\n  isLooped: false,\r\n  volume: 1,\r\n  isMuted: false,\r\n  command: Command.None\r\n};\r\n\r\nexport default createReducer(initialState, {\r\n  [ActionType.LoadCollection]: (\r\n    state: State,\r\n    { payload }: LoadCollectionAction\r\n  ) => {\r\n    const { collectionId, collectionType, trackIds, trackId } = payload;\r\n    return {\r\n      ...state,\r\n      collections: [\r\n        { id: collectionId, type: collectionType },\r\n        ...state.collections.filter(recent => recent.id !== collectionId)\r\n      ],\r\n      trackIds: trackIds,\r\n      trackIndex: trackId ? trackIds.indexOf(trackId) : 0,\r\n      command: Command.Play\r\n    };\r\n  },\r\n  [ActionType.LoadTrack]: (state: State, { payload }: LoadTrackAction) => ({\r\n    ...state,\r\n    trackIndex: state.trackIds.indexOf(payload.trackId),\r\n    command: Command.Play\r\n  }),\r\n  [ActionType.TrackLoaded]: (state: State, { payload }: TrackLoadedAction) => ({\r\n    ...state,\r\n    duration: payload\r\n  }),\r\n  [ActionType.Playing]: (state: State) => ({\r\n    ...state,\r\n    playerState: PlayerState.Playing,\r\n    command: Command.None\r\n  }),\r\n  [ActionType.Update]: (state: State, { payload }: UpdateAction) => ({\r\n    ...state,\r\n    currentTime: payload,\r\n    command: Command.None\r\n  }),\r\n  [ActionType.Play]: (state: State) => ({\r\n    ...state,\r\n    command: Command.Play\r\n  }),\r\n  [ActionType.Pause]: (state: State) => ({\r\n    ...state,\r\n    command: Command.Pause\r\n  }),\r\n  [ActionType.Paused]: (state: State) => ({\r\n    ...state,\r\n    playerState: PlayerState.Paused,\r\n    command: Command.None\r\n  }),\r\n  [ActionType.Seek]: (state: State, { payload }: SeekAction) => ({\r\n    ...state,\r\n    currentTime: payload,\r\n    command: Command.Seek\r\n  }),\r\n  [ActionType.Seeked]: (state: State) => ({\r\n    ...state\r\n  }),\r\n  [ActionType.Ended]: (state: State) => {\r\n    const { trackIndex, trackIds } = state;\r\n    return trackIndex === trackIds.length - 1\r\n      ? state.isLooped\r\n        ? { ...state, trackIndex: 0, command: Command.Play }\r\n        : { ...state, playerState: PlayerState.Paused }\r\n      : {\r\n          ...state,\r\n          trackIndex: trackIndex + 1,\r\n          command: Command.Play\r\n        };\r\n  },\r\n  [ActionType.Next]: (state: State) => {\r\n    const { trackIndex, trackIds } = state;\r\n    return {\r\n      ...state,\r\n      trackIndex: trackIndex === trackIds.length - 1 ? 0 : state.trackIndex + 1,\r\n      command: Command.Play\r\n    };\r\n  },\r\n  [ActionType.Previous]: (state: State) => {\r\n    const { trackIndex, trackIds } = state;\r\n    return {\r\n      ...state,\r\n      trackIndex: trackIndex === 0 ? trackIds.length - 1 : state.trackIndex - 1,\r\n      command: Command.Play\r\n    };\r\n  },\r\n  [ActionType.ToggleShuffle]: (state: State) => ({\r\n    ...state,\r\n    isShuffled: !state.isShuffled\r\n  }),\r\n  [ActionType.ToggleLoop]: (state: State) => ({\r\n    ...state,\r\n    isLooped: !state.isLooped\r\n  }),\r\n  [ActionType.ChangeVolume]: (\r\n    state: State,\r\n    { payload }: ChangeVolumeAction\r\n  ) => ({\r\n    ...state,\r\n    ...payload,\r\n    command: Command.ChangeVolume\r\n  }),\r\n  [ActionType.VolumeChanged]: (state: State) => ({\r\n    ...state,\r\n    command: Command.None\r\n  })\r\n});\r\n\r\nexport function selectCollection({ player }: CombinedState) {\r\n  const { collections } = player;\r\n  if (collections.length) {\r\n    return collections[0];\r\n  }\r\n}\r\n\r\nexport function selectLoadedTrack(state: CombinedState) {\r\n  const { trackIds, trackIndex } = state.player;\r\n  if (trackIds) {\r\n    return selectTrack(state, trackIds[trackIndex]);\r\n  }\r\n}\r\n\r\nexport function selectLoadedTracks(state: CombinedState) {\r\n  const { trackIds } = state.player;\r\n  return trackIds ? selectTracks(state)(trackIds) : [];\r\n}\r\n\r\nexport function selectLoadedAlbum(state: CombinedState) {\r\n  const track = selectLoadedTrack(state);\r\n  if (track) {\r\n    return selectAlbum(state, track.album);\r\n  }\r\n}\r\n\r\nexport function selectLoadedArtists(state: CombinedState) {\r\n  const track = selectLoadedTrack(state);\r\n  return track ? selectArtists(state)(track.artists) : [];\r\n}\r\n\r\nexport function selectIsLoaded(state: CombinedState) {\r\n  const { collections: recents, trackIds, trackIndex } = state.player;\r\n  return (id: string) =>\r\n    (recents.length && recents[0].id === id) ||\r\n    (!!trackIds.length && trackIds[trackIndex] === id);\r\n}\r\n\r\nexport function selectIsPlaying(state: CombinedState, id?: string) {\r\n  const { playerState } = state.player;\r\n  return (\r\n    (!id || selectIsLoaded(state)(id)) && playerState === PlayerState.Playing\r\n  );\r\n}\r\n\r\nexport function selectCanPlayPause(state: CombinedState) {\r\n  const { player } = state;\r\n  return (\r\n    player.playerState !== PlayerState.None &&\r\n    player.currentTime !== player.duration\r\n  );\r\n}\r\n\r\nexport function selectCanSeek(state: CombinedState) {\r\n  return state.player.playerState !== PlayerState.None;\r\n}\r\n\r\nexport function selectCanNext(state: CombinedState) {\r\n  const { trackIds, trackIndex, isLooped } = state.player;\r\n  return trackIds.length > 1 && (trackIndex < trackIds.length - 1 || isLooped);\r\n}\r\n\r\nexport function selectCanPrevious(state: CombinedState) {\r\n  const { trackIds, trackIndex, isLooped } = state.player;\r\n  return trackIds.length > 1 && (trackIndex > 0 || isLooped);\r\n}\r\n\r\nexport function selectIsShuffled({ player }: CombinedState) {\r\n  return player.isShuffled;\r\n}\r\n\r\nexport function selectIsLooped({ player }: CombinedState) {\r\n  return player.isLooped;\r\n}\r\n\r\nexport interface Times {\r\n  duration: number;\r\n  currentTime: number;\r\n}\r\n\r\nexport const selectTimes = createSelector(\r\n  ({ player }: CombinedState) => player.duration,\r\n  ({ player }: CombinedState) => player.currentTime,\r\n  (duration: number, currentTime: number) => ({\r\n    duration,\r\n    currentTime\r\n  })\r\n);\r\n\r\nexport function selectVolume({ player }: CombinedState) {\r\n  return player.volume;\r\n}\r\n\r\nexport function selectIsMuted({ player }: CombinedState) {\r\n  return player.isMuted;\r\n}\r\n\r\nexport function selectCommand(state: CombinedState): Command {\r\n  return state.player.command;\r\n}\r\n\r\nexport const selectRecents = createSelector(\r\n  ({ player }: CombinedState) => player,\r\n  ({ albums }: CombinedState) => albums,\r\n  ({ artists }: CombinedState) => artists,\r\n  ({ playlists }: CombinedState) => playlists,\r\n  (\r\n    player: State,\r\n    albums: AlbumDictionary,\r\n    artists: ArtistDictionary,\r\n    playlists: PlaylistDictionary\r\n  ) => {\r\n    return player.collections\r\n      .filter(collection => collection.id)\r\n      .map(collection => {\r\n        switch (collection.type) {\r\n          case Type.Album:\r\n            return albums[collection.id];\r\n          case Type.Artist:\r\n            return artists[collection.id];\r\n          default:\r\n            return playlists[collection.id];\r\n        }\r\n      });\r\n  }\r\n);\r\n","import React, { useState, HTMLAttributes } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nexport enum ImageShape {\r\n  Square = \"SQUARE\",\r\n  Round = \"ROUND\"\r\n}\r\n\r\nconst StyledImg = styled.img<{ shape: ImageShape; isLoaded: boolean }>`\r\n  ${props => props.shape === ImageShape.Round && \"border-radius: 50%;\"}\r\n  height: auto;\r\n  object-fit: cover;\r\n  opacity: ${props => (props.isLoaded ? \"1\" : \"0\")}\r\n  width: 100%;\r\n  transition: opacity .2s;\r\n`;\r\n\r\nconst Container = styled.div<{ shape: ImageShape }>`\r\n  background: ${props => props.theme.background.tertiary};\r\n  ${props => props.shape === ImageShape.Round && \"border-radius: 50%;\"}\r\n  height: 100%;\r\n  position: relative;\r\n  width: 100%;\r\n`;\r\n\r\nconst StyledText = styled.span`\r\n  font-size: ${props => props.theme.thickness.extraLarge}px;\r\n  font-weight: ${props => props.theme.fontWeight.light}\r\n  left: 50%;\r\n  position: absolute;\r\n  text-align: center;\r\n  top: 50%;\r\n  transform: translate(-50%, -50%);\r\n`;\r\n\r\ninterface Props {\r\n  source?: string;\r\n  shape: ImageShape;\r\n}\r\n\r\nfunction Image({\r\n  className,\r\n  source,\r\n  shape\r\n}: Props & HTMLAttributes<HTMLElement>) {\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n\r\n  function handleLoad() {\r\n    setIsLoaded(true);\r\n  }\r\n\r\n  return source ? (\r\n    <StyledImg\r\n      className={className}\r\n      src={source}\r\n      shape={shape}\r\n      onLoad={handleLoad}\r\n      isLoaded={isLoaded}\r\n    />\r\n  ) : (\r\n    <Container className={className} shape={shape}>\r\n      <StyledText>?</StyledText>\r\n    </Container>\r\n  );\r\n}\r\n\r\nImage.defaultProps = {\r\n  shape: ImageShape.Square\r\n};\r\n\r\nexport default Image;\r\n","import { Artist, Image, Type } from \"../types\";\r\nimport { ImageShape } from \"../components/core/Image\";\r\n\r\nexport function getArtistNames(artists: Artist[]): string {\r\n  return artists.map(artist => artist.name).join(\", \");\r\n}\r\n\r\nexport function getImageSource(object: {\r\n  images: Image[];\r\n}): string | undefined {\r\n  return object && object.images && object.images.length\r\n    ? object.images[0].url\r\n    : undefined;\r\n}\r\n\r\nexport function getImageShape(object: { type: Type }): ImageShape {\r\n  return object.type === Type.Artist ? ImageShape.Round : ImageShape.Square;\r\n}\r\n","import { createSelector } from \"reselect\";\r\nimport { Album, Artist, Playlist, Image, Type } from \"../types\";\r\nimport { SearchActionType as ActionType } from \"../actions\";\r\nimport {\r\n  SearchSuccessAction,\r\n  SelectAlbumAction,\r\n  SelectArtistAction,\r\n  SelectPlaylistAction\r\n} from \"../actions/search\";\r\nimport { getImageSource } from \"../utils\";\r\nimport { State as CombinedState } from \".\";\r\nimport {\r\n  Collection,\r\n  AlbumDictionary,\r\n  ArtistDictionary,\r\n  PlaylistDictionary\r\n} from \"./types\";\r\nimport createReducer from \"./createReducer\";\r\nimport { selectAlbums as selectAlbumsById } from \"./albums\";\r\nimport { selectArtists as selectArtistsById } from \"./artists\";\r\nimport { selectPlaylists as selectPlaylistsById } from \"./playlists\";\r\n\r\nexport interface State {\r\n  albumIds: string[];\r\n  artistIds: string[];\r\n  playlistIds: string[];\r\n  recents: Collection[];\r\n}\r\n\r\nconst initialState: State = {\r\n  albumIds: [],\r\n  artistIds: [],\r\n  playlistIds: [],\r\n  recents: []\r\n};\r\n\r\nfunction addRecent(\r\n  state: State,\r\n  item: { id: string; name: string; images: Image[] },\r\n  type: Type\r\n) {\r\n  return {\r\n    ...state,\r\n    recents: [\r\n      { type, id: item.id, name: item.name, imageSource: getImageSource(item) },\r\n      ...state.recents.filter(recent => recent.id !== item.id)\r\n    ]\r\n  };\r\n}\r\n\r\nexport default createReducer(initialState, {\r\n  [ActionType.SearchSuccess]: (state: State, action: SearchSuccessAction) => {\r\n    const { results } = action.payload;\r\n    const { albums, artists, playlists } = results[Object.keys(results)[0]];\r\n    return {\r\n      ...state,\r\n      albumIds: albums,\r\n      artistIds: artists,\r\n      playlistIds: playlists\r\n    };\r\n  },\r\n  [ActionType.ClearResults]: (state: State) => ({\r\n    ...state,\r\n    albumIds: [],\r\n    artistIds: [],\r\n    playlistIds: []\r\n  }),\r\n  [ActionType.SelectAlbum]: (state: State, { payload }: SelectAlbumAction) =>\r\n    addRecent(state, payload, Type.Album),\r\n  [ActionType.SelectArtist]: (state: State, { payload }: SelectArtistAction) =>\r\n    addRecent(state, payload, Type.Artist),\r\n  [ActionType.SelectPlaylist]: (\r\n    state: State,\r\n    { payload }: SelectPlaylistAction\r\n  ) => addRecent(state, payload, Type.Playlist),\r\n  [ActionType.ClearRecents]: (state: State) => ({\r\n    ...state,\r\n    recents: []\r\n  })\r\n});\r\n\r\nexport function selectAlbums(state: CombinedState): Album[] {\r\n  return selectAlbumsById(state)(state.search.albumIds);\r\n}\r\n\r\nexport function selectArtists(state: CombinedState): Artist[] {\r\n  return selectArtistsById(state)(state.search.artistIds).sort(\r\n    (x, y) => y.popularity - x.popularity\r\n  );\r\n}\r\n\r\nexport function selectPlaylists(state: CombinedState): Playlist[] {\r\n  return selectPlaylistsById(state)(state.search.playlistIds);\r\n}\r\n\r\nexport const selectRecents = createSelector(\r\n  ({ search }: CombinedState) => search,\r\n  ({ albums }: CombinedState) => albums,\r\n  ({ artists }: CombinedState) => artists,\r\n  ({ playlists }: CombinedState) => playlists,\r\n  (\r\n    search: State,\r\n    albums: AlbumDictionary,\r\n    artists: ArtistDictionary,\r\n    playlists: PlaylistDictionary\r\n  ) => {\r\n    return search.recents.map(recent => {\r\n      switch (recent.type) {\r\n        case Type.Album:\r\n          return albums[recent.id];\r\n        case Type.Artist:\r\n          return artists[recent.id];\r\n        default:\r\n          return playlists[recent.id];\r\n      }\r\n    });\r\n  }\r\n);\r\n","import { UserProfile } from \"../types\";\r\nimport { UserProfileActionType as ActionType } from \"../actions\";\r\nimport { UserProfileSuccessAction } from \"../actions/userProfile\";\r\nimport { State as CombinedState } from \".\";\r\nimport createReducer from \"./createReducer\";\r\n\r\nexport interface State {\r\n  userProfile?: UserProfile;\r\n}\r\n\r\nconst initialState: State = {};\r\n\r\nexport default createReducer(initialState, {\r\n  [ActionType.UserProfileSuccess]: (\r\n    state: State,\r\n    action: UserProfileSuccessAction\r\n  ) => ({\r\n    ...state,\r\n    userProfile: action.payload\r\n  })\r\n});\r\n\r\nexport function selectUserProfile(\r\n  state: CombinedState\r\n): UserProfile | undefined {\r\n  return state.userProfile.userProfile;\r\n}\r\n","import { combineReducers } from \"redux\";\r\nimport albums, { State as AlbumsState } from \"./albums\";\r\nimport artists, { State as ArtistsState } from \"./artists\";\r\nimport authorization, { State as AuthorizationState } from \"./authorization\";\r\nimport browse, { State as BrowseState } from \"./browse\";\r\nimport following, { State as FollowingState } from \"./following\";\r\nimport library, { State as LibraryState } from \"./library\";\r\nimport loading, { State as LoadingState } from \"./loading\";\r\nimport notifications, { State as NotificationsState } from \"./notifications\";\r\nimport player, { State as PlayerState } from \"./player\";\r\nimport playlists, { State as PlaylistsState } from \"./playlists\";\r\nimport search, { State as SearchState } from \"./search\";\r\nimport tracks, { State as TracksState } from \"./tracks\";\r\nimport userProfile, { State as UserProfileState } from \"./userProfile\";\r\n\r\nexport interface State {\r\n  albums: AlbumsState;\r\n  artists: ArtistsState;\r\n  authorization: AuthorizationState;\r\n  browse: BrowseState;\r\n  following: FollowingState;\r\n  library: LibraryState;\r\n  loading: LoadingState;\r\n  notifications: NotificationsState;\r\n  player: PlayerState;\r\n  playlists: PlaylistsState;\r\n  search: SearchState;\r\n  tracks: TracksState;\r\n  userProfile: UserProfileState;\r\n}\r\n\r\nexport default combineReducers<State>({\r\n  albums,\r\n  artists,\r\n  authorization,\r\n  browse,\r\n  following,\r\n  library,\r\n  loading,\r\n  notifications,\r\n  player,\r\n  playlists,\r\n  search,\r\n  tracks,\r\n  userProfile\r\n});\r\n","import { Theme } from \"./theme\";\r\n\r\nconst clickable = (onPrimary?: boolean) => ({ theme }: { theme: Theme }) => `\r\n  color: ${onPrimary ? theme.onPrimary.primary : theme.onBackground.secondary};\r\n  overflow: hidden;\r\n  position relative;\r\n  \r\n  &:disabled {\r\n    color: ${\r\n      onPrimary ? theme.onPrimary.tertiary : theme.onBackground.tertiary\r\n    };\r\n  }\r\n\r\n  &:not(:disabled):hover {\r\n    color: ${onPrimary ? theme.onPrimary.primary : theme.onBackground.primary};\r\n  }\r\n\r\n  &::before, &::after {\r\n    content: \"\";\r\n    height: 100%;\r\n    left: 0;\r\n    opacity: 0;\r\n    position: absolute;\r\n    top: 0;\r\n    transition: opacity .2s;\r\n    width: 100%;\r\n    z-index: 1;\r\n  }\r\n\r\n  &::before {\r\n    background: ${onPrimary ? theme.onPrimary.hover : theme.onBackground.hover};\r\n  }\r\n\r\n  &::after {\r\n    background: ${\r\n      onPrimary ? theme.onPrimary.active : theme.onBackground.active\r\n    };\r\n  }\r\n\r\n  &:not(:disabled):hover::before,\r\n  &:not(:disabled):active::after {\r\n    opacity: 1;\r\n  }\r\n`;\r\n\r\nexport { clickable };\r\n","import styled from \"../../styles/styled\";\r\nimport { clickable } from \"../../styles/effects\";\r\n\r\ninterface Props {\r\n  onPrimary?: boolean;\r\n}\r\n\r\nconst Button = styled.button<Props>`\r\n  ${props => clickable(!!props.onPrimary)}\r\n`;\r\n\r\nexport default Button;\r\n","import styled from \"../../styles/styled\";\r\n\r\nconst Heading = styled.h2`\r\n  font-size: ${props => props.theme.fontSize.extraLarge}px;\r\n  font-weight: ${props => props.theme.fontWeight.bold};\r\n  margin-bottom: ${props => props.theme.thickness.medium}px;\r\n  text-align: center;\r\n  width: 100%;\r\n  word-break: break-word;\r\n`;\r\n\r\nexport default Heading;\r\n","import React, { HTMLAttributes } from \"react\";\r\n\r\nexport enum IconType {\r\n  Brightness3 = \"brightness_3\",\r\n  Clear = \"clear\",\r\n  Done = \"done\",\r\n  Favorite = \"favorite\",\r\n  Home = \"home\",\r\n  LibraryBooks = \"library_books\",\r\n  Loop = \"loop\",\r\n  MusicNote = \"music_note\",\r\n  MusicOff = \"music_off\",\r\n  Pause = \"pause\",\r\n  Person = \"person\",\r\n  PlayArrow = \"play_arrow\",\r\n  QueueMusic = \"queue_music\",\r\n  Search = \"search\",\r\n  SentimentVeryDissatisfied = \"sentiment_very_dissatisfied\",\r\n  Shuffle = \"shuffle\",\r\n  SkipNext = \"skip_next\",\r\n  SkipPrevious = \"skip_previous\",\r\n  VolumeOff = \"volume_off\",\r\n  VolumeUp = \"volume_up\",\r\n  Wifi = \"wifi\",\r\n  WbSunny = \"wb_sunny\"\r\n}\r\n\r\ninterface Props {\r\n  type: IconType;\r\n}\r\n\r\nfunction Icon({\r\n  className,\r\n  type,\r\n  ...rest\r\n}: Props & HTMLAttributes<HTMLElement>) {\r\n  return (\r\n    <i {...rest} className={`material-icons ${className}`}>\r\n      {type}\r\n    </i>\r\n  );\r\n}\r\n\r\nexport default Icon;\r\n","import styled from \"../../styles/styled\";\r\nimport Button from \"./Button\";\r\n\r\nconst PrimaryButton = styled(Button).attrs(() => ({\r\n  onPrimary: true\r\n}))`\r\n  background: ${props => props.theme.color.primary};\r\n  border-radius: ${props => props.theme.thickness.medium}px;\r\n  height: ${props => props.theme.thickness.large}px;\r\n  padding: ${props => props.theme.thickness.small}px\r\n    ${props => props.theme.thickness.medium}px;\r\n`;\r\n\r\nexport default PrimaryButton;\r\n","import React, { ButtonHTMLAttributes } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Button from \"./Button\";\r\nimport Icon, { IconType } from \"./Icon\";\r\n\r\nconst StyledButton = styled(Button).attrs<{\r\n  onPrimary: boolean;\r\n}>(({ onPrimary }) => ({\r\n  onPrimary\r\n}))`\r\n  border-radius: 50%;\r\n  height: ${props => props.theme.thickness.large}px;\r\n  padding: ${props => props.theme.thickness.small}px;\r\n  width: ${props => props.theme.thickness.large}px;\r\n`;\r\n\r\nconst StyledIcon = styled(Icon)`\r\n  font-size: ${props => props.theme.thickness.medium}px;\r\n`;\r\n\r\nexport interface Props {\r\n  onPrimary?: boolean;\r\n  iconType: IconType;\r\n}\r\n\r\nfunction RoundButton({\r\n  onPrimary,\r\n  iconType,\r\n  ...rest\r\n}: Props & ButtonHTMLAttributes<HTMLButtonElement>) {\r\n  return (\r\n    <StyledButton {...rest} onPrimary={!!onPrimary}>\r\n      <StyledIcon type={iconType} />\r\n    </StyledButton>\r\n  );\r\n}\r\n\r\nexport default RoundButton;\r\n","import styled from \"styled-components\";\r\n\r\nconst Text = styled.span`\r\n  max-width: 100%;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n`;\r\n\r\nexport default Text;\r\n","import styled from \"../../styles/styled\";\r\nimport RoundButton from \"./RoundButton\";\r\n\r\nconst ToggleButton = styled(RoundButton).attrs(({ iconType }) => ({\r\n  iconType\r\n}))<{ isToggled?: boolean }>`\r\n  ${props => props.isToggled && `color: ${props.theme.color.primary};`}\r\n\r\n  &:not(:disabled):hover {\r\n    ${props => props.isToggled && `color: ${props.theme.color.primary};`}\r\n  }\r\n`;\r\n\r\nexport default ToggleButton;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Icon, IconType, Text } from \"../core\";\r\n\r\nconst StyledLink = styled(Link)`\r\n  align-items: center;\r\n  display: flex;\r\n  height: 100%;\r\n`;\r\n\r\nconst StyledIcon = styled(Icon)`\r\n  color: ${props => props.theme.onPrimary.primary};\r\n  margin-right: ${props => props.theme.thickness.small}px;\r\n`;\r\n\r\nconst StyledText = styled(Text)`\r\n  color: ${props => props.theme.onPrimary.primary};\r\n  font-size: ${props => props.theme.fontSize.large}px;\r\n  font-weight: ${props => props.theme.fontWeight.bold};\r\n`;\r\n\r\nconst Brand = () => {\r\n  return (\r\n    <StyledLink to={`${process.env.PUBLIC_URL}/browse`}>\r\n      <StyledIcon type={IconType.Wifi} />\r\n      <StyledText>Spotify</StyledText>\r\n    </StyledLink>\r\n  );\r\n};\r\n\r\nexport default Brand;\r\n","import React from \"react\";\r\nimport styled from \"../../styles/styled\";\r\nimport { UserProfile } from \"../../types\";\r\nimport { Icon, IconType, Text } from \"../core\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n`;\r\n\r\nconst StyledIcon = styled(Icon)`\r\n  color: ${props => props.theme.onPrimary.primary};\r\n  margin-right: ${props => props.theme.thickness.small}px;\r\n`;\r\n\r\nconst StyledText = styled(Text)`\r\n  color: ${props => props.theme.onPrimary.primary};\r\n`;\r\n\r\nconst User = (props: UserProfile) => {\r\n  const { display_name } = props;\r\n\r\n  return (\r\n    <Wrapper>\r\n      <StyledIcon type={IconType.Person} />\r\n      <StyledText>{display_name}</StyledText>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default User;\r\n","import React, { useEffect, HTMLAttributes, ReactNode } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport styled from \"../../styles/styled\";\r\nimport { UserProfile } from \"../../types\";\r\nimport { getUserProfile } from \"../../actions/userProfile\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectIsLoggedIn } from \"../../reducers/authorization\";\r\nimport { selectUserProfile } from \"../../reducers/userProfile\";\r\nimport Brand from \"./Brand\";\r\nimport User from \"./User\";\r\n\r\nconst Wrapper = styled.header`\r\n  align-items: center;\r\n  display: flex;\r\n  background: ${props => props.theme.color.primary};\r\n  box-shadow: ${props => props.theme.shadow.middle};\r\n  flex-shrink: 0;\r\n  justify-content: space-between;\r\n  z-index: 2;\r\n`;\r\n\r\nconst Left = styled.div`\r\n  height: 100%;\r\n`;\r\n\r\nconst Right = styled.div`\r\n  display: flex;\r\n  height: 100%;\r\n`;\r\n\r\ninterface Props {\r\n  children: ReactNode;\r\n  isLoggedIn: boolean;\r\n  userProfile?: UserProfile;\r\n  getUserProfile: () => void;\r\n}\r\n\r\nfunction Header({\r\n  children,\r\n  className,\r\n  isLoggedIn,\r\n  userProfile,\r\n  getUserProfile\r\n}: Props & HTMLAttributes<HTMLElement>) {\r\n  useEffect(() => {\r\n    if (isLoggedIn) {\r\n      getUserProfile();\r\n    }\r\n  }, [isLoggedIn, getUserProfile]);\r\n\r\n  return (\r\n    <Wrapper className={className}>\r\n      <Left>\r\n        <Brand />\r\n      </Left>\r\n\r\n      {userProfile && (\r\n        <Right>\r\n          {children}\r\n          <User {...userProfile} />\r\n        </Right>\r\n      )}\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  isLoggedIn: selectIsLoggedIn(state),\r\n  userProfile: selectUserProfile(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  getUserProfile\r\n};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(Header);\r\n","import { UserProfileActionType as ActionType } from \".\";\r\nimport { UserProfile } from \"../types\";\r\nimport { FetchDispatch, PayloadAction } from \"./types\";\r\n\r\nexport interface UserProfileSuccessAction\r\n  extends PayloadAction<ActionType.UserProfileSuccess, UserProfile> {}\r\n\r\nexport function getUserProfile() {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.UserProfileRequest,\r\n        ActionType.UserProfileSuccess,\r\n        ActionType.UserProfileFailure\r\n      ],\r\n      path: \"me\"\r\n    });\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport { withRouter, RouteComponentProps } from \"react-router\";\r\nimport { capitalize } from \"lodash\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Album, Artist, Playlist } from \"../../types\";\r\nimport { getImageSource, getImageShape } from \"../../utils\";\r\nimport { Button, Text, Image } from \"../core\";\r\n\r\nconst StyledButton = styled(Button)`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: row;\r\n  padding: ${props => props.theme.thickness.small}px;\r\n  width 100%;\r\n`;\r\n\r\nconst StyledImage = styled(Image)`\r\n  height: ${props => props.theme.thickness.large}px;\r\n  margin-right: ${props => props.theme.thickness.small}px;\r\n  width: ${props => props.theme.thickness.large}px;\r\n`;\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst Name = styled(Text)`\r\n  margin-bottom: ${props => props.theme.thickness.extraSmall}px;\r\n  text-align: left;\r\n`;\r\n\r\nconst Type = styled(Text)`\r\n  color: ${props => props.theme.onBackground.secondary};\r\n  text-align: left;\r\n`;\r\n\r\ninterface Props extends RouteComponentProps {\r\n  recent: Album | Artist | Playlist;\r\n}\r\n\r\nfunction RecentItem({ history, recent }: Props) {\r\n  function handleClick() {\r\n    history.push(`${process.env.PUBLIC_URL}/${recent.type}/${recent.id}`);\r\n  }\r\n\r\n  return (\r\n    <li>\r\n      <StyledButton onClick={handleClick}>\r\n        <StyledImage\r\n          source={getImageSource(recent)}\r\n          shape={getImageShape(recent)}\r\n        />\r\n        <Container>\r\n          <Name>{recent.name}</Name>\r\n          <Type>{capitalize(recent.type)}</Type>\r\n        </Container>\r\n      </StyledButton>\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default withRouter(RecentItem);\r\n","import React, { HTMLAttributes } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Album, Artist, Playlist } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectRecents } from \"../../reducers/player\";\r\nimport RecentItem from \"./RecentItem\";\r\n\r\nconst Title = styled.h3`\r\n  font-size: ${props => props.theme.fontSize.medium}px;\r\n  font-weight: ${props => props.theme.fontWeight.normal};\r\n  text-align: center;\r\n  margin-bottom: ${props => props.theme.thickness.small}px;\r\n`;\r\n\r\ninterface Props {\r\n  recents: (Album | Artist | Playlist)[];\r\n}\r\n\r\nfunction RecentList({\r\n  className,\r\n  recents\r\n}: Props & HTMLAttributes<HTMLElement>) {\r\n  return (\r\n    <div className={className}>\r\n      {!!recents.length && <Title>Recently Played</Title>}\r\n      <ul>\r\n        {recents.map(recent => (\r\n          <RecentItem key={recent.id} recent={recent} />\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  recents: selectRecents(state)\r\n});\r\n\r\nexport default connect(\r\n  mapState,\r\n  null\r\n)(RecentList);\r\n","import React, { HTMLAttributes } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport styled from \"../../styles/styled\";\r\nimport { clickable } from \"../../styles/effects\";\r\nimport { Icon, IconType } from \"../core\";\r\nimport RecentList from \"./RecentList\";\r\n\r\nconst Wrapper = styled.div`\r\n  background: ${props => props.theme.background.primary};\r\n  box-shadow: ${props => props.theme.shadow.middle};\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n  padding: 0 ${props => props.theme.thickness.medium}px;\r\n  z-index: 1;\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.extraSmall}px) {\r\n    padding: ${props => props.theme.thickness.medium}px 0;\r\n    width: ${props => props.theme.thickness.extraExtraLarge}px;\r\n  }\r\n`;\r\n\r\nconst List = styled.ul`\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.extraSmall}px) {\r\n    flex-direction: column;\r\n    justify-content: flex-start;\r\n    margin-bottom: ${props => props.theme.thickness.medium}px;\r\n  }\r\n`;\r\n\r\nconst StyledNavLink = styled(NavLink)`\r\n  ${clickable(false)}\r\n\r\n  align-items: center;\r\n  color: ${props => props.theme.onBackground.secondary};\r\n  display: flex;\r\n  height: ${props => props.theme.thickness.large}px;\r\n  padding: 0 ${props => props.theme.thickness.medium}px;\r\n\r\n  &.active {\r\n    border-bottom: ${props => props.theme.thickness.extraExtraSmall}px solid\r\n      ${props => props.theme.color.primary};\r\n    color: ${props => props.theme.onBackground.primary};\r\n  }\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.extraSmall}px) {\r\n    padding: 0 ${props => props.theme.thickness.large}px;\r\n\r\n    &.active {\r\n      border: none;\r\n      border-right: ${props => props.theme.thickness.extraExtraSmall}px solid\r\n        ${props => props.theme.color.primary};\r\n    }\r\n  }\r\n`;\r\n\r\nconst StyledIcon = styled(Icon)`\r\n  margin-right: ${props => props.theme.thickness.small}px;\r\n`;\r\n\r\nconst StyledRecents = styled(RecentList)`\r\n  overflow: hidden;\r\n  display: none;\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.extraSmall}px) {\r\n    display: block;\r\n  }\r\n`;\r\n\r\nconst items = [\r\n  {\r\n    url: `${process.env.PUBLIC_URL}/browse`,\r\n    icon: IconType.Home,\r\n    text: \"Browse\"\r\n  },\r\n  {\r\n    url: `${process.env.PUBLIC_URL}/search`,\r\n    icon: IconType.Search,\r\n    text: \"Search\"\r\n  },\r\n  {\r\n    url: `${process.env.PUBLIC_URL}/library`,\r\n    icon: IconType.LibraryBooks,\r\n    text: \"Library\"\r\n  }\r\n];\r\n\r\nconst Menu = ({ className }: HTMLAttributes<HTMLElement>) => {\r\n  return (\r\n    <Wrapper className={className}>\r\n      <List>\r\n        {items.map(item => (\r\n          <li key={item.url}>\r\n            <StyledNavLink to={item.url}>\r\n              <StyledIcon type={item.icon} />\r\n              {item.text}\r\n            </StyledNavLink>\r\n          </li>\r\n        ))}\r\n      </List>\r\n\r\n      <StyledRecents />\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Menu;\r\n","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router\";\r\n\r\ninterface Props {\r\n  from: string;\r\n  to: string;\r\n}\r\n\r\nfunction DefaultRoute({ from, to }: Props) {\r\n  return <Route exact path={from} render={() => <Redirect to={to} />} />;\r\n}\r\n\r\nexport default DefaultRoute;\r\n","import React from \"react\";\r\nimport {\r\n  Route,\r\n  RouteProps,\r\n  RouteComponentProps,\r\n  Redirect,\r\n  withRouter\r\n} from \"react-router\";\r\nimport { connect } from \"react-redux\";\r\nimport { State } from \"../reducers\";\r\nimport { selectIsLoggedIn } from \"../reducers/authorization\";\r\nimport { selectUserProfile } from \"../reducers/userProfile\";\r\nimport { UserProfile } from \"../types\";\r\n\r\ninterface Props extends RouteProps {\r\n  isLoggedIn: boolean;\r\n  userProfile?: UserProfile;\r\n}\r\n\r\nfunction PrivateRoute({\r\n  component: Component,\r\n  isLoggedIn,\r\n  userProfile,\r\n  ...rest\r\n}: Props & RouteComponentProps) {\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={props =>\r\n        isLoggedIn ? (\r\n          userProfile ? (\r\n            Component && <Component {...props} />\r\n          ) : (\r\n            <></>\r\n          )\r\n        ) : (\r\n          <Redirect to={`${process.env.PUBLIC_URL}/login`} />\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  isLoggedIn: selectIsLoggedIn(state),\r\n  userProfile: selectUserProfile(state)\r\n});\r\n\r\nexport default withRouter(\r\n  connect(\r\n    mapState,\r\n    null\r\n  )(PrivateRoute)\r\n);\r\n","import React from \"react\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Heading, PrimaryButton } from \"../core\";\r\nimport { logInRedirect } from \"../../utils/authorization\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  justify-content: center;\r\n`;\r\n\r\nconst StyledButton = styled(PrimaryButton)`\r\n  width: ${props => props.theme.thickness.extraLarge}px;\r\n`;\r\n\r\nfunction LogIn() {\r\n  function handleCLick() {\r\n    logInRedirect();\r\n  }\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Heading>You are not logged in.</Heading>\r\n      <StyledButton onClick={handleCLick}>Log In</StyledButton>\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nexport default LogIn;\r\n","import React from \"react\";\r\nimport { RouteComponentProps, NavLink, withRouter } from \"react-router-dom\";\r\nimport styled from \"../../styles/styled\";\r\n\r\nconst List = styled.ul`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-shrink: 0;\r\n  flex-wrap: wrap;\r\n  font-size: ${props => props.theme.fontSize.medium}px;\r\n  justify-content: center;\r\n  margin-bottom: 0;\r\n  position: relative;\r\n  top: -25px;\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.extraSmall}px) {\r\n    margin-bottom: ${props => props.theme.thickness.medium}px;\r\n    top: 0;\r\n  }\r\n`;\r\n\r\nconst StyledNavLink = styled(NavLink)`\r\n  align-items: center;\r\n  color: ${props => props.theme.onBackground.secondary};\r\n  display: flex;\r\n  height: ${props => props.theme.thickness.large}px;\r\n  justify-content: center;\r\n  padding: 0 ${props => props.theme.thickness.medium}px;\r\n  position: relative;\r\n\r\n  &:hover {\r\n    color: ${props => props.theme.onBackground.primary};\r\n  }\r\n\r\n  &.active {\r\n    color: ${props => props.theme.onBackground.primary};\r\n  }\r\n\r\n  &.active::after {\r\n    background: ${props => props.theme.color.primary};\r\n    bottom: 0;\r\n    content: \"\";\r\n    height: ${props => props.theme.thickness.extraExtraSmall}px;\r\n    left: 50%;\r\n    position: absolute;\r\n    transform: translate(-50%, 0);\r\n    width: ${props => props.theme.thickness.large}px;\r\n  }\r\n`;\r\n\r\ninterface Props extends RouteComponentProps {\r\n  items: { path: string; text: string }[];\r\n}\r\n\r\nfunction SubMenu({ match, items }: Props) {\r\n  return (\r\n    <List>\r\n      {items.map(item => (\r\n        <li key={item.path}>\r\n          <StyledNavLink to={`${match.url}/${item.path}`}>\r\n            {item.text}\r\n          </StyledNavLink>\r\n        </li>\r\n      ))}\r\n    </List>\r\n  );\r\n}\r\n\r\nexport default withRouter(SubMenu);\r\n","import React from \"react\";\r\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\r\nimport DefaultRoute from \"../DefaultRoute\";\r\nimport PrivateRoute from \"../PrivateRoute\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n  items: { default?: boolean; path: string; component: any }[];\r\n}\r\n\r\nfunction SubRoutes({ match, items }: Props) {\r\n  const defaultItem = items.find(item => !!item.default);\r\n  return (\r\n    <>\r\n      {!!defaultItem && (\r\n        <DefaultRoute\r\n          from={`${match.path}`}\r\n          to={`${match.path}/${defaultItem.path}`}\r\n        />\r\n      )}\r\n\r\n      {items.map(item => (\r\n        <PrivateRoute\r\n          key={item.path}\r\n          path={`${match.path}/${item.path}`}\r\n          component={item.component}\r\n        />\r\n      ))}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default withRouter(SubRoutes);\r\n","import { schema } from \"normalizr\";\r\n\r\nconst Album = new schema.Entity(\r\n  \"albums\",\r\n  {},\r\n  {\r\n    processStrategy: ({ tracks, ...rest }) => ({\r\n      ...rest,\r\n      tracks: tracks ? tracks.items : []\r\n    })\r\n  }\r\n);\r\n\r\nconst Artist = new schema.Entity(\"artists\");\r\n\r\nconst Artists = new schema.Object({\r\n  artists: [Artist]\r\n});\r\n\r\nconst Category = new schema.Entity(\"categories\");\r\n\r\nconst PagedAlbums = new schema.Object({\r\n  items: [Album],\r\n  albums: { items: [Album] }\r\n});\r\n\r\nconst PagedArtists = new schema.Object({\r\n  artists: { items: [Artist] }\r\n});\r\n\r\nconst PagedCategories = new schema.Object({\r\n  categories: { items: [Category] }\r\n});\r\n\r\nconst PagedPlaylists = new schema.Object({});\r\n\r\nconst PagedTracks = new schema.Object({});\r\n\r\nconst Playlist = new schema.Entity(\r\n  \"playlists\",\r\n  {},\r\n  {\r\n    processStrategy: ({ tracks, ...rest }) => ({\r\n      ...rest,\r\n      tracks: tracks.items ? tracks.items.map((item: any) => item.track) : []\r\n    })\r\n  }\r\n);\r\n\r\nconst Results = new schema.Entity(\r\n  \"results\",\r\n  {\r\n    albums: [Album],\r\n    artists: [Artist],\r\n    playlists: [Playlist]\r\n  },\r\n  {\r\n    processStrategy: ({ albums, artists, playlists }) => ({\r\n      albums: albums.items,\r\n      artists: artists.items,\r\n      playlists: playlists.items\r\n    })\r\n  }\r\n);\r\n\r\nconst SavedAlbums = new schema.Object({\r\n  //@ts-ignore\r\n  items: [{ album: Album }]\r\n});\r\n\r\nconst Track = new schema.Entity(\r\n  \"tracks\",\r\n  {\r\n    album: Album,\r\n    artists: [Artist]\r\n  },\r\n  {\r\n    processStrategy: ({ album, artists, ...rest }, parent) => ({\r\n      ...rest,\r\n      album: parent[\"type\"] === \"album\" ? parent : album,\r\n      artists: artists\r\n    })\r\n  }\r\n);\r\n\r\nconst Tracks = new schema.Object({\r\n  tracks: [Track]\r\n});\r\n\r\nAlbum.define({\r\n  artists: [Artist],\r\n  tracks: [Track]\r\n});\r\n\r\nArtist.define({\r\n  albums: [Album],\r\n  relatedArtists: [Artist],\r\n  topTracks: [Track]\r\n});\r\n\r\nPagedPlaylists.define({\r\n  items: [Playlist],\r\n  playlists: { items: [Playlist] }\r\n});\r\n\r\nPagedTracks.define({\r\n  //@ts-ignore\r\n  items: [{ track: Track }]\r\n});\r\n\r\nPlaylist.define({\r\n  tracks: [Track]\r\n});\r\n\r\nexport const Schemas = {\r\n  Album,\r\n  Artist,\r\n  Artists,\r\n  Category,\r\n  PagedAlbums,\r\n  PagedArtists,\r\n  PagedCategories,\r\n  PagedPlaylists,\r\n  PagedTracks,\r\n  Playlist,\r\n  Results,\r\n  SavedAlbums,\r\n  Track,\r\n  Tracks\r\n};\r\n","import React from \"react\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Button, Image, Text } from \"../core\";\r\nimport { ImageShape } from \"../core/Image\";\r\nimport { Cover } from \"./types\";\r\n\r\nconst StyledButton = styled(Button)<{ shape: ImageShape }>`\r\n    background: ${props => props.theme.background.tertiary};\r\n  ${props => props.shape === ImageShape.Round && \"border-radius: 50%;\"}\r\n  box-shadow: ${props => props.theme.shadow.middle};\r\n  display: flex;\r\n  margin-bottom: ${props => props.theme.thickness.small}px;\r\n  padding-top: 100%;\r\n  position: relative;\r\n  width: 100%;\r\n`;\r\n\r\nconst StyledImge = styled(Image)`\r\n  height: 100%;\r\n  left: 0;\r\n  position: absolute;\r\n  top: 0;\r\n`;\r\n\r\nconst Title = styled(Text)`\r\n  font-size: ${props => props.theme.fontSize.medium}px;\r\n  text-align: center;\r\n  width: 100%;\r\n`;\r\n\r\nconst SubTitle = styled(Text)`\r\n  color: ${props => props.theme.onBackground.secondary};\r\n  font-size: ${props => props.theme.fontSize.medium}px;\r\n  font-weight: ${props => props.theme.fontWeight.light};\r\n  margin-top: ${props => props.theme.thickness.extraSmall}px;\r\n  text-align: center;\r\n  width: 100%;\r\n`;\r\n\r\ninterface Props {\r\n  cover: Cover;\r\n  onClick: (coverId: string) => void;\r\n}\r\n\r\nfunction CoverItem({ cover, onClick }: Props) {\r\n  function handleClick() {\r\n    onClick(cover.id);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <StyledButton\r\n        onClick={handleClick}\r\n        shape={cover.imageShape || ImageShape.Square}\r\n      >\r\n        <StyledImge source={cover.imageSource} />\r\n      </StyledButton>\r\n      <Title>{cover.title}</Title>\r\n      {cover.subTitle && <SubTitle>{cover.subTitle}</SubTitle>}\r\n    </>\r\n  );\r\n}\r\n\r\nCoverItem.defaultProps = {\r\n  onClick: () => {}\r\n};\r\n\r\nexport default CoverItem;\r\n","import React from \"react\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Cover } from \"./types\";\r\nimport CoverItem from \"./CoverItem\";\r\n\r\nconst StyledList = styled.ul`\r\n  align-content: flex-start;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n  margin: -${props => props.theme.thickness.small}px;\r\n  width: calc(100% + 2 * ${props => props.theme.thickness.small}px);\r\n`;\r\n\r\nfunction splitWidth(times: number) {\r\n  return `calc((100% - ${times * 25}px) / ${times} - 4px)`;\r\n}\r\n\r\nconst StyledItem = styled.li`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin: ${props => props.theme.thickness.small}px;\r\n  width: ${splitWidth(2)};\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.extraSmall}px) {\r\n    width: ${splitWidth(3)};\r\n  }\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.small}px) {\r\n    width: ${splitWidth(6)};\r\n  }\r\n`;\r\n\r\ninterface Props {\r\n  className?: string;\r\n  covers: Cover[];\r\n  onClick: (id: string) => void;\r\n}\r\n\r\nfunction CoverList({ className, covers, onClick }: Props) {\r\n  return (\r\n    <StyledList className={className}>\r\n      {covers.map(cover => (\r\n        <StyledItem key={cover.id}>\r\n          <CoverItem cover={cover} onClick={onClick} />\r\n        </StyledItem>\r\n      ))}\r\n    </StyledList>\r\n  );\r\n}\r\n\r\nexport default CoverList;\r\n","import React from \"react\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\nimport { Category } from \"../../types\";\r\nimport { Cover } from \"./types\";\r\nimport CoverList from \"./CoverList\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n  categories: Category[];\r\n}\r\n\r\nfunction CategoryCovers({ history, categories }: Props) {\r\n  function handleClick(categoryId: string) {\r\n    history.push(`${process.env.PUBLIC_URL}/category/${categoryId}`);\r\n  }\r\n\r\n  const covers = getCovers(categories);\r\n  return <CoverList covers={covers} onClick={handleClick} />;\r\n}\r\n\r\nfunction getCovers(categories: Category[]): Cover[] {\r\n  return categories.map(category => ({\r\n    id: category.id,\r\n    imageSource:\r\n      category.icons && category.icons.length\r\n        ? category.icons[0].url\r\n        : undefined,\r\n    title: category.name\r\n  }));\r\n}\r\n\r\nexport default withRouter(CategoryCovers);\r\n","import React, { ComponentType, useState, useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { withRouter } from \"react-router\";\r\nimport styled from \"../styles/styled\";\r\nimport { State } from \"../reducers\";\r\nimport { selectIsLoading } from \"../reducers/loading\";\r\n\r\nconst Fader = styled.div<{ isLoading: boolean }>`\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-grow: 1;\r\n  opacity: ${props => (props.isLoading ? \"0\" : \"1\")};\r\n  transition: ${props => (props.isLoading ? \"all 0\" : \"all 0.2s\")};\r\n`;\r\n\r\nconst Loader = styled.div<{ isLoading: boolean }>`\r\n  height: 5px;\r\n  left: 0;\r\n  position: absolute;\r\n  opacity: ${props => (props.isLoading ? \"1\" : \"0\")};\r\n  top: 0;\r\n  transition: ${props => (props.isLoading ? \"all 0\" : \"all 0.2s\")};\r\n  width: 100%;\r\n  z-index: 2;\r\n\r\n  &::before {\r\n    background: ${props => props.theme.onPrimary.secondary};\r\n    content: \"\";\r\n    height: 100%;\r\n    position: absolute;\r\n    width: 100%;\r\n  }\r\n\r\n  &::after {\r\n    animation: transform 2s linear infinite;\r\n    background: ${props => props.theme.onPrimary.primary};\r\n    content: \"\";\r\n    height: 100%;\r\n    position: absolute;\r\n    transform-origin: 0;\r\n    width: 100%;\r\n\r\n    @keyframes transform {\r\n      0% {\r\n        left: 0;\r\n        width: 0;\r\n      }\r\n      50% {\r\n        left: 0;\r\n        width: 100%;\r\n      }\r\n      100% {\r\n        left: 100%;\r\n        width: 0;\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst withLoader = (WrappedComponent: ComponentType<any>) => {\r\n  const WithLoader = ({ match, isLoading, ...rest }: any) => {\r\n    const [prevUrl, setPrevUrl] = useState(match.url);\r\n    const [hasLoaded, setHasLoaded] = useState(false);\r\n\r\n    useEffect(() => {\r\n      setHasLoaded(!isLoading);\r\n    }, [isLoading]);\r\n\r\n    if (prevUrl !== match.url) {\r\n      setHasLoaded(false);\r\n      setPrevUrl(match.url);\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <Loader isLoading={!hasLoaded || isLoading} />\r\n        <Fader isLoading={!hasLoaded || isLoading}>\r\n          <WrappedComponent {...rest} />\r\n        </Fader>\r\n      </>\r\n    );\r\n  };\r\n\r\n  const mapState = (state: State) => ({\r\n    isLoading: selectIsLoading(state)\r\n  });\r\n\r\n  return withRouter(\r\n    //@ts-ignore\r\n    connect(\r\n      mapState,\r\n      null\r\n    )(WithLoader)\r\n  );\r\n};\r\n\r\nexport default withLoader;\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Category } from \"../../types\";\r\nimport { getCategories } from \"../../actions/browse\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectCategories } from \"../../reducers/browse\";\r\nimport CategoryCovers from \"../covers/CategoryCovers\";\r\nimport withLoader from \"../withLoader\";\r\n\r\ninterface Props {\r\n  categories: Category[];\r\n  getCategories: () => void;\r\n}\r\n\r\nfunction Categories({ categories, getCategories }: Props) {\r\n  useEffect(getCategories, []);\r\n\r\n  return <CategoryCovers categories={categories} />;\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  categories: selectCategories(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  getCategories: getCategories\r\n};\r\n\r\nexport default withLoader(\r\n  connect(\r\n    mapState,\r\n    mapDispatch\r\n  )(Categories)\r\n);\r\n","import { BrowseActionType as ActionType } from \".\";\r\nimport { EntitiesAction, FetchDispatch } from \"./types\";\r\nimport { Schemas } from \"./schemas\";\r\n\r\nexport interface CategoriesSuccessAction\r\n  extends EntitiesAction<ActionType.CategoriesSuccess> {}\r\n\r\nexport function getCategories() {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.CategoriesRequest,\r\n        ActionType.CategoriesSuccess,\r\n        ActionType.CategoriesFailure\r\n      ],\r\n      path: \"browse/categories\",\r\n      schema: Schemas.PagedCategories\r\n    });\r\n  };\r\n}\r\n\r\nexport interface CategorySuccessAction\r\n  extends EntitiesAction<ActionType.CategorySuccess> {}\r\n\r\nexport function getCategory(categoryId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.CategoryRequest,\r\n        ActionType.CategorySuccess,\r\n        ActionType.CategoryFailure\r\n      ],\r\n      path: `browse/categories/${categoryId}`,\r\n      schema: Schemas.Category\r\n    });\r\n  };\r\n}\r\n\r\nexport interface CategoryPlaylistsSuccessAction\r\n  extends EntitiesAction<ActionType.CategoryPlaylistsSuccess> {}\r\n\r\nexport function getCategoryPlaylists(categoryId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.CategoryPlaylistsRequest,\r\n        ActionType.CategoryPlaylistsSuccess,\r\n        ActionType.CategoryPlaylistsFailure\r\n      ],\r\n      path: `browse/categories/${categoryId}/playlists`,\r\n      schema: Schemas.PagedPlaylists\r\n    });\r\n  };\r\n}\r\n\r\nexport interface FeaturedPlaylistsSuccessAction\r\n  extends EntitiesAction<ActionType.FeaturedPlaylistsSuccess> {}\r\n\r\nexport function getFeaturedPlaylists() {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.FeaturedPlaylistsRequest,\r\n        ActionType.FeaturedPlaylistsSuccess,\r\n        ActionType.FeaturedPlaylistsFailure\r\n      ],\r\n      path: \"browse/featured-playlists\",\r\n      schema: Schemas.PagedPlaylists\r\n    });\r\n  };\r\n}\r\n\r\nexport interface NewReleasesSuccessAction\r\n  extends EntitiesAction<ActionType.NewReleasesSuccess> {}\r\n\r\nexport function getNewReleases() {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.NewReleasesRequest,\r\n        ActionType.NewReleasesSuccess,\r\n        ActionType.NewReleasesFailure\r\n      ],\r\n      path: \"browse/new-releases\",\r\n      schema: Schemas.PagedAlbums\r\n    });\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\nimport { Album, Artist } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectAlbumArtists } from \"../../reducers/albums\";\r\nimport { getArtistNames, getImageSource } from \"../../utils\";\r\nimport { Cover } from \"./types\";\r\nimport CoverList from \"./CoverList\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n  albums: Album[];\r\n  selectAbumArtists: (albumId: string) => Artist[];\r\n  onSelect?: (albumId: string) => void;\r\n}\r\n\r\nfunction AlbumCovers({ history, albums, selectAbumArtists, onSelect }: Props) {\r\n  function handleClick(albumId: string) {\r\n    history.push(`${process.env.PUBLIC_URL}/album/${albumId}`);\r\n    onSelect && onSelect(albumId);\r\n  }\r\n\r\n  const covers = getCovers(albums, selectAbumArtists);\r\n  return <CoverList covers={covers} onClick={handleClick} />;\r\n}\r\n\r\nfunction getCovers(\r\n  albums: Album[],\r\n  selectAlbumArtists: (albumId: string) => Artist[]\r\n): Cover[] {\r\n  return albums.map(album => {\r\n    const artists = selectAlbumArtists(album.id);\r\n    return {\r\n      id: album.id,\r\n      imageSource: getImageSource(album),\r\n      title: album.name,\r\n      subTitle: getArtistNames(artists)\r\n    };\r\n  });\r\n}\r\n\r\nconst mapDispatch = (state: State) => ({\r\n  selectAbumArtists: selectAlbumArtists(state)\r\n});\r\n\r\nexport default withRouter(\r\n  connect(\r\n    mapDispatch,\r\n    null\r\n  )(AlbumCovers)\r\n);\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Album } from \"../../types\";\r\nimport { getNewReleases } from \"../../actions/browse\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectNewReleases } from \"../../reducers/browse\";\r\nimport AlbumCovers from \"../covers/AlbumCovers\";\r\nimport withLoader from \"../withLoader\";\r\n\r\ninterface Props {\r\n  albums: Album[];\r\n  getAlbums: () => void;\r\n}\r\n\r\nfunction NewReleases({ albums, getAlbums }: Props) {\r\n  useEffect(getAlbums, []);\r\n\r\n  return <AlbumCovers albums={albums} />;\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  albums: selectNewReleases(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  getAlbums: getNewReleases\r\n};\r\n\r\nexport default withLoader(\r\n  connect(\r\n    mapState,\r\n    mapDispatch\r\n  )(NewReleases)\r\n);\r\n","import React from \"react\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\nimport { Playlist } from \"../../types\";\r\nimport { getImageSource } from \"../../utils\";\r\nimport { Cover } from \"./types\";\r\nimport CoverList from \"./CoverList\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n  playlists: Playlist[];\r\n  onSelect?: (playlistId: string) => void;\r\n}\r\n\r\nfunction PlayistCovers({ history, playlists, onSelect }: Props) {\r\n  function handleClick(playlistId: string) {\r\n    history.push(`${process.env.PUBLIC_URL}/playlist/${playlistId}`);\r\n    onSelect && onSelect(playlistId);\r\n  }\r\n\r\n  const covers = getCovers(playlists);\r\n  return <CoverList covers={covers} onClick={handleClick} />;\r\n}\r\n\r\nfunction getCovers(playlists: Playlist[]): Cover[] {\r\n  return playlists.map(playlist => ({\r\n    id: playlist.id,\r\n    imageSource: getImageSource(playlist),\r\n    title: playlist.name,\r\n    subTitle: playlist.owner.display_name\r\n  }));\r\n}\r\n\r\nexport default withRouter(PlayistCovers);\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Playlist } from \"../../types\";\r\nimport { getFeaturedPlaylists } from \"../../actions/browse\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectFeaturedPlaylists } from \"../../reducers/browse\";\r\nimport PlaylistCovers from \"../covers/PlaylistCovers\";\r\nimport withLoader from \"../withLoader\";\r\n\r\ninterface Props {\r\n  playlists: Playlist[];\r\n  getPlaylists: () => void;\r\n}\r\n\r\nfunction FeaturedPlaylists({ playlists, getPlaylists }: Props) {\r\n  useEffect(getPlaylists, []);\r\n\r\n  return <PlaylistCovers playlists={playlists} />;\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  playlists: selectFeaturedPlaylists(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  getPlaylists: getFeaturedPlaylists\r\n};\r\n\r\nexport default withLoader(\r\n  connect(\r\n    mapState,\r\n    mapDispatch\r\n  )(FeaturedPlaylists)\r\n);\r\n","import React from \"react\";\r\nimport SubMenu from \"../layout/SubMenu\";\r\nimport SubRoutes from \"../layout/SubRoutes\";\r\nimport Categories from \"./Categories\";\r\nimport NewReleases from \"./NewReleases\";\r\nimport FeaturedPlaylists from \"./FeaturedPlaylists\";\r\n\r\nconst items = [\r\n  {\r\n    path: \"categories\",\r\n    text: \"Categories\",\r\n    default: true,\r\n    component: Categories\r\n  },\r\n  {\r\n    path: \"new-releases\",\r\n    text: \"New Releases\",\r\n    component: NewReleases\r\n  },\r\n  {\r\n    path: \"featured-playists\",\r\n    text: \"Featured Playlists\",\r\n    component: FeaturedPlaylists\r\n  }\r\n];\r\n\r\nfunction Browse() {\r\n  return (\r\n    <>\r\n      <SubMenu items={items} />\r\n      <SubRoutes items={items} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Browse;\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\nimport { Category, Playlist } from \"../../types\";\r\nimport { getCategory, getCategoryPlaylists } from \"../../actions/browse\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectCategory, selectCategoryPlaylists } from \"../../reducers/browse\";\r\nimport { Heading } from \"../core\";\r\nimport PlaylistCovers from \"../covers/PlaylistCovers\";\r\nimport withLoader from \"../withLoader\";\r\n\r\ninterface Params {\r\n  categoryId: string;\r\n}\r\n\r\ninterface Props extends RouteComponentProps<Params> {\r\n  category?: Category;\r\n  playlists: Playlist[];\r\n  getCategory: (categoryId: string) => void;\r\n  getPlaylists: (categoryId: string) => void;\r\n}\r\n\r\nfunction CategoryPlaylists({\r\n  match,\r\n  category,\r\n  playlists,\r\n  getCategory,\r\n  getPlaylists\r\n}: Props) {\r\n  const { categoryId } = match.params;\r\n\r\n  const effect = () => {\r\n    if (!category) {\r\n      getCategory(categoryId);\r\n    }\r\n    getPlaylists(categoryId);\r\n  };\r\n  useEffect(effect, []);\r\n\r\n  return (\r\n    <div>\r\n      <Heading>{category && category.name}</Heading>\r\n      <PlaylistCovers playlists={playlists} />\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State, { match }: Props) => {\r\n  const categoryId = match.params.categoryId;\r\n\r\n  return {\r\n    category: selectCategory(state, categoryId),\r\n    playlists: selectCategoryPlaylists(state)\r\n  };\r\n};\r\n\r\nconst mapDispatch = {\r\n  getCategory: (categoryId: string) => getCategory(categoryId),\r\n  getPlaylists: (categoryId: string) => getCategoryPlaylists(categoryId)\r\n};\r\n\r\nexport default withLoader(\r\n  withRouter(\r\n    connect(\r\n      mapState,\r\n      mapDispatch\r\n    )(CategoryPlaylists)\r\n  )\r\n);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { withRouter, RouteComponentProps } from \"react-router\";\r\nimport { capitalize } from \"lodash\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Album, Artist, Playlist } from \"../../types\";\r\nimport { clearRecents } from \"../../actions/search\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectRecents } from \"../../reducers/search\";\r\nimport { getImageSource, getImageShape } from \"../../utils\";\r\nimport { Heading, PrimaryButton } from \"../core\";\r\nimport CoverList from \"../covers/CoverList\";\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst StyledCoverList = styled(CoverList)`\r\n  margin-bottom: ${props => props.theme.thickness.medium}px;\r\n`;\r\n\r\nconst ClearButton = styled(PrimaryButton).attrs(() => ({\r\n  children: \"Clear\"\r\n}))`\r\n  align-self: center;\r\n`;\r\n\r\ninterface Props extends RouteComponentProps {\r\n  recents: (Album | Artist | Playlist)[];\r\n  clearRecents: () => void;\r\n}\r\n\r\nfunction Recents({ history, recents, clearRecents }: Props) {\r\n  function handleClick(id: string) {\r\n    const recent = recents.find(recent => recent.id === id);\r\n    if (recent) {\r\n      history.push(`${process.env.PUBLIC_URL}/${recent.type}/${recent.id}`);\r\n    }\r\n  }\r\n\r\n  const covers = getCovers(recents);\r\n  return (\r\n    <Wrapper>\r\n      {!!recents.length && (\r\n        <>\r\n          <Heading>Recent searches</Heading>\r\n          <StyledCoverList covers={covers} onClick={handleClick} />\r\n          <ClearButton onClick={clearRecents} />\r\n        </>\r\n      )}\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nfunction getCovers(recents: (Album | Artist | Playlist)[]) {\r\n  return recents.map(recent => ({\r\n    id: recent.id,\r\n    imageSource: getImageSource(recent),\r\n    imageShape: getImageShape(recent),\r\n    title: recent.name,\r\n    subTitle: capitalize(recent.type)\r\n  }));\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  recents: selectRecents(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  clearRecents\r\n};\r\n\r\nexport default withRouter(\r\n  connect(\r\n    mapState,\r\n    mapDispatch\r\n  )(Recents)\r\n);\r\n","import { Dispatch } from \"redux\";\r\nimport { Album, Artist, Playlist } from \"../types\";\r\nimport { State } from \"../reducers\";\r\nimport { selectAlbum as selectAlbumById } from \"../reducers/albums\";\r\nimport { selectArtist as selectArtistById } from \"../reducers/artists\";\r\nimport { selectPlaylist as selectPlaylistById } from \"../reducers/playlists\";\r\nimport { SearchActionType as ActionType } from \".\";\r\nimport { EntitiesAction, FetchDispatch, PayloadAction } from \"./types\";\r\nimport { Schemas } from \"./schemas\";\r\n\r\nexport interface SearchSuccessAction\r\n  extends EntitiesAction<ActionType.SearchSuccess> {}\r\n\r\nexport function search(query: string) {\r\n  if (query) {\r\n    return (dispatch: FetchDispatch) => {\r\n      const encoded = encodeURIComponent(query);\r\n      dispatch({\r\n        types: [\r\n          ActionType.SearchRequest,\r\n          ActionType.SearchSuccess,\r\n          ActionType.SearchFailure\r\n        ],\r\n        path: `search?q=${encoded}*&type=album,artist,playlist`,\r\n        schema: Schemas.Results\r\n      });\r\n    };\r\n  } else {\r\n    return (dispatch: Dispatch) => {\r\n      dispatch({\r\n        type: ActionType.ClearResults\r\n      });\r\n    };\r\n  }\r\n}\r\n\r\nexport interface SelectAlbumAction\r\n  extends PayloadAction<ActionType.SelectAlbum, Album> {}\r\n\r\nexport function selectAlbum(albumId: string) {\r\n  return (dispatch: Dispatch<SelectAlbumAction>, getState: () => State) => {\r\n    const state = getState();\r\n    const album = selectAlbumById(state, albumId);\r\n    dispatch({ type: ActionType.SelectAlbum, payload: album });\r\n  };\r\n}\r\n\r\nexport interface SelectArtistAction\r\n  extends PayloadAction<ActionType.SelectArtist, Artist> {}\r\n\r\nexport function selectArtist(artistId: string) {\r\n  return (dispatch: Dispatch<SelectArtistAction>, getState: () => State) => {\r\n    const state = getState();\r\n    const artist = selectArtistById(state, artistId);\r\n    dispatch({ type: ActionType.SelectArtist, payload: artist });\r\n  };\r\n}\r\n\r\nexport interface SelectPlaylistAction\r\n  extends PayloadAction<ActionType.SelectPlaylist, Playlist> {}\r\n\r\nexport function selectPlaylist(playlistId: string) {\r\n  return (dispatch: Dispatch<SelectPlaylistAction>, getState: () => State) => {\r\n    const state = getState();\r\n    const playlist = selectPlaylistById(state, playlistId);\r\n    dispatch({ type: ActionType.SelectPlaylist, payload: playlist });\r\n  };\r\n}\r\n\r\nexport function clearRecents() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({ type: ActionType.ClearRecents });\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\nimport { Artist } from \"../../types\";\r\nimport { getImageSource, getImageShape } from \"../../utils\";\r\nimport { Cover } from \"./types\";\r\nimport CoverList from \"./CoverList\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n  artists: Artist[];\r\n  onSelect?: (artistId: string) => void;\r\n}\r\n\r\nfunction ArtistCovers({ history, artists, onSelect }: Props) {\r\n  function handleClick(artistId: string) {\r\n    history.push(`${process.env.PUBLIC_URL}/artist/${artistId}`);\r\n    onSelect && onSelect(artistId);\r\n  }\r\n\r\n  const covers = getCovers(artists);\r\n  return <CoverList covers={covers} onClick={handleClick} />;\r\n}\r\n\r\nfunction getCovers(artists: Artist[]): Cover[] {\r\n  return artists.map(artist => ({\r\n    id: artist.id,\r\n    imageSource: getImageSource(artist),\r\n    imageShape: getImageShape(artist),\r\n    title: artist.name\r\n  }));\r\n}\r\n\r\nexport default withRouter(ArtistCovers);\r\n","import React, { ReactNode } from \"react\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Icon, Text, IconType } from \"../core\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  justify-content: center;\r\n  width: 100%;\r\n`;\r\n\r\nconst StyledIcon = styled(Icon).attrs(() => ({\r\n  type: IconType.SentimentVeryDissatisfied\r\n}))`\r\n  color: ${props => props.theme.onBackground.secondary};\r\n  font-size: ${props => 4 * props.theme.fontSize.extraExtraLarge}px;\r\n  margin-bottom: ${props => props.theme.thickness.medium}px;\r\n`;\r\n\r\nconst StyledText = styled(Text)`\r\n  font-size: ${props => props.theme.fontSize.extraExtraLarge}px;\r\n`;\r\n\r\ninterface Props {\r\n  children: ReactNode;\r\n}\r\n\r\nfunction Empty({ children }: Props) {\r\n  return (\r\n    <Wrapper>\r\n      <StyledIcon />\r\n      <StyledText>{children}</StyledText>\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nexport default Empty;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Album, Artist, Playlist } from \"../../types\";\r\nimport {\r\n  selectAlbum,\r\n  selectArtist,\r\n  selectPlaylist\r\n} from \"../../actions/search\";\r\nimport { State } from \"../../reducers\";\r\nimport {\r\n  selectAlbums,\r\n  selectArtists,\r\n  selectPlaylists\r\n} from \"../../reducers/search\";\r\nimport { Heading } from \"../core\";\r\nimport AlbumCovers from \"../covers/AlbumCovers\";\r\nimport ArtistCovers from \"../covers/ArtistCovers\";\r\nimport PlaylistCovers from \"../covers/PlaylistCovers\";\r\nimport Empty from \"../layout/Empty\";\r\nimport withLoader from \"../withLoader\";\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst Section = styled.section`\r\n  margin-bottom: ${props => props.theme.thickness.large}px;\r\n\r\n  &:last-child {\r\n    margin-bottom: 0;\r\n  }\r\n`;\r\n\r\ninterface ArtistsProps {\r\n  artists: Artist[];\r\n  selectArtist: (artistId: string) => void;\r\n}\r\n\r\nfunction Artists({ artists, selectArtist }: ArtistsProps) {\r\n  return (\r\n    <>\r\n      {artists.length > 0 && (\r\n        <Section>\r\n          <Heading>Artists</Heading>\r\n          <ArtistCovers artists={artists} onSelect={selectArtist} />\r\n        </Section>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\ninterface AlbumsProps {\r\n  albums: Album[];\r\n  selectAlbum: (albumId: string) => void;\r\n}\r\n\r\nfunction Albums({ albums, selectAlbum }: AlbumsProps) {\r\n  return (\r\n    <>\r\n      {albums.length > 0 && (\r\n        <Section>\r\n          <Heading>Albums & Singles</Heading>\r\n          <AlbumCovers albums={albums} onSelect={selectAlbum} />\r\n        </Section>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\ninterface PlaylistsProps {\r\n  playlists: Playlist[];\r\n  selectPlaylist: (playlistId: string) => void;\r\n}\r\n\r\nfunction Playlists({ playlists, selectPlaylist }: PlaylistsProps) {\r\n  return (\r\n    <>\r\n      {playlists.length > 0 && (\r\n        <Section>\r\n          <Heading>Playlists</Heading>\r\n          <PlaylistCovers playlists={playlists} onSelect={selectPlaylist} />\r\n        </Section>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\ninterface Props {\r\n  albums: Album[];\r\n  artists: Artist[];\r\n  playlists: Playlist[];\r\n  selectAlbum: (albumId: string) => void;\r\n  selectArtist: (artistId: string) => void;\r\n  selectPlaylist: (playlistId: string) => void;\r\n}\r\n\r\nfunction Results({\r\n  albums,\r\n  artists,\r\n  playlists,\r\n  selectAlbum,\r\n  selectArtist,\r\n  selectPlaylist\r\n}: Props) {\r\n  return artists.length || albums.length || playlists.length ? (\r\n    <Wrapper>\r\n      <Artists artists={artists} selectArtist={selectArtist} />\r\n      <Albums albums={albums} selectAlbum={selectAlbum} />\r\n      <Playlists playlists={playlists} selectPlaylist={selectPlaylist} />\r\n    </Wrapper>\r\n  ) : (\r\n    <Empty>No Results</Empty>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  albums: selectAlbums(state),\r\n  artists: selectArtists(state),\r\n  playlists: selectPlaylists(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  selectAlbum,\r\n  selectArtist,\r\n  selectPlaylist\r\n};\r\n\r\nexport default withLoader(\r\n  connect(\r\n    mapState,\r\n    mapDispatch\r\n  )(Results)\r\n);\r\n","import _ from \"lodash\";\r\nimport React, { useState, useEffect, useCallback, ChangeEvent } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Album, Artist, Playlist } from \"../../types\";\r\nimport { search } from \"../../actions/search\";\r\nimport Recents from \"./Recents\";\r\nimport Results from \"./Results\";\r\n\r\nconst StyledInput = styled.input`\r\n  background: ${props => props.theme.background.tertiary};\r\n  border: none;\r\n  border-radius: ${props => props.theme.thickness.medium}px;\r\n  caret-color: ${props => props.theme.color.primary};\r\n  color: ${props => props.theme.onBackground.primary};\r\n  flex-shrink: 0;\r\n  font-size: ${props => props.theme.fontSize.extraLarge}px;\r\n  font-weight: ${props => props.theme.fontWeight.light};\r\n  height: ${props => props.theme.thickness.large}px;\r\n  margin: 0 0 ${props => props.theme.thickness.medium}px 0;\r\n  padding: 0 ${props => props.theme.thickness.medium}px;\r\n  width: calc(100% - ${props => props.theme.thickness.large}px);\r\n`;\r\n\r\ninterface Params {\r\n  query: string;\r\n}\r\n\r\ninterface Props extends RouteComponentProps<Params> {\r\n  isLoading: boolean;\r\n  albums: Album[];\r\n  artists: Artist[];\r\n  playlists: Playlist[];\r\n  search: (query: string) => void;\r\n}\r\n\r\nfunction Search({ history, match, search }: Props) {\r\n  const { query } = match.params;\r\n  const [value, setValue] = useState(query || \"\");\r\n\r\n  const effect = () => {\r\n    if (value) {\r\n      search(value);\r\n    }\r\n  };\r\n  useEffect(effect, []);\r\n\r\n  const debounced = useCallback(\r\n    _.debounce((query: string) => {\r\n      history.push(`${process.env.PUBLIC_URL}/search${query && \"/\"}${query}`);\r\n      search(query);\r\n    }, 500),\r\n    []\r\n  );\r\n\r\n  function handleChange(event: ChangeEvent<HTMLInputElement>) {\r\n    const { value } = event.target;\r\n    setValue(value);\r\n    debounced(value);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <StyledInput\r\n        value={value}\r\n        onChange={handleChange}\r\n        placeholder=\"Search...\"\r\n        autoFocus\r\n      />\r\n      {query ? <Results /> : <Recents />}\r\n    </>\r\n  );\r\n}\r\n\r\nconst mapDispatch = {\r\n  search\r\n};\r\n\r\nexport default withRouter(\r\n  connect(\r\n    null,\r\n    mapDispatch\r\n  )(Search)\r\n);\r\n","import { Action } from \"redux\";\r\nimport { schema } from \"normalizr\";\r\nimport {\r\n  AlbumDictionary,\r\n  ArtistDictionary,\r\n  CategoryDictionary,\r\n  PlaylistDictionary,\r\n  TrackDictionary\r\n} from \"../reducers/types\";\r\n\r\nexport enum FetchMethod {\r\n  Get = \"GET\",\r\n  Post = \"POST\",\r\n  Put = \"PUT\",\r\n  Delete = \"DELETE\"\r\n}\r\n\r\nexport interface Entities {\r\n  albums: AlbumDictionary;\r\n  artists: ArtistDictionary;\r\n  categories: CategoryDictionary;\r\n  playlists: PlaylistDictionary;\r\n  tracks: TrackDictionary;\r\n  results: {\r\n    [key: string]: {\r\n      albums: string[];\r\n      artists: string[];\r\n      playlists: string[];\r\n    };\r\n  };\r\n}\r\n\r\nexport interface FetchAction<D = {}> {\r\n  types: string[];\r\n  path: string;\r\n  method?: FetchMethod;\r\n  schema?: schema.Entity | schema.Object;\r\n  data?: D;\r\n  success?: (json: any) => void;\r\n}\r\n\r\nexport interface FetchDispatch {\r\n  (action: FetchAction): void;\r\n}\r\n\r\nexport interface PayloadAction<T = any, P = any> extends Action<T> {\r\n  payload: P;\r\n}\r\n\r\nexport interface EntitiesAction<T = any, D = {}>\r\n  extends PayloadAction<T, Entities & D> {}\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Artist } from \"../../types\";\r\nimport { getFollowedArtists } from \"../../actions/following\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectFollowedArtists } from \"../../reducers/following\";\r\nimport ArtistCovers from \"../covers/ArtistCovers\";\r\nimport Empty from \"../layout/Empty\";\r\nimport withLoader from \"../withLoader\";\r\n\r\ninterface Props {\r\n  artists: Artist[];\r\n  getFollowedArtists: () => void;\r\n}\r\n\r\nfunction FollowedArtists({ artists, getFollowedArtists }: Props) {\r\n  useEffect(getFollowedArtists, []);\r\n\r\n  return artists.length ? (\r\n    <ArtistCovers artists={artists} />\r\n  ) : (\r\n    <Empty>No followed artists</Empty>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  artists: selectFollowedArtists(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  getFollowedArtists\r\n};\r\n\r\nexport default withLoader(\r\n  connect(\r\n    mapState,\r\n    mapDispatch\r\n  )(FollowedArtists)\r\n);\r\n","import { State } from \"../reducers\";\r\nimport { selectArtist } from \"../reducers/artists\";\r\nimport { selectPlaylist } from \"../reducers/playlists\";\r\nimport { FollowingActionType as ActionType } from \".\";\r\nimport {\r\n  PayloadAction,\r\n  EntitiesAction,\r\n  FetchDispatch,\r\n  FetchMethod\r\n} from \"./types\";\r\nimport { Schemas } from \"./schemas\";\r\n\r\nexport interface FollowedArtistsSuccessAction\r\n  extends EntitiesAction<ActionType.FollowedArtistsSuccess> {}\r\n\r\nexport function getFollowedArtists() {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.FollowedArtistsRequest,\r\n        ActionType.FollowedArtistsSuccess,\r\n        ActionType.FollowedArtistsFailure\r\n      ],\r\n      path: \"me/following?type=artist\",\r\n      schema: Schemas.PagedArtists\r\n    });\r\n  };\r\n}\r\n\r\nexport interface CheckFollowedArtistSuccessAction\r\n  extends PayloadAction<\r\n    ActionType.CheckFollowedArtistSuccess,\r\n    { artistId: string; [key: number]: boolean }\r\n  > {}\r\n\r\nexport function checkFollowedArtist(artistId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.CheckFollowedArtistRequest,\r\n        ActionType.CheckFollowedArtistSuccess,\r\n        ActionType.CheckFollowedArtistFailure\r\n      ],\r\n      path: `me/following/contains?type=artist&ids=${artistId}`,\r\n      data: { artistId }\r\n    });\r\n  };\r\n}\r\n\r\nexport interface FollowArtistSuccessAction\r\n  extends PayloadAction<ActionType.FollowArtistSuccess, { artistId: string }> {}\r\n\r\nfunction followArtist(artistId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.FollowArtistRequest,\r\n        ActionType.FollowArtistSuccess,\r\n        ActionType.FollowArtistFailure\r\n      ],\r\n      path: `me/following?type=artist&ids=${artistId}`,\r\n      method: FetchMethod.Put,\r\n      data: { artistId }\r\n    });\r\n  };\r\n}\r\n\r\nexport interface UnfollowArtistSuccessAction\r\n  extends PayloadAction<\r\n    ActionType.UnfollowArtistSuccess,\r\n    { artistId: string }\r\n  > {}\r\n\r\nfunction unfollowArtist(artistId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.UnfollowArtistRequest,\r\n        ActionType.UnfollowArtistSuccess,\r\n        ActionType.UnfollowArtistFailure\r\n      ],\r\n      path: `me/following?type=artist&ids=${artistId}`,\r\n      method: FetchMethod.Delete,\r\n      data: { artistId }\r\n    });\r\n  };\r\n}\r\n\r\nexport function toggleFollowArtist(artistId: string) {\r\n  return (dispatch: FetchDispatch, getState: () => State) => {\r\n    const state = getState();\r\n    const artist = selectArtist(state, artistId);\r\n    if (artist.isFollowed) {\r\n      unfollowArtist(artistId)(dispatch);\r\n    } else {\r\n      followArtist(artistId)(dispatch);\r\n    }\r\n  };\r\n}\r\n\r\nexport interface FollowedPlaylistsSuccessAction\r\n  extends EntitiesAction<ActionType.FollowedPlaylistsSuccess> {}\r\n\r\nexport function getFollowedPlaylists() {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.FollowedPlaylistsRequest,\r\n        ActionType.FollowedPlaylistsSuccess,\r\n        ActionType.FollowedPlaylistsFailure\r\n      ],\r\n      path: \"me/playlists\",\r\n      schema: Schemas.PagedPlaylists\r\n    });\r\n  };\r\n}\r\n\r\nexport interface CheckFollowedPlaylistSuccessAction\r\n  extends PayloadAction<\r\n    ActionType.CheckFollowedPlaylistSuccess,\r\n    { playlistId: string; [key: number]: boolean }\r\n  > {}\r\n\r\nexport function checkFollowedPlaylist(playlistId: string, userId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.CheckFollowedPlaylistRequest,\r\n        ActionType.CheckFollowedPlaylistSuccess,\r\n        ActionType.CheckFollowedPlaylistFailure\r\n      ],\r\n      path: `playlists/${playlistId}/followers/contains?ids=${userId}`,\r\n      data: { playlistId }\r\n    });\r\n  };\r\n}\r\n\r\nexport interface FollowPlaylistSuccessAction\r\n  extends PayloadAction<\r\n    ActionType.FollowPlaylistSuccess,\r\n    { playlistId: string }\r\n  > {}\r\n\r\nfunction followPlaylist(playlistId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.FollowPlaylistRequest,\r\n        ActionType.FollowPlaylistSuccess,\r\n        ActionType.FollowPlaylistFailure\r\n      ],\r\n      path: `playlists/${playlistId}/followers`,\r\n      method: FetchMethod.Put,\r\n      data: { playlistId }\r\n    });\r\n  };\r\n}\r\n\r\nexport interface UnfollowPlaylistSuccessAction\r\n  extends PayloadAction<\r\n    ActionType.UnfollowPlaylistSuccess,\r\n    { playlistId: string }\r\n  > {}\r\n\r\nfunction unfollowPlaylist(playlistId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.UnfollowPlaylistRequest,\r\n        ActionType.UnfollowPlaylistSuccess,\r\n        ActionType.UnfollowPlaylistFailure\r\n      ],\r\n      path: `playlists/${playlistId}/followers`,\r\n      method: FetchMethod.Delete,\r\n      data: { playlistId }\r\n    });\r\n  };\r\n}\r\n\r\nexport function toggleFollowPlaylist(playlistId: string) {\r\n  return (dispatch: FetchDispatch, getState: () => State) => {\r\n    const state = getState();\r\n    const playlist = selectPlaylist(state, playlistId);\r\n    if (playlist.isFollowed) {\r\n      unfollowPlaylist(playlistId)(dispatch);\r\n    } else {\r\n      followPlaylist(playlistId)(dispatch);\r\n    }\r\n  };\r\n}\r\n","import { State } from \"../reducers\";\r\nimport { selectAlbum } from \"../reducers/albums\";\r\nimport { selectTrack } from \"../reducers/tracks\";\r\nimport { LibraryActionType as ActionType } from \".\";\r\nimport {\r\n  PayloadAction,\r\n  EntitiesAction,\r\n  FetchDispatch,\r\n  FetchMethod\r\n} from \"./types\";\r\nimport { Schemas } from \"./schemas\";\r\n\r\nexport interface SavedAlbumsSuccessAction\r\n  extends EntitiesAction<ActionType.SavedAlbumsSuccess> {}\r\n\r\nexport function getSavedAlbums() {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.SavedAlbumsRequest,\r\n        ActionType.SavedAlbumsSuccess,\r\n        ActionType.SavedAlbumsFailure\r\n      ],\r\n      path: \"me/albums\",\r\n      schema: Schemas.SavedAlbums\r\n    });\r\n  };\r\n}\r\n\r\nexport interface CheckSavedAlbumSuccess\r\n  extends PayloadAction<\r\n    ActionType.CheckSavedAlbumSuccess,\r\n    { albumId: string; [key: number]: boolean }\r\n  > {}\r\n\r\nexport function checkSavedAlbum(albumId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.CheckSavedAlbumRequest,\r\n        ActionType.CheckSavedAlbumSuccess,\r\n        ActionType.CheckSavedAlbumFailure\r\n      ],\r\n      path: `me/albums/contains?ids=${albumId}`,\r\n      data: { albumId }\r\n    });\r\n  };\r\n}\r\n\r\nexport interface SaveAlbumSuccessAction\r\n  extends PayloadAction<ActionType.SaveAlbumSuccess, { albumId: string }> {}\r\n\r\nfunction saveAlbum(albumId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.SaveAlbumRequest,\r\n        ActionType.SaveAlbumSuccess,\r\n        ActionType.SaveAlbumFailure\r\n      ],\r\n      path: `me/albums?ids=${albumId}`,\r\n      method: FetchMethod.Put,\r\n      data: { albumId }\r\n    });\r\n  };\r\n}\r\n\r\nexport interface UnsaveAlbumSuccessAction\r\n  extends PayloadAction<ActionType.UnsaveAlbumSuccess, { albumId: string }> {}\r\n\r\nfunction UnsaveAlbum(albumId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.UnsaveAlbumRequest,\r\n        ActionType.UnsaveAlbumSuccess,\r\n        ActionType.UnsaveAlbumFailure\r\n      ],\r\n      path: `me/albums?ids=${albumId}`,\r\n      method: FetchMethod.Delete,\r\n      data: { albumId }\r\n    });\r\n  };\r\n}\r\n\r\nexport function toggleSavedAlbum(albumId: string) {\r\n  return (dispatch: FetchDispatch, getState: () => State) => {\r\n    const state = getState();\r\n    const album = selectAlbum(state, albumId);\r\n    if (album.isSaved) {\r\n      UnsaveAlbum(albumId)(dispatch);\r\n    } else {\r\n      saveAlbum(albumId)(dispatch);\r\n    }\r\n  };\r\n}\r\n\r\nexport interface SavedTracksSuccessAction\r\n  extends EntitiesAction<ActionType.SavedTracksSuccess> {}\r\n\r\nexport function getSavedTracks() {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.SavedTracksRequest,\r\n        ActionType.SavedTracksSuccess,\r\n        ActionType.SavedTracksFailure\r\n      ],\r\n      path: \"me/tracks\",\r\n      schema: Schemas.PagedTracks,\r\n      success: json => {\r\n        const trackIds = json.items.map(({ track }: any) => track && track.id);\r\n        if (trackIds.length) {\r\n          checkSavedTracks(trackIds)(dispatch);\r\n        }\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\nexport interface CheckSavedTrackSuccess\r\n  extends PayloadAction<\r\n    ActionType.CheckSavedTracksSuccess,\r\n    { trackIds: string[]; [key: number]: boolean }\r\n  > {}\r\n\r\nexport function checkSavedTracks(trackIds: string[]) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.CheckSavedTracksRequest,\r\n        ActionType.CheckSavedTracksSuccess,\r\n        ActionType.CheckSavedTracksFailure\r\n      ],\r\n      path: `me/tracks/contains?ids=${encodeURIComponent(trackIds.join(\",\"))}`,\r\n      data: { trackIds }\r\n    });\r\n  };\r\n}\r\n\r\nexport interface SaveTrackSuccessAction\r\n  extends PayloadAction<ActionType.SaveTrackSuccess, { trackId: string }> {}\r\n\r\nfunction saveTrack(trackId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.SaveTrackRequest,\r\n        ActionType.SaveTrackSuccess,\r\n        ActionType.SaveTrackFailure\r\n      ],\r\n      path: `me/tracks?ids=${trackId}`,\r\n      method: FetchMethod.Put,\r\n      data: { trackId }\r\n    });\r\n  };\r\n}\r\n\r\nexport interface UnsaveTrackSuccessAction\r\n  extends PayloadAction<ActionType.UnsaveTrackSuccess, { trackId: string }> {}\r\n\r\nfunction UnsaveTrack(trackId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.UnsaveTrackRequest,\r\n        ActionType.UnsaveTrackSuccess,\r\n        ActionType.UnsaveTrackFailure\r\n      ],\r\n      path: `me/tracks?ids=${trackId}`,\r\n      method: FetchMethod.Delete,\r\n      data: { trackId }\r\n    });\r\n  };\r\n}\r\n\r\nexport function toggleSavedTrack(trackId: string) {\r\n  return (dispatch: FetchDispatch, getState: () => State) => {\r\n    const state = getState();\r\n    const track = selectTrack(state, trackId);\r\n    if (track.isSaved) {\r\n      UnsaveTrack(trackId)(dispatch);\r\n    } else {\r\n      saveTrack(trackId)(dispatch);\r\n    }\r\n  };\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Album } from \"../../types\";\r\nimport { getSavedAlbums } from \"../../actions/library\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectSavedAlbums } from \"../../reducers/library\";\r\nimport AlbumCovers from \"../covers/AlbumCovers\";\r\nimport Empty from \"../layout/Empty\";\r\nimport withLoader from \"../withLoader\";\r\n\r\ninterface Props {\r\n  albums: Album[];\r\n  getSavedAlbums: () => void;\r\n}\r\n\r\nfunction SavedAlbums({ albums, getSavedAlbums }: Props) {\r\n  useEffect(getSavedAlbums, []);\r\n\r\n  return albums.length ? (\r\n    <AlbumCovers albums={albums} />\r\n  ) : (\r\n    <Empty>No saved albums</Empty>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  albums: selectSavedAlbums(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  getSavedAlbums\r\n};\r\n\r\nexport default withLoader(\r\n  connect(\r\n    mapState,\r\n    mapDispatch\r\n  )(SavedAlbums)\r\n);\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Playlist } from \"../../types\";\r\nimport { getFollowedPlaylists } from \"../../actions/following\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectFollowedPlaylists } from \"../../reducers/following\";\r\nimport PlaylistCovers from \"../covers/PlaylistCovers\";\r\nimport Empty from \"../layout/Empty\";\r\nimport withLoader from \"../withLoader\";\r\n\r\ninterface Props {\r\n  playlists: Playlist[];\r\n  getFollowedPlaylists: () => void;\r\n}\r\n\r\nfunction FollowedPlaylists({ playlists, getFollowedPlaylists }: Props) {\r\n  useEffect(getFollowedPlaylists, []);\r\n\r\n  return playlists.length ? (\r\n    <PlaylistCovers playlists={playlists} />\r\n  ) : (\r\n    <Empty>No followed playlists</Empty>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  playlists: selectFollowedPlaylists(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  getFollowedPlaylists\r\n};\r\n\r\nexport default withLoader(\r\n  connect(\r\n    mapState,\r\n    mapDispatch\r\n  )(FollowedPlaylists)\r\n);\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Artist } from \"../../types\";\r\n\r\nconst List = styled.ul`\r\n  color: ${props => props.theme.onBackground.secondary};\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n`;\r\n\r\nconst Item = styled.span`\r\n  color: ${props => props.theme.onBackground.secondary};\r\n  font-weight: ${props => props.theme.fontWeight.light};\r\n\r\n  :not(:last-child)::after {\r\n    content: \",\";\r\n    margin-right: ${props => props.theme.thickness.extraSmall}px;\r\n  }\r\n`;\r\n\r\nconst StyledLink = styled(Link)`\r\n  color: ${props => props.theme.onBackground.secondary};\r\n\r\n  :hover {\r\n    text-decoration: underline;\r\n  }\r\n`;\r\n\r\nfunction ArtistNames({ artists }: { artists: Artist[] }) {\r\n  return (\r\n    <List>\r\n      {artists.map(artist => (\r\n        <Item key={artist.id}>\r\n          <StyledLink to={`${process.env.PUBLIC_URL}/artist/${artist.id}`}>\r\n            {artist.name}\r\n          </StyledLink>\r\n        </Item>\r\n      ))}\r\n    </List>\r\n  );\r\n}\r\n\r\nexport default ArtistNames;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Album } from \"../../types\";\r\n\r\nconst StyledLink = styled(Link)`\r\n  color: ${props => props.theme.onBackground.secondary};\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n\r\n  :hover {\r\n    text-decoration: underline;\r\n  }\r\n`;\r\n\r\ninterface Props {\r\n  album: Album;\r\n}\r\n\r\nfunction AlbumName({ album }: Props) {\r\n  return (\r\n    <StyledLink to={`${process.env.PUBLIC_URL}/album/${album.id}`}>\r\n      {album.name}\r\n    </StyledLink>\r\n  );\r\n}\r\n\r\nexport default AlbumName;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Album, Artist, Track } from \"../../types\";\r\nimport { toggleSavedTrack } from \"../../actions/library\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectIsLoaded, selectIsPlaying } from \"../../reducers/player\";\r\nimport { selectTrackArtists, selectTrackAlbum } from \"../../reducers/tracks\";\r\nimport { Icon, IconType, RoundButton, Text, ToggleButton } from \"../core\";\r\nimport ArtistNames from \"./ArtistNames\";\r\nimport AlbumName from \"./AlbumName\";\r\n\r\nconst Wrapper = styled.li<{ isLoaded: boolean }>`\r\n  align-items: center;\r\n  box-sizing: border-box;\r\n  ${props => props.isLoaded && \"color: \" + props.theme.color.primary};\r\n  display: flex;\r\n  padding: ${props => props.theme.thickness.small}px;\r\n  width: 100%;\r\n\r\n  &:last-child {\r\n    margin-bottom: 0;\r\n  }\r\n\r\n  &:hover {\r\n    background: ${props => props.theme.onBackground.hover};\r\n  }\r\n`;\r\n\r\ninterface PlayButtonProps {\r\n  isLoaded: boolean;\r\n  isPlaying: Boolean;\r\n}\r\n\r\nconst PlayButton = styled(RoundButton).attrs<\r\n  PlayButtonProps,\r\n  { iconType: IconType }\r\n>(({ isPlaying }) => ({\r\n  iconType: isPlaying ? IconType.Pause : IconType.PlayArrow\r\n}))<PlayButtonProps>`\r\n  ${props => props.isLoaded && `color: ${props.theme.color.primary}`}\r\n  flex-shrink: 0;\r\n  margin-right: ${props => props.theme.thickness.small}px;\r\n\r\n  &&:hover {\r\n    ${props => props.isLoaded && `color: ${props.theme.color.primary}`}\r\n  }\r\n`;\r\n\r\nconst MusicIcon = styled(Icon).attrs(() => ({\r\n  type: IconType.MusicNote\r\n}))`\r\n  flex-shrink: 0;\r\n  margin-right: ${props => props.theme.thickness.small}px;\r\n  text-align: center;\r\n  width: ${props => props.theme.thickness.large}px;\r\n`;\r\n\r\nconst NoMusicIcon = styled(MusicIcon).attrs(() => ({\r\n  type: IconType.MusicOff\r\n}))`\r\n  color: ${props => props.theme.color.error};\r\n`;\r\n\r\nconst Names = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-grow: 1;\r\n  font-weight: ${props => props.theme.fontWeight.light};\r\n  height: 100%;\r\n  margin-right: ${props => props.theme.thickness.small}px;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst Name = styled(Text)`\r\n  font-weight: ${props => props.theme.fontWeight.normal};\r\n  margin-bottom: ${props => props.theme.thickness.extraSmall}px;\r\n  text-align: left;\r\n`;\r\n\r\nconst Others = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n`;\r\n\r\nconst Separator = styled.span.attrs(() => ({\r\n  children: \"-\"\r\n}))`\r\n  color: ${props => props.theme.onBackground.secondary};\r\n  margin: 0 ${props => props.theme.thickness.extraSmall}px;\r\n`;\r\n\r\nconst Duration = styled.span`\r\n  color: ${props => props.theme.onBackground.secondary};\r\n  flex-shrink: 0;\r\n  margin-right: ${props => props.theme.thickness.small}px;\r\n`;\r\n\r\nconst FavoriteButton = styled(ToggleButton).attrs(() => ({\r\n  iconType: IconType.Favorite\r\n}))`\r\n  flex-shrink: 0;\r\n`;\r\n\r\ninterface OwnProps {\r\n  track: Track;\r\n  onTogglePlay?: (trackId: string) => void;\r\n}\r\n\r\ninterface Props extends OwnProps {\r\n  album?: Album;\r\n  artists: Artist[];\r\n  isDisabled: boolean;\r\n  isLoaded: boolean;\r\n  isPlaying: boolean;\r\n  toggleSavedTrack: (trackId: string) => void;\r\n}\r\n\r\nfunction TrackItem({\r\n  album,\r\n  track,\r\n  artists,\r\n  isDisabled,\r\n  isLoaded,\r\n  isPlaying,\r\n  onTogglePlay,\r\n  toggleSavedTrack\r\n}: Props) {\r\n  function renderDuration() {\r\n    let seconds = track.duration_ms / 1000;\r\n    const minutes = Math.floor(seconds / 60);\r\n    seconds = Math.floor(seconds % 60);\r\n\r\n    return (\r\n      <Duration>{`${minutes}:${\r\n        seconds < 10 ? \"0\" + seconds : seconds\r\n      }`}</Duration>\r\n    );\r\n  }\r\n\r\n  function handleClick() {\r\n    if (onTogglePlay) {\r\n      onTogglePlay(track.id);\r\n    }\r\n  }\r\n\r\n  function handleToggleFavorite() {\r\n    toggleSavedTrack(track.id);\r\n  }\r\n\r\n  return (\r\n    <Wrapper isLoaded={isLoaded}>\r\n      {onTogglePlay ? (\r\n        isDisabled ? (\r\n          <NoMusicIcon />\r\n        ) : (\r\n          <PlayButton\r\n            isLoaded={isLoaded}\r\n            isPlaying={isPlaying}\r\n            onClick={handleClick}\r\n          />\r\n        )\r\n      ) : (\r\n        <MusicIcon />\r\n      )}\r\n\r\n      <Names>\r\n        <Name>{track.name}</Name>\r\n        <Others>\r\n          <ArtistNames artists={artists} />\r\n          <Separator />\r\n          {album && <AlbumName album={album} />}\r\n        </Others>\r\n      </Names>\r\n\r\n      {renderDuration()}\r\n\r\n      <FavoriteButton\r\n        isToggled={track.isSaved}\r\n        onClick={handleToggleFavorite}\r\n      />\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nfunction isDisabled(track: Track) {\r\n  return !track.preview_url;\r\n}\r\n\r\nconst mapState = (state: State, { track }: OwnProps) => ({\r\n  album: selectTrackAlbum(state, track.id),\r\n  artists: selectTrackArtists(state, track.id),\r\n  isDisabled: isDisabled(track),\r\n  isLoaded: selectIsLoaded(state)(track.id),\r\n  isPlaying: selectIsPlaying(state, track.id)\r\n});\r\n\r\nconst mapDispatch = {\r\n  toggleSavedTrack\r\n};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(TrackItem);\r\n","import React from \"react\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Track } from \"../../types\";\r\nimport TrackItem from \"./TrackItem\";\r\n\r\nconst StyledList = styled.ul`\r\n  flex-grow: 1;\r\n  overflow: hidden;\r\n`;\r\n\r\ninterface Props {\r\n  tracks: Track[];\r\n  onTogglePlay?: (trackId: string) => void;\r\n}\r\n\r\nfunction TrackList({ tracks, onTogglePlay }: Props) {\r\n  return (\r\n    <StyledList>\r\n      {tracks.map(track => (\r\n        <TrackItem key={track.id} track={track} onTogglePlay={onTogglePlay} />\r\n      ))}\r\n    </StyledList>\r\n  );\r\n}\r\n\r\nexport default TrackList;\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { getSavedTracks } from \"../../actions/library\";\r\nimport { loadPlayPause } from \"../../actions/player\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectSavedTracks } from \"../../reducers/library\";\r\nimport { Track, Type } from \"../../types\";\r\nimport TrackList from \"../details/TrackList\";\r\nimport Empty from \"../layout/Empty\";\r\nimport withLoader from \"../withLoader\";\r\n\r\ninterface Props {\r\n  tracks: Track[];\r\n  getSavedTracks: () => void;\r\n  loadPlayPause: (\r\n    collectionId: string,\r\n    collectionType: Type,\r\n    trackId: string\r\n  ) => void;\r\n}\r\n\r\nconst CollectionId = \"\";\r\n\r\nfunction SavedTracks({ tracks, getSavedTracks, loadPlayPause }: Props) {\r\n  useEffect(getSavedTracks, []);\r\n\r\n  function handleTogglePlay(trackId: string) {\r\n    loadPlayPause(CollectionId, Type.Library, trackId);\r\n  }\r\n\r\n  return tracks.length ? (\r\n    <TrackList tracks={tracks} onTogglePlay={handleTogglePlay} />\r\n  ) : (\r\n    <Empty>No saved tracks</Empty>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  tracks: selectSavedTracks(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  getSavedTracks,\r\n  loadPlayPause\r\n};\r\n\r\nexport default withLoader(\r\n  connect(\r\n    mapState,\r\n    mapDispatch\r\n  )(SavedTracks)\r\n);\r\n","import React from \"react\";\r\nimport SubMenu from \"../layout/SubMenu\";\r\nimport SubRoutes from \"../layout/SubRoutes\";\r\nimport FollowedArtists from \"./FollowedArtists\";\r\nimport SavedAlbums from \"./SavedAlbums\";\r\nimport FollowedPlaylists from \"./FollowedPlaylists\";\r\nimport SavedTracks from \"./SavedTracks\";\r\n\r\nconst items = [\r\n  {\r\n    path: \"artists\",\r\n    text: \"Artists\",\r\n    default: true,\r\n    component: FollowedArtists\r\n  },\r\n  {\r\n    path: \"albums\",\r\n    text: \"Albums\",\r\n    component: SavedAlbums\r\n  },\r\n  {\r\n    path: \"playlists\",\r\n    text: \"Playlists\",\r\n    component: FollowedPlaylists\r\n  },\r\n  {\r\n    path: \"tracks\",\r\n    text: \"Tracks\",\r\n    component: SavedTracks\r\n  }\r\n];\r\n\r\nfunction Library() {\r\n  return (\r\n    <>\r\n      <SubMenu items={items} />\r\n      <SubRoutes items={items} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Library;\r\n","import React from \"react\";\r\nimport styled from \"../../styles/styled\";\r\nimport { IconType, Image, PrimaryButton, Text, ToggleButton } from \"../core\";\r\nimport { ImageShape } from \"../core/Image\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-shrink: 0;\r\n  justify-content: center;\r\n  margin: 0 0 ${props => props.theme.thickness.medium}px 0;\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.small}px) {\r\n    flex-direction: column;\r\n    justify-content: flex-start;\r\n    margin: 0 ${props => props.theme.thickness.medium}px 0 0;\r\n  }\r\n`;\r\n\r\nconst StyledImage = styled(Image)`\r\n  box-shadow: ${props => props.theme.shadow.middle};\r\n  flex-shrink: 0;\r\n  margin: 0 ${props => props.theme.thickness.medium}px 0 0;\r\n  max-height: calc(\r\n    100% -\r\n      ${props =>\r\n        props.theme.thickness.extraLarge +\r\n        props.theme.thickness.large +\r\n        props.theme.thickness.medium +\r\n        props.theme.thickness.small}px\r\n  );\r\n  max-width: calc(\r\n    100% -\r\n      ${props =>\r\n        props.theme.thickness.extraLarge +\r\n        props.theme.thickness.large +\r\n        props.theme.thickness.medium +\r\n        props.theme.thickness.small}px\r\n  );\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.extraSmall}px) {\r\n    max-height: ${props => props.theme.thickness.extraExtraLarge}px;\r\n    max-width: ${props => props.theme.thickness.extraExtraLarge}px;\r\n  }\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.small}px) {\r\n    margin: 0 0 ${props => props.theme.thickness.medium}px 0;\r\n    max-height: ${props => props.theme.thickness.extraExtraExtraLarge}px;\r\n    max-width: ${props => props.theme.thickness.extraExtraExtraLarge}px;\r\n  }\r\n`;\r\n\r\nconst Vertical = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst Title = styled(Text)`\r\n  font-size: ${props => props.theme.fontSize.extraLarge}px;\r\n  text-align: center;\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.small}px) {\r\n    font-size: ${props => props.theme.fontSize.extraLarge}px;\r\n    max-width: ${props => props.theme.thickness.extraExtraExtraLarge}px;\r\n  }\r\n`;\r\n\r\nconst SubTitle = styled(Text)`\r\n  color: ${props => props.theme.onBackground.secondary};\r\n  display: inline-block;\r\n  font-size: ${props => props.theme.fontSize.medium}px;\r\n  font-weight: ${props => props.theme.fontWeight.light};\r\n  margin-top: ${props => props.theme.thickness.extraSmall}px;\r\n  text-align: center;\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.small}px) {\r\n    font-size: ${props => props.theme.fontSize.large}px;\r\n    margin-top: ${props => props.theme.thickness.small}px;\r\n    max-width: ${props => props.theme.thickness.extraExtraExtraLarge}px;\r\n  }\r\n`;\r\n\r\nconst Horizontal = styled.div`\r\n  display: flex;\r\n  flex-orientation: row;\r\n  margin-top: ${props => props.theme.thickness.medium}px;\r\n`;\r\n\r\nconst FavoriteButton = styled(ToggleButton).attrs(() => ({\r\n  iconType: IconType.Favorite\r\n}))``;\r\n\r\nconst PlayButton = styled(PrimaryButton)`\r\n  margin-right: ${props => props.theme.thickness.small}px;\r\n  width: ${props => props.theme.thickness.extraLarge}px;\r\n`;\r\n\r\ninterface Props {\r\n  imageSource?: string;\r\n  imageShape: ImageShape;\r\n  title: string;\r\n  subTitle?: string;\r\n  canPlay: boolean;\r\n  isPlaying: boolean;\r\n  isFavorite: boolean;\r\n  onTogglePlay: () => void;\r\n  onToggleFavorite: () => void;\r\n}\r\n\r\nfunction Header({\r\n  imageSource,\r\n  imageShape,\r\n  title,\r\n  subTitle,\r\n  canPlay,\r\n  isPlaying,\r\n  isFavorite,\r\n  onTogglePlay,\r\n  onToggleFavorite\r\n}: Props) {\r\n  function handleTogglePlay() {\r\n    onTogglePlay();\r\n  }\r\n\r\n  return (\r\n    <Wrapper>\r\n      <StyledImage source={imageSource} shape={imageShape} />\r\n      <Vertical>\r\n        <Title>{title}</Title>\r\n        {subTitle && <SubTitle>{subTitle}</SubTitle>}\r\n        <Horizontal>\r\n          <PlayButton disabled={!canPlay} onClick={handleTogglePlay}>\r\n            {isPlaying ? \"Pause\" : \"Play\"}\r\n          </PlayButton>\r\n          <FavoriteButton isToggled={isFavorite} onClick={onToggleFavorite} />\r\n        </Horizontal>\r\n      </Vertical>\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nHeader.defaultProps = {\r\n  imageShape: ImageShape.Square,\r\n  onTogglePlay: () => {},\r\n  onToggleFavorite: () => {}\r\n};\r\n\r\nexport default Header;\r\n","import React, { useEffect, useCallback } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Playlist, Track, Type } from \"../../types\";\r\nimport { getImageSource } from \"../../utils\";\r\nimport { getPlaylist } from \"../../actions/playlists\";\r\nimport { loadPlayPause } from \"../../actions/player\";\r\nimport { toggleFollowPlaylist } from \"../../actions/following\";\r\nimport { State } from \"../../reducers\";\r\nimport {\r\n  selectPlaylist,\r\n  selectPlaylistTracks,\r\n  selectIsPlayable\r\n} from \"../../reducers/playlists\";\r\nimport { selectIsPlaying } from \"../../reducers/player\";\r\nimport Header from \"./Header\";\r\nimport TrackList from \"./TrackList\";\r\nimport withLoader from \"../withLoader\";\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.small}px) {\r\n    flex-direction: row;\r\n  }\r\n`;\r\n\r\ninterface Params {\r\n  playlistId: string;\r\n}\r\n\r\ninterface Props extends RouteComponentProps<Params> {\r\n  playlist?: Playlist;\r\n  tracks: Track[];\r\n  isPlayable: boolean;\r\n  isPlaying: boolean;\r\n  getPlaylist: (playlistId: string) => void;\r\n  loadPlayPause: (\r\n    collectionId: string,\r\n    collectionType: Type,\r\n    trackId?: string\r\n  ) => void;\r\n  toggleFollowPlaylist: (playlistId: string) => void;\r\n}\r\n\r\nfunction PlaylistDetails({\r\n  match,\r\n  playlist,\r\n  tracks,\r\n  isPlayable,\r\n  isPlaying,\r\n  getPlaylist,\r\n  loadPlayPause,\r\n  toggleFollowPlaylist\r\n}: Props) {\r\n  const { playlistId } = match.params;\r\n\r\n  useEffect(() => getPlaylist(playlistId), [getPlaylist, playlistId]);\r\n\r\n  const handleTogglePlay = useCallback(\r\n    (trackId?: string) => {\r\n      loadPlayPause(playlistId, Type.Playlist, trackId);\r\n    },\r\n    [loadPlayPause, playlistId]\r\n  );\r\n\r\n  const handleToggleFavorite = useCallback(() => {\r\n    toggleFollowPlaylist(playlistId);\r\n  }, [toggleFollowPlaylist, playlistId]);\r\n\r\n  return playlist ? (\r\n    <Wrapper>\r\n      <Header\r\n        imageSource={getImageSource(playlist)}\r\n        title={playlist.name}\r\n        subTitle={playlist.owner.display_name}\r\n        canPlay={isPlayable}\r\n        isPlaying={isPlaying}\r\n        isFavorite={playlist.isFollowed}\r\n        onTogglePlay={handleTogglePlay}\r\n        onToggleFavorite={handleToggleFavorite}\r\n      />\r\n      <TrackList tracks={tracks} onTogglePlay={handleTogglePlay} />\r\n    </Wrapper>\r\n  ) : (\r\n    <></>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State, ownProps: Props) => {\r\n  const { match } = ownProps;\r\n  const { playlistId } = match.params;\r\n  return {\r\n    playlist: selectPlaylist(state, playlistId),\r\n    tracks: selectPlaylistTracks(state, playlistId),\r\n    isPlayable: selectIsPlayable(state, playlistId),\r\n    isPlaying: selectIsPlaying(state, playlistId)\r\n  };\r\n};\r\n\r\nconst mapDispatch = {\r\n  getPlaylist,\r\n  loadPlayPause,\r\n  toggleFollowPlaylist\r\n};\r\n\r\nexport default withLoader(\r\n  withRouter(\r\n    connect(\r\n      mapState,\r\n      mapDispatch\r\n    )(PlaylistDetails)\r\n  )\r\n);\r\n","import { State } from \"../reducers\";\r\nimport { selectUserProfile } from \"../reducers/userProfile\";\r\nimport { PlaylistActionType as ActionType } from \".\";\r\nimport { EntitiesAction, FetchDispatch } from \"./types\";\r\nimport { Schemas } from \"./schemas\";\r\nimport { checkFollowedPlaylist } from \"./following\";\r\nimport { checkSavedTracks } from \"./library\";\r\n\r\nexport interface PlaylistSuccessAction\r\n  extends EntitiesAction<ActionType.PlaylistSuccess> {}\r\n\r\nexport function getPlaylist(playlistId: string) {\r\n  return (dispatch: FetchDispatch, getState: () => State) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.PlaylistRequest,\r\n        ActionType.PlaylistSuccess,\r\n        ActionType.PlaylistFailure\r\n      ],\r\n      path: `playlists/${playlistId}`,\r\n      schema: Schemas.Playlist,\r\n      success: json => {\r\n        const state = getState();\r\n        const userProfile = selectUserProfile(state);\r\n        if (userProfile) {\r\n          checkFollowedPlaylist(playlistId, userProfile.id)(dispatch);\r\n        }\r\n        const trackIds = json.tracks.items.map(\r\n          ({ track }: any) => track && track.id\r\n        );\r\n        if (trackIds.length) {\r\n          checkSavedTracks(trackIds)(dispatch);\r\n        }\r\n      }\r\n    });\r\n  };\r\n}\r\n","import React, { useEffect, useCallback } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Album, Artist, Track, Type } from \"../../types\";\r\nimport { getAlbum } from \"../../actions/albums\";\r\nimport { loadPlayPause } from \"../../actions/player\";\r\nimport { toggleSavedAlbum } from \"../../actions/library\";\r\nimport { State } from \"../../reducers\";\r\nimport {\r\n  selectAlbum,\r\n  selectAlbumArtists,\r\n  selectAlbumTracks,\r\n  selectIsPlayable\r\n} from \"../../reducers/albums\";\r\nimport { selectIsPlaying } from \"../../reducers/player\";\r\nimport { getArtistNames, getImageSource } from \"../../utils\";\r\nimport Header from \"./Header\";\r\nimport TrackList from \"./TrackList\";\r\nimport withLoader from \"../withLoader\";\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.small}px) {\r\n    flex-direction: row;\r\n  }\r\n`;\r\n\r\ninterface Params {\r\n  albumId: string;\r\n}\r\n\r\ninterface Props extends RouteComponentProps<Params> {\r\n  album?: Album;\r\n  artists: Artist[];\r\n  tracks: Track[];\r\n  isPlayable: boolean;\r\n  isPlaying: boolean;\r\n  getAlbum: (albumId: string) => void;\r\n  loadPlayPause: (\r\n    collectionId: string,\r\n    collectionType: Type,\r\n    trackId?: string\r\n  ) => void;\r\n  toggleSavedAlbum: (albumId: string) => void;\r\n}\r\n\r\nfunction AlbumDetails({\r\n  match,\r\n  album,\r\n  artists,\r\n  tracks,\r\n  isPlayable,\r\n  isPlaying,\r\n  getAlbum,\r\n  loadPlayPause,\r\n  toggleSavedAlbum\r\n}: Props) {\r\n  const { albumId } = match.params;\r\n\r\n  useEffect(() => {\r\n    getAlbum(albumId);\r\n  }, [getAlbum, albumId]);\r\n\r\n  const handleTogglePlay = useCallback(\r\n    (trackId?: string) => {\r\n      loadPlayPause(albumId, Type.Album, trackId);\r\n    },\r\n    [loadPlayPause, albumId]\r\n  );\r\n\r\n  const handleToggleFavorite = useCallback(() => {\r\n    toggleSavedAlbum(albumId);\r\n  }, [toggleSavedAlbum, albumId]);\r\n\r\n  return album ? (\r\n    <Wrapper>\r\n      <Header\r\n        imageSource={getImageSource(album)}\r\n        title={album.name}\r\n        subTitle={getArtistNames(artists)}\r\n        canPlay={isPlayable}\r\n        isPlaying={isPlaying}\r\n        isFavorite={album.isSaved}\r\n        onTogglePlay={handleTogglePlay}\r\n        onToggleFavorite={handleToggleFavorite}\r\n      />\r\n      <TrackList tracks={tracks} onTogglePlay={handleTogglePlay} />\r\n    </Wrapper>\r\n  ) : (\r\n    <></>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State, ownProps: Props) => {\r\n  const { match } = ownProps;\r\n  const { albumId } = match.params;\r\n  return {\r\n    album: selectAlbum(state, albumId),\r\n    artists: selectAlbumArtists(state)(albumId),\r\n    tracks: selectAlbumTracks(state, albumId),\r\n    isPlayable: selectIsPlayable(state, albumId),\r\n    isPlaying: selectIsPlaying(state, albumId)\r\n  };\r\n};\r\n\r\nconst mapDispatch = {\r\n  getAlbum,\r\n  loadPlayPause,\r\n  toggleSavedAlbum\r\n};\r\n\r\nexport default withLoader(\r\n  withRouter(\r\n    connect(\r\n      mapState,\r\n      mapDispatch\r\n    )(AlbumDetails)\r\n  )\r\n);\r\n","import { AlbumActionType as ActionType } from \".\";\r\nimport { EntitiesAction, FetchDispatch } from \"./types\";\r\nimport { Schemas } from \"./schemas\";\r\nimport { checkSavedAlbum, checkSavedTracks } from \"./library\";\r\n\r\nexport interface AlbumSuccessAction\r\n  extends EntitiesAction<ActionType.AlbumSuccess> {}\r\n\r\nexport function getAlbum(albumId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.AlbumRequest,\r\n        ActionType.AlbumSuccess,\r\n        ActionType.AlbumFailure\r\n      ],\r\n      path: `albums/${albumId}`,\r\n      schema: Schemas.Album,\r\n      success: json => {\r\n        checkSavedAlbum(albumId)(dispatch);\r\n        const trackIds = json.tracks.items.map(({ id }: any) => id);\r\n        if (trackIds.length) {\r\n          checkSavedTracks(trackIds)(dispatch);\r\n        }\r\n      }\r\n    });\r\n  };\r\n}\r\n","import React, { useEffect, useCallback } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Album, Artist, Track, Type } from \"../../types\";\r\nimport { getImageSource, getImageShape } from \"../../utils\";\r\nimport { getArtist } from \"../../actions/artists\";\r\nimport { loadPlayPause } from \"../../actions/player\";\r\nimport { toggleFollowArtist } from \"../../actions/following\";\r\nimport { State } from \"../../reducers\";\r\nimport {\r\n  selectArtist,\r\n  selectIsPlayable,\r\n  selectArtistAlbums,\r\n  selectArtistTopTracks,\r\n  selectArtistRelatedArtists\r\n} from \"../../reducers/artists\";\r\nimport { selectIsPlaying } from \"../../reducers/player\";\r\nimport TrackList from \"./TrackList\";\r\nimport AlbumCovers from \"../covers/AlbumCovers\";\r\nimport ArtistCovers from \"../covers/ArtistCovers\";\r\nimport { Heading } from \"../core\";\r\nimport Header from \"./Header\";\r\nimport withLoader from \"../withLoader\";\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-shrink: 0;\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.small}px) {\r\n    flex-direction: row;\r\n  }\r\n`;\r\n\r\nconst Section = styled.section`\r\n  margin-bottom: 40px;\r\n`;\r\n\r\nfunction TopTracks({\r\n  tracks,\r\n  onTogglePlay\r\n}: {\r\n  tracks: Track[];\r\n  onTogglePlay: (trackId: string) => void;\r\n}) {\r\n  return (\r\n    <>{tracks && <TrackList tracks={tracks} onTogglePlay={onTogglePlay} />}</>\r\n  );\r\n}\r\n\r\nfunction Albums({ albums }: { albums: Album[] }) {\r\n  return (\r\n    <>\r\n      {albums && !!albums.length && (\r\n        <Section>\r\n          <Heading>Albums & Singles</Heading>\r\n          <AlbumCovers albums={albums} />\r\n        </Section>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nfunction RelatedArtists({ artists }: { artists: Artist[] }) {\r\n  return (\r\n    <>\r\n      {artists && !!artists.length && (\r\n        <Section>\r\n          <Heading>Related Artists</Heading>\r\n          <ArtistCovers artists={artists} />\r\n        </Section>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\ninterface Params {\r\n  artistId: string;\r\n}\r\n\r\ninterface Props extends RouteComponentProps<Params> {\r\n  artist?: Artist;\r\n  albums: Album[];\r\n  relatedArtists: Artist[];\r\n  topTracks: Track[];\r\n  isPlayable: boolean;\r\n  isPlaying: boolean;\r\n  getArtist: (artistId: string) => void;\r\n  loadPlayPause: (\r\n    artistId: string,\r\n    collectionType: Type,\r\n    trackId?: string\r\n  ) => void;\r\n  toggleFollowArtist: (artistId: string) => void;\r\n}\r\n\r\nfunction ArtistDetails({\r\n  match,\r\n  artist,\r\n  albums,\r\n  relatedArtists,\r\n  topTracks,\r\n  isPlayable,\r\n  isPlaying,\r\n  getArtist,\r\n  loadPlayPause,\r\n  toggleFollowArtist\r\n}: Props) {\r\n  const { artistId } = match.params;\r\n\r\n  useEffect(() => getArtist(artistId), [getArtist, artistId]);\r\n\r\n  const handleTogglePlay = useCallback(\r\n    (trackId?: string) => {\r\n      loadPlayPause(artistId, Type.Artist, trackId);\r\n    },\r\n    [loadPlayPause, artistId]\r\n  );\r\n\r\n  const handleToggleFavorite = useCallback(() => {\r\n    toggleFollowArtist(artistId);\r\n  }, [toggleFollowArtist, artistId]);\r\n\r\n  return artist ? (\r\n    <>\r\n      <Wrapper>\r\n        <Header\r\n          imageSource={getImageSource(artist)}\r\n          imageShape={getImageShape(artist)}\r\n          title={artist.name}\r\n          canPlay={isPlayable}\r\n          isPlaying={isPlaying}\r\n          isFavorite={artist.isFollowed}\r\n          onTogglePlay={handleTogglePlay}\r\n          onToggleFavorite={handleToggleFavorite}\r\n        />\r\n        <TopTracks tracks={topTracks} onTogglePlay={handleTogglePlay} />\r\n      </Wrapper>\r\n      <Albums albums={albums} />\r\n      <RelatedArtists artists={relatedArtists} />\r\n    </>\r\n  ) : (\r\n    <></>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State, ownProps: Props) => {\r\n  const { match } = ownProps;\r\n  const { artistId } = match.params;\r\n  return {\r\n    artist: selectArtist(state, artistId),\r\n    albums: selectArtistAlbums(state, artistId),\r\n    relatedArtists: selectArtistRelatedArtists(state, artistId),\r\n    topTracks: selectArtistTopTracks(state, artistId),\r\n    isPlayable: selectIsPlayable(state, artistId),\r\n    isPlaying: selectIsPlaying(state, artistId)\r\n  };\r\n};\r\n\r\nconst mapDispatch = {\r\n  getArtist,\r\n  loadPlayPause,\r\n  toggleFollowArtist\r\n};\r\n\r\nexport default withLoader(\r\n  withRouter(\r\n    connect(\r\n      mapState,\r\n      mapDispatch\r\n    )(ArtistDetails)\r\n  )\r\n);\r\n","import { ArtistActionType as ActionType } from \".\";\r\nimport { EntitiesAction, FetchDispatch } from \"./types\";\r\nimport { Schemas } from \"./schemas\";\r\nimport { checkFollowedArtist } from \"./following\";\r\nimport { checkSavedTracks } from \"./library\";\r\n\r\nexport interface ArtistSuccessAction\r\n  extends EntitiesAction<ActionType.ArtistSuccess> {}\r\n\r\nexport function getArtist(artistId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.ArtistRequest,\r\n        ActionType.ArtistSuccess,\r\n        ActionType.ArtistFailure\r\n      ],\r\n      path: `artists/${artistId}`,\r\n      schema: Schemas.Artist,\r\n      success: () => {\r\n        getArtistAlbums(artistId)(dispatch);\r\n        getArtistRelatedArtists(artistId)(dispatch);\r\n        getArtistTopTracks(artistId)(dispatch);\r\n        checkFollowedArtist(artistId)(dispatch);\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\nexport interface ArtistAlbumsSuccessAction\r\n  extends EntitiesAction<\r\n    ActionType.ArtistAlbumsSuccess,\r\n    { artistId: string }\r\n  > {}\r\n\r\nexport function getArtistAlbums(artistId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.ArtistAlbumsRequest,\r\n        ActionType.ArtistAlbumsSuccess,\r\n        ActionType.ArtistAlbumsFailure\r\n      ],\r\n      path: `artists/${artistId}/albums?country=us`,\r\n      schema: Schemas.PagedAlbums,\r\n      data: { artistId }\r\n    });\r\n  };\r\n}\r\n\r\nexport interface ArtistRelatedArtistsSuccessAction\r\n  extends EntitiesAction<\r\n    ActionType.ArtistRelatedArtistsSuccess,\r\n    { artistId: string }\r\n  > {}\r\n\r\nexport function getArtistRelatedArtists(artistId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.ArtistRelatedArtistsRequest,\r\n        ActionType.ArtistRelatedArtistsSuccess,\r\n        ActionType.ArtistRelatedArtistsFailure\r\n      ],\r\n      path: `artists/${artistId}/related-artists?country=us`,\r\n      schema: Schemas.Artists,\r\n      data: { artistId }\r\n    });\r\n  };\r\n}\r\n\r\nexport interface ArtistTopTracksSuccessAction\r\n  extends EntitiesAction<\r\n    ActionType.ArtistTopTracksSuccess,\r\n    { artistId: string }\r\n  > {}\r\n\r\nexport function getArtistTopTracks(artistId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.ArtistTopTracksRequest,\r\n        ActionType.ArtistTopTracksSuccess,\r\n        ActionType.ArtistTopTracksFailure\r\n      ],\r\n      path: `artists/${artistId}/top-tracks?country=us`,\r\n      schema: Schemas.Tracks,\r\n      data: { artistId },\r\n      success: json => {\r\n        const trackIds = json.tracks.map(({ id }: any) => id);\r\n        if (trackIds.length) {\r\n          checkSavedTracks(trackIds)(dispatch);\r\n        }\r\n      }\r\n    });\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Track, Type } from \"../../types\";\r\nimport { loadPlayPause } from \"../../actions/player\";\r\nimport { State } from \"../../reducers\";\r\nimport { Collection } from \"../../reducers/types\";\r\nimport { selectCollection, selectLoadedTracks } from \"../../reducers/player\";\r\nimport { Heading } from \"../core\";\r\nimport TrackList from \"../details/TrackList\";\r\nimport Empty from \"../layout/Empty\";\r\n\r\nconst Wrapper = styled.div``;\r\n\r\ninterface Props {\r\n  collection?: Collection;\r\n  tracks: Track[];\r\n  loadPlayPause: (\r\n    collectionId: string,\r\n    collectionType: Type,\r\n    trackId: string\r\n  ) => void;\r\n}\r\n\r\nfunction Queue({ collection, tracks, loadPlayPause }: Props) {\r\n  function handleTogglePlay(trackId: string) {\r\n    collection && loadPlayPause(collection.id, collection.type, trackId);\r\n  }\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Heading>Queue</Heading>\r\n      {tracks && tracks.length ? (\r\n        <TrackList tracks={tracks} onTogglePlay={handleTogglePlay} />\r\n      ) : (\r\n        <Empty>No tracks</Empty>\r\n      )}\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  collection: selectCollection(state),\r\n  tracks: selectLoadedTracks(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  loadPlayPause\r\n};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(Queue);\r\n","import React, { HTMLAttributes } from \"react\";\r\nimport { Route } from \"react-router\";\r\nimport styled from \"../../styles/styled\";\r\nimport DefaultRoute from \"../DefaultRoute\";\r\nimport PrivateRoute from \"../PrivateRoute\";\r\nimport LogIn from \"./Login\";\r\nimport Browse from \"../browse/Browse\";\r\nimport CategoryPlaylists from \"../browse/CategoryPlaylists\";\r\nimport Search from \"../search/Search\";\r\nimport Library from \"../library/Library\";\r\nimport PlaylistDetails from \"../details/PlaylistDetails\";\r\nimport AlbumDetails from \"../details/AlbumDetails\";\r\nimport ArtistDetails from \"../details/ArtistDetails\";\r\nimport Queue from \"../player/Queue\";\r\n\r\nconst Wrapper = styled.div`\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  overflow-y: auto;\r\n  padding: ${props => props.theme.thickness.medium}px;\r\n`;\r\n\r\nconst publicUrl = process.env.PUBLIC_URL;\r\nconst Routes = ({ className }: HTMLAttributes<HTMLElement>) => {\r\n  return (\r\n    <Wrapper className={className}>\r\n      <DefaultRoute from={`${publicUrl}/`} to={`${publicUrl}/browse`} />\r\n      <Route path={`${publicUrl}/login`} component={LogIn} />\r\n      <PrivateRoute path={`${publicUrl}/browse`} component={Browse} />\r\n      <PrivateRoute path={`${publicUrl}/search/:query?`} component={Search} />\r\n      <PrivateRoute path={`${publicUrl}/library`} component={Library} />\r\n      <PrivateRoute\r\n        path={`${publicUrl}/category/:categoryId`}\r\n        component={CategoryPlaylists}\r\n      />\r\n      <PrivateRoute\r\n        path={`${publicUrl}/playlist/:playlistId`}\r\n        component={PlaylistDetails}\r\n      />\r\n      <PrivateRoute\r\n        path={`${publicUrl}/album/:albumId`}\r\n        component={AlbumDetails}\r\n      />\r\n      <PrivateRoute\r\n        path={`${publicUrl}/artist/:artistId`}\r\n        component={ArtistDetails}\r\n      />\r\n      <PrivateRoute path={`${publicUrl}/queue`} component={Queue} />\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Routes;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport styled from \"../../styles/styled\";\r\nimport { deleteNotification } from \"../../actions/notifications\";\r\nimport { Notification } from \"../../reducers/notifications\";\r\nimport { Icon, IconType, RoundButton } from \"../core\";\r\n\r\nconst Wrapper = styled.li<{ isExiting: boolean }>`\r\n  align-items: center;\r\n  background: ${props => props.theme.color.primary};\r\n  box-shadow: ${props => props.theme.shadow.high};\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  overflow: hidden;\r\n  padding-left: ${props => props.theme.thickness.medium}px;\r\n  padding-right: ${props => props.theme.thickness.small}px;\r\n  position: relative;\r\n  width: ${props =>\r\n    props.theme.thickness.extraExtraLarge + props.theme.thickness.extraLarge}px;\r\n  animation: ${props =>\r\n    props.isExiting ? \"exit 0.4s forwards\" : \"enter 0.4s forwards\"};\r\n\r\n  @keyframes enter {\r\n    0% {\r\n      height: 0;\r\n      left: ${props => props.theme.thickness.small}px;\r\n      margin-bottom: 0;\r\n      padding-bottom: 0;\r\n      padding-top: 0;\r\n    }\r\n    50% {\r\n      height: ${props =>\r\n        props.theme.thickness.large + 2 * props.theme.thickness.extraSmall}px;\r\n      left: ${props => props.theme.thickness.small}px;\r\n      margin-bottom: ${props => props.theme.thickness.small}px;\r\n      padding-bottom: ${props => props.theme.thickness.extraSmall}px;\r\n      padding-top: ${props => props.theme.thickness.extraSmall}px;\r\n    }\r\n    100% {\r\n      height: ${props =>\r\n        props.theme.thickness.large + 2 * props.theme.thickness.extraSmall}px;\r\n      left: -${props => props.theme.thickness.extraExtraLarge + props.theme.thickness.extraLarge + props.theme.thickness.medium}px;\r\n      margin-bottom: ${props => props.theme.thickness.small}px;\r\n      padding-bottom: ${props => props.theme.thickness.extraSmall}px;\r\n      padding-top: ${props => props.theme.thickness.extraSmall}px;\r\n    }\r\n  }\r\n\r\n  @keyframes exit {\r\n    0% {\r\n      height: ${props =>\r\n        props.theme.thickness.large + 2 * props.theme.thickness.extraSmall}px;\r\n      left: -${props => props.theme.thickness.extraExtraLarge + props.theme.thickness.extraLarge + props.theme.thickness.medium}px;\r\n      margin-bottom: ${props => props.theme.thickness.small}px;\r\n      padding-bottom: ${props => props.theme.thickness.extraSmall}px;\r\n      padding-top: ${props => props.theme.thickness.extraSmall}px;\r\n    }\r\n    50% {\r\n      height: ${props =>\r\n        props.theme.thickness.large + 2 * props.theme.thickness.extraSmall}px;\r\n      left: ${props => props.theme.thickness.small}px;\r\n      margin-bottom: ${props => props.theme.thickness.small}px;\r\n      padding-bottom: ${props => props.theme.thickness.extraSmall}px;\r\n      padding-top: ${props => props.theme.thickness.extraSmall}px;\r\n    }\r\n    100% {\r\n      height: 0;\r\n      left: ${props => props.theme.thickness.small}px;\r\n      margin-bottom: 0;\r\n      padding-bottom: 0;\r\n      padding-top: 0;\r\n    }\r\n  }\r\n`;\r\n\r\nconst DoneIcon = styled(Icon).attrs(() => ({\r\n  type: IconType.Done\r\n}))`\r\n  color: ${props => props.theme.onPrimary.primary};\r\n  margin-right: ${props => props.theme.thickness.small}px;\r\n`;\r\n\r\nconst Text = styled.span`\r\n  color: ${props => props.theme.onPrimary.primary};\r\n  flex-grow: 1;\r\n`;\r\n\r\nconst ClearButton = styled(RoundButton).attrs(() => ({\r\n  onPrimary: true,\r\n  iconType: IconType.Clear\r\n}))`\r\n  justify-self: flex-end;\r\n`;\r\n\r\ninterface Props {\r\n  notification: Notification;\r\n  deleteNotification: (notificationId: string) => void;\r\n}\r\n\r\nfunction NotificationItem({ notification, deleteNotification }: Props) {\r\n  const [isExiting, setIsExiting] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      exit();\r\n    }, 4000);\r\n  });\r\n\r\n  function exit() {\r\n    setIsExiting(true);\r\n    setTimeout(() => {\r\n      deleteNotification(notification.id);\r\n    }, 400);\r\n  }\r\n\r\n  return (\r\n    <Wrapper isExiting={isExiting}>\r\n      <DoneIcon />\r\n      <Text>{notification.message}</Text>\r\n      <ClearButton onClick={exit} />\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nconst mapDispatch = {\r\n  deleteNotification\r\n};\r\n\r\nexport default connect(\r\n  null,\r\n  mapDispatch\r\n)(NotificationItem);\r\n","import React, { HTMLAttributes } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport styled from \"../../styles/styled\";\r\nimport { State } from \"../../reducers\";\r\nimport {\r\n  Notification,\r\n  selectNotifications\r\n} from \"../../reducers/notifications\";\r\nimport NotificationItem from \"./NotificationItem\";\r\n\r\nconst Wrapper = styled.div`\r\n  overflow: visible;\r\n  width: 0;\r\n  z-index: 3;\r\n`;\r\n\r\nconst List = styled.ul`\r\n  padding-top: ${props => props.theme.thickness.medium}px;\r\n  width: 0;\r\n`;\r\n\r\ninterface Props {\r\n  notifications: Notification[];\r\n}\r\n\r\nfunction NotificationList({\r\n  className,\r\n  notifications\r\n}: Props & HTMLAttributes<HTMLElement>) {\r\n  return (\r\n    <Wrapper className={className}>\r\n      <List>\r\n        {notifications.map(notification => (\r\n          <NotificationItem key={notification.id} notification={notification} />\r\n        ))}\r\n      </List>\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  notifications: selectNotifications(state)\r\n});\r\n\r\nconst mapDispatch = {};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(NotificationList);\r\n","import React, { HTMLAttributes } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Artist, Album, Track } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport { Image, Text, ToggleButton, IconType } from \"../core\";\r\nimport { getImageSource } from \"../../utils\";\r\nimport {\r\n  selectLoadedArtists,\r\n  selectLoadedAlbum,\r\n  selectLoadedTrack\r\n} from \"../../reducers/player\";\r\nimport ArtistNames from \"../details/ArtistNames\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  height: 100%;\r\n`;\r\n\r\nconst StyedImage = styled(Image)`\r\n  box-shadow: ${props => props.theme.shadow.middle};\r\n  height: 75px;\r\n  margin-right: ${props => props.theme.thickness.small}px;\r\n  width: 75px;\r\n`;\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-right: ${props => props.theme.thickness.small}px;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst Title = styled(Text)`\r\n  margin-bottom: ${props => props.theme.thickness.extraSmall}px;\r\n`;\r\n\r\nconst FavoriteButton = styled(ToggleButton).attrs(() => ({\r\n  iconType: IconType.Favorite\r\n}))`\r\n  flex-shrink: 0;\r\n`;\r\n\r\ninterface Props {\r\n  track?: Track;\r\n  album?: Album;\r\n  artists: Artist[];\r\n}\r\n\r\nfunction TrackInfos({\r\n  className,\r\n  track,\r\n  album,\r\n  artists\r\n}: Props & HTMLAttributes<HTMLElement>) {\r\n  return (\r\n    <Wrapper className={className}>\r\n      {album && (\r\n        <Link to={`${process.env.PUBLIC_URL}/album/${album.id}`}>\r\n          <StyedImage source={getImageSource(album)} />\r\n        </Link>\r\n      )}\r\n\r\n      {track && (\r\n        <>\r\n          <Container>\r\n            <Title>{track.name}</Title>\r\n            <ArtistNames artists={artists} />\r\n          </Container>\r\n\r\n          <FavoriteButton />\r\n        </>\r\n      )}\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  track: selectLoadedTrack(state),\r\n  album: selectLoadedAlbum(state),\r\n  artists: selectLoadedArtists(state)\r\n});\r\n\r\nexport default connect(\r\n  mapState,\r\n  null\r\n)(TrackInfos);\r\n","import React, { useEffect, useRef, SyntheticEvent } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Track } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport {\r\n  selectLoadedTrack,\r\n  Times,\r\n  selectTimes,\r\n  selectVolume,\r\n  selectIsMuted,\r\n  Command,\r\n  selectCommand\r\n} from \"../../reducers/player\";\r\nimport {\r\n  trackLoaded,\r\n  playing,\r\n  update,\r\n  paused,\r\n  seeked,\r\n  volumeChanged,\r\n  ended\r\n} from \"../../actions/player\";\r\n\r\ninterface Props {\r\n  loadedTrack?: Track;\r\n  times: Times;\r\n  volume: number;\r\n  isMuted: boolean;\r\n  command: Command;\r\n  trackLoaded: (duration: number) => void;\r\n  playing: () => void;\r\n  update: (elaped: number) => void;\r\n  paused: () => void;\r\n  seeked: () => void;\r\n  volumeChanged: () => void;\r\n  ended: () => void;\r\n}\r\n\r\nfunction Audio({\r\n  loadedTrack,\r\n  times,\r\n  volume,\r\n  isMuted,\r\n  command,\r\n  trackLoaded,\r\n  playing,\r\n  update,\r\n  paused,\r\n  seeked,\r\n  volumeChanged,\r\n  ended\r\n}: Props) {\r\n  const audio = useRef<HTMLAudioElement>(null);\r\n\r\n  useEffect(() => {\r\n    const currentAudio = audio.current;\r\n\r\n    if (currentAudio) {\r\n      const { currentTime } = times;\r\n      switch (command) {\r\n        case Command.Play:\r\n          currentAudio.play();\r\n          break;\r\n        case Command.Pause:\r\n          currentAudio.pause();\r\n          break;\r\n        case Command.Seek:\r\n          currentAudio.currentTime = currentTime;\r\n          break;\r\n        case Command.ChangeVolume:\r\n          currentAudio.volume = isMuted ? 0 : volume;\r\n      }\r\n    }\r\n  });\r\n\r\n  function handleLoadedMetadata(event: SyntheticEvent<HTMLAudioElement>) {\r\n    const target = event.target as HTMLAudioElement;\r\n    trackLoaded(target.duration);\r\n  }\r\n\r\n  function handleTimeUpdate(event: SyntheticEvent<HTMLAudioElement>) {\r\n    const target = event.target as HTMLAudioElement;\r\n    update(target.currentTime);\r\n  }\r\n\r\n  function handlePause(event: SyntheticEvent<HTMLAudioElement>) {\r\n    const target = event.target as HTMLAudioElement;\r\n    if (target.currentTime !== target.duration) {\r\n      paused();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <audio\r\n      ref={audio}\r\n      src={loadedTrack && loadedTrack.preview_url}\r\n      onLoadedMetadata={handleLoadedMetadata}\r\n      onPlay={playing}\r\n      onTimeUpdate={handleTimeUpdate}\r\n      onPause={handlePause}\r\n      onSeeked={seeked}\r\n      onVolumeChange={volumeChanged}\r\n      onEnded={ended}\r\n    />\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  loadedTrack: selectLoadedTrack(state),\r\n  times: selectTimes(state),\r\n  volume: selectVolume(state),\r\n  isMuted: selectIsMuted(state),\r\n  command: selectCommand(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  trackLoaded,\r\n  playing,\r\n  update,\r\n  paused,\r\n  seeked,\r\n  volumeChanged,\r\n  ended\r\n};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(Audio);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport styled from \"../../styles/styled\";\r\nimport { State } from \"../../reducers\";\r\nimport { IconType, RoundButton, ToggleButton } from \"../core\";\r\nimport {\r\n  selectCanNext,\r\n  selectCanPrevious,\r\n  selectCanPlayPause,\r\n  selectIsLooped,\r\n  selectIsPlaying,\r\n  selectIsShuffled\r\n} from \"../../reducers/player\";\r\nimport {\r\n  next,\r\n  previous,\r\n  toggleLoop,\r\n  playPause,\r\n  toggleShuffle\r\n} from \"../../actions/player\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n`;\r\n\r\nconst StyledRoundButton = styled(RoundButton)`\r\n  margin: 0 ${props => props.theme.thickness.extraSmall}px;\r\n`;\r\n\r\nconst StyledToggleButton = styled(ToggleButton)`\r\n  margin: 0 ${props => props.theme.thickness.extraSmall}px;\r\n`;\r\n\r\nconst ShuffleButton = styled(StyledToggleButton).attrs(() => ({\r\n  iconType: IconType.Shuffle\r\n}))``;\r\n\r\nconst PreviousButton = styled(StyledRoundButton).attrs(() => ({\r\n  iconType: IconType.SkipPrevious\r\n}))``;\r\n\r\nconst PlayButton = styled(StyledRoundButton)``;\r\n\r\nconst NextButton = styled(StyledRoundButton).attrs(() => ({\r\n  iconType: IconType.SkipNext\r\n}))``;\r\n\r\nconst LoopButton = styled(StyledToggleButton).attrs(() => ({\r\n  iconType: IconType.Loop\r\n}))``;\r\n\r\ninterface Props {\r\n  isPlaying: boolean;\r\n  isShuffled: boolean;\r\n  canPrevious: boolean;\r\n  canPlayPause: boolean;\r\n  canNext: boolean;\r\n  isLooped: boolean;\r\n  toggleShuffle: () => void;\r\n  previous: () => void;\r\n  playPause: () => void;\r\n  next: () => void;\r\n  toggleLoop: () => void;\r\n}\r\n\r\nfunction Controls({\r\n  isPlaying,\r\n  isShuffled,\r\n  canPrevious,\r\n  canPlayPause,\r\n  canNext,\r\n  isLooped,\r\n  toggleShuffle,\r\n  previous,\r\n  playPause,\r\n  next,\r\n  toggleLoop\r\n}: Props) {\r\n  return (\r\n    <Wrapper>\r\n      <ShuffleButton onClick={toggleShuffle} isToggled={isShuffled} />\r\n      <PreviousButton disabled={!canPrevious} onClick={previous} />\r\n\r\n      <PlayButton\r\n        disabled={!canPlayPause}\r\n        onClick={playPause}\r\n        iconType={isPlaying ? IconType.Pause : IconType.PlayArrow}\r\n      />\r\n\r\n      <NextButton disabled={!canNext} onClick={next} />\r\n      <LoopButton onClick={toggleLoop} isToggled={isLooped} />\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  isPlaying: selectIsPlaying(state),\r\n  isShuffled: selectIsShuffled(state),\r\n  canPrevious: selectCanPrevious(state),\r\n  canPlayPause: selectCanPlayPause(state),\r\n  canNext: selectCanNext(state),\r\n  isLooped: selectIsLooped(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  toggleShuffle,\r\n  previous,\r\n  playPause,\r\n  next,\r\n  toggleLoop\r\n};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(Controls);\r\n","import React, { useState, useRef } from \"react\";\r\nimport styled from \"../../styles/styled\";\r\n\r\nconst Wrapper = styled.div<{ isDisabled: boolean }>`\r\n  border-radius: ${props => props.theme.thickness.extraExtraSmall}px;\r\n  cursor: ${props => (props.isDisabled ? \"default\" : \"pointer\")};\r\n  padding: 0 ${props => props.theme.thickness.small}px\r\n  width: 100%;\r\n`;\r\n\r\nconst Container = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  height: ${props => props.theme.thickness.medium}px;\r\n  position: relative;\r\n  width: 100%;\r\n`;\r\n\r\nconst Left = styled.div.attrs<{ width: number }>(props => ({\r\n  style: { width: `${props.width * 100}%` }\r\n}))<{ width: number }>`\r\n  background: ${props => props.theme.color.primary};\r\n  border-radius: ${props => props.theme.thickness.extraExtraSmall}px 0 0\r\n    ${props => props.theme.thickness.extraExtraSmall}px;\r\n  height: ${props => props.theme.thickness.extraExtraSmall}px;\r\n`;\r\n\r\nconst Thumb = styled.div.attrs<{ position: number }>(({ position }) => ({\r\n  style: { left: `${position * 100}%` }\r\n}))<{ position: number }>`\r\n  background: transparent;\r\n  border-radius: 50%;\r\n  height: ${props => props.theme.thickness.medium}px;\r\n  margin-left: -12.5px;\r\n  position: absolute;\r\n  visibility: hidden;\r\n  width: ${props => props.theme.thickness.medium}px;\r\n  z-index: 1;\r\n  transition: left 0.2s;\r\n\r\n  &::before {\r\n    background: ${props => props.theme.onBackground.primary};\r\n    border-radius: 50%;\r\n    box-shadow: ${props => props.theme.shadow.middle};\r\n    content: \"\";\r\n    height: 50%;\r\n    left: 25%;\r\n    position: absolute;\r\n    top: 25%;\r\n    width: 50%;\r\n  }\r\n\r\n  ${Wrapper}:hover & {\r\n    visibility: visible;\r\n  }\r\n`;\r\n\r\nconst Right = styled.div.attrs<{ width: number }>(props => ({\r\n  style: { width: `${100 - props.width * 100}%` }\r\n}))<{ width: number }>`\r\n  background: ${props => props.theme.onBackground.secondary};\r\n  border-radius: 0 ${props => props.theme.thickness.extraExtraSmall}px\r\n    ${props => props.theme.thickness.extraExtraSmall}px 0;\r\n  height: ${props => props.theme.thickness.extraExtraSmall}px;\r\n`;\r\n\r\ninterface Props {\r\n  className?: string;\r\n  value: number;\r\n  canChange: boolean;\r\n  onChange: (value: number) => void;\r\n}\r\n\r\nfunction Slider({ className, value, canChange, onChange }: Props) {\r\n  const [isDown, setIsDown] = useState(false);\r\n  const [localValue, setLocalValue] = useState(0);\r\n\r\n  const wrapper = useRef<HTMLDivElement>(null);\r\n  const thumb = useRef<HTMLDivElement>(null);\r\n\r\n  function getValue(x: number) {\r\n    const currentWrapper = wrapper.current;\r\n    const currentTHunb = thumb.current;\r\n    if (!currentWrapper || !currentTHunb) {\r\n      return 0;\r\n    }\r\n\r\n    const clientRect = currentWrapper.getBoundingClientRect();\r\n    let value = (x - clientRect.left) / currentWrapper.clientWidth;\r\n    if (value < 0) {\r\n      value = 0;\r\n    } else if (value > 1) {\r\n      value = 1;\r\n    }\r\n\r\n    return value;\r\n  }\r\n\r\n  function handleMouseDown(event: React.MouseEvent<HTMLElement>) {\r\n    if (!canChange) {\r\n      return;\r\n    }\r\n\r\n    setIsDown(true);\r\n    setLocalValue(getValue(event.pageX));\r\n    document.addEventListener(\"mousemove\", handleMouseMove);\r\n    document.addEventListener(\"mouseup\", handleMouseUp);\r\n  }\r\n\r\n  function handleMouseMove(event: MouseEvent) {\r\n    setLocalValue(getValue(event.pageX));\r\n  }\r\n\r\n  function handleMouseUp(event: MouseEvent) {\r\n    document.removeEventListener(\"mousemove\", handleMouseMove);\r\n    document.removeEventListener(\"mouseup\", handleMouseUp);\r\n    setIsDown(false);\r\n    const value = getValue(event.pageX);\r\n    onChange(value);\r\n  }\r\n\r\n  function getCurrentValue() {\r\n    return isDown ? localValue : value;\r\n  }\r\n\r\n  const currentValue = getCurrentValue();\r\n\r\n  return (\r\n    <Wrapper\r\n      ref={wrapper}\r\n      onMouseDown={handleMouseDown}\r\n      isDisabled={!canChange}\r\n      className={className}\r\n    >\r\n      <Container>\r\n        <Left width={currentValue} />\r\n        {canChange && <Thumb ref={thumb} position={currentValue} />}\r\n        <Right width={currentValue} />\r\n      </Container>\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nSlider.defaultProps = {\r\n  value: 0,\r\n  canChange: true,\r\n  onChange: () => {}\r\n};\r\n\r\nexport default Slider;\r\n","import React from \"react\";\r\nimport styled from \"../../styles/styled\";\r\nimport Slider from \"./Slider\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-cotent: center;\r\n  width: 100%;\r\n`;\r\n\r\nconst ProgressTime = styled.div`\r\n  color: ${props => props.theme.onBackground.secondary};\r\n  font-size: ${props => props.theme.fontSize.small}px;\r\n  font-weight: ${props => props.theme.fontWeight.light};\r\n`;\r\n\r\ninterface Props {\r\n  duration: number;\r\n  currentTime: number;\r\n  canSeek: boolean;\r\n  onSeek: (time: number) => void;\r\n}\r\n\r\nfunction Playback({ duration, currentTime, canSeek, onSeek }: Props) {\r\n  function renderTime(seconds: number) {\r\n    const minutes = Math.floor(seconds / 60);\r\n    seconds = Math.round(seconds);\r\n\r\n    return (\r\n      <ProgressTime>\r\n        {`${minutes}:${seconds < 10 ? \"0\" + seconds : seconds}`}\r\n      </ProgressTime>\r\n    );\r\n  }\r\n\r\n  function handleChange(value: number) {\r\n    onSeek(duration * value);\r\n  }\r\n\r\n  const progress = duration ? currentTime / duration : 0;\r\n\r\n  return (\r\n    <Wrapper>\r\n      {renderTime(currentTime)}\r\n      <Slider value={progress} onChange={handleChange} canChange={canSeek} />\r\n      {renderTime(duration)}\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nexport default Playback;\r\n","import React, { HTMLAttributes } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport styled from \"../../styles/styled\";\r\nimport { changeVolume } from \"../../actions/player\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectVolume, selectIsMuted } from \"../../reducers/player\";\r\nimport { IconType, RoundButton } from \"../core\";\r\nimport Slider from \"./Slider\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  height: 100%;\r\n`;\r\n\r\nconst VolumeButton = styled(RoundButton)`\r\n  flex-shrink: 0;\r\n`;\r\n\r\nconst StyledSlider = styled(Slider)`\r\n  flex-grow: 1;\r\n`;\r\n\r\ninterface Props {\r\n  volume: number;\r\n  isMuted: boolean;\r\n  changeVolume: (volume: number, isMuted: boolean) => void;\r\n}\r\n\r\nfunction Volume({\r\n  className,\r\n  volume,\r\n  isMuted,\r\n  changeVolume\r\n}: Props & HTMLAttributes<HTMLElement>) {\r\n  function handleClick() {\r\n    changeVolume(volume, !isMuted);\r\n  }\r\n\r\n  function handleChange(value: number) {\r\n    changeVolume(value, false);\r\n  }\r\n\r\n  return (\r\n    <Wrapper className={className}>\r\n      <VolumeButton\r\n        iconType={isMuted ? IconType.VolumeOff : IconType.VolumeUp}\r\n        onClick={handleClick}\r\n      />\r\n      <StyledSlider value={isMuted ? 0 : volume} onChange={handleChange} />\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  volume: selectVolume(state),\r\n  isMuted: selectIsMuted(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  changeVolume\r\n};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(Volume);\r\n","import React, { HTMLAttributes } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { withRouter, RouteComponentProps } from \"react-router\";\r\nimport styled from \"../../styles/styled\";\r\nimport { State } from \"../../reducers\";\r\nimport { Times, selectTimes, selectCanSeek } from \"../../reducers/player\";\r\nimport { seek } from \"../../actions/player\";\r\nimport { IconType, RoundButton } from \"../core\";\r\nimport TrackInfos from \"./TrackInfos\";\r\nimport Audio from \"./Audio\";\r\nimport Controls from \"./Controls\";\r\nimport Playback from \"./Playback\";\r\nimport Volume from \"./Volume\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  background: ${props => props.theme.background.tertiary};\r\n  box-sizing: border-box;\r\n  box-shadow: ${props => props.theme.shadow.middle};\r\n  display: flex;\r\n  padding: ${props => props.theme.thickness.small}px;\r\n  z-index: 2;\r\n`;\r\n\r\nconst ThirdWrapper = styled.div`\r\n  box-sizing: border-box;\r\n  height: 100%;\r\n`;\r\n\r\nconst LeftWrapper = styled(ThirdWrapper)`\r\n  display: none;\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.extraSmall}px) {\r\n    display: block;\r\n    width: 25%;\r\n  }\r\n`;\r\n\r\nconst CenterWrapper = styled(ThirdWrapper)`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-evenly;\r\n  width: 100%;\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.extraSmall}px) {\r\n    padding: 0 ${props => props.theme.thickness.small}px;\r\n    width: 50%;\r\n  }\r\n`;\r\n\r\nconst RightWrapper = styled(ThirdWrapper)`\r\n  align-items: center;\r\n  display: none;\r\n  justify-content: flex-end;\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.extraSmall}px) {\r\n    display: flex;\r\n    width: 25%;\r\n  }\r\n`;\r\n\r\nconst StyledVolume = styled(Volume)`\r\n  flex-grow: 1;\r\n`;\r\n\r\nconst QueueButton = styled(RoundButton).attrs(() => ({\r\n  iconType: IconType.QueueMusic\r\n}))``;\r\n\r\ninterface Props extends RouteComponentProps {\r\n  times: Times;\r\n  canSeek: boolean;\r\n  seek: (time: number) => void;\r\n}\r\n\r\nfunction Player({\r\n  className,\r\n  history,\r\n  times,\r\n  canSeek,\r\n  seek\r\n}: Props & HTMLAttributes<HTMLElement>) {\r\n  function handleQueueClick() {\r\n    history.push(`${process.env.PUBLIC_URL}/queue`);\r\n  }\r\n\r\n  return (\r\n    <Wrapper className={className}>\r\n      <LeftWrapper>\r\n        <TrackInfos />\r\n      </LeftWrapper>\r\n\r\n      <CenterWrapper>\r\n        <Controls />\r\n\r\n        <Playback\r\n          duration={times.duration}\r\n          currentTime={times.currentTime}\r\n          canSeek={canSeek}\r\n          onSeek={seek}\r\n        />\r\n      </CenterWrapper>\r\n\r\n      <RightWrapper>\r\n        <QueueButton onClick={handleQueueClick} />\r\n        <StyledVolume />\r\n      </RightWrapper>\r\n\r\n      <Audio />\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  times: selectTimes(state),\r\n  canSeek: selectCanSeek(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  seek\r\n};\r\n\r\nexport default withRouter(\r\n  connect(\r\n    mapState,\r\n    mapDispatch\r\n  )(Player)\r\n);\r\n","import React, { ReactNode } from \"react\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport styled from \"../../styles/styled\";\r\nimport Header from \"./Header\";\r\nimport Menu from \"./Menu\";\r\nimport Routes from \"./Routes\";\r\nimport NotificationList from \"./NotificationList\";\r\nimport Player from \"../player/Player\";\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n`;\r\n\r\nconst StyledHeader = styled(Header)`\r\n  flex-shrink: 0;\r\n  height: ${props => props.theme.thickness.large}px;\r\n  padding: ${props => props.theme.thickness.extraSmall}px\r\n    ${props => props.theme.thickness.medium}px;\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.extraSmall}px) {\r\n    padding: ${props => props.theme.thickness.extraSmall}px\r\n      ${props => props.theme.thickness.large}px;\r\n  }\r\n`;\r\n\r\nconst Body = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-grow: 1;\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.extraSmall}px) {\r\n    flex-direction: row;\r\n  }\r\n`;\r\n\r\nconst StyledMenu = styled(Menu)`\r\n  flex-shrink: 0;\r\n`;\r\n\r\nconst StyledRoutes = styled(Routes)`\r\n  flex-grow: 1;\r\n`;\r\n\r\nconst StyledNotificationList = styled(NotificationList)`\r\n  height: 100%;\r\n  position: fixed;\r\n  top: ${props => 2 * props.theme.thickness.large}px;\r\n  right: 0;\r\n\r\n  @media (min-width: ${({ theme }) => theme.breakpoint.extraSmall}px) {\r\n    top: ${props =>\r\n      props.theme.thickness.large + 2 * props.theme.thickness.extraSmall}px;\r\n  }\r\n`;\r\n\r\nconst StyledPlayer = styled(Player)`\r\n  flex-shrink: 0;\r\n  height: ${props => props.theme.thickness.extraLarge}px;\r\n`;\r\n\r\ninterface Props {\r\n  children: ReactNode;\r\n}\r\n\r\nfunction App({ children }: Props) {\r\n  return (\r\n    <Router>\r\n      <Wrapper>\r\n        <StyledHeader>{children}</StyledHeader>\r\n\r\n        <Body>\r\n          <StyledMenu />\r\n          <StyledRoutes />\r\n          <StyledNotificationList />\r\n        </Body>\r\n\r\n        <StyledPlayer />\r\n      </Wrapper>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React, { useState } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport { createStore, applyMiddleware } from \"redux\";\r\nimport thunkMiddleware from \"redux-thunk\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport GlobalStyle from \"./styles/global\";\r\nimport styled, { ThemeProvider } from \"./styles/styled\";\r\nimport { ThemeMode, darkTheme, lightTheme } from \"./styles/theme\";\r\nimport rootReducer from \"./reducers\";\r\nimport { checkRedirection, initAuthorization } from \"./utils/authorization\";\r\nimport fetchMiddleware from \"./middlewares/fetchMiddleware\";\r\nimport { RoundButton, IconType } from \"./components/core\";\r\nimport App from \"./components/layout/App\";\r\n\r\ncheckRedirection();\r\nconst store = createStore(\r\n  rootReducer,\r\n  composeWithDevTools(applyMiddleware(thunkMiddleware, fetchMiddleware))\r\n);\r\ninitAuthorization(store.dispatch);\r\n\r\ninterface ThemeButtonProps {\r\n  mode: ThemeMode;\r\n}\r\n\r\nconst ThemeButton = styled(RoundButton).attrs<\r\n  ThemeButtonProps,\r\n  { iconType: IconType }\r\n>(({ mode }) => ({\r\n  onPrimary: true,\r\n  iconType: mode === ThemeMode.Dark ? IconType.Brightness3 : IconType.WbSunny\r\n}))<ThemeButtonProps>`\r\n  margin-right: ${props => props.theme.thickness.extraSmall}px;\r\n`;\r\n\r\nfunction Root() {\r\n  const [themeMode, setThemeMode] = useState(ThemeMode.Dark);\r\n\r\n  function handleClick() {\r\n    setThemeMode(\r\n      themeMode === ThemeMode.Dark ? ThemeMode.Light : ThemeMode.Dark\r\n    );\r\n  }\r\n\r\n  const theme = themeMode === ThemeMode.Dark ? darkTheme : lightTheme;\r\n  return (\r\n    <>\r\n      <GlobalStyle theme={theme} />\r\n      <ThemeProvider theme={theme}>\r\n        <Provider store={store}>\r\n          <App>\r\n            <ThemeButton mode={themeMode} onClick={handleClick} />\r\n          </App>\r\n        </Provider>\r\n      </ThemeProvider>\r\n    </>\r\n  );\r\n}\r\n\r\nReactDOM.render(<Root />, document.getElementById(\"root\"));\r\n","import { Dispatch } from \"redux\";\r\nimport { normalize } from \"normalizr\";\r\nimport { authorizedFetch } from \"../utils/authorization\";\r\n\r\nexport default () => (next: Dispatch) => (action: any) => {\r\n  const { types, path, method, schema, data, success } = action;\r\n\r\n  if (types) {\r\n    const [requestType, successType, failureType] = types;\r\n\r\n    next({ type: requestType });\r\n\r\n    return authorizedFetch(\r\n      `${process.env.REACT_APP_BASE_URL}/${path}`,\r\n      method\r\n    ).then(async response => {\r\n      const text = await response.text();\r\n      const json = text ? JSON.parse(text) : null;\r\n\r\n      if (response.ok) {\r\n        const payload =\r\n          json && schema ? normalize(json, schema).entities : json;\r\n\r\n        next({\r\n          type: successType,\r\n          payload: data ? { ...payload, ...data } : payload\r\n        });\r\n      } else {\r\n        next({ type: failureType, payload: json.error });\r\n      }\r\n      if (success) {\r\n        success(json);\r\n      }\r\n    });\r\n  } else {\r\n    next(action);\r\n  }\r\n};\r\n","export * from \"./Album\";\r\nexport * from \"./Artist\";\r\nexport * from \"./Category\";\r\nexport * from \"./Copyright\";\r\nexport * from \"./Endpoint\";\r\nexport * from \"./ExternalId\";\r\nexport * from \"./ExternalUrl\";\r\nexport * from \"./Followers\";\r\nexport * from \"./Image\";\r\nexport * from \"./Paging\";\r\nexport * from \"./Playlist\";\r\nexport * from \"./PlaylistTrack\";\r\nexport * from \"./PublicUser\";\r\nexport * from \"./Restriction\";\r\nexport * from \"./Track\";\r\nexport * from \"./TrackLink\";\r\nexport * from \"./Type\";\r\nexport * from \"./User\";\r\nexport * from \"./UserProfile\";\r\n","export enum Type {\r\n  Album = \"album\",\r\n  Artist = \"artist\",\r\n  Playlist = \"playlist\",\r\n  Library = \"library\"\r\n}\r\n"],"sourceRoot":""}