{"version":3,"sources":["styles/styled.ts","helpers/reducer.ts","actions/schemas.ts","actions/albums.ts","actions/browse.ts","actions/playlists.ts","reducers/fetching.ts","reducers/artists.ts","reducers/tracks.ts","reducers/albums.ts","actions/authorization.ts","helpers/authorization.ts","reducers/authorization.ts","reducers/playlists.ts","reducers/browse.ts","actions/player.ts","reducers/player.ts","actions/userProfile.ts","reducers/userProfile.ts","reducers/index.ts","components/Icon.tsx","components/layout/Title.tsx","components/layout/User.tsx","components/layout/Header.tsx","components/layout/Menu.tsx","components/player/Album.tsx","components/player/Controls.tsx","components/player/Slider.tsx","components/player/Progress.tsx","components/player/Audio.tsx","components/player/Player.tsx","components/DefaultRoute.tsx","components/browse/Covers.tsx","components/withLoader.tsx","components/browse/Categories.tsx","helpers/utils.ts","components/browse/NewReleases.tsx","components/browse/FeaturedPlaylists.tsx","components/browse/Browse.tsx","components/browse/CategoryPlaylists.tsx","components/search/Search.tsx","components/tracks/Cover.tsx","components/tracks/Tracks.tsx","components/tracks/PlaylistTracks.tsx","components/tracks/AlbumTracks.tsx","components/layout/Routes.tsx","components/layout/App.tsx","styles/theme.ts","styles/global.ts","index.tsx","middlewares/fetchMiddleware.ts"],"names":["styledComponents","styled","default","ThemeProvider","css","createGlobalStyle","keyframes","createReducer","initialState","handlers","state","arguments","length","undefined","action","hasOwnProperty","type","Category","schema","Entity","Categories","items","processStrategy","value","categories","Artist","Album","artistIds","artists","tracks","rest","Object","objectWithoutProperties","objectSpread","trackIds","Albums","albums","Track","albumId","parent","album","define","ActionType","Playlist","map","item","track","Schemas","Playlists","playlists","startFetching","isFetching","endFetching","mergeArtists","merge","byId","payload","_createReducer","defineProperty","AlbumActionType","AlbumSuccess","PlaylistActionType","PlaylistSuccess","BrowseActionType","NewReleasesSuccess","selectArtists","id","mergeTracks","tracks_createReducer","selectTrack","trackId","selectAlbum","selectTracks","mergeAlbums","albums_createReducer","AlbumRequest","AlbumFailure","selectIsFetching","URL","concat","process","REGEX","ACCESS_TOKEN","TOKEN_TYPE","EXPIRES_AT","receiveAuthorization","ReceiveAuthorization","isAuthorized","authorization","mergePlaylists","playlists_createReducer","PlaylistRequest","PlaylistFailure","CategoryPlaylistsSuccess","FeaturedPlaylistsSuccess","selectPlaylist","playlistId","playlist","selectPlaylists","playlistIds","TrackState","categoriesById","categoryPlaylistIds","featuredPlaylistIds","newReleaseIds","browse_createReducer","CategoriesRequest","CategoriesSuccess","CategoriesFailure","CategoryRequest","CategorySuccess","CategoryFailure","CategoryPlaylistsRequest","keys","CategoryPlaylistsFailure","FeaturedPlaylistsRequest","FeaturedPlaylistsFailure","NewReleasesRequest","NewReleasesFailure","browse","selectCategories","values","selectCategory","categoryId","selectCategoryPlaylists","selectFeaturedPlaylists","selectNewReleases","albumIds","selectAlbums","play","dispatch","Play","pause","Pause","None","duration","currentTime","shouldPlay","shouldPause","shouldSeek","player_createReducer","Load","currentId","isLoaded","Loaded","Playing","isPlaying","Update","Paused","isPaused","Seek","Action","Seeked","selectCurrent","player","selectState","selectTimes","selectCommands","_state$player","userProfile","UserProfileSuccess","selectUserProfile","combineReducers","IconType","Icon","props","className","react_default","a","createElement","Wrapper","div","_templateObject","theme","font","size","large","weight","bold","StyledIcon","_templateObject2","Title","Wifi","Link","to","User_templateObject","User_templateObject2","User","display_name","User_Wrapper","User_StyledIcon","Person","header","Header_templateObject","primary","LoginButton","button","Header_templateObject2","foreground","background","hover","active","Header","handleClick","_callee","regenerator_default","wrap","_context","prev","next","_this","getAuthorization","stop","_this$props","this","getUserProfile","Header_Wrapper","layout_Title","layout_User","onClick","Component","mapDispatch","_ref","asyncToGenerator","mark","RequestAuthorization","Promise","resolve","reject","addEventListener","handleStorage","event","key","removeEventListener","location","assign","_x","apply","types","UserProfileRequest","UserProfileFailure","path","connect","ul","Menu_templateObject","dark","StyledNavLink","NavLink","Menu_templateObject2","primaryLight","_templateObject3","Menu","Menu_Wrapper","Menu_StyledIcon","ViewModule","Search","Album_templateObject","Image","img","Album_templateObject2","Infos","Album_templateObject3","span","_templateObject4","_templateObject5","light","image","name","artist","Album_Wrapper","src","Album_Title","Album_Artist","Controls_templateObject","RoundButton","Controls_templateObject2","MainButton","Controls_templateObject3","Controls_templateObject4","Controls","handleToggleClick","onPlay","onPause","Controls_Wrapper","disabled","Controls_StyledIcon","SkipPrevious","PlayArrow","SkipNext","Slider_templateObject","Left","Slider_templateObject2","width","Thumb","Slider_templateObject3","position","Right","Slider_templateObject4","Slider","wrapper","createRef","thumb","isDown","handleMouseDown","setState","getValue","pageX","document","handleMouseMove","handleMouseUp","onChange","x","current","getBoundingClientRect","left","clientWidth","getCurrentValue","Slider_Wrapper","ref","onMouseDown","Progress_templateObject","ProgressTime","Progress_templateObject2","small","StyledSlider","Progress_templateObject3","Progress","handleChange","onSeek","seconds","minutes","Math","floor","round","_this$props2","progress","Progress_Wrapper","renderTime","Audio","audio","handleLoaded","target","loaded","handlePlay","playing","handleUpdate","update","handlePause","paused","handleSeeked","seeked","times","_this$props$commands","commands","console","log","preview_url","onLoadedMetadata","onTimeUpdate","onSeeked","elapsed","Player_templateObject","ThirdWrapper","Player_templateObject2","CenterWrapper","Player_templateObject3","Player","seek","Fragment","Player_Wrapper","player_Album","images","url","player_Controls","player_Progress","player_Audio","time","DefaultRoute","from","Route","exact","render","Redirect","StyledList","Covers_templateObject","StyledItem","li","Covers_templateObject2","Button","Covers_templateObject3","Covers_templateObject4","Name","Covers_templateObject5","_templateObject6","Covers","Covers_Image","title","Covers_Artist","Fader","withLoader_templateObject","isLoading","Loader","withLoader_templateObject2","withLoader","WrappedComponent","history","push","getCategories","category","icons","browse_Covers","withRouter","joinArtistNames","join","NewReleases","getAlbums","author","FeaturedPlaylists","getPlaylists","Browse_templateObject","Browse_templateObject2","medium","Browse_templateObject3","Browse","match","Browse_Wrapper","Browse_StyledList","label","link","Browse_StyledNavLink","components_DefaultRoute","component","h1","CategoryPlaylists_templateObject","extraExtraLarge","CategoryPlaylists","getCategory","params","CategoryPlaylists_Title","getCategoryPlaylists","ownProps","Cover_templateObject","Cover_templateObject2","Cover_templateObject3","Cover_templateObject4","Cover","Cover_Wrapper","Cover_Image","Cover_Title","Cover_Artist","Tracks_templateObject","Tracks_templateObject2","isHidden","Tracks_templateObject3","Tracks_templateObject4","Tracks_templateObject5","Duration","Tracks_templateObject6","Tracks","load","hasPreview","Tracks_StyledIcon","VolumeUp","MusicNote","MusicOff","Tracks_Artist","duration_ms","_this2","Tracks_Button","isDisabled","renderIcon","Tracks_Infos","Tracks_Title","renderArtist","renderDuration","PlaylistTracks","getPlaylist","tracks_Cover","owner","tracks_Tracks","AlbumTracks","getAlbum","Routes_templateObject","Routes","Routes_Wrapper","App_templateObject","Body","App_templateObject2","App","BrowserRouter","App_Wrapper","layout_Header","layout_Menu","layout_Routes","player_Player","extraLarge","normal","filter","darken","global_templateObject","hash","localStorage","date","Date","setSeconds","getSeconds","parseInt","toString","checkRedirection","store","createStore","rootReducer","composeWithDevTools","applyMiddleware","thunkMiddleware","_types","slicedToArray","requestType","successType","failureType","tokenType","accessToken","fetch","headers","Authorization","authorizedFetch","then","response","json","ok","normalize","entities","error","parse","now","ReactDOM","global","es","layout_App","getElementById"],"mappings":"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","file":"static/js/main.c433833b.chunk.js","sourcesContent":["import * as styledComponents from \"styled-components\";\r\nimport { Theme } from \"./theme\";\r\n\r\nconst {\r\n  default: styled,\r\n  css,\r\n  createGlobalStyle,\r\n  keyframes,\r\n  ThemeProvider\r\n} = styledComponents as styledComponents.ThemedStyledComponentsModule<Theme>;\r\n\r\nexport { css, createGlobalStyle, keyframes, ThemeProvider };\r\nexport default styled;\r\n","import { Action } from \"redux\";\r\n\r\nexport default function createReducer(initialState: object, handlers: any) {\r\n  return function reducer(state = initialState, action: Action) {\r\n    if (handlers.hasOwnProperty(action.type)) {\r\n      return handlers[action.type](state, action);\r\n    } else {\r\n      return state;\r\n    }\r\n  };\r\n}\r\n","import { schema } from \"normalizr\";\r\n\r\nconst Category = new schema.Entity(\"categories\");\r\n\r\nconst Categories = new schema.Entity(\r\n  \"categoryItems\",\r\n  {\r\n    items: [Category]\r\n  },\r\n  {\r\n    processStrategy: value => {\r\n      const { items } = value.categories;\r\n      return {\r\n        items\r\n      };\r\n    }\r\n  }\r\n);\r\n\r\nconst Artist = new schema.Entity(\"artists\");\r\n\r\nconst Album = new schema.Entity(\r\n  \"albums\",\r\n  {\r\n    artistIds: [Artist]\r\n  },\r\n  {\r\n    processStrategy: value => {\r\n      const { artists, tracks, ...rest } = value;\r\n      return {\r\n        ...rest,\r\n        artistIds: artists,\r\n        trackIds: tracks ? tracks.items : []\r\n      };\r\n    }\r\n  }\r\n);\r\n\r\nconst Albums = new schema.Entity(\r\n  \"albumItems\",\r\n  {\r\n    items: [Album]\r\n  },\r\n  {\r\n    processStrategy: value => {\r\n      const { items } = value.albums;\r\n      return {\r\n        items\r\n      };\r\n    }\r\n  }\r\n);\r\n\r\nconst Track = new schema.Entity(\r\n  \"tracks\",\r\n  {\r\n    albumId: Album,\r\n    artistIds: [Artist]\r\n  },\r\n  {\r\n    processStrategy: (value, parent) => {\r\n      const { album, artists, ...rest } = value;\r\n      return {\r\n        ...rest,\r\n        albumId: parent[\"type\"] === \"album\" ? parent : album,\r\n        artistIds: artists\r\n      };\r\n    }\r\n  }\r\n);\r\n\r\nAlbum.define({\r\n  trackIds: [Track]\r\n});\r\n\r\nconst Playlist = new schema.Entity(\r\n  \"playlists\",\r\n  {\r\n    trackIds: [Track]\r\n  },\r\n  {\r\n    processStrategy: value => {\r\n      const { tracks, ...rest } = value;\r\n      return {\r\n        ...rest,\r\n        trackIds: tracks.items\r\n          ? tracks.items.map((item: any) => item.track)\r\n          : []\r\n      };\r\n    }\r\n  }\r\n);\r\n\r\nconst Playlists = new schema.Entity(\r\n  \"playlistItems\",\r\n  {\r\n    items: [Playlist]\r\n  },\r\n  {\r\n    processStrategy: value => {\r\n      const { items } = value.playlists;\r\n      return {\r\n        items\r\n      };\r\n    }\r\n  }\r\n);\r\n\r\nexport const Schemas = {\r\n  Artist,\r\n  Album,\r\n  Albums,\r\n  Category,\r\n  Categories,\r\n  Track,\r\n  Playlist,\r\n  Playlists\r\n};\r\n","import { EntitiesAction, FetchDispatch } from \"./types\";\r\nimport { Schemas } from \"./schemas\";\r\n\r\nexport enum ActionType {\r\n  AlbumRequest = \"ALBUM_REQUEST\",\r\n  AlbumSuccess = \"ALBUM_SUCCESS\",\r\n  AlbumFailure = \"ALBUM_FAILURE\"\r\n}\r\n\r\nexport interface AlbumSuccessAction\r\n  extends EntitiesAction<ActionType.AlbumSuccess> {}\r\n\r\nexport function getAlbum(albumId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.AlbumRequest,\r\n        ActionType.AlbumSuccess,\r\n        ActionType.AlbumFailure\r\n      ],\r\n      path: `albums/${albumId}`,\r\n      schema: Schemas.Album\r\n    });\r\n  };\r\n}\r\n","import { EntitiesAction, FetchDispatch } from \"./types\";\r\nimport { Schemas } from \"./schemas\";\r\n\r\nexport enum ActionType {\r\n  CategoriesRequest = \"CATEGORIES_REQUEST\",\r\n  CategoriesSuccess = \"CATEGORIES_SUCCESS\",\r\n  CategoriesFailure = \"CATEGORIES_FAILURE\",\r\n  CategoryRequest = \"CATEGORY_REQUEST\",\r\n  CategorySuccess = \"CATEGORY_SUCCESS\",\r\n  CategoryFailure = \"CATEGORY_FAILURE\",\r\n  CategoryPlaylistsRequest = \"CATEGORY_PLAYLISTS_REQUEST\",\r\n  CategoryPlaylistsSuccess = \"CATEGORY_PLAYLISTS_SUCCESS\",\r\n  CategoryPlaylistsFailure = \"CATEGORY_PLAYLISTS_FAILURE\",\r\n  FeaturedPlaylistsRequest = \"FEATURED_PLAYLISTS_REQUEST\",\r\n  FeaturedPlaylistsSuccess = \"FEATURED_PLAYLISTS_SUCCESS\",\r\n  FeaturedPlaylistsFailure = \"FEATURED_PLAYLISTS_FAILURE\",\r\n  NewReleasesRequest = \"NEW_RELEASES_REQUEST\",\r\n  NewReleasesSuccess = \"NEW_RELEASES_SUCCESS\",\r\n  NewReleasesFailure = \"NEW_RELEASES_FAILURE\"\r\n}\r\n\r\nexport interface CategoriesSuccessAction\r\n  extends EntitiesAction<ActionType.CategoriesSuccess> {}\r\n\r\nexport function getCategories() {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.CategoriesRequest,\r\n        ActionType.CategoriesSuccess,\r\n        ActionType.CategoriesFailure\r\n      ],\r\n      path: \"browse/categories\",\r\n      schema: Schemas.Categories\r\n    });\r\n  };\r\n}\r\n\r\nexport interface CategorySuccessAction\r\n  extends EntitiesAction<ActionType.CategorySuccess> {}\r\n\r\nexport function getCategory(categoryId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.CategoryRequest,\r\n        ActionType.CategorySuccess,\r\n        ActionType.CategoryFailure\r\n      ],\r\n      path: `browse/categories/${categoryId}`,\r\n      schema: Schemas.Category\r\n    });\r\n  };\r\n}\r\n\r\nexport interface CategoryPlaylistsSuccessAction\r\n  extends EntitiesAction<ActionType.CategoryPlaylistsSuccess> {}\r\n\r\nexport function getCategoryPlaylists(categoryId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.CategoryPlaylistsRequest,\r\n        ActionType.CategoryPlaylistsSuccess,\r\n        ActionType.CategoryPlaylistsFailure\r\n      ],\r\n      path: `browse/categories/${categoryId}/playlists`,\r\n      schema: Schemas.Playlists\r\n    });\r\n  };\r\n}\r\n\r\nexport interface FeaturedPlaylistsSuccessAction\r\n  extends EntitiesAction<ActionType.FeaturedPlaylistsSuccess> {}\r\n\r\nexport function getFeaturedPlaylists() {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.FeaturedPlaylistsRequest,\r\n        ActionType.FeaturedPlaylistsSuccess,\r\n        ActionType.FeaturedPlaylistsFailure\r\n      ],\r\n      path: \"browse/featured-playlists\",\r\n      schema: Schemas.Playlists\r\n    });\r\n  };\r\n}\r\n\r\nexport interface NewReleasesSuccessAction\r\n  extends EntitiesAction<ActionType.NewReleasesSuccess> {}\r\n\r\nexport function getNewReleases() {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.NewReleasesRequest,\r\n        ActionType.NewReleasesSuccess,\r\n        ActionType.NewReleasesFailure\r\n      ],\r\n      path: \"browse/new-releases\",\r\n      schema: Schemas.Albums\r\n    });\r\n  };\r\n}\r\n","import { EntitiesAction, FetchDispatch } from \"./types\";\r\nimport { Schemas } from \"./schemas\";\r\n\r\nexport enum ActionType {\r\n  PlaylistRequest = \"PLAYLIST_REQUEST\",\r\n  PlaylistSuccess = \"PLAYLIST_SUCCESS\",\r\n  PlaylistFailure = \"PLAYLIST_FAILURE\"\r\n}\r\n\r\nexport interface PlaylistSuccessAction\r\n  extends EntitiesAction<ActionType.PlaylistSuccess> {}\r\n\r\nexport function getPlaylist(playlistId: string) {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.PlaylistRequest,\r\n        ActionType.PlaylistSuccess,\r\n        ActionType.PlaylistFailure\r\n      ],\r\n      path: `playlists/${playlistId}`,\r\n      schema: Schemas.Playlist\r\n    });\r\n  };\r\n}\r\n","export interface FetchableState {\r\n  isFetching: boolean;\r\n}\r\n\r\nexport const startFetching = <S extends FetchableState>(state: S): S => ({\r\n  ...state,\r\n  isFetching: true\r\n});\r\n\r\nexport const endFetching = <S extends FetchableState>(state: S): S => ({\r\n  ...state,\r\n  isFetching: false\r\n});\r\n\r\nexport const isFetching = <S extends FetchableState>(state: S): boolean =>\r\n  state.isFetching;\r\n","import merge from \"lodash/merge\";\r\nimport createReducer from \"../helpers/reducer\";\r\nimport { Artist } from \"../types\";\r\nimport { EntitiesAction } from \"../actions/types\";\r\nimport { State as CombinedState } from \".\";\r\nimport { ActionType as AlbumActionType } from \"../actions/albums\";\r\nimport { ActionType as PlaylistActionType } from \"../actions/playlists\";\r\nimport { ActionType as BrowseActionType } from \"../actions/browse\";\r\n\r\nexport interface State {\r\n  byId: { [id: string]: Artist };\r\n}\r\n\r\nconst initialState: State = {\r\n  byId: {}\r\n};\r\n\r\nfunction mergeArtists(state: State, action: EntitiesAction<any>): State {\r\n  return merge({}, state, { byId: action.payload.artists });\r\n}\r\n\r\nexport default createReducer(initialState, {\r\n  [AlbumActionType.AlbumSuccess]: mergeArtists,\r\n  [PlaylistActionType.PlaylistSuccess]: mergeArtists,\r\n  [BrowseActionType.NewReleasesSuccess]: mergeArtists\r\n});\r\n\r\nexport function selectArtists(\r\n  state: CombinedState,\r\n  artistIds: string[]\r\n): Artist[] {\r\n  return artistIds.map(id => state.artists.byId[id]);\r\n}\r\n","import merge from \"lodash/merge\";\r\nimport createReducer from \"../helpers/reducer\";\r\nimport { Track } from \"../types\";\r\nimport { EntitiesAction } from \"../actions/types\";\r\nimport { State as CombinedState } from \".\";\r\nimport { ActionType as AlbumActionType } from \"../actions/albums\";\r\nimport { ActionType as PlaylistActionType } from \"../actions/playlists\";\r\nimport { selectAlbum } from \"./albums\";\r\nimport { selectArtists } from \"./artists\";\r\n\r\nexport interface State {\r\n  byId: { [id: string]: Track };\r\n}\r\n\r\nconst initialState: State = {\r\n  byId: {}\r\n};\r\n\r\nfunction mergeTracks(state: State, action: EntitiesAction<any>): State {\r\n  return merge({}, state, { byId: action.payload.tracks });\r\n}\r\n\r\nexport default createReducer(initialState, {\r\n  [AlbumActionType.AlbumSuccess]: mergeTracks,\r\n  [PlaylistActionType.PlaylistSuccess]: mergeTracks\r\n});\r\n\r\nexport function selectTrack(state: CombinedState, trackId: string): Track {\r\n  const track = state.tracks.byId[trackId];\r\n\r\n  if (track) {\r\n    track.album = selectAlbum(state, track.albumId);\r\n    track.artists = selectArtists(state, track.artistIds);\r\n  }\r\n\r\n  return track;\r\n}\r\n\r\nexport function selectTracks(\r\n  state: CombinedState,\r\n  trackIds: string[]\r\n): Track[] {\r\n  return trackIds.map(id => selectTrack(state, id));\r\n}\r\n","import merge from \"lodash/merge\";\r\nimport createReducer from \"../helpers/reducer\";\r\nimport { Album } from \"../types\";\r\nimport { EntitiesAction } from \"../actions/types\";\r\nimport { ActionType, AlbumSuccessAction } from \"../actions/albums\";\r\nimport { ActionType as BrowseActionType } from \"../actions/browse\";\r\nimport { ActionType as PlaylistActionType } from \"../actions/playlists\";\r\nimport { State as CombinedState } from \".\";\r\nimport {\r\n  FetchableState,\r\n  startFetching,\r\n  endFetching,\r\n  isFetching\r\n} from \"./fetching\";\r\nimport { selectArtists } from \"./artists\";\r\nimport { selectTracks } from \"./tracks\";\r\n\r\nexport interface State extends FetchableState {\r\n  byId: { [id: string]: Album };\r\n}\r\n\r\nconst initialState: State = {\r\n  isFetching: false,\r\n  byId: {}\r\n};\r\n\r\nfunction mergeAlbums(state: State, action: EntitiesAction<any>): State {\r\n  return merge({}, state, { byId: action.payload.albums });\r\n}\r\n\r\nexport default createReducer(initialState, {\r\n  [ActionType.AlbumRequest]: startFetching,\r\n  [ActionType.AlbumSuccess]: (\r\n    state: State,\r\n    action: AlbumSuccessAction\r\n  ): State => endFetching(mergeAlbums(state, action)),\r\n  [ActionType.AlbumFailure]: endFetching,\r\n\r\n  [BrowseActionType.NewReleasesSuccess]: mergeAlbums,\r\n  [PlaylistActionType.PlaylistSuccess]: mergeAlbums\r\n});\r\n\r\nexport function selectIsFetching(state: CombinedState): boolean {\r\n  return isFetching(state.albums);\r\n}\r\n\r\nexport function selectAlbum(state: CombinedState, albumId: string): Album {\r\n  const album = state.albums.byId[albumId];\r\n\r\n  if (album) {\r\n    album.artists = selectArtists(state, album.artistIds);\r\n    album.tracks = selectTracks(state, album.trackIds);\r\n  }\r\n\r\n  return album;\r\n}\r\n\r\nexport function selectAlbums(\r\n  state: CombinedState,\r\n  albumIds: string[]\r\n): Album[] {\r\n  return albumIds.map(id => selectAlbum(state, id));\r\n}\r\n","import { Action, Dispatch } from \"redux\";\r\nimport { authorize } from \"../helpers/authorization\";\r\n\r\nexport enum ActionType {\r\n  RequestAuthorization = \"REQUEST_AUTHORIZATION\",\r\n  ReceiveAuthorization = \"RECEIVE_AUTHORIZATION\"\r\n}\r\n\r\nexport interface RequestAuthorizationAction\r\n  extends Action<ActionType.RequestAuthorization> {}\r\n\r\nfunction requestAuthorization(): RequestAuthorizationAction {\r\n  return {\r\n    type: ActionType.RequestAuthorization\r\n  };\r\n}\r\n\r\nexport interface ReceiveAuthorizationAction\r\n  extends Action<ActionType.ReceiveAuthorization> {}\r\n\r\nexport function receiveAuthorization(): ReceiveAuthorizationAction {\r\n  return {\r\n    type: ActionType.ReceiveAuthorization\r\n  };\r\n}\r\n\r\nexport function getAuthorization() {\r\n  return async (\r\n    dispatch: Dispatch<RequestAuthorizationAction | ReceiveAuthorizationAction>\r\n  ) => {\r\n    dispatch(requestAuthorization());\r\n    await authorize();\r\n    dispatch(receiveAuthorization());\r\n  };\r\n}\r\n","import { Dispatch } from \"redux\";\r\nimport { receiveAuthorization } from \"../actions/authorization\";\r\n\r\nconst URL = `https://accounts.spotify.com/authorize?client_id=${\r\n  process.env.REACT_APP_CLIENT_ID\r\n}&response_type=token&redirect_uri=${process.env.REACT_APP_REDIRECT_URI}`;\r\nconst REGEX = /#access_token=(.*?)&token_type=(.*?)&expires_in=(.*)$/;\r\nconst ACCESS_TOKEN = \"token\";\r\nconst TOKEN_TYPE = \"tokenType\";\r\nconst EXPIRES_AT = \"expiresAt\";\r\n\r\nfunction authorize(): Promise<any> {\r\n  return new Promise((resolve, reject) => {\r\n    const handleStorage = (event: StorageEvent) => {\r\n      if (event.key === ACCESS_TOKEN) {\r\n        removeEventListener(\"storage\", handleStorage);\r\n        resolve();\r\n      }\r\n    };\r\n    addEventListener(\"storage\", handleStorage);\r\n    location.assign(URL);\r\n  });\r\n}\r\n\r\nfunction checkRedirection(): void {\r\n  const match = location.hash.match(REGEX);\r\n  if (match) {\r\n    localStorage[ACCESS_TOKEN] = match[1];\r\n    localStorage[TOKEN_TYPE] = match[2];\r\n    const date = new Date();\r\n    date.setSeconds(date.getSeconds() + parseInt(match[3]));\r\n    localStorage[EXPIRES_AT] = date.toString();\r\n  }\r\n}\r\n\r\nfunction initAuthorization(dispatch: Dispatch): void {\r\n  if (\r\n    !!localStorage[ACCESS_TOKEN] &&\r\n    Date.parse(localStorage[EXPIRES_AT]) > Date.now()\r\n  ) {\r\n    dispatch(receiveAuthorization());\r\n  }\r\n}\r\n\r\nfunction authorizedFetch(url: string): Promise<Response> {\r\n  const tokenType = localStorage[TOKEN_TYPE];\r\n  const accessToken = localStorage[ACCESS_TOKEN];\r\n\r\n  return fetch(url, {\r\n    headers: {\r\n      Authorization: `${tokenType} ${accessToken}`\r\n    }\r\n  });\r\n}\r\n\r\nexport { authorize, checkRedirection, initAuthorization, authorizedFetch };\r\n","import createReducer from \"../helpers/reducer\";\r\nimport {\r\n  ActionType,\r\n  ReceiveAuthorizationAction\r\n} from \"../actions/authorization\";\r\nimport { State as CombinedState } from \".\";\r\n\r\nexport interface State {\r\n  isAuthorized: boolean;\r\n}\r\n\r\nconst initialState: State = {\r\n  isAuthorized: false\r\n};\r\n\r\nexport default createReducer(initialState, {\r\n  [ActionType.ReceiveAuthorization]: (\r\n    state: State,\r\n    action: ReceiveAuthorizationAction\r\n  ) => ({\r\n    ...state,\r\n    isAuthorized: true\r\n  })\r\n});\r\n\r\nexport function isAuthorized(state: CombinedState): boolean {\r\n  return !!state.authorization.isAuthorized;\r\n}\r\n","import merge from \"lodash/merge\";\r\nimport createReducer from \"../helpers/reducer\";\r\nimport { Playlist } from \"../types\";\r\nimport { EntitiesAction } from \"../actions/types\";\r\nimport { ActionType, PlaylistSuccessAction } from \"../actions/playlists\";\r\nimport { ActionType as BrowseActionType } from \"../actions/browse\";\r\nimport { State as CombinedState } from \".\";\r\nimport {\r\n  FetchableState,\r\n  startFetching,\r\n  endFetching,\r\n  isFetching\r\n} from \"./fetching\";\r\nimport { selectTracks } from \"./tracks\";\r\n\r\nexport interface State extends FetchableState {\r\n  byId: { [id: string]: Playlist };\r\n}\r\n\r\nconst initialState: State = {\r\n  isFetching: false,\r\n  byId: {}\r\n};\r\n\r\nfunction mergePlaylists(state: State, action: EntitiesAction<any>): State {\r\n  return merge({}, state, { byId: action.payload.playlists });\r\n}\r\n\r\nexport default createReducer(initialState, {\r\n  [ActionType.PlaylistRequest]: startFetching,\r\n  [ActionType.PlaylistSuccess]: (\r\n    state: State,\r\n    action: PlaylistSuccessAction\r\n  ): State => endFetching(mergePlaylists(state, action)),\r\n  [ActionType.PlaylistFailure]: endFetching,\r\n\r\n  [BrowseActionType.CategoryPlaylistsSuccess]: mergePlaylists,\r\n  [BrowseActionType.FeaturedPlaylistsSuccess]: mergePlaylists\r\n});\r\n\r\nexport function selectIsFetching(state: CombinedState): boolean {\r\n  return isFetching(state.playlists);\r\n}\r\n\r\nexport function selectPlaylist(\r\n  state: CombinedState,\r\n  playlistId: string\r\n): Playlist {\r\n  const playlist = state.playlists.byId[playlistId];\r\n\r\n  if (playlist) {\r\n    playlist.tracks = selectTracks(state, playlist.trackIds);\r\n  }\r\n\r\n  return playlist;\r\n}\r\n\r\nexport function selectPlaylists(\r\n  state: CombinedState,\r\n  playlistIds: string[]\r\n): Playlist[] {\r\n  return playlistIds.map(id => selectPlaylist(state, id));\r\n}\r\n","import { Album, Category, Playlist } from \"../types\";\r\nimport createReducer from \"../helpers/reducer\";\r\nimport {\r\n  ActionType,\r\n  CategorySuccessAction,\r\n  CategoriesSuccessAction,\r\n  NewReleasesSuccessAction,\r\n  CategoryPlaylistsSuccessAction,\r\n  FeaturedPlaylistsSuccessAction\r\n} from \"../actions/browse\";\r\nimport { State as CombinedState } from \".\";\r\nimport {\r\n  FetchableState,\r\n  startFetching,\r\n  endFetching,\r\n  isFetching\r\n} from \"./fetching\";\r\nimport { selectPlaylists } from \"./playlists\";\r\nimport { selectAlbums } from \"./albums\";\r\n\r\nexport interface State extends FetchableState {\r\n  categoriesById: { [id: string]: Category };\r\n  categoryPlaylistIds: string[];\r\n  featuredPlaylistIds: string[];\r\n  newReleaseIds: string[];\r\n}\r\n\r\nconst initialState: State = {\r\n  isFetching: false,\r\n  categoriesById: {},\r\n  categoryPlaylistIds: [],\r\n  featuredPlaylistIds: [],\r\n  newReleaseIds: []\r\n};\r\n\r\nexport default createReducer(initialState, {\r\n  [ActionType.CategoriesRequest]: startFetching,\r\n  [ActionType.CategoriesSuccess]: (\r\n    state: State,\r\n    action: CategoriesSuccessAction\r\n  ): State =>\r\n    endFetching({\r\n      ...state,\r\n      categoriesById: action.payload.categories\r\n    }),\r\n  [ActionType.CategoriesFailure]: endFetching,\r\n\r\n  [ActionType.CategoryRequest]: startFetching,\r\n  [ActionType.CategorySuccess]: (\r\n    state: State,\r\n    action: CategorySuccessAction\r\n  ): State =>\r\n    endFetching({\r\n      ...state,\r\n      categoriesById: action.payload.categories\r\n    }),\r\n  [ActionType.CategoryFailure]: endFetching,\r\n\r\n  [ActionType.CategoryPlaylistsRequest]: startFetching,\r\n  [ActionType.CategoryPlaylistsSuccess]: (\r\n    state: State,\r\n    action: CategoryPlaylistsSuccessAction\r\n  ): State =>\r\n    endFetching({\r\n      ...state,\r\n      categoryPlaylistIds: Object.keys(action.payload.playlists)\r\n    }),\r\n  [ActionType.CategoryPlaylistsFailure]: endFetching,\r\n\r\n  [ActionType.FeaturedPlaylistsRequest]: startFetching,\r\n  [ActionType.FeaturedPlaylistsSuccess]: (\r\n    state: State,\r\n    action: FeaturedPlaylistsSuccessAction\r\n  ): State =>\r\n    endFetching({\r\n      ...state,\r\n      featuredPlaylistIds: Object.keys(action.payload.playlists)\r\n    }),\r\n  [ActionType.FeaturedPlaylistsFailure]: endFetching,\r\n\r\n  [ActionType.NewReleasesRequest]: startFetching,\r\n  [ActionType.NewReleasesSuccess]: (\r\n    state: State,\r\n    action: NewReleasesSuccessAction\r\n  ): State =>\r\n    endFetching({\r\n      ...state,\r\n      newReleaseIds: Object.keys(action.payload.albums)\r\n    }),\r\n  [ActionType.NewReleasesFailure]: endFetching\r\n});\r\n\r\nexport function selectIsFetching(state: CombinedState): boolean {\r\n  return isFetching(state.browse);\r\n}\r\n\r\nexport function selectCategories(state: CombinedState): Category[] {\r\n  return Object.values(state.browse.categoriesById);\r\n}\r\n\r\nexport function selectCategory(\r\n  state: CombinedState,\r\n  categoryId: string\r\n): Category | undefined {\r\n  return state.browse.categoriesById[categoryId];\r\n}\r\n\r\nexport function selectCategoryPlaylists(state: CombinedState): Playlist[] {\r\n  return selectPlaylists(state, state.browse.categoryPlaylistIds);\r\n}\r\n\r\nexport function selectFeaturedPlaylists(state: CombinedState): Playlist[] {\r\n  return selectPlaylists(state, state.browse.featuredPlaylistIds);\r\n}\r\n\r\nexport function selectNewReleases(state: CombinedState): Album[] {\r\n  return selectAlbums(state, state.browse.newReleaseIds);\r\n}\r\n","import { Dispatch } from \"redux\";\r\nimport { PayloadAction } from \"./types\";\r\n\r\nexport enum ActionType {\r\n  Load = \"LOAD\",\r\n  Loaded = \"LOADED\",\r\n  Playing = \"PLAYING\",\r\n  Update = \"UPDATE\",\r\n  Play = \"PLAY\",\r\n  Pause = \"PAUSE\",\r\n  Paused = \"PAUSED\",\r\n  Seek = \"SEEK\",\r\n  Seeked = \"SEEKED\"\r\n}\r\n\r\nexport interface LoadAction extends PayloadAction<ActionType.Load, string> {}\r\n\r\nexport function load(trackId: string) {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.Load,\r\n      payload: trackId\r\n    });\r\n  };\r\n}\r\n\r\nexport interface LoadedAction\r\n  extends PayloadAction<ActionType.Loaded, number> {}\r\n\r\nexport function loaded(duration: number) {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.Loaded,\r\n      payload: duration\r\n    });\r\n  };\r\n}\r\n\r\nexport function playing() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.Playing\r\n    });\r\n  };\r\n}\r\n\r\nexport interface UpdateAction\r\n  extends PayloadAction<ActionType.Update, number> {}\r\n\r\nexport function update(elapsed: number) {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.Update,\r\n      payload: elapsed\r\n    });\r\n  };\r\n}\r\n\r\nexport function play() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.Play\r\n    });\r\n  };\r\n}\r\n\r\nexport function pause() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.Pause\r\n    });\r\n  };\r\n}\r\n\r\nexport function paused() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.Paused\r\n    });\r\n  };\r\n}\r\n\r\nexport interface SeekAction extends PayloadAction<ActionType.Seek, number> {}\r\n\r\nexport function seek(time: number) {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.Seek,\r\n      payload: time\r\n    });\r\n  };\r\n}\r\n\r\nexport function seeked() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: ActionType.Seeked\r\n    });\r\n  };\r\n}\r\n","import createReducer from \"../helpers/reducer\";\r\nimport { Track } from \"../types\";\r\nimport {\r\n  ActionType,\r\n  LoadedAction,\r\n  UpdateAction,\r\n  LoadAction,\r\n  SeekAction\r\n} from \"../actions/player\";\r\nimport { State as CombinedState } from \".\";\r\nimport { selectTrack } from \"./tracks\";\r\n\r\nexport enum TrackState {\r\n  None,\r\n  isLoaded,\r\n  isPlaying,\r\n  isPaused\r\n}\r\n\r\nexport interface State {\r\n  currentId?: string;\r\n  state: TrackState;\r\n  duration: number;\r\n  currentTime: number;\r\n  shouldPlay: boolean;\r\n  shouldPause: boolean;\r\n  shouldSeek: boolean;\r\n}\r\n\r\nconst initialState: State = {\r\n  state: TrackState.None,\r\n  duration: 0,\r\n  currentTime: 0,\r\n  shouldPlay: false,\r\n  shouldPause: false,\r\n  shouldSeek: false\r\n};\r\n\r\nexport default createReducer(initialState, {\r\n  [ActionType.Load]: (state: State, action: LoadAction): State => ({\r\n    ...state,\r\n    currentId: action.payload,\r\n    state: TrackState.isLoaded,\r\n    shouldPlay: true,\r\n    shouldPause: false\r\n  }),\r\n  [ActionType.Loaded]: (state: State, action: LoadedAction): State => ({\r\n    ...state,\r\n    duration: action.payload\r\n  }),\r\n  [ActionType.Playing]: (state: State): State => ({\r\n    ...state,\r\n    state: TrackState.isPlaying,\r\n    shouldPlay: false\r\n  }),\r\n  [ActionType.Update]: (state: State, action: UpdateAction): State => ({\r\n    ...state,\r\n    currentTime: action.payload,\r\n    shouldSeek: false\r\n  }),\r\n  [ActionType.Play]: (state: State): State => ({\r\n    ...state,\r\n    shouldPlay: true,\r\n    shouldPause: false\r\n  }),\r\n  [ActionType.Pause]: (state: State): State => ({\r\n    ...state,\r\n    shouldPlay: false,\r\n    shouldPause: true\r\n  }),\r\n  [ActionType.Paused]: (state: State): State => ({\r\n    ...state,\r\n    state: TrackState.isPaused,\r\n    shouldPause: false\r\n  }),\r\n  [ActionType.Seek]: (state: State, Action: SeekAction): State => ({\r\n    ...state,\r\n    currentTime: Action.payload,\r\n    shouldSeek: true\r\n  }),\r\n  [ActionType.Seeked]: (state: State): State => ({\r\n    ...state,\r\n    shouldSeek: false\r\n  })\r\n});\r\n\r\nexport function selectCurrent(state: CombinedState): Track | undefined {\r\n  const { currentId } = state.player;\r\n\r\n  if (currentId) {\r\n    return selectTrack(state, currentId);\r\n  }\r\n}\r\n\r\nexport function selectState(state: CombinedState): TrackState {\r\n  return state.player.state;\r\n}\r\n\r\nexport interface Times {\r\n  duration: number;\r\n  currentTime: number;\r\n}\r\n\r\nexport function selectTimes(state: CombinedState): Times {\r\n  const { player } = state;\r\n\r\n  return {\r\n    duration: player.duration,\r\n    currentTime: player.currentTime\r\n  };\r\n}\r\n\r\nexport interface Commands {\r\n  shouldPlay: boolean;\r\n  shouldPause: boolean;\r\n  shouldSeek: boolean;\r\n}\r\n\r\nexport function selectCommands(state: CombinedState): Commands {\r\n  const {\r\n    player: { shouldPlay, shouldPause, shouldSeek }\r\n  } = state;\r\n\r\n  return {\r\n    shouldPlay,\r\n    shouldPause,\r\n    shouldSeek\r\n  };\r\n}\r\n","import { UserProfile } from \"../types\";\r\nimport { FetchDispatch, PayloadAction } from \"./types\";\r\n\r\nexport enum ActionType {\r\n  UserProfileRequest = \"USER_PROFILE_REQUEST\",\r\n  UserProfileSuccess = \"USER_PROFILE_SUCCESS\",\r\n  UserProfileFailure = \"USER_PROFILE_FAILURE\"\r\n}\r\n\r\nexport interface UserProfileSuccessAction\r\n  extends PayloadAction<ActionType.UserProfileSuccess, UserProfile> {}\r\n\r\nexport function getUserProfile() {\r\n  return (dispatch: FetchDispatch) => {\r\n    dispatch({\r\n      types: [\r\n        ActionType.UserProfileRequest,\r\n        ActionType.UserProfileSuccess,\r\n        ActionType.UserProfileFailure\r\n      ],\r\n      path: \"me\"\r\n    });\r\n  };\r\n}\r\n","import createReducer from \"../helpers/reducer\";\r\nimport { UserProfile } from \"../types\";\r\nimport { ActionType, UserProfileSuccessAction } from \"../actions/userProfile\";\r\nimport { State as CombinedState } from \".\";\r\n\r\nexport interface State {\r\n  userProfile?: UserProfile;\r\n}\r\n\r\nconst initialState: State = {\r\n  userProfile: undefined\r\n};\r\n\r\nexport default createReducer(initialState, {\r\n  [ActionType.UserProfileSuccess]: (\r\n    state: State,\r\n    action: UserProfileSuccessAction\r\n  ) => ({\r\n    ...state,\r\n    userProfile: action.payload\r\n  })\r\n});\r\n\r\nexport function selectUserProfile(\r\n  state: CombinedState\r\n): UserProfile | undefined {\r\n  return state.userProfile.userProfile;\r\n}\r\n","import { combineReducers } from \"redux\";\r\nimport albums, { State as AlbumsState } from \"./albums\";\r\nimport artists, { State as ArtistsState } from \"./artists\";\r\nimport authorization, { State as AuthorizationState } from \"./authorization\";\r\nimport browse, { State as BrowseState } from \"./browse\";\r\nimport player, { State as PlayerState } from \"./player\";\r\nimport playlists, { State as PlaylistsState } from \"./playlists\";\r\nimport tracks, { State as TracksState } from \"./tracks\";\r\nimport userProfile, { State as UserProfileState } from \"./userProfile\";\r\n\r\nexport interface State {\r\n  albums: AlbumsState;\r\n  artists: ArtistsState;\r\n  authorization: AuthorizationState;\r\n  browse: BrowseState;\r\n  player: PlayerState;\r\n  playlists: PlaylistsState;\r\n  tracks: TracksState;\r\n  userProfile: UserProfileState;\r\n}\r\n\r\nexport default combineReducers<State>({\r\n  albums,\r\n  artists,\r\n  authorization,\r\n  browse,\r\n  player,\r\n  playlists,\r\n  tracks,\r\n  userProfile\r\n});\r\n","import React from \"react\";\r\n\r\nexport enum IconType {\r\n  MusicNote = \"music_note\",\r\n  MusicOff = \"music_off\",\r\n  Pause = \"pause\",\r\n  Person = \"person\",\r\n  PlayArrow = \"play_arrow\",\r\n  Refresh = \"refresh\",\r\n  Search = \"search\",\r\n  SkipNext = \"skip_next\",\r\n  SkipPrevious = \"skip_previous\",\r\n  ViewModule = \"view_module\",\r\n  VolumeUp = \"volume_up\",\r\n  Wifi = \"wifi\"\r\n}\r\n\r\ninterface Props {\r\n  type: IconType;\r\n  className?: string;\r\n}\r\n\r\nconst Icon = (props: Props) => {\r\n  const { type, className } = props;\r\n\r\n  return <i className={`material-icons ${className}`}>{type}</i>;\r\n};\r\n\r\nexport default Icon;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport styled from \"../../styles/styled\";\r\nimport Icon, { IconType } from \"../Icon\";\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: ${props => props.theme.font.size.large};\r\n  font-weight: ${props => props.theme.font.weight.bold};\r\n`;\r\n\r\nconst StyledIcon = styled(Icon)`\r\n  margin-right: 15px;\r\n`;\r\n\r\nconst Title = () => {\r\n  return (\r\n    <Wrapper>\r\n      <StyledIcon type={IconType.Wifi} />\r\n      <Link to=\"/browse\">Spotify</Link>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Title;\r\n","import React from \"react\";\r\nimport styled from \"../../styles/styled\";\r\nimport { UserProfile } from \"../../types\";\r\nimport Icon, { IconType } from \"../Icon\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n`;\r\n\r\nconst StyledIcon = styled(Icon)`\r\n  margin-right: 10px;\r\n`;\r\n\r\nconst User = (props: UserProfile) => {\r\n  const { display_name } = props;\r\n\r\n  return (\r\n    <Wrapper>\r\n      <StyledIcon type={IconType.Person} />\r\n      <span>{display_name}</span>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default User;\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport styled from \"../../styles/styled\";\r\nimport { UserProfile } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport { isAuthorized } from \"../../reducers/authorization\";\r\nimport { selectUserProfile } from \"../../reducers/userProfile\";\r\nimport { getAuthorization } from \"../../actions/authorization\";\r\nimport { getUserProfile } from \"../../actions/userProfile\";\r\nimport Title from \"./Title\";\r\nimport User from \"./User\";\r\n\r\nconst Wrapper = styled.header`\r\n  align-items: center;\r\n  display: flex;\r\n  background: ${props => props.theme.primary};\r\n  box-shadow: 0 2px 4px 2px rgba(0, 0, 0, 0.2);\r\n  flex-shrink: 0;\r\n  height: 50px;\r\n  justify-content: space-between;\r\n  padding: 0 50px;\r\n  z-index: 2;\r\n`;\r\n\r\nconst LoginButton = styled.button`\r\n  border: none;\r\n  color: ${props => props.theme.foreground.default};\r\n  font-size: 15px;\r\n  height: 100%;\r\n  padding: 0 20px;\r\n\r\n  &:hover {\r\n    background: ${props => props.theme.background.hover};\r\n  }\r\n\r\n  &:active {\r\n    background: ${props => props.theme.background.active};\r\n  }\r\n`;\r\n\r\ninterface Props {\r\n  isAuthorized: boolean;\r\n  userProfile?: UserProfile;\r\n  getAuthorization: () => void;\r\n  getUserProfile: () => void;\r\n}\r\n\r\nclass Header extends Component<Props> {\r\n  componentDidMount() {\r\n    const { isAuthorized, getUserProfile } = this.props;\r\n    if (isAuthorized) {\r\n      getUserProfile();\r\n    }\r\n  }\r\n\r\n  handleClick = async () => {\r\n    await this.props.getAuthorization();\r\n  };\r\n\r\n  render() {\r\n    const { userProfile } = this.props;\r\n\r\n    return (\r\n      <Wrapper>\r\n        <Title />\r\n\r\n        {userProfile ? (\r\n          <User {...userProfile} />\r\n        ) : (\r\n          <LoginButton onClick={this.handleClick}>Log In</LoginButton>\r\n        )}\r\n      </Wrapper>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  isAuthorized: isAuthorized(state),\r\n  userProfile: selectUserProfile(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  getAuthorization: getAuthorization,\r\n  getUserProfile: getUserProfile\r\n};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(Header);\r\n","import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport styled from \"../../styles/styled\";\r\nimport Icon, { IconType } from \"../Icon\";\r\n\r\nconst Wrapper = styled.ul`\r\n  background: ${props => props.theme.background.dark};\r\n  padding: 25px 0;\r\n  width: 250px;\r\n  z-index: 1;\r\n`;\r\n\r\nconst StyledNavLink = styled(NavLink)`\r\n  align-items: center;\r\n  color: ${props => props.theme.foreground.dark};\r\n  display: flex;\r\n  height: 50px;\r\n  padding: 0 50px;\r\n\r\n  &:hover {\r\n    background: ${props => props.theme.background.hover};\r\n    color: ${props => props.theme.foreground.default};\r\n  }\r\n\r\n  &:active {\r\n    background: ${props => props.theme.background.active};\r\n  }\r\n\r\n  &.active {\r\n    border-right: 5px solid ${props => props.theme.primaryLight};\r\n    color: ${props => props.theme.foreground.default};\r\n    padding-right: 45px;\r\n  }\r\n`;\r\n\r\nconst StyledIcon = styled(Icon)`\r\n  margin-right: 15px;\r\n`;\r\n\r\nconst Menu = () => {\r\n  return (\r\n    <Wrapper>\r\n      <li>\r\n        <StyledNavLink to={`${process.env.PUBLIC_URL}/browse`}>\r\n          <StyledIcon type={IconType.ViewModule} />\r\n          <span>Browse</span>\r\n        </StyledNavLink>\r\n      </li>\r\n      <li>\r\n        <StyledNavLink to={`${process.env.PUBLIC_URL}/search`}>\r\n          <StyledIcon type={IconType.Search} />\r\n          <span>Search</span>\r\n        </StyledNavLink>\r\n      </li>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Menu;\r\n","import React, { Component, HTMLAttributes } from \"react\";\r\nimport styled from \"../../styles/styled\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  height: 100%;\r\n`;\r\n\r\nconst Image = styled.img`\r\n  border-radius: 5px;\r\n  box-shadow: 0 0 4px 2px rgba(0, 0, 0, 0.2);\r\n  height: 100%;\r\n  margin-right: 10px;\r\n`;\r\n\r\nconst Infos = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst Title = styled.span`\r\n  margin-bottom: 5px;\r\n`;\r\n\r\nconst Artist = styled.span`\r\n  color: ${props => props.theme.foreground.dark};\r\n  font-weight: ${props => props.theme.font.weight.light};\r\n`;\r\n\r\ninterface Props extends HTMLAttributes<any> {\r\n  image: string;\r\n  name: string;\r\n  artist: string;\r\n}\r\n\r\nclass Album extends Component<Props> {\r\n  render() {\r\n    const { className, image, name, artist } = this.props;\r\n\r\n    return (\r\n      <Wrapper className={className}>\r\n        <Image src={image} />\r\n        <Infos>\r\n          <Title>{name}</Title>\r\n          <Artist>{artist}</Artist>\r\n        </Infos>\r\n      </Wrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Album;\r\n","import React, { Component } from \"react\";\r\nimport styled from \"../../styles/styled\";\r\nimport { TrackState, Times } from \"../../reducers/player\";\r\nimport Icon, { IconType } from \"../Icon\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n`;\r\n\r\nconst RoundButton = styled.button`\r\n  border-radius: 50%;\r\n  color: ${props => props.theme.foreground.dark};\r\n  display: flex;\r\n  margin: 0 10px;\r\n  padding: 5px;\r\n  position: relative;\r\n\r\n  &:not(:disabled):hover {\r\n    background: ${props => props.theme.background.hover};\r\n    color: ${props => props.theme.foreground.default};\r\n  }\r\n\r\n  &:not(:disabled):active {\r\n    background: ${props => props.theme.background.active};\r\n  }\r\n`;\r\n\r\nconst MainButton = styled(RoundButton)`\r\n  transform: scale(1.25);\r\n`;\r\n\r\nconst StyledIcon = styled(Icon)`\r\n  font-size: 25px;\r\n`;\r\n\r\ninterface Props {\r\n  state: TrackState;\r\n  times: Times;\r\n  onPlay: () => void;\r\n  onPause: () => void;\r\n}\r\n\r\nclass Controls extends Component<Props> {\r\n  handleToggleClick = () => {\r\n    const { state, onPlay, onPause } = this.props;\r\n\r\n    if (state === TrackState.isPlaying) {\r\n      onPause();\r\n    } else if (state === TrackState.isPaused) {\r\n      onPlay();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { state } = this.props;\r\n\r\n    return (\r\n      <Wrapper>\r\n        <RoundButton disabled={true}>\r\n          <StyledIcon type={IconType.SkipPrevious} />\r\n        </RoundButton>\r\n\r\n        <MainButton\r\n          onClick={this.handleToggleClick}\r\n          disabled={state === TrackState.None}\r\n        >\r\n          <StyledIcon\r\n            type={\r\n              state === TrackState.isPlaying\r\n                ? IconType.Pause\r\n                : IconType.PlayArrow\r\n            }\r\n          />\r\n        </MainButton>\r\n\r\n        <RoundButton disabled={true}>\r\n          <StyledIcon type={IconType.SkipNext} />\r\n        </RoundButton>\r\n      </Wrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Controls;\r\n","import React, { Component, createRef } from \"react\";\r\nimport styled from \"../../styles/styled\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  border-radius: 2.5px;\r\n  display: flex;\r\n  cursor: pointer;\r\n  height: 20px;\r\n  position: relative;\r\n  width: 100%;\r\n`;\r\n\r\nconst Left = styled.div<{ width: number }>`\r\n  background: ${props => props.theme.primaryLight};\r\n  border-radius: 2.5px 0 0 2.5px;\r\n  height: 2.5px;\r\n  left: 0;\r\n  position: absolute;\r\n  width: calc(${props => props.width * 100}%);\r\n`;\r\n\r\nconst Thumb = styled.div<{ position: number }>`\r\n  background: transparent;\r\n  border-radius: 50%;\r\n  height: 20px;\r\n  left: calc(${props => props.position * 100}% - 10px);\r\n  position: absolute;\r\n  visibility: hidden;\r\n  width: 20px;\r\n  z-index: 1;\r\n\r\n  &::before {\r\n    background: ${props => props.theme.foreground.default};\r\n    border-radius: 50%;\r\n    box-shadow: 0 0 4px 2px rgba(0, 0, 0, 0.2);\r\n    content: \"\";\r\n    height: 50%;\r\n    left: 25%;\r\n    position: absolute;\r\n    top: 25%;\r\n    width: 50%;\r\n  }\r\n\r\n  ${Wrapper}:hover & {\r\n    visibility: visible;\r\n  }\r\n`;\r\n\r\nconst Right = styled.div<{ width: number }>`\r\n  background: ${props => props.theme.foreground.dark};\r\n  border-radius: 0 2.5px 2.5px 0;\r\n  height: 2.5px;\r\n  position: absolute;\r\n  right: 0;\r\n  width: calc(100% - ${props => props.width * 100}%);\r\n`;\r\n\r\ninterface Props {\r\n  className?: string;\r\n  value: number;\r\n  onChange?: (value: number) => void;\r\n}\r\n\r\ninterface State {\r\n  isDown: boolean;\r\n  value: number;\r\n}\r\n\r\nclass Slider extends Component<Props, State> {\r\n  wrapper = createRef<HTMLDivElement>();\r\n  thumb = createRef<HTMLDivElement>();\r\n  state = {\r\n    isDown: false,\r\n    value: 0\r\n  };\r\n\r\n  getValue(x: number) {\r\n    const wrapper = this.wrapper.current;\r\n    const thumb = this.thumb.current;\r\n    if (!wrapper || !thumb) {\r\n      return 0;\r\n    }\r\n\r\n    const clientRect = wrapper.getBoundingClientRect();\r\n    let value = (x - clientRect.left) / wrapper.clientWidth;\r\n    if (value < 0) {\r\n      value = 0;\r\n    } else if (value > 1) {\r\n      value = 1;\r\n    }\r\n\r\n    return value;\r\n  }\r\n\r\n  handleMouseDown = (event: React.MouseEvent<HTMLElement>) => {\r\n    this.setState({\r\n      isDown: true,\r\n      value: this.getValue(event.pageX)\r\n    });\r\n    document.addEventListener(\"mousemove\", this.handleMouseMove);\r\n    document.addEventListener(\"mouseup\", this.handleMouseUp);\r\n  };\r\n\r\n  handleMouseMove = (event: MouseEvent) => {\r\n    this.setState({\r\n      value: this.getValue(event.pageX)\r\n    });\r\n  };\r\n\r\n  handleMouseUp = (event: MouseEvent) => {\r\n    document.removeEventListener(\"mousemove\", this.handleMouseMove);\r\n    document.removeEventListener(\"mouseup\", this.handleMouseUp);\r\n    this.setState({\r\n      isDown: false\r\n    });\r\n    const { onChange } = this.props;\r\n    if (onChange) {\r\n      const value = this.getValue(event.pageX);\r\n      onChange(value);\r\n    }\r\n  };\r\n\r\n  getCurrentValue() {\r\n    const { props, state } = this;\r\n    return state.isDown ? state.value : props.value;\r\n  }\r\n\r\n  render() {\r\n    const { className } = this.props;\r\n    const value = this.getCurrentValue();\r\n\r\n    return (\r\n      <Wrapper\r\n        ref={this.wrapper}\r\n        onMouseDown={this.handleMouseDown}\r\n        className={className}\r\n      >\r\n        <Left width={value} />\r\n        <Thumb ref={this.thumb} position={value} />\r\n        <Right width={value} />\r\n      </Wrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Slider;\r\n","import React, { Component } from \"react\";\r\nimport styled from \"../../styles/styled\";\r\nimport Slider from \"./Slider\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-cotent: center;\r\n  width: 100%;\r\n`;\r\n\r\nconst ProgressTime = styled.div`\r\n  color: ${props => props.theme.foreground.dark};\r\n  font-size: ${props => props.theme.font.size.small};\r\n  font-weight: ${props => props.theme.font.weight.light};\r\n`;\r\n\r\nconst StyledSlider = styled(Slider)`\r\n  margin: 0 15px;\r\n`;\r\n\r\ninterface Props {\r\n  duration: number;\r\n  currentTime: number;\r\n  onSeek: (time: number) => void;\r\n}\r\n\r\nclass Progress extends Component<Props> {\r\n  renderTime(seconds: number) {\r\n    const minutes = Math.floor(seconds / 60);\r\n    seconds = Math.round(seconds);\r\n\r\n    return (\r\n      <ProgressTime>\r\n        {`${minutes}:${seconds < 10 ? \"0\" + seconds : seconds}`}\r\n      </ProgressTime>\r\n    );\r\n  }\r\n\r\n  handleChange = (value: number) => {\r\n    const { duration, onSeek } = this.props;\r\n    onSeek(duration * value);\r\n  };\r\n\r\n  render() {\r\n    const { duration, currentTime } = this.props;\r\n    const progress = duration ? currentTime / duration : 0;\r\n\r\n    return (\r\n      <Wrapper>\r\n        {this.renderTime(currentTime)}\r\n        <StyledSlider value={progress} onChange={this.handleChange} />\r\n        {this.renderTime(duration)}\r\n      </Wrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Progress;\r\n","import React, { Component, createRef, SyntheticEvent } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Track } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport {\r\n  selectCurrent,\r\n  Times,\r\n  Commands,\r\n  selectTimes,\r\n  selectCommands\r\n} from \"../../reducers/player\";\r\nimport { loaded, playing, update, paused, seeked } from \"../../actions/player\";\r\n\r\ninterface Props {\r\n  track?: Track;\r\n  times: Times;\r\n  commands: Commands;\r\n  loaded: (duration: number) => void;\r\n  playing: () => void;\r\n  update: (elaped: number) => void;\r\n  paused: () => void;\r\n  seeked: () => void;\r\n}\r\n\r\nclass Audio extends Component<Props> {\r\n  audio = createRef<HTMLAudioElement>();\r\n\r\n  componentDidUpdate() {\r\n    const audio = this.audio.current;\r\n\r\n    if (audio) {\r\n      const {\r\n        times: { currentTime },\r\n        commands: { shouldPlay, shouldPause, shouldSeek }\r\n      } = this.props;\r\n\r\n      if (shouldPlay) {\r\n        audio.play();\r\n      } else if (shouldPause) {\r\n        audio.pause();\r\n      } else if (shouldSeek) {\r\n        console.log(\"seek\");\r\n        audio.currentTime = currentTime;\r\n      }\r\n    }\r\n  }\r\n\r\n  handleLoaded = (event: SyntheticEvent<HTMLAudioElement>) => {\r\n    const target = event.target as HTMLAudioElement;\r\n    this.props.loaded(target.duration);\r\n  };\r\n\r\n  handlePlay = () => {\r\n    this.props.playing();\r\n  };\r\n\r\n  handleUpdate = (event: SyntheticEvent<HTMLAudioElement>) => {\r\n    const target = event.target as HTMLAudioElement;\r\n    this.props.update(target.currentTime);\r\n  };\r\n\r\n  handlePause = () => {\r\n    this.props.paused();\r\n  };\r\n\r\n  handleSeeked = () => {\r\n    this.props.seeked();\r\n  };\r\n\r\n  render() {\r\n    const { track } = this.props;\r\n\r\n    return (\r\n      <audio\r\n        ref={this.audio}\r\n        src={track && track.preview_url}\r\n        onLoadedMetadata={this.handleLoaded}\r\n        onPlay={this.handlePlay}\r\n        onTimeUpdate={this.handleUpdate}\r\n        onPause={this.handlePause}\r\n        onSeeked={this.handleSeeked}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  track: selectCurrent(state),\r\n  times: selectTimes(state),\r\n  commands: selectCommands(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  loaded: loaded,\r\n  playing: playing,\r\n  update: update,\r\n  paused: paused,\r\n  seeked: seeked\r\n};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(Audio);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Track } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport {\r\n  selectCurrent,\r\n  TrackState,\r\n  selectState,\r\n  Times,\r\n  selectTimes\r\n} from \"../../reducers/player\";\r\nimport { play, pause, seek } from \"../../actions/player\";\r\nimport Album from \"./Album\";\r\nimport Controls from \"./Controls\";\r\nimport Progress from \"./Progress\";\r\nimport Audio from \"./Audio\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  background: ${props => props.theme.background.light};\r\n  box-sizing: border-box;\r\n  box-shadow: 0 -2px 4px 2px rgba(0, 0, 0, 0.2);\r\n  display: flex;\r\n  height: 100px;\r\n  padding: 15px;\r\n`;\r\n\r\nconst ThirdWrapper = styled.div`\r\n  height: 100%;\r\n  width: 33%;\r\n`;\r\n\r\nconst CenterWrapper = styled(ThirdWrapper)`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-grow: 1;\r\n  justify-content: space-evenly;\r\n`;\r\n\r\ninterface Props {\r\n  current?: Track;\r\n  state: TrackState;\r\n  times: Times;\r\n  play: () => void;\r\n  pause: () => void;\r\n  seek: (time: number) => void;\r\n}\r\n\r\nclass Player extends Component<Props> {\r\n  render() {\r\n    const { current, state, times, play, pause, seek } = this.props;\r\n    const album = current && current.album;\r\n\r\n    return (\r\n      <>\r\n        <Wrapper>\r\n          <ThirdWrapper>\r\n            {album && (\r\n              <Album\r\n                image={album.images[0].url}\r\n                name={album.name}\r\n                artist={album.artists[0].name}\r\n              />\r\n            )}\r\n          </ThirdWrapper>\r\n\r\n          <CenterWrapper>\r\n            <Controls\r\n              state={state}\r\n              times={times}\r\n              onPlay={play}\r\n              onPause={pause}\r\n            />\r\n            <Progress\r\n              duration={times.duration}\r\n              currentTime={times.currentTime}\r\n              onSeek={seek}\r\n            />\r\n          </CenterWrapper>\r\n\r\n          <ThirdWrapper />\r\n        </Wrapper>\r\n\r\n        <Audio />\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  current: selectCurrent(state),\r\n  state: selectState(state),\r\n  times: selectTimes(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  play: play,\r\n  pause: pause,\r\n  seek: seek\r\n};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(Player);\r\n","import React, { Component } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\ninterface Props {\r\n  from: string;\r\n  to: string;\r\n}\r\n\r\nclass DefaultRoute extends Component<Props> {\r\n  render() {\r\n    const { from, to } = this.props;\r\n\r\n    return <Route exact path={from} render={() => <Redirect to={to} />} />;\r\n  }\r\n}\r\n\r\nexport default DefaultRoute;\r\n","import React, { Component } from \"react\";\r\nimport styled from \"../../styles/styled\";\r\n\r\nconst StyledList = styled.ul`\r\n  align-content: flex-start;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n  margin: -10px;\r\n`;\r\n\r\nconst StyledItem = styled.li`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin: 10px;\r\n`;\r\n\r\nconst Button = styled.button`\r\n  border-radius: 5px;\r\n  box-shadow: 0 0 4px 2px rgba(0, 0, 0, 0.2);\r\n  display: flex;\r\n  overflow: hidden;\r\n  position: relative;\r\n  margin-bottom: 10px;\r\n\r\n  &:hover::before {\r\n    background: ${props => props.theme.background.hover};\r\n    content: \"\";\r\n    height: 100%;\r\n    position: absolute;\r\n    width: 100%;\r\n    z-index: 1;\r\n  }\r\n\r\n  &:active::before {\r\n    background: ${props => props.theme.background.active};\r\n  }\r\n`;\r\n\r\nconst Image = styled.img`\r\n  height: 200px;\r\n  width: 200px;\r\n`;\r\n\r\nconst Name = styled.span`\r\n  margin-bottom: 5px;\r\n  text-align: center;\r\n  width: 200px;\r\n`;\r\n\r\nconst Artist = styled.span`\r\n  color: ${props => props.theme.foreground.dark};\r\n  font-weight: ${props => props.theme.font.weight.light};\r\n`;\r\n\r\ninterface Props {\r\n  items: {\r\n    id: string;\r\n    image: string;\r\n    title: string;\r\n    artist?: string;\r\n  }[];\r\n  onClick: (id: string) => void;\r\n}\r\n\r\nclass Covers extends Component<Props> {\r\n  handleClick(id: string) {\r\n    const { onClick } = this.props;\r\n    onClick && onClick(id);\r\n  }\r\n\r\n  render() {\r\n    const { items } = this.props;\r\n\r\n    return (\r\n      <StyledList>\r\n        {items.map(item => (\r\n          <StyledItem key={item.id}>\r\n            <Button onClick={() => this.handleClick(item.id)}>\r\n              <Image src={item.image} />\r\n            </Button>\r\n            <Name>{item.title}</Name>\r\n            {item.artist && <Artist>{item.artist}</Artist>}\r\n          </StyledItem>\r\n        ))}\r\n      </StyledList>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Covers;\r\n","import React, { FunctionComponent, ComponentType } from \"react\";\r\nimport styled from \"../styles/styled\";\r\n\r\nconst Fader = styled.div<{ isLoading: number }>`\r\n  opacity: ${props => (props.isLoading ? \"0\" : \"1\")};\r\n  transition: ${props => (props.isLoading ? \"all 0\" : \"all 0.2s\")};\r\n`;\r\n\r\nconst Loader = styled.div<{ isLoading: number }>`\r\n  height: 5px;\r\n  left: 0;\r\n  position: absolute;\r\n  opacity: ${props => (props.isLoading ? \"1\" : \"0\")};\r\n  top: 0;\r\n  transition: ${props => (props.isLoading ? \"all 0\" : \"all 0.2s\")};\r\n  width: 100%;\r\n\r\n  &::before {\r\n    background: ${props => props.theme.foreground.dark};\r\n    content: \"\";\r\n    height: 100%;\r\n    position: absolute;\r\n    width: 100%;\r\n  }\r\n\r\n  &::after {\r\n    animation: transform 2s linear infinite;\r\n    background: ${props => props.theme.foreground.default};\r\n    content: \"\";\r\n    height: 100%;\r\n    position: absolute;\r\n    transform-origin: 0;\r\n    width: 100%;\r\n\r\n    @keyframes transform {\r\n      0% {\r\n        left: 0;\r\n        width: 0;\r\n      }\r\n      50% {\r\n        left: 0;\r\n        width: 100%;d\r\n      }\r\n      100% {\r\n        left: 100%;\r\n        width: 0;\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\ninterface Props {\r\n  isLoading: boolean;\r\n}\r\n\r\nconst withLoader = <P extends Props>(\r\n  WrappedComponent: ComponentType<P>\r\n): FunctionComponent<P> => {\r\n  return ({ isLoading, ...rest }: any) => {\r\n    return (\r\n      <>\r\n        <Fader isLoading={isLoading}>\r\n          <WrappedComponent {...rest} />\r\n        </Fader>\r\n        <Loader isLoading={isLoading} />\r\n      </>\r\n    );\r\n  };\r\n};\r\n\r\nexport default withLoader;\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\r\nimport { Category } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectIsFetching, selectCategories } from \"../../reducers/browse\";\r\nimport { getCategories } from \"../../actions/browse\";\r\nimport Covers from \"./Covers\";\r\nimport withLoader from \"../withLoader\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n  isLoading: boolean;\r\n  categories: Category[];\r\n  getCategories: () => void;\r\n}\r\n\r\nclass Categories extends Component<Props> {\r\n  componentDidMount() {\r\n    this.props.getCategories();\r\n  }\r\n\r\n  handleClick = (categoryId: string) => {\r\n    const { history } = this.props;\r\n    history.push(\r\n      `${process.env.PUBLIC_URL}/categories/${categoryId}/playlists`\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { categories } = this.props;\r\n    const items = categories.map(category => ({\r\n      id: category.id,\r\n      image: category.icons[0].url,\r\n      title: category.name\r\n    }));\r\n\r\n    return <Covers items={items} onClick={this.handleClick} />;\r\n  }\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  isLoading: selectIsFetching(state),\r\n  categories: selectCategories(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  getCategories: getCategories\r\n};\r\n\r\nexport default withRouter(\r\n  connect(\r\n    mapState,\r\n    mapDispatch\r\n  )(withLoader(Categories))\r\n);\r\n","import { Artist } from \"../types\";\r\n\r\nexport function joinArtistNames(artists: Artist[]) {\r\n  return artists.map(artist => artist.name).join(\", \");\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\r\nimport { Album } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectIsFetching, selectNewReleases } from \"../../reducers/browse\";\r\nimport { getNewReleases } from \"../../actions/browse\";\r\nimport { joinArtistNames } from \"../../helpers/utils\";\r\nimport Covers from \"./Covers\";\r\nimport withLoader from \"../withLoader\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n  isLoading: boolean;\r\n  albums: Album[];\r\n  getAlbums: () => void;\r\n}\r\n\r\nclass NewReleases extends Component<Props> {\r\n  componentDidMount() {\r\n    this.props.getAlbums();\r\n  }\r\n\r\n  handleClick = (albumId: string) => {\r\n    const { history } = this.props;\r\n    history.push(`${process.env.PUBLIC_URL}/albums/${albumId}/tracks`);\r\n  };\r\n\r\n  render() {\r\n    const { albums } = this.props;\r\n    const items = albums.map(album => ({\r\n      id: album.id,\r\n      image: album.images[0].url,\r\n      title: album.name,\r\n      author: joinArtistNames(album.artists)\r\n    }));\r\n\r\n    return <Covers items={items} onClick={this.handleClick} />;\r\n  }\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  isLoading: selectIsFetching(state),\r\n  albums: selectNewReleases(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  getAlbums: getNewReleases\r\n};\r\n\r\nexport default withRouter(\r\n  connect(\r\n    mapState,\r\n    mapDispatch\r\n  )(withLoader(NewReleases))\r\n);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\r\nimport { Playlist } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport {\r\n  selectIsFetching,\r\n  selectFeaturedPlaylists\r\n} from \"../../reducers/browse\";\r\nimport { getFeaturedPlaylists } from \"../../actions/browse\";\r\nimport Covers from \"./Covers\";\r\nimport withLoader from \"../withLoader\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n  isLoading: boolean;\r\n  playlists: Playlist[];\r\n  getPlaylists: () => void;\r\n}\r\n\r\nclass FeaturedPlaylists extends Component<Props> {\r\n  componentDidMount() {\r\n    this.props.getPlaylists();\r\n  }\r\n\r\n  handleClick = (playlistId: string) => {\r\n    const { history } = this.props;\r\n    history.push(`${process.env.PUBLIC_URL}/playlists/${playlistId}/tracks`);\r\n  };\r\n\r\n  render() {\r\n    const { playlists } = this.props;\r\n    const items = playlists.map(playlist => ({\r\n      id: playlist.id,\r\n      image: playlist.images[0].url,\r\n      title: playlist.name\r\n    }));\r\n\r\n    return <Covers items={items} onClick={this.handleClick} />;\r\n  }\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  isLoading: selectIsFetching(state),\r\n  playlists: selectFeaturedPlaylists(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  getPlaylists: getFeaturedPlaylists\r\n};\r\n\r\nexport default withRouter(\r\n  connect(\r\n    mapState,\r\n    mapDispatch\r\n  )(withLoader(FeaturedPlaylists))\r\n);\r\n","import React, { Component } from \"react\";\r\nimport {\r\n  RouteComponentProps,\r\n  NavLink,\r\n  Route,\r\n  withRouter\r\n} from \"react-router-dom\";\r\nimport styled from \"../../styles/styled\";\r\nimport DefaultRoute from \"../DefaultRoute\";\r\nimport Categories from \"./Categories\";\r\nimport NewReleases from \"./NewReleases\";\r\nimport FeaturedPlaylists from \"./FeaturedPlaylists\";\r\n\r\nconst Wrapper = styled.div`\r\n  height: 100%;\r\n`;\r\n\r\nconst StyledList = styled.ul`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-flow: row;\r\n  font-size: ${props => props.theme.font.size.medium};\r\n  font-weight: ${props => props.theme.font.weight.light};\r\n  justify-content: center;\r\n  margin-bottom: 25px;\r\n`;\r\n\r\nconst StyledNavLink = styled(NavLink)`\r\n  align-items: center;\r\n  color: ${props => props.theme.foreground.dark};\r\n  display: flex;\r\n  height: 50px;\r\n  justify-content: center;\r\n  padding: 0 25px;\r\n  position: relative;\r\n\r\n  &:hover {\r\n    color: ${props => props.theme.foreground.default};\r\n  }\r\n\r\n  &.active {\r\n    color: ${props => props.theme.foreground.default};\r\n  }\r\n\r\n  &.active&::after {\r\n    background: ${props => props.theme.primaryLight};\r\n    bottom: 0;\r\n    content: \"\";\r\n    height: 2.5px;\r\n    left: 50%;\r\n    position: absolute;\r\n    transform: translate(-50%, 0);\r\n    width: 25px;\r\n  }\r\n`;\r\n\r\nclass Browse extends Component<RouteComponentProps> {\r\n  render() {\r\n    const { match } = this.props;\r\n    const links = [\r\n      {\r\n        url: \"categories\",\r\n        label: \"Categories\"\r\n      },\r\n      {\r\n        url: \"new-releases\",\r\n        label: \"New Releases\"\r\n      },\r\n      {\r\n        url: \"featured-playist\",\r\n        label: \"Featured Playlists\"\r\n      }\r\n    ];\r\n\r\n    return (\r\n      <Wrapper>\r\n        <StyledList>\r\n          {links.map(link => (\r\n            <li key={link.url}>\r\n              <StyledNavLink to={`${match.url}/${link.url}`}>\r\n                {link.label}\r\n              </StyledNavLink>\r\n            </li>\r\n          ))}\r\n        </StyledList>\r\n\r\n        <DefaultRoute from={`${match.path}`} to={`${match.path}/categories`} />\r\n        <Route exact path={`${match.path}/categories`} component={Categories} />\r\n        <Route path={`${match.path}/new-releases`} component={NewReleases} />\r\n        <Route\r\n          path={`${match.path}/featured-playist`}\r\n          component={FeaturedPlaylists}\r\n        />\r\n      </Wrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(Browse);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\r\nimport styled from \"../../styles/styled\";\r\nimport { Category, Playlist } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport {\r\n  selectIsFetching,\r\n  selectCategory,\r\n  selectCategoryPlaylists\r\n} from \"../../reducers/browse\";\r\nimport { getCategory, getCategoryPlaylists } from \"../../actions/browse\";\r\nimport Covers from \"./Covers\";\r\nimport withLoader from \"../withLoader\";\r\n\r\nconst Title = styled.h1`\r\n  text-align: center;\r\n  font-size: ${props => props.theme.font.size.extraExtraLarge};\r\n  font-weight: ${props => props.theme.font.weight.bold};\r\n  margin: 0 0 25px 0;\r\n`;\r\n\r\ninterface Params {\r\n  categoryId: string;\r\n}\r\n\r\ninterface Props extends RouteComponentProps<Params> {\r\n  isLoading: boolean;\r\n  category?: Category;\r\n  playlists: Playlist[];\r\n  getCategory: (categoryId: string) => void;\r\n  getPlaylists: (categoryId: string) => void;\r\n}\r\n\r\nclass CategoryPlaylists extends Component<Props> {\r\n  componentDidMount() {\r\n    const { category, getCategory, getPlaylists, match } = this.props;\r\n    const { categoryId } = match.params;\r\n    if (!category) {\r\n      getCategory(categoryId);\r\n    }\r\n    getPlaylists(categoryId);\r\n  }\r\n\r\n  handleClick = (playlistId: string) => {\r\n    const { history } = this.props;\r\n    history.push(`${process.env.PUBLIC_URL}/playlists/${playlistId}/tracks`);\r\n  };\r\n\r\n  render() {\r\n    const { category, playlists } = this.props;\r\n    const items = playlists.map(playlists => ({\r\n      id: playlists.id,\r\n      image: playlists.images[0].url,\r\n      title: playlists.name\r\n    }));\r\n\r\n    return (\r\n      <div>\r\n        <Title>{category && category.name}</Title>\r\n        <Covers items={items} onClick={this.handleClick} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapState = (state: State, ownProps: Props) => {\r\n  const { match } = ownProps;\r\n  const categoryId = match.params.categoryId;\r\n\r\n  return {\r\n    isLoading: selectIsFetching(state),\r\n    category: selectCategory(state, categoryId),\r\n    playlists: selectCategoryPlaylists(state)\r\n  };\r\n};\r\n\r\nconst mapDispatch = {\r\n  getCategory: (categoryId: string) => getCategory(categoryId),\r\n  getPlaylists: (categoryId: string) => getCategoryPlaylists(categoryId)\r\n};\r\n\r\nexport default withRouter(\r\n  connect(\r\n    mapState,\r\n    mapDispatch\r\n  )(withLoader(CategoryPlaylists))\r\n);\r\n","import React, { Component } from \"react\";\r\n\r\nclass Search extends Component {\r\n  render() {\r\n    return <div />;\r\n  }\r\n}\r\n\r\nexport default Search;\r\n","import React, { Component } from \"react\";\r\nimport styled from \"../../styles/styled\";\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst Image = styled.img`\r\n  border-radius: 5px;\r\n  box-shadow: 0 0 4px 2px rgba(0, 0, 0, 0.2);\r\n  height: 300px;\r\n  margin-bottom: 15px;\r\n  width: 300px;\r\n`;\r\n\r\nconst Title = styled.span`\r\n  font-size: ${props => props.theme.font.size.large}\r\n  margin-bottom: 5px;\r\n`;\r\n\r\nconst Artist = styled.span`\r\n  color: ${props => props.theme.foreground.dark};\r\n  font-weight: ${props => props.theme.font.weight.light};\r\n`;\r\n\r\ninterface Props {\r\n  image: string;\r\n  name: string;\r\n  artist: string;\r\n}\r\n\r\nclass Cover extends Component<Props> {\r\n  render() {\r\n    const { image, name, artist } = this.props;\r\n\r\n    return (\r\n      <Wrapper>\r\n        <Image src={image} />\r\n        <Title>{name}</Title>\r\n        <Artist>{artist}</Artist>\r\n      </Wrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Cover;\r\n","import React, { Component } from \"react\";\r\nimport styled from \"../../styles/styled\";\r\nimport { connect } from \"react-redux\";\r\nimport { Track } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectCurrent, TrackState, selectState } from \"../../reducers/player\";\r\nimport { load, play, pause } from \"../../actions/player\";\r\nimport { joinArtistNames } from \"../../helpers/utils\";\r\nimport Icon, { IconType } from \"../Icon\";\r\n\r\nconst Button = styled.button<{ isLoaded: boolean }>`\r\n  align-items: center;\r\n  border-radius: 5px;\r\n  color: ${props =>\r\n    props.isLoaded ? props.theme.primaryLight : props.theme.foreground.default};\r\n  display: flex;\r\n  margin-bottom: 5px;\r\n  padding: 10px;\r\n  width: 100%;\r\n\r\n  &:not(:disabled):hover {\r\n    background: ${props => props.theme.background.hover};\r\n  }\r\n\r\n  &:not(:disabled):active {\r\n    background: ${props => props.theme.background.active};\r\n  }\r\n`;\r\n\r\nconst StyledIcon = styled(Icon)<{\r\n  isHidden?: boolean;\r\n}>`\r\n  display: ${props => (props.isHidden ? \"none\" : \"block\")};\r\n  margin-right: 15px;\r\n\r\n  ${Button}:not(:disabled):hover & {\r\n    display: ${props => (props.isHidden ? \"block\" : \"none\")};\r\n  }\r\n`;\r\n\r\nconst Infos = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-grow: 1;\r\n  font-weight: ${props => props.theme.font.weight.light};\r\n  height: 100%;\r\n`;\r\n\r\nconst Title = styled.span`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-grow: 1;\r\n  margin-bottom: 5px;\r\n`;\r\n\r\nconst Artist = styled.span`\r\n  align-items: center;\r\n  color: ${props => props.theme.foreground.dark};\r\n  display: flex;\r\n  flex-grow: 1;\r\n`;\r\n\r\nconst Duration = styled.span`\r\n  color: ${props => props.theme.foreground.dark};\r\n`;\r\n\r\ninterface Props {\r\n  tracks: Track[];\r\n  current: Track | undefined;\r\n  state: TrackState;\r\n  load: (trackId: string) => void;\r\n  play: () => void;\r\n  pause: () => void;\r\n}\r\n\r\nclass Tracks extends Component<Props> {\r\n  handleClick = (trackId: string) => {\r\n    const { current, state, load, play, pause } = this.props;\r\n\r\n    if (state === TrackState.None || (current && current.id !== trackId)) {\r\n      load(trackId);\r\n    } else if (state === TrackState.isPlaying) {\r\n      pause();\r\n    } else if (state === TrackState.isPaused) {\r\n      play();\r\n    }\r\n  };\r\n\r\n  isLoaded(track: Track) {\r\n    const { current } = this.props;\r\n\r\n    return !!current && current.id === track.id;\r\n  }\r\n\r\n  isDisabled(track: Track) {\r\n    return !!track.preview_url;\r\n  }\r\n\r\n  renderIcon(track: Track, isLoaded: boolean) {\r\n    const { state } = this.props;\r\n    const hasPreview = track.preview_url;\r\n    const isPlaying = isLoaded && state === TrackState.isPlaying;\r\n\r\n    return hasPreview ? (\r\n      <>\r\n        <StyledIcon type={isPlaying ? IconType.VolumeUp : IconType.MusicNote} />\r\n        <StyledIcon\r\n          type={isPlaying ? IconType.Pause : IconType.PlayArrow}\r\n          isHidden={true}\r\n        />\r\n      </>\r\n    ) : (\r\n      <StyledIcon type={IconType.MusicOff} />\r\n    );\r\n  }\r\n\r\n  renderArtist(track: Track) {\r\n    return <Artist>{joinArtistNames(track.artists)}</Artist>;\r\n  }\r\n\r\n  renderDuration(track: Track) {\r\n    let seconds = track.duration_ms / 1000;\r\n    const minutes = Math.floor(seconds / 60);\r\n    seconds = Math.floor(seconds % 60);\r\n\r\n    return (\r\n      <Duration>{`${minutes}:${\r\n        seconds < 10 ? \"0\" + seconds : seconds\r\n      }`}</Duration>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { tracks } = this.props;\r\n\r\n    return (\r\n      <ul>\r\n        {tracks.map(track => {\r\n          const isLoaded = this.isLoaded(track);\r\n\r\n          return (\r\n            <li key={track.id}>\r\n              <Button\r\n                onClick={() => this.handleClick(track.id)}\r\n                disabled={!this.isDisabled(track)}\r\n                isLoaded={this.isLoaded(track)}\r\n              >\r\n                {this.renderIcon(track, isLoaded)}\r\n\r\n                <Infos>\r\n                  <Title>{track.name}</Title>\r\n                  {this.renderArtist(track)}\r\n                </Infos>\r\n\r\n                {this.renderDuration(track)}\r\n              </Button>\r\n            </li>\r\n          );\r\n        })}\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapState = (state: State) => ({\r\n  current: selectCurrent(state),\r\n  state: selectState(state)\r\n});\r\n\r\nconst mapDispatch = {\r\n  load: load,\r\n  play: play,\r\n  pause: pause\r\n};\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(Tracks);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\nimport { Playlist, Track } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectIsFetching, selectPlaylist } from \"../../reducers/playlists\";\r\nimport { getPlaylist } from \"../../actions/playlists\";\r\nimport Cover from \"./Cover\";\r\nimport Tracks from \"./Tracks\";\r\nimport withLoader from \"../withLoader\";\r\n\r\ninterface Params {\r\n  playlistId: string;\r\n}\r\n\r\ninterface Props extends RouteComponentProps<Params> {\r\n  isLoading: boolean;\r\n  playlist?: Playlist;\r\n  getPlaylist: (playlistId: string) => void;\r\n}\r\n\r\nclass PlaylistTracks extends Component<Props> {\r\n  componentDidMount() {\r\n    const {\r\n      getPlaylist,\r\n      match: {\r\n        params: { playlistId }\r\n      }\r\n    } = this.props;\r\n    getPlaylist(playlistId);\r\n  }\r\n\r\n  render() {\r\n    const { playlist } = this.props;\r\n\r\n    return playlist ? (\r\n      <>\r\n        <Cover\r\n          image={playlist.images[0].url}\r\n          name={playlist.name}\r\n          artist={playlist.owner.display_name}\r\n        />\r\n        <Tracks tracks={playlist.tracks} />\r\n      </>\r\n    ) : (\r\n      <></>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapState = (state: State, ownProps: Props) => {\r\n  const { match } = ownProps;\r\n  const { playlistId } = match.params;\r\n\r\n  return {\r\n    isLoading: selectIsFetching(state),\r\n    playlist: selectPlaylist(state, playlistId)\r\n  };\r\n};\r\n\r\nconst mapDispatch = {\r\n  getPlaylist: (playlistId: string) => getPlaylist(playlistId)\r\n};\r\n\r\nexport default withRouter(\r\n  connect(\r\n    mapState,\r\n    mapDispatch\r\n  )(withLoader(PlaylistTracks))\r\n);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\nimport { Album, Track } from \"../../types\";\r\nimport { State } from \"../../reducers\";\r\nimport { selectIsFetching, selectAlbum } from \"../../reducers/albums\";\r\nimport { getAlbum } from \"../../actions/albums\";\r\nimport { joinArtistNames } from \"../../helpers/utils\";\r\nimport Cover from \"./Cover\";\r\nimport Tracks from \"./Tracks\";\r\nimport withLoader from \"../withLoader\";\r\n\r\ninterface Params {\r\n  albumId: string;\r\n}\r\n\r\ninterface Props extends RouteComponentProps<Params> {\r\n  isLoading: boolean;\r\n  album?: Album;\r\n  getAlbum: (albumId: string) => void;\r\n}\r\n\r\nclass AlbumTracks extends Component<Props> {\r\n  componentDidMount() {\r\n    const {\r\n      getAlbum,\r\n      match: {\r\n        params: { albumId }\r\n      }\r\n    } = this.props;\r\n    getAlbum(albumId);\r\n  }\r\n\r\n  render() {\r\n    const { album } = this.props;\r\n\r\n    return album ? (\r\n      <>\r\n        <Cover\r\n          image={album.images[0].url}\r\n          name={album.name}\r\n          artist={joinArtistNames(album.artists)}\r\n        />\r\n        <Tracks tracks={album.tracks} />\r\n      </>\r\n    ) : (\r\n      <></>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapState = (state: State, ownProps: Props) => {\r\n  const { match } = ownProps;\r\n  const { albumId } = match.params;\r\n\r\n  return {\r\n    isLoading: selectIsFetching(state),\r\n    album: selectAlbum(state, albumId)\r\n  };\r\n};\r\n\r\nconst mapDispatch = {\r\n  getAlbum: (albumId: string) => getAlbum(albumId)\r\n};\r\n\r\nexport default withRouter(\r\n  connect(\r\n    mapState,\r\n    mapDispatch\r\n  )(withLoader(AlbumTracks))\r\n);\r\n","import React from \"react\";\r\nimport { Route } from \"react-router-dom\";\r\nimport styled from \"../../styles/styled\";\r\nimport DefaultRoute from \"../DefaultRoute\";\r\nimport Browse from \"../browse/Browse\";\r\nimport CategoryPlaylists from \"../browse/CategoryPlaylists\";\r\nimport Search from \"../search/Search\";\r\nimport PlaylistTracks from \"../tracks/PlaylistTracks\";\r\nimport AlbumTracks from \"../tracks/AlbumTracks\";\r\n\r\nconst Wrapper = styled.div`\r\n  flex: 1;\r\n  height: calc(100% - 50px);\r\n  overflow-y: auto;\r\n  padding: 25px;\r\n  position: relative;\r\n`;\r\n\r\nconst Routes = () => {\r\n  return (\r\n    <Wrapper>\r\n      <DefaultRoute\r\n        from={`${process.env.PUBLIC_URL}/`}\r\n        to={`${process.env.PUBLIC_URL}/browse`}\r\n      />\r\n      <Route path={`${process.env.PUBLIC_URL}/browse`} component={Browse} />\r\n      <Route path={`${process.env.PUBLIC_URL}/search`} component={Search} />\r\n      <Route\r\n        path={`${process.env.PUBLIC_URL}/categories/:categoryId/playlists`}\r\n        component={CategoryPlaylists}\r\n      />\r\n      <Route\r\n        path={`${process.env.PUBLIC_URL}/playlists/:playlistId/tracks`}\r\n        component={PlaylistTracks}\r\n      />\r\n      <Route\r\n        path={`${process.env.PUBLIC_URL}/albums/:albumId/tracks`}\r\n        component={AlbumTracks}\r\n      />\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Routes;\r\n","import React, { Component } from \"react\";\r\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\r\nimport styled from \"../../styles/styled\";\r\nimport Header from \"./Header\";\r\nimport Menu from \"./Menu\";\r\nimport Player from \"../player/Player\";\r\nimport Routes from \"./Routes\";\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n`;\r\n\r\nconst Body = styled.div`\r\n  display: flex;\r\n  flex: 1;\r\n`;\r\n\r\nclass App extends Component {\r\n  render() {\r\n    return (\r\n      <Router>\r\n        <Wrapper>\r\n          <Header />\r\n          <Body>\r\n            <Menu />\r\n            <Routes />\r\n          </Body>\r\n\r\n          <Player />\r\n        </Wrapper>\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","export interface Theme {\r\n  background: {\r\n    light: string;\r\n    default: string;\r\n    dark: string;\r\n    hover: string;\r\n    active: string;\r\n  };\r\n  font: {\r\n    size: {\r\n      small: string;\r\n      medium: string;\r\n      large: string;\r\n      extraLarge: string;\r\n      extraExtraLarge: string;\r\n    };\r\n    weight: {\r\n      light: number;\r\n      normal: number;\r\n      bold: number;\r\n    };\r\n  };\r\n  foreground: {\r\n    default: string;\r\n    dark: string;\r\n  };\r\n  primaryLight: string;\r\n  primary: string;\r\n  filter: {\r\n    darken: string;\r\n  };\r\n}\r\n\r\nexport const theme: Theme = {\r\n  background: {\r\n    light: \"#303030\",\r\n    default: \"#202020\",\r\n    dark: \"#101010\",\r\n    hover: \"rgba(255, 255, 255, 0.1)\",\r\n    active: \"rgba(255, 255, 255, 0.2)\"\r\n  },\r\n  font: {\r\n    size: {\r\n      small: \"12px\",\r\n      medium: \"16px\",\r\n      large: \"20px\",\r\n      extraLarge: \"24px\",\r\n      extraExtraLarge: \"34px\"\r\n    },\r\n    weight: {\r\n      light: 300,\r\n      normal: 400,\r\n      bold: 500\r\n    }\r\n  },\r\n  foreground: {\r\n    default: \"#ffffff\",\r\n    dark: \"rgba(255, 255, 255, 0.4)\"\r\n  },\r\n  primary: \"#1db954\",\r\n  primaryLight: \"#1ed760\",\r\n  filter: {\r\n    darken: \"brightness(0.5)\"\r\n  }\r\n};\r\n","import { createGlobalStyle } from \"styled-components\";\r\nimport { theme } from \"./theme\";\r\n\r\nexport default createGlobalStyle`\r\n  html, body, #root {\r\n    height: 100%;\r\n  }\r\n\r\n  body, button, ul {\r\n    margin: 0;\r\n    padding: 0;\r\n  }\r\n\r\n  body {\r\n    background: ${theme.background.default}; \r\n    color: ${theme.foreground.default};\r\n    font-family: \"Roboto\", sans-serif;\r\n    font-size: ${theme.font.size.medium};\r\n    font-weight: ${theme.font.weight.normal};\r\n    user-select: none;\r\n  }\r\n\r\n  a {\r\n    color: ${theme.foreground.default};\r\n    text-decoration: none;\r\n  }\r\n\r\n  button {\r\n    background: transparent;\r\n    border: 0;\r\n    color: ${theme.foreground.default};\r\n    font-family: \"Roboto\", sans-serif;\r\n    font-size: ${theme.font.size.medium};\r\n    font-weight: ${theme.font.weight.normal};\r\n\r\n    &:not(:disabled) {\r\n      cursor: pointer;\r\n    }\r\n\r\n    &:focus {\r\n      outline: none;\r\n    }\r\n  }\r\n\r\n  ul {\r\n    list-style: none;\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport { createStore, applyMiddleware } from \"redux\";\r\nimport thunkMiddleware from \"redux-thunk\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport { ThemeProvider } from \"./styles/styled\";\r\nimport rootReducer from \"./reducers\";\r\nimport App from \"./components/layout/App\";\r\nimport { checkRedirection, initAuthorization } from \"./helpers/authorization\";\r\nimport fetchMiddleware from \"./middlewares/fetchMiddleware\";\r\nimport { theme } from \"./styles/theme\";\r\nimport GlobalStyle from \"./styles/global\";\r\n\r\ncheckRedirection();\r\nconst store = createStore(\r\n  rootReducer,\r\n  composeWithDevTools(applyMiddleware(thunkMiddleware, fetchMiddleware))\r\n);\r\ninitAuthorization(store.dispatch);\r\n\r\nReactDOM.render(\r\n  <>\r\n    <GlobalStyle />\r\n    <ThemeProvider theme={theme}>\r\n      <Provider store={store}>\r\n        <App />\r\n      </Provider>\r\n    </ThemeProvider>\r\n  </>,\r\n  document.getElementById(\"root\")\r\n);\r\n","import { Dispatch } from \"redux\";\r\nimport { normalize } from \"normalizr\";\r\nimport { authorizedFetch } from \"../helpers/authorization\";\r\n\r\nexport default () => (next: Dispatch) => (action: any) => {\r\n  const { types, path, schema } = action;\r\n\r\n  if (types) {\r\n    const [requestType, successType, failureType] = types;\r\n    next({ type: requestType });\r\n\r\n    return authorizedFetch(`${process.env.REACT_APP_BASE_URL}/${path}`).then(\r\n      response =>\r\n        response.json().then(json => {\r\n          if (response.ok) {\r\n            next({\r\n              type: successType,\r\n              payload: schema ? normalize(json, schema).entities : json\r\n            });\r\n          } else {\r\n            next({ type: failureType, payload: json.error });\r\n          }\r\n        })\r\n    );\r\n  } else {\r\n    next(action);\r\n  }\r\n};\r\n"],"sourceRoot":""}